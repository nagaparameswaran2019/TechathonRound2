{"version":3,"file":"kendo.gantt.editors.min.js","names":["factory","define","amd","$","kendo","ui","browser","Observable","Widget","outerWidth","keys","extend","isPlainObject","NS","CLICK","WIDTH","DOT","DIRECTIONS","ganttStyles","TaskDropDown","editors","Editor","PopupEditor","ResourceEditor","window","jQuery","support","_outerWidth","F10","down","origin","position","up","buttonDelete","buttonCancel","buttonSave","focused","gridContent","hovered","item","popupWrapper","popupList","popup","form","editForm","formContainer","resourcesFormContainer","message","buttonsContainer","button","buttonDefaults","editField","editLabel","resourcesField","primary","toolbar","appendButton","init","element","options","fn","call","this","_popup","direction","destroy","clearTimeout","_focusTimeout","off","list","unbind","_adjustListWidth","computedStyle","computedWidth","width","style","wrapper","listOuterWidth","data","getComputedStyle","parseFloat","mozilla","msie","paddingLeft","paddingRight","borderLeftWidth","borderRightWidth","css","fontFamily","_current","method","current","find","sibling","length","removeClass","removeAttr","addClass","trigger","that","itemSelector","actions","messages","ref","styles","map","action","text","TASK_DROPDOWN_TEMPLATE","addChild","insertBefore","insertAfter","append","Popup","anchor","open","animation","on","e","attr","preventDefault","type","hover","end","close","bind","parents","first","keyCode","UP","DOWN","ENTER","click","ESC","desktop","dateRange","container","name","field","title","validationRules","model","fields","validation","appendTo","hide","resources","assignButton","readonly","value","get","createButton","plannedEditors","editor","editable","template","key","start","percentComplete","format","splice","apply","concat","plannedStart","plannedEnd","push","label","_buildEditTemplate","settings","Template","templateSettings","html","unescape","renderForm","is","editTask","task","_createPopupEditor","showDialog","buttons","popupStyles","i","eq","buttonIndex","currentTarget","index","kendoWindow","modal","autoFocus","resizable","draggable","visible","deactivate","getKendoWindow","center","editableWidget","uid","save","className","cancel","editorTitle","userTriggered","kendoForm","items","formData","buttonsTemplate","validatable","validateOnBlur","kendoEditable","clearContainer","target","cycleForm","stopPropagation","updateInfo","_initContainer","_attachHandlers","events","_dettachHandlers","grid","closeHandler","_cancelProxy","_cancel","_saveProxy","_save","row","closest","dataSource","getByUid","set","_createButtons","dom","resourcesEditorTitle","resize","_resourceGrid","Grid","columns","resourcesHeader","unitsHeader","dataItem","valueFormat","toString","height","sortable","filterable","schema","id","from","unitsValidation","values","parent","prop","_updateModel","gantt"],"sources":["kendo.gantt.editors.js"],"mappings":"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","sourcesContent":["(function (factory) {\n    typeof define === 'function' && define.amd ? define(['kendo.data', 'kendo.popup', 'kendo.window', 'kendo.gantt.data', 'kendo.grid', 'kendo.datetimepicker', 'kendo.numerictextbox', 'kendo.textbox', 'kendo.form'], factory) :\n    factory();\n})((function () {\n    var __meta__ = {\n        id: \"gantt.editors\",\n        name: \"GanttEditors\",\n        category: \"web\",\n        description: \"The Gantt component editors.\",\n        depends: [ \"data\", \"popup\", \"window\", \"gantt.data\", \"grid\", \"datetimepicker\", \"numerictextbox\", \"textbox\", \"form\"],\n        hidden: true\n    };\n\n    (function($, undefined$1) {\n\n        var kendo = window.kendo,\n            ui = kendo.ui,\n            browser = kendo.support.browser,\n            Observable = kendo.Observable,\n            Widget = ui.Widget,\n            outerWidth = kendo._outerWidth,\n\n            keys = $.extend({ F10: 121 }, kendo.keys),\n\n            extend = $.extend,\n            isPlainObject = $.isPlainObject,\n\n            NS = \".kendoGantt\",\n            PERCENTAGE_FORMAT = \"p0\",\n            CLICK = \"click\",\n            WIDTH = \"width\",\n            STRING = \"string\",\n            DOT = \".\",\n\n            DIRECTIONS = {\n                \"down\": {\n                    origin: \"bottom left\",\n                    position: \"top left\"\n                },\n                \"up\": {\n                    origin: \"top left\",\n                    position: \"bottom left\"\n                }\n            },\n\n            TASK_DROPDOWN_TEMPLATE = function (ref) {\n                var styles = ref.styles;\n                var actions = ref.actions;\n\n                return \"<div class=\\\"\" + (styles.popupWrapper) + \"\\\">\" +\n                \"<ul class=\\\"\" + (styles.popupList) + \"\\\" role=\\\"listbox\\\" aria-label=\\\"Add dropdown\\\">\" +\n                    \"\" + (actions.map(function (action) { return '<li tabindex=\"0\" class=\"' + styles.item + '\" data-action=\"' + action.data + '\" role=\"option\">' +\n                                                '<span class=\"k-link k-menu-link\">' +\n                                                    '<span class=\"k-menu-link-text\">' + action.text + '</span>' +\n                                                '</span>' +\n                                            '</li>'; }\n                    )) +\n                '</ul>' +\n            '</div>';\n        };\n\n        var ganttStyles = {\n            buttonDelete: \"k-gantt-delete\",\n            buttonCancel: \"k-gantt-cancel\",\n            buttonSave: \"k-gantt-update\",\n            focused: \"k-focus\",\n            gridContent: \"k-grid-content\",\n            hovered: \"k-hover\",\n            item: \"k-item k-menu-item\",\n            popupWrapper: \"k-popup k-menu-popup\",\n            popupList: \"k-menu-group k-menu-group-md k-reset\",\n            popup: {\n                form: \"k-popup-edit-form\",\n                editForm: \"k-gantt-edit-form\",\n                formContainer: \"k-edit-form-container\",\n                resourcesFormContainer: \"k-resources-form-container\",\n                message: \"k-popup-message\",\n                buttonsContainer: \"k-edit-buttons\",\n                button: \"k-button\",\n                buttonDefaults: \"k-button-md k-rounded-md k-button-solid k-button-solid-base\",\n                editField: \"k-edit-field\",\n                editLabel: \"k-edit-label\",\n                resourcesField: \"k-gantt-resources\"\n            },\n            primary: \"k-button-solid-primary\",\n            toolbar: {\n                appendButton: \"k-gantt-create\"\n            }\n        };\n\n        var DATERANGEEDITOR = function(container, options) {\n            var attr = { name: options.field, title: options.title };\n            var validationRules = options.model.fields[options.field].validation;\n\n            if (validationRules && isPlainObject(validationRules) && validationRules.message) {\n                attr[kendo.attr(\"dateCompare-msg\")] = validationRules.message;\n            }\n\n            $('<input type=\"text\" required ' +\n                    'id=\"' + options.field + '\"' +\n                    kendo.attr(\"type\") + '=\"date\" ' +\n                    kendo.attr(\"role\") + '=\"datetimepicker\" ' +\n                    kendo.attr(\"bind\") + '=\"value:' +\n                    options.field + '\" ' +\n                    kendo.attr(\"validate\") + \"='true' />\")\n                .attr(attr)\n                .appendTo(container);\n\n            $('<span ' + kendo.attr(\"for\") + '=\"' + options.field + '\" class=\"k-invalid-msg\"/>')\n                .hide()\n                .appendTo(container);\n        };\n\n        var RESOURCESEDITOR = function(container, options) {\n            $('<div class=\"' + ganttStyles.popup.resourcesField + '\" style=\"display:none\"></div><a href=\"#\" class=\"' + options.styles.button + ' ' + options.styles.buttonDefaults + '\"><span class=\"k-button-text\">' + options.messages.assignButton + '</span></a>').on(\"click\", options.click).appendTo(container);\n        };\n\n        var READONLYEDITOR = function(container, options) {\n            var field = options.field;\n            var value = '';\n\n            if (options.model.get(field) !== null) {\n                value = options.model.get(field);\n            }\n\n            container.append(\"<span>\" + value + \"</span>\");\n        };\n\n        var TaskDropDown = Observable.extend({\n            init: function(element, options) {\n\n                Observable.fn.init.call(this);\n\n                this.element = element;\n                this.options = extend(true, {}, this.options, options);\n\n                this._popup();\n            },\n\n            options: {\n                direction: \"down\"\n            },\n\n            destroy: function() {\n                clearTimeout(this._focusTimeout);\n                this.popup.destroy();\n                this.element.off(NS);\n                this.list.off(NS);\n                this.unbind();\n            },\n\n            _adjustListWidth: function() {\n                var list = this.list;\n                var width = list[0].style.width;\n                var wrapper = this.element;\n                var listOuterWidth = outerWidth(list);\n                var computedStyle;\n                var computedWidth;\n\n                if (!list.data(WIDTH) && width) {\n                    return;\n                }\n\n                computedStyle = window.getComputedStyle ? window.getComputedStyle(wrapper[0], null) : 0;\n                computedWidth = computedStyle ? parseFloat(computedStyle.width) : outerWidth(wrapper);\n\n                if (computedStyle && (browser.mozilla || browser.msie)) { // getComputedStyle returns different box in FF and IE.\n                    computedWidth += parseFloat(computedStyle.paddingLeft) + parseFloat(computedStyle.paddingRight) + parseFloat(computedStyle.borderLeftWidth) + parseFloat(computedStyle.borderRightWidth);\n                }\n\n                if (list.css(\"box-sizing\") !== \"border-box\") {\n                    width = computedWidth - (outerWidth(list) - list.width());\n                } else {\n                    width = computedWidth;\n                }\n\n                if (listOuterWidth > width) {\n                    width = listOuterWidth;\n                }\n\n                list.css({\n                    fontFamily: wrapper.css(\"font-family\"),\n                    width: width\n                })\n                .data(WIDTH, width);\n            },\n\n            _current: function(method) {\n                var current = this.list\n                    .find(DOT + ganttStyles.focused);\n                var sibling = current[method]();\n\n                if (sibling.length) {\n                    current\n                        .removeClass(ganttStyles.focused)\n                        .removeAttr(\"id\");\n                    sibling\n                        .addClass(ganttStyles.focused)\n                        .trigger(\"focus\");\n                }\n            },\n\n            _popup: function() {\n                var that = this;\n                var itemSelector = \"li\" + DOT + \"k-item\";\n                var actions = this.options.messages.actions;\n\n                this.list = $(TASK_DROPDOWN_TEMPLATE({\n                    styles: ganttStyles,\n                    actions: [\n                        {\n                            data: \"add\",\n                            text: actions.addChild\n                        },\n                        {\n                            data: \"insert-before\",\n                            text: actions.insertBefore\n                        },\n                        {\n                            data: \"insert-after\",\n                            text: actions.insertAfter\n                        }\n                    ]\n                }));\n\n                this.element.append(this.list);\n\n                this.popup = new kendo.ui.Popup(this.list,\n                    extend({\n                        anchor: this.element,\n                        open: function() {\n                            that._adjustListWidth();\n                        },\n                        animation: this.options.animation\n                    }, DIRECTIONS[this.options.direction])\n                );\n\n                this.element\n                    .on(CLICK + NS, function(e) {\n                        var target = $(this);\n                        var action = target.attr(kendo.attr(\"action\"));\n\n                        e.preventDefault();\n\n                        if (action) {\n                            that.trigger(\"command\", { type: action });\n                        } else {\n                            that.popup.open();\n\n                            that.list\n                                .find(\"li:first\")\n                                .addClass(ganttStyles.focused)\n                                .trigger(\"focus\");\n                        }\n                    });\n\n                this.list\n                    .find(itemSelector)\n                    .hover(function() {\n                        $(this).addClass(ganttStyles.hovered);\n                    }, function() {\n                        $(this).removeClass(ganttStyles.hovered);\n                    })\n                    .end()\n                    .on(CLICK + NS, itemSelector, function() {\n                        that.trigger(\"command\", { type: $(this).attr(kendo.attr(\"action\")) });\n                        that.popup.close();\n                    });\n\n                this.popup\n                    .bind(\"close\", function() {\n                        that.list\n                            .find(itemSelector)\n                            .removeClass(ganttStyles.focused);\n\n                        that.element\n                            .parents('[' + kendo.attr(\"role\") + '=\"gantt\"]')\n                            .find(DOT + ganttStyles.gridContent + \" > table\").first()\n                            .trigger(\"focus\");\n                    });\n\n                this.list\n                    .find(\"ul\")\n                    .on(\"keydown\" + NS, function(e) {\n                        var key = e.keyCode;\n\n                        switch (key) {\n                            case keys.UP:\n                                e.preventDefault();\n                                that._current(\"prev\");\n                                break;\n                            case keys.DOWN:\n                                e.preventDefault();\n                                that._current(\"next\");\n                                break;\n                            case keys.ENTER:\n                                that.list\n                                    .find(DOT + ganttStyles.focused)\n                                    .click();\n                                break;\n                            case keys.ESC:\n                                e.preventDefault();\n                                that.popup.close();\n                                break;\n                        }\n                    });\n            }\n        });\n\n        var editors = {\n            desktop: {\n                dateRange: DATERANGEEDITOR,\n                resources: RESOURCESEDITOR,\n                readonly: READONLYEDITOR\n            }\n        };\n\n        var Editor = kendo.Observable.extend({\n            init: function(element, options) {\n                kendo.Observable.fn.init.call(this);\n\n                this.element = element;\n                this.options = extend(true, {}, this.options, options);\n                this.createButton = this.options.createButton;\n            },\n\n            fields: function(editors, model, plannedEditors) {\n                var that = this;\n                var options = this.options;\n                var messages = options.messages.editor;\n                var resources = options.resources;\n                var fields;\n\n                var click = function(e) {\n                    e.preventDefault();\n                    resources.editor(that.container.find(DOT + ganttStyles.popup.resourcesField), model);\n                };\n\n                if (options.editable.template) {\n                    fields = $.map(model.fields, function(value, key) {\n                                return { field: key };\n                            });\n                } else {\n                    fields = [\n                        { field: \"title\", title: messages.title },\n                        { field: \"start\", title: messages.start, editor: editors.dateRange },\n                        { field: \"end\", title: messages.end, editor: editors.dateRange },\n                        { field: \"percentComplete\", title: messages.percentComplete, format: PERCENTAGE_FORMAT }\n                    ];\n\n                    if (plannedEditors) {\n                        fields.splice.apply(fields, [1, 0].concat([\n                            { field: \"plannedStart\", title: messages.plannedStart, editor: editors.dateRange },\n                            { field: \"plannedEnd\", title: messages.plannedEnd, editor: editors.dateRange }\n                        ]));\n                    }\n\n                    if (model.get(resources.field)) {\n                        fields.push({ field: resources.field, title: messages.resources, messages: messages, editor: editors.resources, click: click, styles: ganttStyles.popup });\n                    }\n\n\n                    fields = fields.map(function(item) {\n                        if (!model.editable || model.editable(item.field)) {\n                            return item;\n                        } else {\n                            return extend(true, item, {\n                                editor: editors.readonly\n                            });\n                        }\n                    });\n\n                }\n\n                return fields.map(function(item) {\n                    return extend(true, item, {\n                        label: item.title\n                    });\n                });\n            },\n\n            _buildEditTemplate: function(model) {\n                var template = this.options.editable.template;\n                var settings = extend({}, kendo.Template, this.options.templateSettings);\n                var html = \"\";\n\n                if (template) {\n                    if (typeof template === STRING) {\n                        template = kendo.unescape(template);\n                    }\n\n                    html += (kendo.template(template, settings))(model);\n                } else {\n                    this.renderForm = true;\n                    html += '<div class=\"k-gantt-form\"></div>';\n                }\n\n                return html;\n            }\n        });\n\n        var PopupEditor = Editor.extend({\n            destroy: function() {\n                this.close();\n                this.unbind();\n            },\n\n            close: function() {\n                var that = this;\n\n                var destroy = function() {\n                    if (that.editable) {\n                        that.container.data(\"kendoWindow\").destroy();\n                        that.editable = null;\n                        that.container = null;\n                    }\n\n                    if (that.popup) {\n                        that.popup.destroy();\n                        that.popup = null;\n                    }\n                };\n\n                if (that.editable && that.container.is(\":visible\")) {\n                    that.trigger(\"close\", { window: that.container });\n                    that.container.data(\"kendoWindow\").bind(\"deactivate\", destroy).close();\n                } else {\n                    destroy();\n                }\n            },\n\n            editTask: function(task, plannedEditors) {\n                this.editable = this._createPopupEditor(task, plannedEditors);\n            },\n\n            showDialog: function(options) {\n                var buttons = options.buttons;\n                var popupStyles = ganttStyles.popup;\n\n                var html = kendo.format('<div class=\"{0}\"><div class=\"{1}\"><p class=\"{2}\">{3}</p><div class=\"{4}\">',\n                    popupStyles.form, popupStyles.formContainer, popupStyles.message, options.text, popupStyles.buttonsContainer);\n\n                for (var i = 0, length = buttons.length; i < length; i++) {\n                    html += this.createButton(buttons[i]);\n                }\n\n                html += '</div></div></div>';\n\n                var wrapper = this.element;\n\n                if (this.popup) {\n                    this.popup.destroy();\n                }\n\n                var popup = this.popup = $(html).appendTo(wrapper)\n                    .eq(0)\n                    .on(\"click\", DOT + popupStyles.button, function(e) {\n                        e.preventDefault();\n\n                        popup.close();\n\n                        var buttonIndex = $(e.currentTarget).index();\n\n                        buttons[buttonIndex].click();\n                    })\n                    .kendoWindow({\n                        modal: true,\n                        autoFocus: false,\n                        resizable: false,\n                        draggable: false,\n                        title: options.title,\n                        visible: false,\n                        deactivate: function() {\n                            this.destroy();\n                            wrapper.trigger(\"focus\");\n                        }\n                    })\n                    .getKendoWindow();\n\n                popup.center().open();\n\n                popup.element.find(\".k-button-solid-primary\").trigger(\"focus\");\n            },\n\n            _createPopupEditor: function(task, plannedEditors) {\n                var that = this;\n                var options = {};\n                var messages = this.options.messages;\n                var popupStyles = ganttStyles.popup;\n                var editableWidget;\n\n                var html = kendo.format('<div {0}=\"{1}\" class=\"{2} {3}\"><div class=\"{4}\">',\n                    kendo.attr(\"uid\"), task.uid, popupStyles.form, popupStyles.editForm, popupStyles.formContainer);\n\n                var fields = this.fields(editors.desktop, task, plannedEditors);\n\n                html += this._buildEditTemplate(task);\n\n                html += '<div class=\"' + popupStyles.buttonsContainer + '\">';\n                html += this.createButton({ name: \"update\", text: messages.save, className: ganttStyles.primary });\n                html += this.createButton({ name: \"cancel\", text: messages.cancel });\n                if (that.options.editable.destroy !== false) {\n                    html += this.createButton({ name: \"delete\", text: messages.destroy });\n                }\n\n                html += '</div></div></div>';\n\n                var container = this.container = $(html).appendTo(this.element)\n                    .eq(0)\n                    .kendoWindow(extend({\n                        modal: true,\n                        resizable: false,\n                        draggable: true,\n                        title: messages.editor.editorTitle,\n                        visible: false,\n                        close: function(e) {\n                            if (e.userTriggered) {\n                                if (that.trigger(\"cancel\", { container: container, model: task })) {\n                                    e.preventDefault();\n                                }\n                            }\n                        }\n                    }, options));\n\n                if (this.renderForm) {\n                    this.form = container.find(\".k-gantt-form\").kendoForm({\n                        items: fields,\n                        formData: task,\n                        buttonsTemplate: function () { return \"\"; },\n                        validatable: {\n                            validateOnBlur: true\n                        }\n                    }).data(\"kendoForm\");\n\n                    editableWidget = this.form.editable;\n                } else {\n                    editableWidget = container\n                    .kendoEditable({\n                        model: task,\n                        clearContainer: false,\n                        validateOnBlur: true,\n                        target: that.options.target\n                    })\n                    .data(\"kendoEditable\");\n                }\n\n                kendo.cycleForm(container);\n\n                if (!this.trigger(\"edit\", { container: container, model: task })) {\n                    container.data(\"kendoWindow\").center().open();\n\n                    container.on(CLICK + NS, DOT + ganttStyles.buttonCancel, function(e) {\n                        e.preventDefault();\n                        e.stopPropagation();\n\n                        that.trigger(\"cancel\", { container: container, model: task });\n                    });\n\n                    container.on(CLICK + NS, DOT + ganttStyles.buttonSave, function(e) {\n                        e.preventDefault();\n                        e.stopPropagation();\n\n                        var fields = that.fields(editors.desktop, task, plannedEditors);\n                        var updateInfo = {};\n                        var field;\n\n                        for (var i = 0, length = fields.length; i < length; i++) {\n                            field = fields[i].field;\n                            updateInfo[field] = task.get(field);\n                        }\n\n                        that.trigger(\"save\", { container: container, model: task, updateInfo: updateInfo });\n                    });\n\n                    container.on(CLICK + NS, DOT + ganttStyles.buttonDelete, function(e) {\n                        e.preventDefault();\n                        e.stopPropagation();\n\n                        that.trigger(\"remove\", { container: container, model: task });\n                    });\n                } else {\n                    that.trigger(\"cancel\", { container: container, model: task });\n                }\n\n                return editableWidget;\n            }\n        });\n\n        var ResourceEditor = Widget.extend({\n            init: function(element, options) {\n                Widget.fn.init.call(this, element, options);\n\n                this.wrapper = this.element;\n                this.model = this.options.model;\n                this.resourcesField = this.options.resourcesField;\n                this.createButton = this.options.createButton;\n\n                this._initContainer();\n                this._attachHandlers();\n            },\n\n            events: [\n                \"save\"\n            ],\n\n            close: function() {\n                this.window.bind(\"deactivate\", this.destroy.bind(this)).close();\n            },\n\n            destroy: function() {\n                this._dettachHandlers();\n\n                this.grid.destroy();\n                this.grid = null;\n\n                this.window.destroy();\n                this.window = null;\n\n                Widget.fn.destroy.call(this);\n\n                kendo.destroy(this.wrapper);\n\n                this.element = this.wrapper = null;\n            },\n\n            open: function() {\n                this.window.center().open();\n            },\n\n            _attachHandlers: function() {\n                var grid = this.grid;\n\n                var closeHandler = this._cancelProxy = this._cancel.bind(this);\n                this.container.on(CLICK + NS, DOT + ganttStyles.buttonCancel, this._cancelProxy);\n\n                this._saveProxy = this._save.bind(this);\n                this.container.on(CLICK + NS, DOT + ganttStyles.buttonSave, this._saveProxy);\n\n                this.window.bind(\"close\", function(e) {\n                    if (e.userTriggered) {\n                        closeHandler(e);\n                    }\n                });\n\n                grid.wrapper.on(CLICK + NS, \"input[type='checkbox']\", function() {\n                    var element = $(this);\n                    var row = $(element).closest(\"tr\");\n                    var model = grid.dataSource.getByUid(row.attr(kendo.attr(\"uid\")));\n                    var value = $(element).is(\":checked\") ? 1 : \"\";\n\n                    model.set(\"value\", value);\n                });\n            },\n\n            _cancel: function(e) {\n                e.preventDefault();\n                this.close();\n            },\n\n            _createButtons: function() {\n                var buttons = this.options.buttons;\n                var html = '<div class=\"' + ganttStyles.popup.buttonsContainer + '\">';\n\n                for (var i = 0, length = buttons.length; i < length; i++) {\n                    html += this.createButton(buttons[i]);\n                }\n\n                html += \"</div>\";\n\n                this.container.append(html);\n            },\n\n            _dettachHandlers: function() {\n                this._cancelProxy = null;\n                this._saveProxy = null;\n                this.container.off(NS);\n                this.grid.wrapper.off();\n            },\n\n            _initContainer: function() {\n                var that = this;\n                var popupStyles = ganttStyles.popup;\n                var dom = kendo.format('<div class=\"{0} {1}\"><div class=\"{2} {3}\"></div></div>\"',\n                    popupStyles.form, popupStyles.editForm, popupStyles.formContainer, popupStyles.resourcesFormContainer);\n\n                dom = $(dom);\n\n                this.container = dom.find(DOT + popupStyles.resourcesFormContainer);\n\n                this.window = dom.kendoWindow({\n                    modal: true,\n                    resizable: false,\n                    draggable: true,\n                    visible: false,\n                    title: this.options.messages.resourcesEditorTitle,\n                    open: function() {\n                          that.grid.resize(true);\n                    }\n                }).data(\"kendoWindow\");\n\n                this._resourceGrid();\n                this._createButtons();\n            },\n\n            _resourceGrid: function() {\n                var that = this;\n                var messages = this.options.messages;\n                var element = $('<div id=\"resources-grid\"/>').appendTo(this.container);\n\n                this.grid = new kendo.ui.Grid(element, {\n                    columns: [\n                        {\n                            field: \"name\",\n                            title: messages.resourcesHeader,\n                            template: function (ref) {\n                                    var name = ref.name;\n                                    var value = ref.value;\n\n                                    return \"<label><input type='checkbox' value='\" + name + \"'\" +\n                                    \"\" + (value > 0 && value !== null ? 'checked=\"checked\"' : '') +\n                                \"/>\" + name + \"</labe>\";\n                }\n                        },\n                        {\n                            field: \"value\",\n                            title: messages.unitsHeader,\n                            template: function(dataItem) {\n                                var valueFormat = dataItem.format;\n                                var value = dataItem.value !== null ? dataItem.value : \"\";\n\n                                return valueFormat ? kendo.toString(value, valueFormat) : value;\n                            }\n                        }\n                    ],\n                    height: 280,\n                    sortable: true,\n                    editable: true,\n                    filterable: true,\n                    dataSource: {\n                        data: that.options.data,\n                        schema: {\n                            model: {\n                                id: \"id\",\n                                fields: {\n                                    id: { from: \"id\" },\n                                    name: { from: \"name\", type: \"string\", editable: false },\n                                    value: { from: \"value\", type: \"number\", validation: this.options.unitsValidation },\n                                    format: { from: \"format\", type: \"string\" }\n                                }\n                            }\n                        }\n                    },\n                    save: function(e) {\n                        var value = !!e.values.value;\n                        e.container.parent().find(\"input[type='checkbox']\").prop(\"checked\", value);\n                    }\n                });\n            },\n\n            _save: function(e) {\n                e.preventDefault();\n\n                this._updateModel();\n\n                if (!this.wrapper.is(DOT + ganttStyles.popup.resourcesField)) {\n                    this.trigger(\"save\", { container: this.wrapper, model: this.model });\n                }\n\n                this.close();\n            },\n\n            _updateModel: function() {\n                var resources = [];\n                var value;\n                var data = this.grid.dataSource.data();\n\n                for (var i = 0, length = data.length; i < length; i++) {\n                    value = data[i].get(\"value\");\n                    if (value !== null && value > 0) {\n                        resources.push(data[i]);\n                    }\n                }\n\n                this.model[this.resourcesField] = resources;\n            }\n        });\n\n        kendo.gantt = {\n            TaskDropDown: TaskDropDown,\n            Editor: Editor,\n            PopupEditor: PopupEditor,\n            ResourceEditor: ResourceEditor\n        };\n    })(window.kendo.jQuery);\n\n}));\n"]}