{"version":3,"file":"kendo.filter.min.js","names":["factory","define","amd","defaultValues","number","boolean","string","date","operatorsTemplate","ref","ns","operatorsLabel","operators","Object","keys","map","op","text","join","logicTemplate","mainLogicTemplate","mainFilterLogicLabel","uid","addExpression","addGroup","close","logicItemTemplate","filterLogicLabel","expressionItemTemplate","filterExpressionLabel","fieldsLabel","fields","current","name","label","$","kendo","window","ui","guid","Widget","ButtonGroup","CHANGE","NS","EQ","NEQ","editors","container","field","appendTo","FilterButtonGroup","extend","init","element","options","fn","call","this","value","undefined","_value","_select","wrapper","find","trigger","button","attr","Filter","html","that","addClass","dataSource","_getFieldsInfo","_modelChangeHandler","_modelChange","bind","_renderMain","expression","_addExpressionTree","filterModel","_renderApplyButton","expressionPreview","_previewContainer","insertAfter","children","eq","_createPreview","toJSON","_attachEvents","hasCustomOperators","events","applyButton","mainLogic","messages","and","or","apply","neq","startswith","contains","doesnotcontain","endswith","isnull","isnotnull","isempty","isnotempty","isnullorempty","isnotnullorempty","gte","gt","lte","lt","applyFilter","filter","_hasCustomOperators","_mapOperators","_hasFieldsFilter","filters","_removeEmptyGroups","destroy","off","_applyButton","setOptions","deepExtend","empty","getOptions","result","model","parent","i","length","logic","_addGroup","_addExpression","on","e","preventDefault","currentTarget","icon","command","split","pop","_removeExpression","closest","parentContainer","expressionModel","parentUID","itemsContainer","next","_fields","_defaultField","itemHTML","findModel","set","_addNewModel","template","type","_addExpressionControls","_expressionChange","items","operatorsContainer","editorContainer","_appendOperators","_appendEditor","_bindModel","_showHideEditor","isFunction","editor","id","operator","push","defaultValue","logicHTML","createdField","haveFields","childhtml","toLocaleUpperCase","_getOperatorText","indexOf","htmlEncode","previewFormat","toString","_addField","fieldInfo","editorTemplate","fieldsCollection","schema","Array","isArray","haveField","splice","sender","newField","unbind","remove","observable","first","parentModel","itemContainer","hasClass","siblings","format","hide","show","forEach","handler","findCustomOperators","temp","plugin","jQuery"],"sources":["kendo.filter.js"],"mappings":"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","sourcesContent":["(function (factory) {\n    typeof define === 'function' && define.amd ? define(['kendo.core', 'kendo.buttongroup'], factory) :\n    factory();\n})((function () {\n    var __meta__ = {\n        id: \"filter\",\n        name: \"Filter\",\n        category: \"web\",\n        depends: [ \"core\", \"buttongroup\"]\n    };\n\n    var defaultValues = {\n        \"number\": 0,\n        \"boolean\": false,\n        \"string\": \"\",\n        \"date\": \"\"\n    };\n\n    var operatorsTemplate = function (ref) {\n            var ns = ref.ns;\n            var operatorsLabel = ref.operatorsLabel;\n            var operators = ref.operators;\n\n            return \"<select data-\" + ns + \"bind='value: operator' title='\" + operatorsLabel + \"' data-\" + ns + \"role='dropdownlist'>\" +\n            \"\" + (Object.keys(operators).map(function (op) { return \"<option value='\" + op + \"'>\" + (operators[op].text || operators[op]) + \"</option>\"; } ).join(\"\")) +\n        \"</select>\";\n    };\n\n    var logicTemplate = function (ref) {\n            var ns = ref.ns;\n            var operators = ref.operators;\n\n            return \"<div data-\" + ns + \"bind='value: logic' data-\" + ns + \"role='filterbuttongroup'>\" +\n            \"\" + (Object.keys(operators).map(function (op) { return \"<span value='\" + op + \"'>\" + operators[op] + \"</span>\"; } ).join(\"\")) +\n        \"</div>\";\n    };\n\n    var mainContainer =\n        \"<ul class='k-filter-container'>\" +\n            \"<li class='k-filter-group-main'></li>\" +\n        \"</ul>\";\n\n    var mainLogicTemplate = function (ref) {\n            var mainFilterLogicLabel = ref.mainFilterLogicLabel;\n            var uid = ref.uid;\n            var addExpression = ref.addExpression;\n            var addGroup = ref.addGroup;\n            var close = ref.close;\n            var ns = ref.ns;\n            var operators = ref.operators;\n\n            return \"<div class='k-filter-toolbar'>\" +\n            \"<div role='toolbar' aria-label='\" + mainFilterLogicLabel + \"' class='k-toolbar' id='\" + uid + \"'>\" +\n                \"<div class='k-filter-toolbar-item'>\" +\n                    logicTemplate({ ns: ns, operators: operators }) +\n                \"</div>\" +\n                \"<div class='k-filter-toolbar-item'>\" +\n                    \"<button data-role='button' class='k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button' role='button' aria-disabled='false' title='\" + addExpression + \"' aria-label='\" + addExpression + \"' tabindex='0'>\" +\n                        \"<span class='k-button-icon k-icon k-i-filter-add-expression'>\" +\n                        \"</span>\" +\n                    \"</button>\" +\n                \"</div>\" +\n                \"<div class='k-filter-toolbar-item'>\" +\n                    \"<button data-role='button' class='k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button' role='button' aria-disabled='false' title='\" + addGroup + \"' aria-label='\" + addGroup + \"' tabindex='0'>\" +\n                        \"<span class='k-button-icon k-icon k-i-filter-add-group'>\" +\n                        \"</span>\" +\n                    \"</button>\" +\n                \"</div>\" +\n                \"<div class='k-filter-toolbar-item'>\" +\n                    \"<button data-role='button' class='k-button k-button-md k-rounded-md k-button-flat k-button-flat-base k-icon-button' role='button' title='\" + close + \"' aria-label='\" + close + \"' aria-disabled='false' tabindex='0'>\" +\n                        \"<span class='k-button-icon k-icon k-i-close'>\" +\n                        \"</span>\" +\n                    \"</button>\" +\n                \"</div>\" +\n            \"</div>\" +\n        \"</div>\";\n    };\n\n    var logicItemTemplate = function (ref) {\n        var filterLogicLabel = ref.filterLogicLabel;\n        var addExpression = ref.addExpression;\n        var addGroup = ref.addGroup;\n        var close = ref.close;\n        var ns = ref.ns;\n        var operators = ref.operators;\n\n        return \"<li class='k-filter-item'>\" +\n        \"<div class='k-filter-toolbar'>\" +\n            \"<div role='toolbar' aria-label='\" + filterLogicLabel + \"' class='k-toolbar'>\" +\n                \"<div class='k-filter-toolbar-item'>\" +\n                    logicTemplate({ ns: ns, operators: operators }) +\n                \"</div>\" +\n                \"<div class='k-filter-toolbar-item'>\" +\n                    \"<button data-role='button' class='k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button' role='button' title='\" + addExpression + \"' aria-label='\" + addExpression + \"' aria-disabled='false' tabindex='0'>\" +\n                        \"<span class='k-button-icon k-icon k-i-filter-add-expression'>\" +\n                        \"</span>\" +\n                    \"</button>\" +\n                \"</div>\" +\n                \"<div class='k-filter-toolbar-item'>\" +\n                    \"<button data-role='button' class='k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button' role='button' title='\" + addGroup + \"' aria-label='\" + addGroup + \"' aria-disabled='false' tabindex='0'>\" +\n                        \"<span class='k-button-icon k-icon k-i-filter-add-group'>\" +\n                        \"</span>\" +\n                    \"</button>\" +\n                \"</div>\" +\n                \"<div class='k-filter-toolbar-item'>\" +\n                    \"<button data-role='button' class='k-button k-button-md k-rounded-md k-button-flat k-button-flat-base k-icon-button' role='button' title='\" + close + \"' aria-label='\" + close + \"' aria-disabled='false' tabindex='0'>\" +\n                        \"<span class='k-button-icon k-icon k-i-close'>\" +\n                        \"</span>\" +\n                    \"</button>\" +\n                \"</div>\" +\n            \"</div>\" +\n        \"</div>\" +\n    \"</li>\";\n    };\n\n    var expressionItemTemplate = function (ref) {\n        var filterExpressionLabel = ref.filterExpressionLabel;\n        var ns = ref.ns;\n        var uid = ref.uid;\n        var fieldsLabel = ref.fieldsLabel;\n        var fields = ref.fields;\n        var close = ref.close;\n\n        return \"<li class='k-filter-item'>\" +\n        \"<div class='k-filter-toolbar'>\" +\n           \"<div role='group' aria-label='\" + filterExpressionLabel + \"' class='k-toolbar' id='\" + uid + \"'>\" +\n             \"<div class='k-filter-toolbar-item k-filter-field'>\" +\n                \"<select data-\" + ns + \"bind='value: field' title='\" + fieldsLabel + \"' class='k-filter-dropdown' data-auto-width='true' data-\" + ns + \"role='dropdownlist'>\" +\n                    \"\" + (Object.keys(fields).map(function (current) { return \"<option value='\" + fields[current].name + \"'>\" + fields[current].label + \"</option>\"; }).join(\"\")) +\n                \"</select>\" +\n             \"</div>\" +\n             \"<div class='k-filter-toolbar-item k-filter-operator'>\" +\n             \"</div>\" +\n             \"<div class='k-filter-toolbar-item k-filter-value'>\" +\n             \"</div>\" +\n             \"<div class='k-filter-toolbar-item'>\" +\n                \"<button data-role='button' class='k-button k-button-md k-rounded-md k-button-flat k-button-flat-base k-icon-button' role='button' title='\" + close + \"' aria-label='\" + close + \"' aria-disabled='false' tabindex='0'>\" +\n                    \"<span class='k-button-icon k-icon k-i-close'>\" +\n                    \"</span>\" +\n                \"</button>\" +\n             \"</div>\" +\n           \"</div>\" +\n        \"</div>\" +\n    \"</li>\";\n    };\n\n\n    (function($) {\n        var kendo = window.kendo,\n            ui = kendo.ui,\n            guid = kendo.guid,\n            ns = kendo.ns,\n            Widget = ui.Widget,\n            ButtonGroup = ui.ButtonGroup,\n            CHANGE = \"change\",\n            NS = \".kendoFilter\",\n            EQ = \"Is equal to\",\n            NEQ = \"Is not equal to\";\n\n        var editors = {\n            \"number\": function(container, ref) {\n                var field = ref.field;\n\n                $((\"<input id='\" + (guid()) + \"' type='text' aria-label='\" + field + \"' title='\" + field + \"' data-\" + ns + \"role='numerictextbox' data-\" + ns + \"bind='value: value'/>\")).appendTo(container);\n            },\n            \"string\": function(container, ref) {\n                var field = ref.field;\n\n                $((\"<span class='k-textbox k-input k-input-md k-rounded-md k-input-solid'><input id='\" + (guid()) + \"' type='text' aria-label='\" + field + \"' title='\" + field + \"' class='k-input-inner' data-\" + (kendo.ns) + \"bind='value: value'/></span>\")).appendTo(container);\n            },\n            \"boolean\": function(container, ref) {\n                var field = ref.field;\n\n                $((\"<input id='\" + (guid()) + \"' class='k-checkbox k-checkbox-md k-rounded-md' aria-label='\" + field + \"' data-\" + ns + \"role='checkbox' data-\" + ns + \"bind='checked: value' type='checkbox'>\")).appendTo(container);\n            },\n            \"date\": function(container, ref) {\n                var field = ref.field;\n\n                $((\"<input id='\" + (guid()) + \"' type='text' aria-label='\" + field + \"' title='\" + field + \"' data-\" + ns + \"role='datepicker' data-\" + ns + \"bind='value: value'/>\")).appendTo(container);\n            }\n        };\n\n        var FilterButtonGroup = ButtonGroup.extend({\n            init: function(element, options) {\n                var that = this;\n                ButtonGroup.fn.init.call(that, element, options);\n            },\n\n            options: {\n                name: \"FilterButtonGroup\"\n            },\n\n            value: function(value) {\n                if (value === undefined) {\n                    return this._value;\n                }\n                this._value = value;\n                ButtonGroup.fn._select.call(this, this.wrapper.find(\"[value='\" + value + \"']\"));\n                this.trigger(CHANGE);\n            },\n\n            _select: function(button) {\n                if (button !== -1) {\n                    this.value($(button).attr(\"value\"));\n                }\n            }\n        });\n\n        var Filter = Widget.extend( {\n            init: function(element, options) {\n                var that = this;\n                var html;\n\n                Widget.fn.init.call(that, element, options);\n\n                that.element = $(element).addClass(\"k-widget k-filter\");\n                that.dataSource = options.dataSource;\n                that.operators = $.extend(that.options.operators, options.operators);\n\n                that._getFieldsInfo();\n                that._modelChangeHandler = that._modelChange.bind(that);\n                that._renderMain();\n                if (options.expression) {\n                    that._addExpressionTree(that.filterModel);\n                }\n                that._renderApplyButton();\n                if (that.options.expressionPreview) {\n                    if (!that._previewContainer) {\n                        that._previewContainer = $('<div class=\"k-filter-preview\"></div>').insertAfter(that.element.children().eq(0));\n                    }\n                    html = that._createPreview(that.filterModel.toJSON());\n                    that._previewContainer.html(html);\n                }\n                that._attachEvents();\n                that.hasCustomOperators();\n            },\n\n            events: [\n                CHANGE\n            ],\n\n            options: {\n                name: \"Filter\",\n                dataSource: null,\n                expression: null,\n                applyButton: false,\n                fields: [],\n                mainLogic: \"and\",\n                messages: {\n                    and: \"And\",\n                    or: \"Or\",\n                    apply: \"Apply\",\n                    close: \"Close\",\n                    addExpression: \"Add Expression\",\n                    fields: \"Fields\",\n                    filterExpressionLabel: \"filter expression\",\n                    filterLogicLabel: \"filter logic\",\n                    mainFilterLogicLabel: \"main filter logic\",\n                    operators: \"Operators\",\n                    addGroup: \"Add Group\"\n                },\n                operators: {\n                    string: {\n                        eq: EQ,\n                        neq: NEQ,\n                        startswith: \"Starts with\",\n                        contains: \"Contains\",\n                        doesnotcontain: \"Does not contain\",\n                        endswith: \"Ends with\",\n                        isnull: \"Is null\",\n                        isnotnull: \"Is not null\",\n                        isempty: \"Is empty\",\n                        isnotempty: \"Is not empty\",\n                        isnullorempty: \"Has no value\",\n                        isnotnullorempty: \"Has value\"\n                    },\n                    number: {\n                        eq: EQ,\n                        neq: NEQ,\n                        gte: \"Is greater than or equal to\",\n                        gt: \"Is greater than\",\n                        lte: \"Is less than or equal to\",\n                        lt: \"Is less than\",\n                        isnull: \"Is null\",\n                        isnotnull: \"Is not null\"\n                    },\n                    date: {\n                        eq: EQ,\n                        neq: NEQ,\n                        gte: \"Is after or equal to\",\n                        gt: \"Is after\",\n                        lte: \"Is before or equal to\",\n                        lt: \"Is before\",\n                        isnull: \"Is null\",\n                        isnotnull: \"Is not null\"\n                    },\n                    \"boolean\": {\n                        eq: EQ,\n                        neq: NEQ\n                    }\n                }\n            },\n\n            applyFilter: function() {\n                var filter = this.filterModel.toJSON();\n\n                if (this._hasCustomOperators) {\n                    this._mapOperators(filter);\n                }\n                if (this._hasFieldsFilter(filter.filters || [])) {\n                    this._removeEmptyGroups(filter.filters);\n                    this.dataSource.filter(filter);\n                } else {\n                    this.dataSource.filter({});\n                }\n            },\n\n            destroy: function() {\n                this.element.off(NS);\n                kendo.destroy(this.element.find(\".k-filter-group-main\"));\n                this._previewContainer = null;\n                this._applyButton = null;\n                this._modelChangeHandler = null;\n                Widget.fn.destroy.call(this);\n            },\n\n            setOptions: function(options) {\n                kendo.deepExtend(this.options, options);\n                this.destroy();\n                this.element.empty();\n                this.init(this.element, this.options);\n            },\n\n            getOptions: function() {\n                var result = $.extend(true, {}, this.options);\n                delete result.dataSource;\n                result.expression = this.filterModel.toJSON();\n\n                return result;\n            },\n\n            _addExpressionTree: function(model) {\n                if (model.filters) {\n                    var parent = this.element.find(\"[id=\" + model.uid + \"]\");\n                    for (var i = 0; i < model.filters.length; i++) {\n                        if (model.filters[i].logic) {\n                            this._addGroup(parent, model.filters[i]);\n                        } else {\n                            this._addExpression(parent, model.filters[i]);\n                        }\n                        if (model.filters[i].filters) {\n                            this._addExpressionTree(model.filters[i]);\n                        }\n                    }\n                }\n            },\n\n            _attachEvents: function() {\n                var that = this;\n\n                that.element.on(\"click\" + NS, \"button.k-button\" , function(e) {\n                    e.preventDefault();\n\n                    var button = $(e.currentTarget);\n                    var icon = button.find(\"span\");\n                    var command = (icon.length ? icon : button).attr(\"class\").split(\"-\").pop();\n\n                    if (command == \"close\") {\n                        that._removeExpression(button.closest(\".k-toolbar\"));\n                    } else if (command == \"expression\") {\n                        that._addExpression(button.closest(\".k-toolbar\"));\n                    } else if (command == \"group\") {\n                        that._addGroup(button.closest(\".k-toolbar\"));\n                    } else if (command == \"apply\") {\n                        that.applyFilter();\n                    }\n                });\n            },\n\n            _addExpression: function(parentContainer, model) {\n                var that = this;\n                var parentUID = parentContainer.attr(\"id\");\n                var itemsContainer = parentContainer.closest(\".k-filter-toolbar\").next(\"ul.k-filter-lines\");\n                var field = model ? that._fields[model.field] : that._defaultField;\n                var expressionModel;\n                var itemHTML = \"\";\n\n                if (model) {\n                    expressionModel = model;\n                } else {\n                    expressionModel = findModel(that.filterModel, parentUID);\n\n                    if (!expressionModel.filters) {\n                        expressionModel.set(\"filters\", []);\n                    }\n\n                    expressionModel = that._addNewModel(expressionModel.filters, field);\n                }\n\n                if (!itemsContainer.length) {\n                    itemsContainer = $(\"<ul class='k-filter-lines'></ul>\").appendTo(parentContainer.closest(\"li\"));\n                }\n\n                itemHTML = $(kendo.template(expressionItemTemplate)({\n                    fields: that._fields,\n                    operators: that.operators[field.type],\n                    close: that.options.messages.close,\n                    fieldsLabel: that.options.messages.fields,\n                    uid: expressionModel.uid,\n                    ns: kendo.ns,\n                    filterExpressionLabel: that.options.messages.filterExpressionLabel\n                })).appendTo(itemsContainer);\n\n                that._addExpressionControls(itemHTML.find(\".k-toolbar\"), field, expressionModel);\n\n                if (!model) {\n                    that._expressionChange();\n                }\n            },\n\n            _addExpressionControls: function(container, field, filterModel) {\n                var items = container.find(\".k-filter-toolbar-item\");\n                var operatorsContainer = items.eq(1);\n                var editorContainer = items.eq(2);\n\n                kendo.destroy(operatorsContainer);\n                kendo.destroy(editorContainer);\n                operatorsContainer.empty();\n                editorContainer.empty();\n\n                this._appendOperators(operatorsContainer, field);\n                this._appendEditor(editorContainer, field);\n                this._bindModel(container, filterModel);\n                this._showHideEditor(container, filterModel);\n            },\n\n            _appendOperators: function(container, field) {\n                $(kendo.template(operatorsTemplate)({\n                    operators: field.operators && field.operators[field.type] ? field.operators[field.type] : this.operators[field.type],\n                    operatorsLabel: this.options.messages.operators,\n                    ns: kendo.ns\n                })).appendTo(container);\n            },\n\n            _appendEditor: function(container, field) {\n                if (kendo.isFunction(field.editor)) {\n                    field.editor(container, $.extend(true, {}, { field: field.name }));\n                } else {\n                    $(kendo.template(field.editor)({ ns: kendo.ns, field: field.name, id: kendo.guid() })).appendTo(container);\n                }\n            },\n\n            _addNewModel: function(parent, field) {\n                var filterModel;\n                var type = field.type;\n                var operators = field.operators;\n                var operator;\n                if (!operators) {\n                    operators = this.options.operators;\n                }\n\n                operator = Object.keys(operators[type])[0];\n\n                parent.push({ field: field.name });\n                filterModel = parent[parent.length - 1];\n\n                filterModel.set(\"value\", field.defaultValue);\n                filterModel.set(\"operator\", operator);\n\n                return filterModel;\n            },\n\n            _addGroup: function(parent, model) {\n                var that = this;\n                var filterModel = that.filterModel;\n                var parentUID = parent.attr(\"id\");\n                var itemsContainer = parent.closest(\".k-filter-toolbar\").next(\"ul.k-filter-lines\");\n                var logicHTML;\n\n                if (model) {\n                    filterModel = model;\n\n                } else {\n                    filterModel = findModel(filterModel, parentUID);\n\n                    if (!filterModel.filters) {\n                        filterModel.set(\"filters\", []);\n                    }\n                    filterModel.filters.push({ logic: that.options.mainLogic });\n                    filterModel = filterModel.filters[filterModel.filters.length - 1];\n                }\n\n                if (!itemsContainer.length) {\n                    itemsContainer = $(\"<ul class='k-filter-lines'></ul>\").appendTo(parent.closest(\"li\"));\n                }\n\n                logicHTML = $(kendo.template(logicItemTemplate)({\n                    operators: {\n                        and: that.options.messages.and,\n                        or: that.options.messages.or\n                    },\n                    addExpression: that.options.messages.addExpression,\n                    addGroup: that.options.messages.addGroup,\n                    close: that.options.messages.close,\n                    ns: kendo.ns,\n                    filterLogicLabel: that.options.messages.filterLogicLabel\n                })).appendTo(itemsContainer);\n\n                that._bindModel(logicHTML.find(\".k-toolbar\"), filterModel);\n\n                if (!model) {\n                    that._expressionChange();\n                }\n            },\n\n            _bindModel: function(container, model) {\n                container.attr(\"id\", model.uid);\n\n                model.bind(\"change\", this._modelChangeHandler);\n                kendo.bind(container, model);\n\n                container.parent().attr(kendo.attr(\"stop\"), true);\n            },\n\n            _createPreview: function(filter) {\n                var html = \"\";\n                var createdField = false;\n                var haveFields = this._hasFieldsFilter(filter.filters || []);\n                var childhtml = \"\";\n                var current;\n                var field;\n\n                if (!filter.filters || !filter.filters.length || !haveFields) {\n                    return \"\";\n                }\n                html += '<span class=\"k-filter-preview-bracket\">(</span>';\n                for (var i = 0; i < filter.filters.length; i++) {\n                    current = filter.filters[i];\n\n                    if (current.filters) {\n                        childhtml = this._createPreview(current);\n                        if (childhtml) {\n                            if (createdField) {\n                                html += '<span class=\"k-filter-preview-operator\"> ' + filter.logic.toLocaleUpperCase() + ' </span>';\n                            }\n                            createdField = true;\n                        }\n                        html += childhtml;\n                    }\n                    if (current.field) {\n                        field = this._fields[current.field];\n                        if (createdField) {\n                            html += '<span class=\"k-filter-preview-operator\"> ' + filter.logic.toLocaleUpperCase() + ' </span>';\n                        }\n                        createdField = true;\n                        html += '<span class=\"k-filter-preview-field\">' + field.label + '</span>';\n                        html += '<span class=\"k-filter-preview-criteria\"> ' + this._getOperatorText(current.field, current.operator);\n                        if (current.operator.indexOf(\"is\") < 0) {\n                            html += ' </span>';\n                            html += \"<span class='k-filter-preview-value'>'\" + kendo.htmlEncode(field.previewFormat ? kendo.toString(current.value, field.previewFormat) : current.value) + \"'</span>\";\n                        } else {\n                            html += '</span>';\n                        }\n                    }\n                }\n                html += '<span class=\"k-filter-preview-bracket\">)</span>';\n                return html;\n            },\n\n            _expressionChange: function() {\n                var that = this;\n                var filter = that.filterModel.toJSON();\n                var html = \"\";\n\n                if (that.options.expressionPreview) {\n                    html = that._createPreview(filter);\n                    that._previewContainer.html(html);\n                }\n\n                that.trigger(CHANGE, { expression: filter });\n            },\n\n            _getOperatorText: function(field, operator) {\n                var type = this._fields[field].type;\n                var operators = this._fields[field].operators;\n\n                if (!operators) {\n                    operators = this.options.operators;\n                }\n\n                return operators[type][operator].text || operators[type][operator];\n            },\n\n            _addField: function(fieldInfo, field) {\n                var that = this;\n                fieldInfo = $.extend(true, {}, {\n                    name: fieldInfo.name || field,\n                    editor: fieldInfo.editorTemplate || editors[fieldInfo.type || \"string\"],\n                    defaultValue: (fieldInfo.defaultValue || fieldInfo.defaultValue === false || fieldInfo.defaultValue === 0) ? fieldInfo.defaultValue : defaultValues[fieldInfo.type || \"string\"],\n                    type: fieldInfo.type || \"string\",\n                    label: fieldInfo.label || fieldInfo.name || field,\n                    operators: fieldInfo.operators,\n                    previewFormat: fieldInfo.previewFormat\n                });\n                that._fields[fieldInfo.name] = fieldInfo;\n                if (!that._defaultField) {\n                    that._defaultField = fieldInfo;\n                }\n            },\n\n            _getFieldsInfo: function() {\n                var that = this;\n                var fieldsCollection = that.options.fields.length ? that.options.fields : (that.options.dataSource.options.schema.model || {}).fields;\n                var fieldInfo;\n\n                that._fields = {};\n\n                if (Array.isArray(fieldsCollection)) {\n                    for (var i = 0; i < fieldsCollection.length; i++) {\n                        fieldInfo = fieldsCollection[i];\n                        that._addField(fieldInfo);\n                    }\n                } else {\n                    for (var field in fieldsCollection) {\n                        fieldInfo = fieldsCollection[field];\n                        that._addField(fieldInfo, field);\n                    }\n                }\n            },\n\n            _hasFieldsFilter: function(filters, haveField) {\n                haveField = !!haveField;\n\n                for (var i = 0; i < filters.length; i++) {\n                    if (filters[i].filters) {\n                        haveField = this._hasFieldsFilter(filters[i].filters, haveField);\n                    }\n                    if (filters[i].field) {\n                        return true;\n                    }\n                }\n\n                return haveField;\n            },\n\n            _removeEmptyGroups: function(filters) {\n                if (!filters) {\n                    return;\n                }\n                for (var i = filters.length - 1; i >= 0; i--) {\n                    if ((filters[i].logic && !filters[i].filters) || (filters[i].filters && !this._hasFieldsFilter(filters[i].filters)) ) {\n                        filters.splice(i, 1);\n                        continue;\n                    }\n\n                    if (filters[i].filters) {\n                        this._removeEmptyGroups(filters[i].filters);\n                    }\n                }\n            },\n\n            _modelChange: function(e) {\n                var that = this;\n                var container = that.element.find(\"[id=\" + e.sender.uid + \"]\");\n\n                that._showHideEditor(container, e.sender);\n                if (e.field !== \"field\") {\n                    if (e.field !== \"filters\") {\n                      that._expressionChange();\n                    }\n                    return;\n                }\n\n                var newField = e.sender.field;\n                var parent = e.sender.parent();\n                var field = that._fields[newField];\n                var filterModel = that._addNewModel(parent, field);\n\n                e.sender.unbind(\"change\", that._modelChangeHandler);\n\n                parent.remove(e.sender);\n\n                that._addExpressionControls(container, field, filterModel);\n\n                that._expressionChange();\n            },\n\n            _renderMain: function() {\n                var that = this;\n\n                $(mainContainer).appendTo(that.element);\n\n                if (that.options.expression) {\n                    that.filterModel = kendo.observable(that.options.expression);\n                } else {\n                    that.filterModel = kendo.observable({\n                        logic: that.options.mainLogic\n                    });\n                }\n\n                $(kendo.template(mainLogicTemplate)({\n                    operators: {\n                        and: that.options.messages.and,\n                        or: that.options.messages.or\n                    },\n                    addExpression: that.options.messages.addExpression,\n                    addGroup: that.options.messages.addGroup,\n                    close: that.options.messages.close,\n                    uid: that.filterModel.uid,\n                    ns: kendo.ns,\n                    mainFilterLogicLabel: that.options.messages.mainFilterLogicLabel\n                })).appendTo(that.element.find(\"li\").first());\n\n                that._bindModel(that.element.find(\".k-toolbar\").first(), that.filterModel);\n            },\n\n            _removeExpression: function(parent) {\n                var that = this;\n                var parentUID = parent.attr(\"id\");\n                var itemContainer = parent.closest(\"li\");\n                var isMain = itemContainer.hasClass(\"k-filter-group-main\");\n                var parentModel;\n                var model;\n\n                if (isMain) {\n                    itemContainer = itemContainer.find(\".k-filter-lines\");\n                    if (that.filterModel.filters) {\n                        that.filterModel.filters.empty();\n                        delete that.filterModel.filters;\n                    }\n                } else {\n                    model = findModel(that.filterModel, parentUID);\n                    parentModel = model.parent();\n                    model.unbind(\"change\", that._modelChangeHandler);\n                    parentModel.remove(model);\n                    if (!parentModel.length) {\n                        delete parentModel.parent().filters;\n                    }\n                    if (!itemContainer.siblings().length) {\n                        itemContainer = itemContainer.parent();\n                    }\n                }\n\n                kendo.destroy(itemContainer);\n                itemContainer.remove();\n                that._expressionChange();\n            },\n\n            _renderApplyButton: function() {\n                var that = this;\n\n                if (!that.options.applyButton) {\n                    return;\n                }\n\n                if (!that._applyButton) {\n                    that._applyButton = $(kendo.format('<button type=\"button\" aria-label=\"{0}\" title=\"{0}\" class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-filter-apply\">{0}</button>', that.options.messages.apply)).appendTo(that.element);\n                }\n            },\n\n            _showHideEditor: function(container, model) {\n                if (model.logic) {\n                    return;\n                }\n\n                var operator = model.operator;\n                var editorContainer = container.find(\".k-filter-toolbar-item\").eq(2);\n                if (operator == \"isnull\" || operator == \"isnotnull\" || operator == \"isempty\" ||\n                    operator == \"isnotempty\" || operator == \"isnullorempty\" || operator == \"isnotnullorempty\") {\n                    editorContainer.hide();\n                } else {\n                    editorContainer.show();\n                }\n            },\n\n            _mapOperators: function(expression) {\n                var that = this;\n                if (expression.filters) {\n                    expression.filters.forEach(function(filter) {\n                        if (filter.filters) {\n                            that._mapOperators(filter);\n                        } else {\n                            var operator;\n                            var field = that._fields[filter.field];\n                            var type = field.type;\n                            if (field.operators && field.operators[type][filter.operator]) {\n                                operator = field.operators[type][filter.operator];\n                            } else {\n                                operator = that.operators[type][filter.operator];\n                            }\n\n                            if (operator) {\n                                filter.operator = operator.handler || filter.operator;\n                            }\n                        }\n                    });\n                }\n            },\n\n            hasCustomOperators: function() {\n                var operators = $.extend(true, {}, this.operators);\n\n                for (var field in this._fields) {\n                    operators = $.extend(true, {}, operators, this._fields[field].operators);\n                }\n                this._hasCustomOperators = findCustomOperators(operators);\n            }\n\n        });\n\n        function findCustomOperators(operators) {\n            for (var field in operators) {\n                var operator = operators[field];\n                if ((operator.handler && typeof operator.handler === \"function\") ||\n                    (typeof operator === 'object' && operator !== null && findCustomOperators(operator))) {\n                    return true;\n                }\n            }\n            return false;\n        }\n\n        function findModel(model, uid) {\n\n            if (model.uid === uid) {\n                return model;\n            }\n\n            if (model.filters) {\n                for (var i = 0; i < model.filters.length; i++) {\n                    var temp = findModel(model.filters[i], uid);\n                    if (temp) {\n                        return temp;\n                    }\n                }\n            }\n        }\n\n        ui.plugin(Filter);\n        ui.plugin(FilterButtonGroup);\n    })(window.kendo.jQuery);\n\n}));\n"]}