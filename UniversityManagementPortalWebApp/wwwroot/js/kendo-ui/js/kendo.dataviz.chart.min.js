/**
 * Kendo UI v2023.1.117 (http://www.telerik.com/kendo-ui)
 * Copyright 2023 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.
 *
 * Kendo UI commercial licenses may be obtained at
 * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete
 * If you do not own a commercial license, this file shall be governed by the trial license terms.
 */
!function(t){"function"==typeof define&&define.amd?define(["kendo.core.min","kendo.color.min","kendo.drawing.min","kendo.dataviz.core.min","kendo.data.min","kendo.dataviz.themes.min","kendo.userevents.min"],t):t()}((function(){!function(t){window.kendo.dataviz=window.kendo.dataviz||{};var e=kendo.dataviz,i=e.Class,n=e.isNumber,s=e.constants,r=s.MAX_VALUE,o=s.MIN_VALUE,a=s.VALUE,h=s.CENTER,l=s.TOP,c=s.BOTTOM,u=s.LEFT,p=s.WHITE,d=s.CIRCLE,f=s.X,v=s.Y,g=s.RIGHT,x=s.BLACK,m=s.DATE,y=s.DEFAULT_PRECISION,_=s.ARC,b=e.defined,w=e.getter,A=e.isArray,S=e.ChartElement,C=e.Point,k=e.Box,P=e.alignPathToPixel,T=e.setDefaultOptions,I=e.inArray,E=e.isFunction,R=e.valueOrDefault,V=e.isObject,O=e.deepExtend,L=e.last,M=e.eventElement,B=e.getTemplate,H=e.TextBox,z=e.ShapeElement,D=e.getSpacing,F=e.CurveProcessor,N=e.append,G=e.isString,X=e.parseDate,Y=e.styleValue,q=e.CategoryAxis,U=e.BoxElement,W=e.Title,Z=e.round,j=e.limitValue,K=e.grep,Q=e.elementStyles,$=e.hasClasses,J=e.bindEvents,tt=e.services,et=e.unbindEvents,it=kendo.support,nt=kendo.drawing,st=nt.Path,rt=nt.Animation,ot=nt.AnimationFactory,at=nt.Group,ht=kendo.Color,lt=kendo.geometry,ct=lt.Point,ut=lt.transform,pt=i.extend({init:function(t){this._axis=t,this.options=t.options},value:function(t){var e=this._axis;return e.getCategory?e.getCategory(t):e.getValue(t)},slot:function(t,e,i){return void 0===i&&(i=!0),this._axis.slot(t,e,i)},range:function(){return this._axis.range()},valueRange:function(){return this._axis.valueRange()}});function dt(t,e){for(var i=0;i<e.length;i++)if(e[i].options.name===t)return e[i].prepareUserOptions(),new pt(e[i])}var ft=kendo.Class.extend({init:function(t){this.visual=t.visual,this.chartsVisual=t.chartContainer.visual,this._pane=t},findAxisByName:function(t){return dt(t,this._pane.axes)}}),vt=i.extend({init:function(t){this._plotArea=t,this.visual=t.visual,this.backgroundVisual=t._bgVisual}});function gt(t){for(var e=t.length,i=0,s=0;s<e;s++){var r=t[s];n(r)&&i++}return i}var xt={min:function(t){for(var e=t.length,i=r,s=0;s<e;s++){var o=t[s];n(o)&&(i=Math.min(i,o))}return i===r?t[0]:i},max:function(t){for(var e=t.length,i=o,s=0;s<e;s++){var r=t[s];n(r)&&(i=Math.max(i,r))}return i===o?t[0]:i},sum:function(t){for(var e=t.length,i=0,s=0;s<e;s++){var r=t[s];n(r)&&(i+=r)}return i},sumOrNull:function(t){var e=null;return gt(t)&&(e=xt.sum(t)),e},count:function(t){for(var e=t.length,i=0,n=0;n<e;n++){var s=t[n];null!==s&&b(s)&&i++}return i},avg:function(t){var e=gt(t),i=t[0];return e>0&&(i=xt.sum(t)/e),i},first:function(t){for(var e=t.length,i=0;i<e;i++){var n=t[i];if(null!==n&&b(n))return n}return t[0]}};function mt(t,e){return null===e?e:w(t,!0)(e)}var yt=i.extend({init:function(){this._valueFields={},this._otherFields={},this._nullValue={},this._undefinedValue={}},register:function(t,e,i){var n=this;void 0===e&&(e=[a]),void 0===i&&(i={});for(var s=0;s<t.length;s++){var r=t[s];n._valueFields[r]=e,n._otherFields[r]=i,n._nullValue[r]=n._makeValue(e,null),n._undefinedValue[r]=n._makeValue(e,void 0)}},canonicalFields:function(t){return this.valueFields(t).concat(this.otherFields(t))},valueFields:function(t){return this._valueFields[t.type]||[a]},otherFields:function(t){return this._otherFields[t.type]||[a]},bindPoint:function(t,e,i){var n,s,r=t.data,o=b(i)?i:r[e],a={valueFields:{value:o}},h=this.valueFields(t),l=this._otherFields[t.type];if(null===o)s=this._nullValue[t.type];else if(b(o)){if(Array.isArray(o)){var c=o.slice(h.length);s=this._bindFromArray(o,h),n=this._bindFromArray(c,l)}else if("object"==typeof o){var u=this.sourceFields(t,h),p=this.sourceFields(t,l);s=this._bindFromObject(o,h,u),n=this._bindFromObject(o,l,p)}}else s=this._undefinedValue[t.type];return b(s)&&(1===h.length?a.valueFields.value=s[h[0]]:a.valueFields=s),a.fields=n||{},a},_makeValue:function(t,e){for(var i={},n=t.length,s=0;s<n;s++){i[t[s]]=e}return i},_bindFromArray:function(t,e){var i={};if(e)for(var n=Math.min(e.length,t.length),s=0;s<n;s++)i[e[s]]=t[s];return i},_bindFromObject:function(t,e,i){void 0===i&&(i=e);var n={};if(e)for(var s=e.length,r=0;r<s;r++){var o=e[r],a=i[r];null!==a&&(n[o]=mt(a,t))}return n},sourceFields:function(t,e){var i=[];if(e)for(var n=e.length,s=0;s<n;s++){var r=e[s],o=r===a?"field":r+"Field";i.push(null!==t[o]?t[o]||r:null)}return i}});yt.current=new yt;var _t=/percent(?:\w*)\((\d+)\)/,bt=new RegExp("^stddev(?:\\((\\d+(?:\\.\\d+)?)\\))?$"),wt=i.extend({init:function(t,e,i){this.initGlobalRanges(t,e,i)},initGlobalRanges:function(t,e,i){var n=e.data,s=bt.exec(t);if(s){this.valueGetter=this.createValueGetter(e,i);var r=this.getAverage(n),o=this.getStandardDeviation(n,r,!1),a=s[1]?parseFloat(s[1]):1,h={low:r.value-o*a,high:r.value+o*a};this.globalRange=function(){return h}}else if(t.indexOf&&t.indexOf("stderr")>=0){this.valueGetter=this.createValueGetter(e,i);var l=this.getStandardError(n,this.getAverage(n));this.globalRange=function(t){return{low:t-l,high:t+l}}}},createValueGetter:function(t,e){var i,r=t.data,o=yt.current,a=o.valueFields(t),h=b(r[0])?r[0]:{};if(A(h)){var l=e?a.indexOf(e):0;i=w("["+l+"]")}else if(n(h))i=w();else if(typeof h===s.OBJECT){var c=o.sourceFields(t,a);i=w(c[a.indexOf(e)])}return i},getErrorRange:function(t,e){var i,s,r;if(!b(e))return null;if(this.globalRange)return this.globalRange(t);if(A(e))i=t-e[0],s=t+e[1];else if(n(r=parseFloat(e)))i=t-r,s=t+r;else{if(!(r=_t.exec(e)))throw new Error("Invalid ErrorBar value: "+e);var o=t*(parseFloat(r[1])/100);i=t-Math.abs(o),s=t+Math.abs(o)}return{low:i,high:s}},getStandardError:function(t,e){return this.getStandardDeviation(t,e,!0)/Math.sqrt(e.count)},getStandardDeviation:function(t,e,i){for(var s=t.length,r=i?e.count-1:e.count,o=0,a=0;a<s;a++){var h=this.valueGetter(t[a]);n(h)&&(o+=Math.pow(h-e.value,2))}return Math.sqrt(o/r)},getAverage:function(t){for(var e=t.length,i=0,s=0,r=0;r<e;r++){var o=this.valueGetter(t[r]);n(o)&&(i+=o,s++)}return{value:i/s,count:s}}}),At=it.browser||{},St=600,Ct="fadeIn",kt=.8,Pt=At.msie?.001:0,Tt="errorLow",It="errorHigh",Et="xErrorLow",Rt="xErrorHigh",Vt="yErrorLow",Ot="yErrorHigh",Lt="zero",Mt="interpolate",Bt="gap",Ht="above",zt="below",Dt="smooth",Ft="step",Nt="area",Gt="bar",Xt="boxPlot",Yt="bubble",qt="bullet",Ut="candlestick",Wt="column",Zt="donut",jt="funnel",Kt="heatmap",Qt="horizontalWaterfall",$t="line",Jt="ohlc",te="pie",ee="polarArea",ie="polarLine",ne="polarScatter",se="radarArea",re="radarColumn",oe="radarLine",ae="rangeArea",he="rangeBar",le="rangeColumn",ce="scatter",ue="scatterLine",pe="verticalArea",de="verticalBoxPlot",fe="verticalBullet",ve="verticalLine",ge="verticalRangeArea",xe="waterfall",me=[Gt,Wt,Jt,Ut,Xt,de,qt,le,he,xe,Qt],ye="legendItemClick",_e="legendItemHover",be="legendItemLeave",we="seriesClick",Ae="seriesHover",Se="seriesOver",Ce="seriesLeave",ke="plotAreaClick",Pe="plotAreaHover",Te="plotAreaLeave",Ie="drag",Ee="dragEnd",Re="dragStart",Ve="zoomStart",Oe="zoom",Le="zoomEnd",Me="selectStart",Be="select",He="selectEnd",ze="render",De="showTooltip",Fe="hideTooltip",Ne="paneRender",Ge="log",Xe="category",Ye="insideEnd",qe="insideBase",Ue="outsideEnd",We="DOMMouseScroll mousewheel",Ze=150,je={INITIAL_ANIMATION_DURATION:St,FADEIN:Ct,LEGEND_ITEM_CLICK:ye,LEGEND_ITEM_HOVER:_e,LEGEND_ITEM_LEAVE:be,SERIES_CLICK:we,SERIES_HOVER:Ae,SERIES_OVER:Se,SERIES_LEAVE:Ce,GLASS:"glass",BORDER_BRIGHTNESS:kt,TOOLTIP_OFFSET:5,START_SCALE:Pt,ERROR_LOW_FIELD:Tt,ERROR_HIGH_FIELD:It,X_ERROR_LOW_FIELD:Et,X_ERROR_HIGH_FIELD:Rt,Y_ERROR_LOW_FIELD:Vt,Y_ERROR_HIGH_FIELD:Ot,LINE_MARKER_SIZE:8,INTERPOLATE:Mt,ZERO:Lt,SMOOTH:Dt,STEP:Ft,CATEGORY:Xe,FUNNEL:jt,BAR:Gt,CANDLESTICK:Ut,PIE:te,COLUMN:Wt,AREA:Nt,VERTICAL_BULLET:fe,BOX_PLOT:Xt,OHLC:Jt,WATERFALL:xe,LINE:$t,BULLET:qt,VERTICAL_LINE:ve,VERTICAL_AREA:pe,RANGE_AREA:ae,VERTICAL_RANGE_AREA:ge,RANGE_COLUMN:le,VERTICAL_BOX_PLOT:de,RANGE_BAR:he,HORIZONTAL_WATERFALL:Qt,SCATTER:ce,SCATTER_LINE:ue,BUBBLE:Yt,RADAR_AREA:se,RADAR_LINE:oe,RADAR_COLUMN:re,POLAR_LINE:ie,POLAR_AREA:ee,POLAR_SCATTER:ne,RENDER:ze,PLOT_AREA_CLICK:ke,PLOT_AREA_HOVER:Pe,PLOT_AREA_LEAVE:Te,LOGARITHMIC:Ge,DRAG:Ie,DRAG_START:Re,DRAG_END:Ee,ZOOM_START:Ve,ZOOM:Oe,ZOOM_END:Le,SELECT_START:Me,SELECT:Be,SELECT_END:He,PANE_RENDER:Ne,GAP:Bt,DONUT:Zt,INSIDE_END:Ye,INSIDE_BASE:qe,OUTSIDE_END:Ue,MOUSEWHEEL:We,MOUSEWHEEL_DELAY:Ze,MOUSEWHEEL_ZOOM_RATE:.3,SHOW_TOOLTIP:De,HIDE_TOOLTIP:Fe,EQUALLY_SPACED_SERIES:me,ABOVE:Ht,BELOW:zt,HEATMAP:Kt},Ke=S.extend({init:function(t,e,i,n,s,r){S.fn.init.call(this,r),this.low=t,this.high=e,this.isVertical=i,this.chart=n,this.series=s},reflow:function(t){var e,i=this.options.endCaps,n=this.isVertical,s=this.getAxis().getSlot(this.low,this.high),r=t.center(),o=this.getCapsWidth(t,n),a=n?r.x:r.y,h=a-o,l=a+o;n?(e=[new C(r.x,s.y1),new C(r.x,s.y2)],i&&e.push(new C(h,s.y1),new C(l,s.y1),new C(h,s.y2),new C(l,s.y2)),this.box=new k(h,s.y1,l,s.y2)):(e=[new C(s.x1,r.y),new C(s.x2,r.y)],i&&e.push(new C(s.x1,h),new C(s.x1,l),new C(s.x2,h),new C(s.x2,l)),this.box=new k(s.x1,h,s.x2,l)),this.linePoints=e},getCapsWidth:function(t,e){var i=e?t.width():t.height();return Math.min(Math.floor(i/2),4)||4},createVisual:function(){var t=this,e=this.options,i=e.visual;i?this.visual=i({low:this.low,high:this.high,rect:this.box.toRect(),sender:this.getSender(),options:{endCaps:e.endCaps,color:e.color,line:e.line},createVisual:function(){t.createDefaultVisual();var e=t.visual;return delete t.visual,e}}):this.createDefaultVisual()},createDefaultVisual:function(){var t=this.options,e=this.linePoints,i={stroke:{color:t.color,width:t.line.width,dashType:t.line.dashType}};S.fn.createVisual.call(this);for(var n=0;n<e.length;n+=2){var s=new st(i).moveTo(e[n].x,e[n].y).lineTo(e[n+1].x,e[n+1].y);P(s),this.visual.append(s)}}});T(Ke,{animation:{type:Ct,delay:St},endCaps:!0,line:{width:2},zIndex:1});var Qe=Ke.extend({getAxis:function(){return this.chart.seriesValueAxis(this.series)}});function $e(t,e,i,n){void 0===i&&(i={}),void 0===n&&(n=!1);var s=i.defaults=i.defaults||{},r=i.depth=i.depth||0,o=!1;if(i.excluded=i.excluded||[],r>5)return null;for(var a in t)if(!I(a,i.excluded)&&t.hasOwnProperty(a)){var h=t[a];E(h)?(o=!0,n||(t[a]=R(h(e),s[a]))):V(h)&&(n||(i.defaults=s[a]),i.depth++,o=$e(h,e,i,n)||o,i.depth--)}return o}function Je(t){for(var e=t.length,i=0,n=0;n<e;n++)i=Math.max(i,t[n].data.length);return i}var ti=S.extend({init:function(t,e){S.fn.init.call(this,e),this.plotArea=t,this.chartService=t.chartService,this.categoryAxis=t.seriesCategoryAxis(e.series[0]),this.valueAxisRanges={},this.points=[],this.categoryPoints=[],this.seriesPoints=[],this.seriesOptions=[],this._evalSeries=[],this.render()},render:function(){this.traverseDataPoints(this.addValue.bind(this))},pointOptions:function(t,e){var i=this.seriesOptions[e];if(!i){var n=this.pointType().prototype.defaults;this.seriesOptions[e]=i=O({},n,{vertical:!this.options.invertAxes},t)}return i},plotValue:function(t){if(!t)return 0;if(this.options.isStacked100&&n(t.value)){for(var e=t.categoryIx,i=this.categoryPoints[e],s=[],r=0,o=0;o<i.length;o++){var a=i[o];if(a){var h=t.series.stack,l=a.series.stack;if(h&&l&&h.group!==l.group)continue;n(a.value)&&(r+=Math.abs(a.value),s.push(Math.abs(a.value)))}}if(r>0)return t.value/r}return t.value},plotRange:function(t,i){void 0===i&&(i=0);var n=this.categoryPoints[t.categoryIx];if(this.options.isStacked){for(var r=this.plotValue(t),o=r>=0,a=i,h=!1,l=0;l<n.length;l++){var c=n[l];if(t===c)break;var u=t.series.stack,p=c.series.stack;if(u&&p){if(typeof u===s.STRING&&u!==p)continue;if(u.group&&u.group!==p.group)continue}var d=this.plotValue(c);(d>=0&&o||d<0&&!o)&&(a+=d,r+=d,h=!0,this.options.isStacked100&&(r=Math.min(r,1)))}return h&&(a-=i),[a,r]}var f=t.series,v=this.seriesValueAxis(f),g=this.categoryAxisCrossingValue(v);return[g,e.convertableToNumber(t.value)?t.value:g]},stackLimits:function(t,e){for(var i=r,n=o,s=0;s<this.categoryPoints.length;s++){var a=this.categoryPoints[s];if(a)for(var h=0;h<a.length;h++){var l=a[h];if(l&&(l.series.stack===e||l.series.axis===t)){var c=this.plotRange(l,0)[1];b(c)&&isFinite(c)&&(n=Math.max(n,c),i=Math.min(i,c))}}}return{min:i,max:n}},updateStackRange:function(){var t=this,i=this.options,n=i.isStacked,s=i.series,a={};if(n)for(var h=0;h<s.length;h++){var l=s[h],c=l.axis,u=c+l.stack,p=a[u];if(!p){p=t.stackLimits(c,l.stack);var d=t.errorTotals;d&&(d.negative.length&&(p.min=Math.min(p.min,e.sparseArrayLimits(d.negative).min)),d.positive.length&&(p.max=Math.max(p.max,e.sparseArrayLimits(d.positive).max))),p.min!==r||p.max!==o?a[u]=p:p=null}p&&(t.valueAxisRanges[c]=p)}},addErrorBar:function(t,e,i){var s,r=t.value,o=t.series,h=t.seriesIx,l=t.options.errorBars,c=e.fields.errorLow,u=e.fields.errorHigh;n(c)&&n(u)?s={low:c,high:u}:l&&b(l.value)&&(this.seriesErrorRanges=this.seriesErrorRanges||[],this.seriesErrorRanges[h]=this.seriesErrorRanges[h]||new wt(l.value,o,a),s=this.seriesErrorRanges[h].getErrorRange(r,l.value)),s&&(t.low=s.low,t.high=s.high,this.addPointErrorBar(t,i))},addPointErrorBar:function(t,e){var i=!this.options.invertAxes,n=t.options.errorBars,s=t.series,r=t.low,o=t.high;if(this.options.isStacked){var a=this.stackedErrorRange(t,e);r=a.low,o=a.high}else{var h={categoryIx:e,series:s};this.updateRange({value:r},h),this.updateRange({value:o},h)}var l=new Qe(r,o,i,this,s,n);t.errorBars=[l],t.append(l)},stackedErrorRange:function(t,e){var i=this.plotRange(t,0)[1]-t.value,n=t.low+i,s=t.high+i;return this.errorTotals=this.errorTotals||{positive:[],negative:[]},n<0&&(this.errorTotals.negative[e]=Math.min(this.errorTotals.negative[e]||0,n)),s>0&&(this.errorTotals.positive[e]=Math.max(this.errorTotals.positive[e]||0,s)),{low:n,high:s}},addValue:function(e,i){var n=i.categoryIx,s=i.series,r=i.seriesIx,o=this.categoryPoints[n];o||(this.categoryPoints[n]=o=[]);var a=this.seriesPoints[r];a||(this.seriesPoints[r]=a=[]);var h=this.createPoint(e,i);h&&(t.extend(h,i),h.owner=this,h.noteText=e.fields.noteText,b(h.dataItem)||(h.dataItem=s.data[n]),this.addErrorBar(h,e,n)),this.points.push(h),a.push(h),o.push(h),this.updateRange(e.valueFields,i)},evalPointOptions:function(t,e,i,n,s,r){var o={defaults:s._defaults,excluded:["data","aggregate","_events","tooltip","content","template","visual","toggle","_outOfRangeMinPoint","_outOfRangeMaxPoint"]},a=this._evalSeries[r];b(a)||(this._evalSeries[r]=a=$e(t,{},o,!0));var h=t;return a&&$e(h=O({},h),{value:e,category:i,index:n,series:s,dataItem:s.data[n]},o),h},updateRange:function(t,e){var i=e.series.axis,n=t.value,s=this.valueAxisRanges[i];isFinite(n)&&null!==n&&((s=this.valueAxisRanges[i]=s||{min:r,max:o}).min=Math.min(s.min,n),s.max=Math.max(s.max,n))},seriesValueAxis:function(t){var e=this.plotArea,i=t.axis,n=i?e.namedValueAxes[i]:e.valueAxis;if(!n)throw new Error("Unable to locate value axis with name "+i);return n},reflow:function(t){var e=this,i=this.categorySlots=[],n=this.points,s=this.categoryAxis,r=0;this.traverseDataPoints((function(t,o){var a=o.categoryIx,h=o.series,l=e.seriesValueAxis(h),c=n[r++],u=i[a];if(u||(i[a]=u=e.categorySlot(s,a,l)),c){var p=e.plotRange(c,l.startValue()),d=e.valueSlot(l,p);if(d){var f=e.pointSlot(u,d);c.aboveAxis=e.aboveAxis(c,l),c.stackValue=p[1],e.options.isStacked100&&(c.percentage=e.plotValue(c)),e.reflowPoint(c,f)}else c.visible=!1}})),this.reflowCategories(i),!this.options.clip&&this.options.limitPoints&&this.points.length&&this.limitPoints(),this.box=t},valueSlot:function(t,e){return t.getSlot(e[0],e[1],!this.options.clip)},limitPoints:function(){for(var t=this.categoryPoints,e=t[0].concat(L(t)),i=0;i<e.length;i++)e[i]&&this.limitPoint(e[i])},limitPoint:function(t){var e=this.categoryAxis.limitSlot(t.box);e.equals(t.box)||t.reflow(e)},aboveAxis:function(t,e){var i=this.categoryAxisCrossingValue(e),n=t.value;return e.options.reverse?n<i:n>=i},categoryAxisCrossingValue:function(t){var e=this.categoryAxis,i=t.options;return[].concat(i.axisCrossingValues||i.axisCrossingValue)[e.axisIndex||0]||0},reflowPoint:function(t,e){t.reflow(e)},reflowCategories:function(){},pointSlot:function(t,e){var i=this.options.invertAxes,n=i?e:t,s=i?t:e;return new k(n.x1,s.y1,n.x2,s.y2)},categorySlot:function(t,e){return t.getSlot(e)},traverseDataPoints:function(t){for(var e=this,i=this.options.series,n=Je(i),s=i.length,r=0;r<s;r++)e._outOfRangeCallback(i[r],"_outOfRangeMinPoint",r,t);for(var o=0;o<n;o++)for(var a=0;a<s;a++){var h=i[a],l=e.categoryAxis.categoryAt(o);t(e._bindPoint(h,a,o),{category:l,categoryIx:o,categoriesCount:n,series:h,seriesIx:a})}for(var c=0;c<s;c++)e._outOfRangeCallback(i[c],"_outOfRangeMaxPoint",c,t)},_outOfRangeCallback:function(t,e,i,n){var s=t[e];if(s){var r=s.categoryIx;n(this._bindPoint(t,i,r,s.item),{category:s.category,categoryIx:r,series:t,seriesIx:i,dataItem:s.item})}},_bindPoint:function(t,e,i,n){this._bindCache||(this._bindCache=[]);var s=this._bindCache[e];s||(s=this._bindCache[e]=[]);var r=s[i];return r||(r=s[i]=yt.current.bindPoint(t,i,n)),r},formatPointValue:function(t,e){return null===t.value?"":this.chartService.format.auto(e,t.value)},pointValue:function(t){return t.valueFields.value}});T(ti,{series:[],invertAxes:!1,isStacked:!1,clip:!0,limitPoints:!0});var ei={click:function(t,e){return t.trigger(we,this.eventArgs(e))},hover:function(t,e){return t.trigger(Ae,this.eventArgs(e))},over:function(t,e){return t.trigger(Se,this.eventArgs(e))},out:function(t,e){return t.trigger(Ce,this.eventArgs(e))},eventArgs:function(t){return{value:this.value,percentage:this.percentage,stackValue:this.stackValue,category:this.category,series:this.series,dataItem:this.dataItem,runningTotal:this.runningTotal,total:this.total,element:M(t),originalEvent:t,point:this}}},ii={createNote:function(){var t=this.options.notes,i=this.noteText||t.label.text;!1!==t.visible&&b(i)&&null!==i&&(this.note=new e.Note({value:this.value,text:i,dataItem:this.dataItem,category:this.category,series:this.series},this.options.notes,this.owner.chartService),this.append(this.note))}},ni=S.extend({init:function(t,e){S.fn.init.call(this),this.value=t,this.options=e,this.aboveAxis=R(this.options.aboveAxis,!0),this.tooltipTracking=!0},render:function(){var t=this.options,e=t.markers,i=t.labels;if(!this._rendered){if(this._rendered=!0,e.visible&&e.size&&(this.marker=this.createMarker(),this.append(this.marker)),i.visible){var n=B(i),s=this.pointData(),r=this.value;n?r=n(s):i.format&&(r=this.formatValue(i.format)),this.label=new H(r,O({align:h,vAlign:h,margin:{left:5,right:5},zIndex:R(i.zIndex,this.series.zIndex)},i),s),this.append(this.label)}this.createNote(),this.errorBar&&this.append(this.errorBar)}},markerBorder:function(){var t=this.options.markers,e=t.background,i=O({color:this.color},t.border);return b(i.color)||(i.color=new ht(e).brightness(kt).toHex()),i},createVisual:function(){},createMarker:function(){var t=this.options.markers;return new z({type:t.type,width:t.size,height:t.size,rotation:t.rotation,background:t.background,border:this.markerBorder(),opacity:this.series.opacity||t.opacity,zIndex:R(t.zIndex,this.series.zIndex),animation:t.animation,visual:t.visual},{dataItem:this.dataItem,value:this.value,series:this.series,category:this.category})},markerBox:function(){return this.marker||(this.marker=this.createMarker(),this.marker.reflow(this._childBox)),this.marker.box},reflow:function(t){var e=this.options,i=this.aboveAxis,n=e.vertical;this.render(),this.box=t;var s=t.clone();if(n?i?s.y1-=s.height():s.y2+=s.height():i?s.x1+=s.width():s.x2-=s.width(),this._childBox=s,this.marker&&this.marker.reflow(s),this.reflowLabel(s),this.errorBars)for(var r=0;r<this.errorBars.length;r++)this.errorBars[r].reflow(s);if(this.note){var o=this.markerBox();if(!e.markers.visible||!e.markers.size){var a=o.center();o=new k(a.x,a.y,a.x,a.y)}this.note.reflow(o)}},reflowLabel:function(t){var e=this.options,i=this.label,n=e.labels.position;i&&(n=(n=n===Ht?l:n)===zt?c:n,i.reflow(t),i.box.alignTo(this.markerBox(),n),i.reflow(i.box))},createHighlight:function(){var t=this.options.highlight.markers,e=this.markerBorder().color,i=this.options.markers,n=i.size+(i.border.width||0)+(t.border.width||0),s=new z({type:i.type,width:n,height:n,rotation:i.rotation,background:t.color||e,border:{color:t.border.color,width:t.border.width,opacity:R(t.border.opacity,1)},opacity:R(t.opacity,1)});return s.reflow(this._childBox),s.getElement()},highlightVisual:function(){return(this.marker||{}).visual},highlightVisualArgs:function(){var t,e,i=this.marker;if(i)e=i.paddingBox.toRect(),t=i.visual;else{var n=this.options.markers.size,s=n/2,r=this.box.center();e=new lt.Rect([r.x-s,r.y-s],[n,n])}return{options:this.options,rect:e,visual:t}},tooltipAnchor:function(){var t=this.markerBox(),e=this.owner.pane.clipBox();if(!e||e.overlaps(t)){var i,n,s=t.x2+5,r=u;return this.aboveAxis?(i=t.y1,n=c):(i=t.y2,n=l),{point:new C(s,i),align:{horizontal:r,vertical:n}}}},formatValue:function(t){return this.owner.formatPointValue(this,t)},overlapsBox:function(t){return this.markerBox().overlaps(t)},unclipElements:function(){this.label&&(this.label.options.noclip=!0),this.note&&(this.note.options.noclip=!0)},pointData:function(){return{dataItem:this.dataItem,category:this.category,value:this.value,percentage:this.percentage,stackValue:this.stackValue,series:this.series}}});ni.prototype.defaults={vertical:!0,markers:{visible:!0,background:p,size:8,type:d,border:{width:2},opacity:1},labels:{visible:!1,position:Ht,margin:D(3),padding:D(4),animation:{type:Ct,delay:St}},notes:{label:{}},highlight:{markers:{border:{color:"#fff",width:2}},zIndex:s.HIGHLIGHT_ZINDEX},errorBars:{line:{width:1}}},O(ni.prototype,ei),O(ni.prototype,ii);var si=S.extend({init:function(t,e,i){S.fn.init.call(this),this.linePoints=t,this.series=e,this.seriesIx=i},points:function(){return this.toGeometryPoints(this.linePoints)},toGeometryPoints:function(t){for(var e=[],i=0,n=t.length;i<n;i++)t[i]&&!1!==t[i].visible&&e.push(t[i]._childBox.toRect().center());return e},createVisual:function(){var t=this,e=this.series.visual;e?(this.visual=e({points:this.toGeometryPoints(this.linePoints),series:this.series,sender:this.getSender(),createVisual:function(){return t.segmentVisual(),t.visual}}),this.visual&&!b(this.visual.options.zIndex)&&(this.visual.options.zIndex=this.series.zIndex)):this.segmentVisual()},segmentVisual:function(){var t=this.options,e=this.series,i=e.color,n=e._defaults;E(i)&&n&&(i=n.color);var s=st.fromPoints(this.points(),{stroke:{color:i,width:e.width,opacity:e.opacity,dashType:e.dashType},zIndex:e.zIndex});t.closed&&s.close(),this.visual=s},aliasFor:function(t,e){return this.parent.getNearestPoint(e.x,e.y,this.seriesIx)}});T(si,{closed:!1});var ri={calculateStepPoints:function(t){for(var e=this.parent.plotArea.seriesCategoryAxis(this.series).options,i=e.justified,n=e.vertical,s=e.reverse,r=n?f:v,o=n?v:f,a=s?2:1,h=a,l=oi(t[0],r,a,o,h),c=[l],u=1;u<t.length;u++){var p=oi(t[u],r,a,o,h);if(l[r]!==p[r]){var d=new ct;d[r]=l[r],d[o]=p[o],c.push(d,p)}l=p}return i?l!==L(c)&&c.push(l):c.push(oi(L(t),r,a,o,s?1:2)),c}};function oi(t,e,i,n,s){var r=t.box,o=new ct;return o[e]=r[e+i],o[n]=r[n+s],o}var ai=si.extend({points:function(){return this.calculateStepPoints(this.linePoints)}});O(ai.prototype,ri);var hi=si.extend({segmentVisual:function(){var t=this.series,e=t._defaults,i=t.color;E(i)&&e&&(i=e.color);var n=new F(this.options.closed).process(this.points()),s=new st({stroke:{color:i,width:t.width,opacity:t.opacity,dashType:t.dashType},zIndex:t.zIndex});s.segments.push.apply(s.segments,n),this.visual=s}}),li={renderSegments:function(){var t,e=this,i=this.options,n=this.seriesPoints,s=i.series,r=n.length;this._segments=[];for(var o=0;o<r;o++){for(var a=s[o],h=e.sortPoints(n[o]),l=h.length,c=[],u=0;u<l;u++){var p=h[u];p?c.push(p):e.seriesMissingValues(a)!==Mt&&(c.length>1&&(t=e.createSegment(c,a,o,t),e._addSegment(t)),c=[])}c.length>1&&(t=e.createSegment(c,a,o,t),e._addSegment(t))}this.children.unshift.apply(this.children,this._segments)},_addSegment:function(t){this._segments.push(t),t.parent=this},sortPoints:function(t){return t},seriesMissingValues:function(t){var e=t.missingValues;return!e&&this.options.isStacked?Lt:e||Mt},getNearestPoint:function(t,e,i){for(var n,s=new C(t,e),o=this.seriesPoints[i],a=r,h=0;h<o.length;h++){var l=o[h];if(l&&b(l.value)&&null!==l.value&&!1!==l.visible){var c=l.box.center().distanceTo(s);c<a&&(n=l,a=c)}}return n}},ci=rt.extend({setup:function(){this._setEnd(this.options.box.x1)},step:function(t){var i=this.options.box;this._setEnd(e.interpolateValue(i.x1,i.x2,t))},_setEnd:function(t){var e=this.element,i=e.segments,n=i[1].anchor(),s=i[2].anchor();e.suspend(),n.setX(t),e.resume(),s.setX(t)}});function ui(t){for(var e=0;e<t.length;e++)if(b(t[e].zIndex))return!0}T(ci,{duration:St}),ot.current.register("clip",ci);var pi={createAnimation:function(){var t=this.getRoot();if(t&&!1!==(t.options||{}).transitions){var e=t.size(),i=st.fromRect(e.toRect());this.visual.clip(i),this.animation=new ci(i,{box:e}),ui(this.options.series)&&this._setChildrenAnimation(i)}},_setChildrenAnimation:function(t){for(var e=this.animationPoints(),i=0;i<e.length;i++){var n=e[i];n&&n.visual&&b(n.visual.options.zIndex)&&n.visual.clip(t)}}},di=ti.extend({render:function(){ti.fn.render.call(this),this.updateStackRange(),this.renderSegments()},pointType:function(){return ni},createPoint:function(t,e){var i=e.categoryIx,n=e.category,s=e.series,r=e.seriesIx,o=this.seriesMissingValues(s),a=t.valueFields.value;if(!b(a)||null===a){if(o!==Lt)return null;a=0}var h=this.pointOptions(s,r);h=this.evalPointOptions(h,a,n,i,s,r);var l=t.fields.color||s.color;E(s.color)&&(l=h.color);var c=new ni(a,h);return c.color=l,this.append(c),c},plotRange:function(t){var e=this.plotValue(t);if(this.options.isStacked)for(var i=t.categoryIx,n=this.categoryPoints[i],s=0;s<n.length;s++){var r=n[s];if(t===r)break;e+=this.plotValue(r),this.options.isStacked100&&(e=Math.min(e,1))}return[e,e]},createSegment:function(t,e,i){var n=e.style;return new(n===Ft?ai:n===Dt?hi:si)(t,e,i)},animationPoints:function(){for(var t=this.points,e=[],i=0;i<t.length;i++)e.push((t[i]||{}).marker);return e.concat(this._segments)},supportsPointInactiveOpacity:function(){return!1}});O(di.prototype,li,pi);var fi=si.extend({init:function(t,e,i,n,s){si.fn.init.call(this,t,e,i),this.prevSegment=n,this.stackPoints=s},createVisual:function(){var t=this.series,e=t._defaults,i=t.line||{},n=t.color;E(n)&&e&&(n=e.color),this.visual=new at({zIndex:t.zIndex}),this.createFill({fill:{color:n,opacity:t.opacity},stroke:null}),i.width>0&&!1!==i.visible&&this.createStroke({stroke:O({color:n,opacity:t.opacity,lineCap:"butt"},i)})},strokeSegments:function(){var t=this._strokeSegments;return t||(t=this._strokeSegments=this.createStrokeSegments()),t},createStrokeSegments:function(){return this.segmentsFromPoints(this.points())},stackSegments:function(){return this.prevSegment?this.prevSegment.createStackSegments(this.stackPoints):this.createStackSegments(this.stackPoints)},createStackSegments:function(t){return this.segmentsFromPoints(this.toGeometryPoints(t)).reverse()},segmentsFromPoints:function(t){return t.map((function(t){return new lt.Segment(t)}))},createStroke:function(t){var e=new st(t);e.segments.push.apply(e.segments,this.strokeSegments()),this.visual.append(e)},hasStackSegment:function(){return this.prevSegment||this.stackPoints&&this.stackPoints.length},createFill:function(t){var e=this.strokeSegments(),i=e.slice(0),n=this.hasStackSegment();if(n){var s=this.stackSegments();N(i,s)}var r=new st(t);r.segments.push.apply(r.segments,i),!n&&e.length>1&&this.fillToAxes(r),this.visual.append(r)},fillToAxes:function(t){var e=this.parent,i=e.options.invertAxes,n=e.seriesValueAxis(this.series),s=e.categoryAxisCrossingValue(n),r=n.getSlot(s,s,!0),o=this.strokeSegments(),a=o[0].anchor(),h=L(o).anchor(),l=i?r.x1:r.y1;i?t.lineTo(l,h.y).lineTo(l,a.y):t.lineTo(h.x,l).lineTo(a.x,l)}}),vi=fi.extend({createStrokeSegments:function(){return this.segmentsFromPoints(this.calculateStepPoints(this.linePoints))},createStackSegments:function(t){return this.segmentsFromPoints(this.calculateStepPoints(t)).reverse()}});O(vi.prototype,ri);var gi=fi.extend({createStrokeSegments:function(){var t=new F(this.options.closed),e=this.points();return t.process(e)},createStackSegments:function(){for(var t=this.strokeSegments(),e=[],i=t.length-1;i>=0;i--){var n=t[i];e.push(new lt.Segment(n.anchor(),n.controlOut(),n.controlIn()))}return e}}),xi=di.extend({createSegment:function(t,e,i,n){var s,r,o=this.options.isStacked,a=(e.line||{}).style;o&&i>0&&n&&("gap"!==this.seriesMissingValues(e)?(r=n.linePoints,s=n):r=this._gapStackPoints(t,i,a));return new(a===Ft?vi:a===Dt?gi:fi)(t,e,i,s,r)},reflow:function(t){di.fn.reflow.call(this,t);var e=this._stackPoints;if(e)for(var i=0;i<e.length;i++){var n=e[i],s=this.categoryAxis.getSlot(n.categoryIx);n.reflow(s)}},_gapStackPoints:function(t,e,i){var n=this,s=this.seriesPoints,r=t[0].categoryIx,o=t.length;r<0&&(r=0,o--);var a=r+o,h=this.seriesOptions[0]._outOfRangeMinPoint?1:0,l=[];this._stackPoints=this._stackPoints||[];for(var c=r;c<a;c++){var u=c+h,p=e,d=void 0;do{d=s[--p][u]}while(p>0&&!d);if(d)i!==Ft&&c>r&&!s[p][u-1]&&l.push(n._previousSegmentPoint(c,u,u-1,p)),l.push(d),i!==Ft&&c+1<a&&!s[p][u+1]&&l.push(n._previousSegmentPoint(c,u,u+1,p));else{var f=n._createGapStackPoint(c);n._stackPoints.push(f),l.push(f)}}return l},_previousSegmentPoint:function(t,e,i,n){for(var s,r=this.seriesPoints,o=n;o>0&&!s;)s=r[--o][i];return s?s=r[o][e]:(s=this._createGapStackPoint(t),this._stackPoints.push(s)),s},_createGapStackPoint:function(t){var e=this.pointOptions({},0),i=new ni(0,e);return i.categoryIx=t,i.series={},i},seriesMissingValues:function(t){return t.missingValues||Lt},supportsPointInactiveOpacity:function(){return!1}}),mi=i.extend({init:function(){this.axisRanges={}},update:function(t){var e=this.axisRanges;for(var i in t){var n=t[i],s=e[i];e[i]=s=s||{min:r,max:o},s.min=Math.min(s.min,n.min),s.max=Math.max(s.max,n.max)}},reset:function(t){this.axisRanges[t]=void 0},query:function(t){return this.axisRanges[t]}}),yi=S.extend({init:function(t,e,i){S.fn.init.call(this,e),this.textBox=new H(t,this.options,i),this.append(this.textBox)},createVisual:function(){this.textBox.options.noclip=this.options.noclip},reflow:function(t){var e=this.options,i=e.vertical,n=e.aboveAxis,s=this.children[0],r=s.options,o=s.box,a=s.options.padding,p=t;r.align=i?h:u,r.vAlign=i?l:h,e.position===Ye?i?(r.vAlign=l,!n&&o.height()<t.height()&&(r.vAlign=c)):r.align=n?g:u:e.position===h?(r.vAlign=h,r.align=h):e.position===qe?i?r.vAlign=n?c:l:r.align=n?u:g:e.position===Ue&&(i?p=n?new k(t.x1,t.y1-o.height(),t.x2,t.y1):new k(t.x1,t.y2,t.x2,t.y2+o.height()):(r.align=h,p=n?new k(t.x2,t.y1,t.x2+o.width(),t.y2):new k(t.x1-o.width(),t.y1,t.x1,t.y2))),e.rotation||(i?a.left=a.right=(p.width()-s.contentBox.width())/2:a.top=a.bottom=(p.height()-s.contentBox.height())/2),s.reflow(p)},alignToClipBox:function(t){var e=this.options.vertical?v:f,i=e+"1",n=e+"2",s=this.children[0],r=this.parent.box;if(r[i]<t[i]||t[n]<r[n]){var o=s.paddingBox.clone();o[i]=Math.max(r[i],t[i]),o[n]=Math.min(r[n],t[n]),this.reflow(o)}}});function _i(t){var e=t.overlay;return e&&e.gradient&&"none"!==e.gradient}T(yi,{position:Ue,margin:D(3),padding:D(4),color:x,background:"",border:{width:1,color:""},aboveAxis:!0,vertical:!1,animation:{type:Ct,delay:St},zIndex:2});var bi=S.extend({init:function(t,e){S.fn.init.call(this),this.options=e,this.color=e.color||p,this.aboveAxis=R(this.options.aboveAxis,!0),this.value=t},render:function(){this._rendered||(this._rendered=!0,this.createLabel(),this.createNote(),this.errorBar&&this.append(this.errorBar))},createLabel:function(){var t=this.options,e=t.labels;if(e.visible){var i,n=this.pointData(),s=B(e);i=s?s(n):this.formatValue(e.format),this.label=new yi(i,O({vertical:t.vertical},e),n),this.append(this.label)}},formatValue:function(t){return this.owner.formatPointValue(this,t)},reflow:function(t){this.render();var e=this.label;if(this.box=t,e&&(e.options.aboveAxis=this.aboveAxis,e.reflow(t)),this.note&&this.note.reflow(t),this.errorBars)for(var i=0;i<this.errorBars.length;i++)this.errorBars[i].reflow(t)},createVisual:function(){var t=this,e=this.box,i=this.options,n=i.visual;if(!1!==this.visible)if(S.fn.createVisual.call(this),n){var s=this.rectVisual=n({category:this.category,dataItem:this.dataItem,value:this.value,sender:this.getSender(),series:this.series,percentage:this.percentage,stackValue:this.stackValue,runningTotal:this.runningTotal,total:this.total,rect:e.toRect(),createVisual:function(){var e=new at;return t.createRect(e),e},options:i});s&&this.visual.append(s)}else e.width()>0&&e.height()>0&&this.createRect(this.visual)},createRect:function(t){var e=this.options,i=e.border,n=b(i.opacity)?i.opacity:e.opacity,s=this.box.toRect();s.size.width=Math.round(s.size.width);var r=this.rectVisual=st.fromRect(s,{fill:{color:this.color,opacity:e.opacity},stroke:{color:this.getBorderColor(),width:i.width,opacity:n,dashType:i.dashType}}),o=this.box.width(),a=this.box.height();if((e.vertical?o:a)>6&&(P(r),(o<1||a<1)&&(r.options.stroke.lineJoin="round")),t.append(r),_i(e)){var h=this.createGradientOverlay(r,{baseColor:this.color},O({end:e.vertical?void 0:[0,1]},e.overlay));t.append(h)}},createHighlight:function(t){var e=st.fromRect(this.box.toRect(),t);return P(e)},highlightVisual:function(){return this.rectVisual},highlightVisualArgs:function(){return{options:this.options,rect:this.box.toRect(),visual:this.rectVisual}},getBorderColor:function(){var t=this.color,e=this.options.border,i=e._brightness||kt,n=e.color;return b(n)||(n=new ht(t).brightness(i).toHex()),n},tooltipAnchor:function(){var t,e,i=this,n=i.options,s=i.box,r=i.aboveAxis,o=this.owner.pane.clipBox()||s,a=u,h=l;if(n.vertical)t=Math.min(s.x2,o.x2)+5,r?e=Math.max(s.y1,o.y1):(e=Math.min(s.y2,o.y2),h=c);else{var p=Math.max(s.x1,o.x1),d=Math.min(s.x2,o.x2);n.isStacked?(h=c,r?(a=g,t=d):t=p,e=Math.max(s.y1,o.y1)-5):(r?t=d+5:(t=p-5,a=g),e=Math.max(s.y1,o.y1))}return{point:new C(t,e),align:{horizontal:a,vertical:h}}},overlapsBox:function(t){return this.box.overlaps(t)},pointData:function(){return{dataItem:this.dataItem,category:this.category,value:this.value,percentage:this.percentage,stackValue:this.stackValue,runningTotal:this.runningTotal,total:this.total,series:this.series}}});function wi(t,e){t.forEach(e)}function Ai(t,e){for(var i=t.length,n=i-1;n>=0;n--)e(t[n],n-i-1)}O(bi.prototype,ei),O(bi.prototype,ii),bi.prototype.defaults={border:{width:1},vertical:!0,overlay:{gradient:"glass"},labels:{visible:!1,format:"{0}"},opacity:1,notes:{label:{}}};var Si=S.extend({init:function(t){S.fn.init.call(this,t),this.forEach=t.rtl?Ai:wi},reflow:function(t){var e=this.options,i=e.vertical,n=e.gap,s=e.spacing,r=this.children,o=r.length,a=i?v:f,h=o+n+s*(o-1),l=(i?t.height():t.width())/h,c=t[a+1]+l*(n/2);this.forEach(r,(function(e,i){var n=(e.box||t).clone();n[a+1]=c,n[a+2]=c+l,e.reflow(n),i<o-1&&(c+=l*s),c+=l}))}});T(Si,{vertical:!1,gap:0,spacing:0});var Ci=S.extend({reflow:function(t){for(var e=this.options.vertical?f:v,i=this.children,n=i.length,s=this.box=new k,r=0;r<n;r++){var o=i[r];if(!1!==o.visible){var a=o.box.clone();a.snapTo(t,e),0===r&&(s=this.box=a.clone()),o.reflow(a),s.wrap(a)}}}});T(Ci,{vertical:!0});var ki=ti.extend({render:function(){ti.fn.render.call(this),this.updateStackRange()},pointType:function(){return bi},clusterType:function(){return Si},stackType:function(){return Ci},stackLimits:function(t,e){return ti.fn.stackLimits.call(this,t,e)},createPoint:function(t,e){var i=e.categoryIx,n=e.category,s=e.series,r=e.seriesIx,o=this.options,a=this.children,h=o.isStacked,l=this.pointValue(t),c=this.pointOptions(s,r),u=c.labels;h&&u.position===Ue&&(u.position=Ye),c.isStacked=h;var p=t.fields.color||s.color;l<0&&c.negativeColor&&(p=c.negativeColor),c=this.evalPointOptions(c,l,n,i,s,r),E(s.color)&&(p=c.color);var d=new(this.pointType())(l,c);d.color=p;var f=a[i];f||(f=new(this.clusterType())({vertical:o.invertAxes,gap:o.gap,spacing:o.spacing,rtl:!o.invertAxes&&(this.chartService||{}).rtl}),this.append(f));h?this.getStackWrap(s,f).append(d):f.append(d);return d},getStackWrap:function(t,e){var i,n=t.stack,r=n&&n.group||n,o=e.children;if(typeof r===s.STRING){for(var a=0;a<o.length;a++)if(o[a]._stackGroup===r){i=o[a];break}}else i=o[0];i||((i=new(this.stackType())({vertical:!this.options.invertAxes}))._stackGroup=r,e.append(i));return i},categorySlot:function(t,e,i){var n=this.options,s=t.getSlot(e),r=i.startValue();if(n.isStacked){var o=i.getSlot(r,r,!0),a=n.invertAxes?f:v;s[a+1]=s[a+2]=o[a+1]}return s},reflowCategories:function(t){for(var e=this.children,i=e.length,n=0;n<i;n++)e[n].reflow(t[n])},createAnimation:function(){this._setAnimationOptions(),ti.fn.createAnimation.call(this),ui(this.options.series)&&this._setChildrenAnimation()},_setChildrenAnimation:function(){for(var t=this.points,e=0;e<t.length;e++){var i=t[e],n=i.visual;n&&b(n.options.zIndex)&&(i.options.animation=this.options.animation,i.createAnimation())}},_setAnimationOptions:function(){var t,e=this.options,i=e.animation||{};if(e.isStacked){var n=this.seriesValueAxis(e.series[0]);t=n.getSlot(n.startValue())}else t=this.categoryAxis.getSlot(0);i.origin=new ct(t.x1,t.y1),i.vertical=!e.invertAxes}});T(ki,{animation:{type:Gt}});var Pi=S.extend({init:function(t,e){S.fn.init.call(this,e),this.value=t},reflow:function(t){var e=this,i=e.options,n=e.value,s=e.owner.seriesValueAxis(i),r=s.getSlot(n.open,n.close),o=s.getSlot(n.low,n.high);r.x1=o.x1=t.x1,r.x2=o.x2=t.x2,this.realBody=r;var a=o.center().x,h=[];h.push([[a,o.y1],[a,r.y1]]),h.push([[a,r.y2],[a,o.y2]]),this.lines=h,this.box=o.clone().wrap(r),this._rendered||(this._rendered=!0,this.createNote()),this.reflowNote()},reflowNote:function(){this.note&&this.note.reflow(this.box)},createVisual:function(){S.fn.createVisual.call(this),this._mainVisual=this.mainVisual(this.options),this.visual.append(this._mainVisual),this.createOverlay()},mainVisual:function(t){var e=new at;return this.createBody(e,t),this.createLines(e,t),e},createBody:function(t,e){var i=st.fromRect(this.realBody.toRect(),{fill:{color:this.color,opacity:e.opacity},stroke:null});e.border.width>0&&i.options.set("stroke",{color:this.getBorderColor(),width:e.border.width,dashType:e.border.dashType,opacity:R(e.border.opacity,e.opacity)}),P(i),t.append(i),_i(e)&&t.append(this.createGradientOverlay(i,{baseColor:this.color},O({end:e.vertical?void 0:[0,1]},e.overlay)))},createLines:function(t,e){this.drawLines(t,e,this.lines,e.line)},drawLines:function(t,e,i,n){if(i)for(var s={stroke:{color:n.color||this.color,opacity:R(n.opacity,e.opacity),width:n.width,dashType:n.dashType,lineCap:"butt"}},r=0;r<i.length;r++){var o=st.fromPoints(i[r],s);P(o),t.append(o)}},getBorderColor:function(){var t=this.options.border,e=t.color;return b(e)||(e=new ht(this.color).brightness(t._brightness).toHex()),e},createOverlay:function(){var t=st.fromRect(this.box.toRect(),{fill:{color:p,opacity:0},stroke:null});this.visual.append(t)},createHighlight:function(){var t=this.options.highlight,e=this.color;this.color=t.color||this.color;var i=this.mainVisual(O({},this.options,{line:{color:this.getBorderColor()}},t));return this.color=e,i},highlightVisual:function(){return this._mainVisual},highlightVisualArgs:function(){return{options:this.options,rect:this.box.toRect(),visual:this._mainVisual}},tooltipAnchor:function(){var t=this.box,e=this.owner.pane.clipBox()||t;return{point:new C(t.x2+5,Math.max(t.y1,e.y1)+5),align:{horizontal:u,vertical:l}}},formatValue:function(t){return this.owner.formatPointValue(this,t)},overlapsBox:function(t){return this.box.overlaps(t)}});function Ti(t){return gt(t)===t.length}T(Pi,{vertical:!0,border:{_brightness:.8},line:{width:2},overlay:{gradient:"glass"},tooltip:{format:"<table><tr><th colspan='2'>{4:d}</th></tr><tr><td>Open:</td><td>{0:C}</td></tr><tr><td>High:</td><td>{1:C}</td></tr><tr><td>Low:</td><td>{2:C}</td></tr><tr><td>Close:</td><td>{3:C}</td></tr></table>"},highlight:{opacity:1,border:{width:1,opacity:1},line:{width:1,opacity:1}},notes:{visible:!0,label:{}}}),O(Pi.prototype,ei),O(Pi.prototype,ii);var Ii=ti.extend({reflowCategories:function(t){for(var e=this.children,i=e.length,n=0;n<i;n++)e[n].reflow(t[n])},addValue:function(t,e){var i,n=e.categoryIx,s=e.category,r=e.series,o=e.seriesIx,a=this.children,h=this.options,l=t.valueFields,c=Ti(this.splitValue(l)),u=r.data[n],p=this.categoryPoints[n];p||(this.categoryPoints[n]=p=[]),c&&(i=this.createPoint(t,e));var d=a[n];d||(d=new Si({vertical:h.invertAxes,gap:h.gap,spacing:h.spacing,rtl:!h.invertAxes&&(this.chartService||{}).rtl}),this.append(d)),i&&(this.updateRange(l,e),d.append(i),i.categoryIx=n,i.category=s,i.series=r,i.seriesIx=o,i.owner=this,i.dataItem=u,i.noteText=t.fields.noteText),this.points.push(i),p.push(i)},pointType:function(){return Pi},createPoint:function(t,e){var i=e.categoryIx,n=e.category,s=e.series,r=e.seriesIx,o=this.pointType(),a=t.valueFields,h=O({},s),l=t.fields.color||s.color;h=this.evalPointOptions(h,a,n,i,s,r),s.type===Ut&&a.open>a.close&&(l=t.fields.downColor||s.downColor||s.color),E(s.color)&&(l=h.color),h.vertical=!this.options.invertAxes;var c=new o(a,h);return c.color=l,c},splitValue:function(t){return[t.low,t.open,t.close,t.high]},updateRange:function(t,e){var i=e.series.axis,n=this.splitValue(t),s=this.valueAxisRanges[i];s=this.valueAxisRanges[i]=s||{min:r,max:o},s=this.valueAxisRanges[i]={min:Math.min.apply(Math,n.concat([s.min])),max:Math.max.apply(Math,n.concat([s.max]))}},formatPointValue:function(t,e){var i=t.value;return this.chartService.format.auto(e,i.open,i.high,i.low,i.close,t.category)},animationPoints:function(){return this.points}});O(Ii.prototype,pi);var Ei=Pi.extend({init:function(t,e){Pi.fn.init.call(this,t,e),this.createNote()},reflow:function(t){var e,i,n=this,s=n.options,r=n.value,o=n.owner.seriesValueAxis(s);this.boxSlot=i=o.getSlot(r.q1,r.q3),this.realBody=i,this.reflowBoxSlot(t),this.whiskerSlot=e=o.getSlot(r.lower,r.upper),this.reflowWhiskerSlot(t);var a=o.getSlot(r.median);if(r.mean){var h=o.getSlot(r.mean);this.meanPoints=this.calcMeanPoints(t,h)}this.whiskerPoints=this.calcWhiskerPoints(i,e),this.medianPoints=this.calcMedianPoints(t,a),this.box=e.clone().wrap(i),this.reflowNote()},reflowBoxSlot:function(t){this.boxSlot.x1=t.x1,this.boxSlot.x2=t.x2},reflowWhiskerSlot:function(t){this.whiskerSlot.x1=t.x1,this.whiskerSlot.x2=t.x2},calcMeanPoints:function(t,e){return[[[t.x1,e.y1],[t.x2,e.y1]]]},calcWhiskerPoints:function(t,e){var i=e.center().x;return[[[i-5,e.y1],[i+5,e.y1],[i,e.y1],[i,t.y1]],[[i-5,e.y2],[i+5,e.y2],[i,e.y2],[i,t.y2]]]},calcMedianPoints:function(t,e){return[[[t.x1,e.y1],[t.x2,e.y1]]]},renderOutliers:function(t){for(var e=this.value,i=e.outliers||[],n=3*Math.abs(e.q3-e.q1),s=[],r=t.markers||{},o=0;o<i.length;o++){var a=i[o];r=a<e.q3+n&&a>e.q1-n?t.outliers:t.extremes;var h=O({},r.border);b(h.color)||(b(this.color)?h.color=this.color:h.color=new ht(r.background).brightness(kt).toHex());var l=new z({type:r.type,width:r.size,height:r.size,rotation:r.rotation,background:r.background,border:h,opacity:r.opacity});l.value=a,s.push(l)}return this.reflowOutliers(s),s},reflowOutliers:function(t){for(var e=this,i=this.owner.seriesValueAxis(this.options),n=this.box.center(),s=0;s<t.length;s++){var r=t[s].value,o=i.getSlot(r);e.options.vertical?o.move(n.x):o.move(void 0,n.y),e.box=e.box.wrap(o),t[s].reflow(o)}},mainVisual:function(t){for(var e=Pi.fn.mainVisual.call(this,t),i=this.renderOutliers(t),n=0;n<i.length;n++){var s=i[n].getElement();s&&e.append(s)}return e},createLines:function(t,e){this.drawLines(t,e,this.whiskerPoints,e.whiskers),this.drawLines(t,e,this.medianPoints,e.median),this.drawLines(t,e,this.meanPoints,e.mean)},getBorderColor:function(){return(this.options.border||{}).color?this.options.border.color:this.color?this.color:Pi.fn.getBorderColor.call(this)}});T(Ei,{border:{_brightness:.8},line:{width:2},median:{color:"#f6f6f6"},mean:{width:2,dashType:"dash",color:"#f6f6f6"},overlay:{gradient:"glass"},tooltip:{format:"<table><tr><th colspan='2'>{6:d}</th></tr><tr><td>Lower:</td><td>{0:C}</td></tr><tr><td>Q1:</td><td>{1:C}</td></tr><tr><td>Median:</td><td>{2:C}</td></tr><tr><td>Mean:</td><td>{5:C}</td></tr><tr><td>Q3:</td><td>{3:C}</td></tr><tr><td>Upper:</td><td>{4:C}</td></tr></table>"},highlight:{opacity:1,border:{width:1,opacity:1},line:{width:1,opacity:1}},notes:{visible:!0,label:{}},outliers:{visible:!0,size:8,type:s.CROSS,background:p,border:{width:2,opacity:1},opacity:0},extremes:{visible:!0,size:8,type:d,background:p,border:{width:2,opacity:1},opacity:0}}),O(Ei.prototype,ei);var Ri=Ei.extend({reflowBoxSlot:function(t){this.boxSlot.y1=t.y1,this.boxSlot.y2=t.y2},reflowWhiskerSlot:function(t){this.whiskerSlot.y1=t.y1,this.whiskerSlot.y2=t.y2},calcMeanPoints:function(t,e){return[[[e.x1,t.y1],[e.x1,t.y2]]]},calcWhiskerPoints:function(t,e){var i=e.center().y;return[[[e.x1,i-5],[e.x1,i+5],[e.x1,i],[t.x1,i]],[[e.x2,i-5],[e.x2,i+5],[e.x2,i],[t.x2,i]]]},calcMedianPoints:function(t,e){return[[[e.x1,t.y1],[e.x1,t.y2]]]}}),Vi=Ii.extend({addValue:function(t,e){var i,n=e.categoryIx,s=e.category,r=e.series,o=e.seriesIx,a=this.children,h=this.options,l=t.valueFields,c=Ti(this.splitValue(l)),u=r.data[n],p=this.categoryPoints[n];p||(this.categoryPoints[n]=p=[]),c&&(i=this.createPoint(t,e));var d=a[n];d||(d=new Si({vertical:h.invertAxes,gap:h.gap,spacing:h.spacing,rtl:!h.invertAxes&&(this.chartService||{}).rtl}),this.append(d)),i&&(this.updateRange(l,e),d.append(i),i.categoryIx=n,i.category=s,i.series=r,i.seriesIx=o,i.owner=this,i.dataItem=u),this.points.push(i),p.push(i)},pointType:function(){return this.options.invertAxes?Ri:Ei},splitValue:function(t){return[t.lower,t.q1,t.median,t.q3,t.upper]},updateRange:function(t,e){var i=e.series.axis,n=this.valueAxisRanges[i],s=this.splitValue(t).concat(this.filterOutliers(t.outliers));b(t.mean)&&(s=s.concat(t.mean)),n=this.valueAxisRanges[i]=n||{min:r,max:o},n=this.valueAxisRanges[i]={min:Math.min.apply(Math,s.concat([n.min])),max:Math.max.apply(Math,s.concat([n.max]))}},formatPointValue:function(t,e){var i=t.value;return this.chartService.format.auto(e,i.lower,i.q1,i.median,i.q3,i.upper,i.mean,t.category)},filterOutliers:function(t){for(var e=(t||[]).length,i=[],n=0;n<e;n++){var s=t[n];b(s)&&null!==s&&i.push(s)}return i},supportsPointInactiveOpacity:function(){return!1}}),Oi=Ke.extend({getAxis:function(){var t=this.chart.seriesAxes(this.series);return this.isVertical?t.y:t.x}});function Li(t){return b(t)&&null!==t}var Mi=S.extend({init:function(t,e){S.fn.init.call(this,e),this.plotArea=t,this.chartService=t.chartService,this._initFields(),this.render()},_initFields:function(){this.xAxisRanges={},this.yAxisRanges={},this.points=[],this.seriesPoints=[],this.seriesOptions=[],this._evalSeries=[]},render:function(){this.traverseDataPoints(this.addValue.bind(this))},addErrorBar:function(t,e,i){var s,r=t.value[e],o=e+"Value",a=e+"ErrorLow",h=e+"ErrorHigh",l=i.seriesIx,c=i.series,u=t.options.errorBars,p=i[a],d=i[h];n(r)&&(n(p)&&n(d)&&(s={low:p,high:d}),u&&b(u[o])&&(this.seriesErrorRanges=this.seriesErrorRanges||{x:[],y:[]},this.seriesErrorRanges[e][l]=this.seriesErrorRanges[e][l]||new wt(u[o],c,e),s=this.seriesErrorRanges[e][l].getErrorRange(r,u[o])),s&&this.addPointErrorBar(s,t,e))},addPointErrorBar:function(t,e,i){var n=t.low,s=t.high,r=e.series,o=e.options.errorBars,a=i===v,h={};e[i+"Low"]=n,e[i+"High"]=s,e.errorBars=e.errorBars||[];var l=new Oi(n,s,a,this,r,o);e.errorBars.push(l),e.append(l),h[i]=n,this.updateRange(h,r),h[i]=s,this.updateRange(h,r)},addValue:function(e,i){var n,s=e.x,r=e.y,o=i.seriesIx,a=this.options.series[o],h=this.seriesMissingValues(a),l=this.seriesPoints[o],c=e;Li(s)&&Li(r)||(c=this.createMissingValue(c,h)),c&&((n=this.createPoint(c,i))&&(t.extend(n,i),this.addErrorBar(n,f,i),this.addErrorBar(n,v,i)),this.updateRange(c,i.series)),this.points.push(n),l.push(n)},seriesMissingValues:function(t){return t.missingValues},createMissingValue:function(){},updateRange:function(t,e){var i=this.chartService.intl,n=e.xAxis,s=e.yAxis,a=t.x,h=t.y,l=this.xAxisRanges[n],c=this.yAxisRanges[s];Li(a)&&(l=this.xAxisRanges[n]=l||{min:r,max:o},G(a)&&(a=X(i,a)),l.min=Math.min(l.min,a),l.max=Math.max(l.max,a)),Li(h)&&(c=this.yAxisRanges[s]=c||{min:r,max:o},G(h)&&(h=X(i,h)),c.min=Math.min(c.min,h),c.max=Math.max(c.max,h))},evalPointOptions:function(t,e,i){var n=i.series,s=i.seriesIx,r={defaults:n._defaults,excluded:["data","tooltip","content","template","visual","toggle","_outOfRangeMinPoint","_outOfRangeMaxPoint"]},o=this._evalSeries[s];b(o)||(this._evalSeries[s]=o=$e(t,{},r,!0));var a=t;return o&&$e(a=O({},t),{value:e,series:n,dataItem:i.dataItem},r),a},pointType:function(){return ni},pointOptions:function(t,e){var i=this.seriesOptions[e];if(!i){var n=this.pointType().prototype.defaults;this.seriesOptions[e]=i=O({},n,{markers:{opacity:t.opacity},tooltip:{format:this.options.tooltip.format},labels:{format:this.options.labels.format}},t)}return i},createPoint:function(t,e){var i=e.series,n=this.pointOptions(i,e.seriesIx),s=e.color||i.color;n=this.evalPointOptions(n,t,e),E(i.color)&&(s=n.color);var r=new ni(t,n);return r.color=s,this.append(r),r},seriesAxes:function(t){var e=t.xAxis,i=t.yAxis,n=this.plotArea,s=e?n.namedXAxes[e]:n.axisX,r=i?n.namedYAxes[i]:n.axisY;if(!s)throw new Error("Unable to locate X axis with name "+e);if(!r)throw new Error("Unable to locate Y axis with name "+i);return{x:s,y:r}},reflow:function(t){var e=this,i=this.points,n=!this.options.clip,s=0;this.traverseDataPoints((function(t,r){var o=i[s++],a=e.seriesAxes(r.series),h=a.x.getSlot(t.x,t.x,n),l=a.y.getSlot(t.y,t.y,n);if(o)if(h&&l){var c=e.pointSlot(h,l);o.reflow(c)}else o.visible=!1})),this.box=t},pointSlot:function(t,e){return new k(t.x1,e.y1,t.x2,e.y2)},traverseDataPoints:function(t){for(var e=this.options.series,i=this.seriesPoints,n=0;n<e.length;n++){var s=e[n];i[n]||(i[n]=[]);for(var r=0;r<s.data.length;r++){var o=this._bindPoint(s,n,r),a=o.valueFields,h=o.fields;t(a,O({pointIx:r,series:s,seriesIx:n,dataItem:s.data[r],owner:this},h))}}},formatPointValue:function(t,e){var i=t.value;return this.chartService.format.auto(e,i.x,i.y)},animationPoints:function(){for(var t=this.points,e=[],i=0;i<t.length;i++)e.push((t[i]||{}).marker);return e}});T(Mi,{series:[],tooltip:{format:"{0}, {1}"},labels:{format:"{0}, {1}"},clip:!0}),O(Mi.prototype,pi,{_bindPoint:ti.prototype._bindPoint});var Bi=ni.extend({init:function(t,e){ni.fn.init.call(this,t,e),this.category=t.category},createHighlight:function(){var t=this.options.highlight,e=t.border,i=this.options.markers,n=this.box.center(),s=(i.size+i.border.width+e.width)/2,r=new at,o=new nt.Circle(new lt.Circle([n.x,n.y+s/5+e.width/2],s+e.width/2),{stroke:{color:"none"},fill:this.createGradient({gradient:"bubbleShadow",color:i.background,stops:[{offset:0,color:i.background,opacity:.3},{offset:1,color:i.background,opacity:0}]})}),a=new nt.Circle(new lt.Circle([n.x,n.y],s),{stroke:{color:e.color||new ht(i.background).brightness(kt).toHex(),width:e.width,opacity:e.opacity},fill:{color:i.background,opacity:t.opacity}});return r.append(o,a),r}});Bi.prototype.defaults=O({},Bi.prototype.defaults,{labels:{position:h},highlight:{opacity:1,border:{color:"#fff",width:2,opacity:1}}}),Bi.prototype.defaults.highlight.zIndex=void 0;var Hi=Mi.extend({_initFields:function(){this._maxSize=o,Mi.fn._initFields.call(this)},addValue:function(t,e){null!==t.size&&(t.size>0||t.size<0&&e.series.negativeValues.visible)?(this._maxSize=Math.max(this._maxSize,Math.abs(t.size)),Mi.fn.addValue.call(this,t,e)):(this.points.push(null),this.seriesPoints[e.seriesIx].push(null))},reflow:function(t){this.updateBubblesSize(t),Mi.fn.reflow.call(this,t)},pointType:function(){return Bi},createPoint:function(t,e){var i=e.series,n=i.data.length,s=e.pointIx*(St/n),r={delay:s,duration:St-s,type:Yt},o=e.color||i.color;t.size<0&&i.negativeValues.visible&&(o=R(i.negativeValues.color,o));var a=O({labels:{animation:{delay:s,duration:St-s}}},this.pointOptions(i,e.seriesIx),{markers:{type:d,border:i.border,opacity:i.opacity,animation:r}});a=this.evalPointOptions(a,t,e),E(i.color)&&(o=a.color),a.markers.background=o;var h=new Bi(t,a);return h.color=o,this.append(h),h},updateBubblesSize:function(t){for(var e=this.options.series,i=Math.min(t.width(),t.height()),n=0;n<e.length;n++)for(var s=e[n],r=this.seriesPoints[n],o=(s.minSize||Math.max(.02*i,10))/2,a=(s.maxSize||.2*i)/2,h=Math.PI*o*o,l=(Math.PI*a*a-h)/this._maxSize,c=0;c<r.length;c++){var u=r[c];if(u){var p=Math.abs(u.value.size)*l,d=Math.sqrt((h+p)/Math.PI),f=R(u.options.zIndex,0)+(1-d/a);O(u.options,{zIndex:f,markers:{size:2*d,zIndex:f},labels:{zIndex:f+1}})}}},formatPointValue:function(t,e){var i=t.value;return this.chartService.format.auto(e,i.x,i.y,i.size,t.category)},createAnimation:function(){},createVisual:function(){}});T(Hi,{tooltip:{format:"{3}"},labels:{format:"{3}"}});var zi=z.extend({});O(zi.prototype,ei);var Di=S.extend({init:function(t,e){S.fn.init.call(this,e),this.aboveAxis=this.options.aboveAxis,this.color=e.color||p,this.value=t},render:function(){var t=this.options;this._rendered||(this._rendered=!0,b(this.value.target)&&(this.target=new zi({type:t.target.shape,background:t.target.color||this.color,opacity:t.opacity,zIndex:t.zIndex,border:t.target.border,vAlign:l,align:g}),this.target.value=this.value,this.target.dataItem=this.dataItem,this.target.series=this.series,this.append(this.target)),this.createLabel(),this.createNote())},createLabel:function(){var t=this.options.labels;if(t.visible){var e,i=this.pointData(),n=B(t);e=n?n(i):this.formatValue(t.format),this.label=new yi(e,t,i),this.append(this.label)}},reflow:function(t){this.render();var e=this,i=e.options,n=e.target,s=e.owner,r=i.invertAxes,o=s.seriesValueAxis(this.options),a=s.categorySlot(s.categoryAxis,i.categoryIx,o),h=o.getSlot(this.value.target),l=r?h:a,c=r?a:h;if(n){var u=new k(l.x1,c.y1,l.x2,c.y2);n.options.height=r?u.height():i.target.line.width,n.options.width=r?i.target.line.width:u.width(),n.reflow(u)}var p=this.label;p&&(p.options.aboveAxis=this.aboveAxis,p.reflow(t)),this.note&&this.note.reflow(t),this.box=t},createVisual:function(){S.fn.createVisual.call(this);var t=this.options,e=st.fromRect(this.box.toRect(),{fill:{color:this.color,opacity:t.opacity},stroke:null});t.border.width>0&&e.options.set("stroke",{color:t.border.color||this.color,width:t.border.width,dashType:t.border.dashType,opacity:R(t.border.opacity,t.opacity)}),this.bodyVisual=e,P(e),this.visual.append(e)},createAnimation:function(){this.bodyVisual&&(this.animation=rt.create(this.bodyVisual,this.options.animation))},createHighlight:function(t){return st.fromRect(this.box.toRect(),t)},highlightVisual:function(){return this.bodyVisual},highlightVisualArgs:function(){return{rect:this.box.toRect(),visual:this.bodyVisual,options:this.options}},formatValue:function(t){return this.owner.formatPointValue(this,t)},pointData:function(){return{dataItem:this.dataItem,category:this.category,value:this.value,series:this.series}},overlapsBox:function(t){return this.box.overlaps(t)}});Di.prototype.tooltipAnchor=bi.prototype.tooltipAnchor,T(Di,{border:{width:1},vertical:!1,opacity:1,target:{shape:"",border:{width:0,color:"green"},line:{width:2}},labels:{visible:!1},tooltip:{format:"Current: {0}<br />Target: {1}"},notes:{label:{}}}),O(Di.prototype,ei),O(Di.prototype,ii);var Fi=ti.extend({init:function(t,e){!function(t){for(var e=t.series,i=0;i<e.length;i++){var n=e[i],s=n.data;!s||A(s[0])||V(s[0])||(n.data=[s])}}(e),ti.fn.init.call(this,t,e)},reflowCategories:function(t){for(var e=this.children,i=e.length,n=0;n<i;n++)e[n].reflow(t[n])},plotRange:function(t){var e=t.series,i=this.seriesValueAxis(e),n=this.categoryAxisCrossingValue(i);return[n,t.value.current||n]},createPoint:function(t,e){var i=e.categoryIx,n=e.category,s=e.series,r=e.seriesIx,o=this.options,a=this.children,h=t.valueFields,l=O({vertical:!o.invertAxes,overlay:s.overlay,categoryIx:i,invertAxes:o.invertAxes},s),c=t.fields.color||s.color;l=this.evalPointOptions(l,h,n,i,s,r),E(s.color)&&(c=l.color);var u=new Di(h,l);u.color=c;var p=a[i];return p||(p=new Si({vertical:o.invertAxes,gap:o.gap,spacing:o.spacing,rtl:!o.invertAxes&&(this.chartService||{}).rtl}),this.append(p)),p.append(u),u},updateRange:function(t,e){var i=t.current,n=t.target,s=e.series.axis,a=this.valueAxisRanges[s];b(i)&&!isNaN(i)&&b(n&&!isNaN(n))&&((a=this.valueAxisRanges[s]=a||{min:r,max:o}).min=Math.min(a.min,i,n),a.max=Math.max(a.max,i,n))},formatPointValue:function(t,e){return this.chartService.format.auto(e,t.value.current,t.value.target)},pointValue:function(t){return t.valueFields.current},aboveAxis:function(t){return t.value.current>0},createAnimation:function(){var t=this.points;this._setAnimationOptions();for(var e=0;e<t.length;e++){var i=t[e];i.options.animation=this.options.animation,i.createAnimation()}}});Fi.prototype._setAnimationOptions=ki.prototype._setAnimationOptions,T(Fi,{animation:{type:Gt}});var Ni=i.extend({init:function(t,e){this.chartService=t,this.options=O({},this.options,e)},getStyle:function(t,e){var i=t.background,n=t.border.color;if(e){var s=e.color||e.options.color;i=R(i,s),n=R(n,s)}var r=D(t.padding||{},"auto");return{backgroundColor:i,borderColor:n,font:t.font,color:t.color,opacity:t.opacity,borderWidth:Y(t.border.width),paddingTop:Y(r.top),paddingBottom:Y(r.bottom),paddingLeft:Y(r.left),paddingRight:Y(r.right)}},show:function(t,e,i){t.format=e.format;var n=this.getStyle(e,i);t.style=n;var s=new ht(n.backgroundColor);b(e.color)||s.isDark()||(t.className="k-chart-tooltip-inverse"),this.chartService.notify(De,t),this.visible=!0},hide:function(){this.chartService&&this.chartService.notify(Fe),this.visible=!1},destroy:function(){delete this.chartService}});T(Ni,{border:{width:1},opacity:1});var Gi=Ni.extend({init:function(t,e,i){Ni.fn.init.call(this,t,i),this.crosshair=e,this.formatService=t.format,this.initAxisName()},initAxisName:function(){var t,e=this.crosshair.axis;t=e.plotArea.categoryAxis?e.getCategory?"categoryAxis":"valueAxis":e.options.vertical?"yAxis":"xAxis",this.axisName=t},showAt:function(t){var e=this.crosshair.axis,i=this.options,n=e[i.stickyMode?"getCategory":"getValue"](t),s=n;i.format?s=this.formatService.auto(i.format,n):e.options.type===m&&(s=this.formatService.auto(e.options.labels.dateFormats[e.options.baseUnit],n)),this.show({point:t,anchor:this.getAnchor(),crosshair:this.crosshair,value:s,axisName:this.axisName,axisIndex:this.crosshair.axis.axisIndex},this.options)},hide:function(){this.chartService.notify(Fe,{crosshair:this.crosshair,axisName:this.axisName,axisIndex:this.crosshair.axis.axisIndex})},getAnchor:function(){var t,e,i,n=this.crosshair,s=this.options,r=s.position,o=s.padding,a=!n.axis.options.vertical,p=n.line.bbox();return a?(t=h,r===c?(e=l,i=p.bottomLeft().translate(0,o)):(e=c,i=p.topLeft().translate(0,-o))):(e=h,r===u?(t=g,i=p.topLeft().translate(-o,0)):(t=u,i=p.topRight().translate(o,0))),{point:i,align:{horizontal:t,vertical:e}}}});T(Gi,{padding:10});var Xi=S.extend({init:function(t,e,i){S.fn.init.call(this,i),this.axis=e,this.stickyMode=e instanceof q;var n=this.options.tooltip;n.visible&&(this.tooltip=new Gi(t,this,O({},n,{stickyMode:this.stickyMode})))},showAt:function(t){this.point=t,this.moveLine(),this.line.visible(!0),this.tooltip&&this.tooltip.showAt(t)},hide:function(){this.line.visible(!1),this.tooltip&&this.tooltip.hide()},moveLine:function(){var t,e=this.axis,i=this.point,n=e.options.vertical,s=this.getBox(),r=n?v:f,o=new ct(s.x1,s.y1);if(t=n?new ct(s.x2,s.y1):new ct(s.x1,s.y2),i)if(this.stickyMode){var a=e.getSlot(e.pointCategoryIndex(i));o[r]=t[r]=a.center()[r]}else o[r]=t[r]=i[r];this.box=s,this.line.moveTo(o).lineTo(t)},getBox:function(){for(var t,e=this.axis,i=e.pane.axes,n=i.length,s=e.options.vertical,r=e.lineBox().clone(),o=s?f:v,a=0;a<n;a++){var h=i[a];h.options.vertical!==s&&(t?t.wrap(h.lineBox()):t=h.lineBox().clone())}return r[o+1]=t[o+1],r[o+2]=t[o+2],r},createVisual:function(){S.fn.createVisual.call(this);var t=this.options;this.line=new st({stroke:{color:t.color,width:t.width,opacity:t.opacity,dashType:t.dashType},visible:!1}),this.moveLine(),this.visual.append(this.line)},destroy:function(){this.tooltip&&this.tooltip.destroy(),S.fn.destroy.call(this)}});T(Xi,{color:x,width:2,zIndex:-1,tooltip:{visible:!1}});var Yi=S.extend({init:function(t,e){S.fn.init.call(this,t),this.pane=e},shouldClip:function(){for(var t=this.children,e=t.length,i=0;i<e;i++)if(!0===t[i].options.clip)return!0;return!1},_clipBox:function(){return this.pane.chartsBox()},createVisual:function(){if(this.visual=new at({zIndex:0}),this.shouldClip()){var t=(this.clipBox=this._clipBox()).toRect(),e=st.fromRect(t);P(e),this.visual.clip(e),this.unclipLabels()}},stackRoot:function(){return this},unclipLabels:function(){for(var t=this.children,e=this.clipBox,i=0;i<t.length;i++)for(var n=t[i].points||{},s=n.length,r=0;r<s;r++){var o=n[r];if(o&&!1!==o.visible&&o.overlapsBox&&o.overlapsBox(e))if(o.unclipElements)o.unclipElements();else{var a=o.label,h=o.note;a&&a.options.visible&&(a.alignToClipBox&&a.alignToClipBox(e),a.options.noclip=!0),h&&h.options.visible&&(h.options.noclip=!0)}}},destroy:function(){S.fn.destroy.call(this),delete this.parent}});Yi.prototype.isStackRoot=!0;var qi=U.extend({init:function(t){U.fn.init.call(this,t),this.id="pane"+Ui++,this.createTitle(),this.content=new S,this.chartContainer=new Yi({},this),this.append(this.content),this.axes=[],this.charts=[]},createTitle:function(){var t=this.options.title;V(t)&&(t=O({},t,{align:t.position,position:l})),this.title=W.buildTitle(t,qi.prototype.options.title),this.title&&this.append(this.title)},appendAxis:function(t){this.content.append(t),this.axes.push(t),t.pane=this},appendAxisAt:function(t,e){this.content.append(t),this.axes.splice(e,0,t),t.pane=this},appendChart:function(t){this.chartContainer.parent!==this.content&&this.content.append(this.chartContainer),this.charts.push(t),this.chartContainer.append(t),t.pane=this},empty:function(){var t=this.parent;if(t){for(var e=0;e<this.axes.length;e++)t.removeAxis(this.axes[e]);for(var i=0;i<this.charts.length;i++)t.removeChart(this.charts[i])}this.axes=[],this.charts=[],this.content.destroy(),this.content.children=[],this.chartContainer.children=[]},reflow:function(t){var e;L(this.children)===this.content&&(e=this.children.pop()),U.fn.reflow.call(this,t),e&&this.children.push(e),this.title&&(this.contentBox.y1+=this.title.box.height())},visualStyle:function(){var t=U.fn.visualStyle.call(this);return t.zIndex=-10,t},renderComplete:function(){this.options.visible&&this.createGridLines()},stackRoot:function(){return this},clipRoot:function(){return this},createGridLines:function(){for(var t=this.axes,e=t.concat(this.parent.axes),i=[],n=[],s=0;s<t.length;s++)for(var r=t[s],o=r.options.vertical,a=o?i:n,h=0;h<e.length;h++)if(0===a.length){var l=e[h];o!==l.options.vertical&&N(a,r.createGridLines(l))}},refresh:function(){this.visual.clear(),this.content.parent=null,this.content.createGradient=this.createGradient.bind(this),this.content.renderVisual(),this.content.parent=this,this.title&&this.visual.append(this.title.visual),this.visual.append(this.content.visual),this.renderComplete(),this.notifyRender()},chartsBox:function(){for(var t=this.axes,e=t.length,i=new k,n=0;n<e;n++){var s=t[n],r=s.options.vertical?v:f,o=s.lineBox();i[r+1]=o[r+1],i[r+2]=o[r+2]}if(0===i.x2)for(var a=this.parent.axes,h=a.length,l=0;l<h;l++){var c=a[l];if(!c.options.vertical){var u=c.lineBox();i.x1=u.x1,i.x2=u.x2}}return i},clipBox:function(){return this.chartContainer.clipBox},notifyRender:function(){var t=this.getService();t&&t.notify(Ne,{pane:new ft(this),index:this.paneIndex,name:this.options.name})}}),Ui=1;function Wi(t,e){null!==e&&t.push(e)}function Zi(t,e,i){var n=e.visible;if(b(n))return n;var s=t.pointVisibility;return s?s[i]:void 0}function ji(t){for(var e=t.data,i=[],s=0,r=0,o=0;o<e.length;o++){var a=yt.current.bindPoint(t,o),h=a.valueFields.value;G(h)&&(h=parseFloat(h)),n(h)?(a.visible=!1!==Zi(t,a.fields,o),a.value=Math.abs(h),i.push(a),a.visible&&(s+=a.value),0!==h&&r++):i.push(null)}return{total:s,points:i,count:r}}function Ki(t,e){return t&&e?t.toLowerCase()===e.toLowerCase():t===e}function Qi(t,e){for(var i=[],n=[].concat(e),s=0;s<t.length;s++){var r=t[s];I(r.type,n)&&i.push(r)}return i}function $i(t,e,i){if(null===e)return e;var n="_date_"+t,s=e[n];return s||(s=X(i,w(t,!0)(e)),e[n]=s),s}function Ji(t,e){var i=t.type,n=e instanceof Date;return!i&&n||Ki(i,m)}function tn(t){return 1===t.length?t[0]:t}qi.prototype.isStackRoot=!0,T(qi,{zIndex:-1,shrinkToFit:!0,title:{align:u},visible:!0});var en=/area/i;function nn(t,i){var n=yt.current.bindPoint(t,null,i).valueFields;for(var s in n)if(e.convertableToNumber(n[s]))return!0}function sn(t){var e,i,n=t.start,s=t.dir,r=t.min,o=t.max,a=t.getter,h=t.hasItem,l=t.series,c=n;do{h(c+=s)&&(e=nn(l,(i=a(c)).item))}while(r<=c&&c<=o&&!e);if(e)return i}function rn(t,e,i,n,s){var r=e.min,o=e.max,a=r>0&&r<i,h=o+1<i;if(a||h){var l,c,u,p=function(t){return t.missingValues?t.missingValues:en.test(t.type)||t.stack?Lt:Mt}(t);if(p!==Mt)a&&(l=n(r-1)),h&&(c=n(o+1));else a&&(l=nn(t,(u=n(r-1)).item)?u:sn({start:r,dir:-1,min:0,max:i-1,getter:n,hasItem:s,series:t})),h&&(c=nn(t,(u=n(o+1)).item)?u:sn({start:o,dir:1,min:0,max:i-1,getter:n,hasItem:s,series:t}));l&&(t._outOfRangeMinPoint=l),c&&(t._outOfRangeMaxPoint=c)}}var on=S.extend({init:function(t,e,i){S.fn.init.call(this,e),this.initFields(t,e),this.series=t,this.initSeries(),this.charts=[],this.options.legend=this.options.legend||{},this.options.legend.items=[],this.axes=[],this.crosshairs=[],this.chartService=i,this.originalOptions=e,this.createPanes(),this.render(),this.createCrosshairs()},initFields:function(){},initSeries:function(){for(var t=this.series,e=0;e<t.length;e++)t[e].index=e},createPanes:function(){for(var t=this.options.title||{},e=this.options.paneDefaults,i=this.options.panes||[],n=Math.max(i.length,1),s=[],r=O({title:{color:t.color}},e),o=0;o<n;o++){var a=O({},r,i[o]);G(a.title)&&(a.title=O({text:a.title},r.title));var h=new qi(a);h.paneIndex=o,s.push(h),this.append(h)}this.panes=s},crosshairOptions:function(t){return t.options.crosshair},createCrosshairs:function(t){var e=this;void 0===t&&(t=this.panes);for(var i=0;i<t.length;i++)for(var n=t[i],s=0;s<n.axes.length;s++){var r=n.axes[s],o=e.crosshairOptions(r);if(o&&o.visible){var a=new Xi(e.chartService,r,o);e.crosshairs.push(a),n.content.append(a)}}},removeCrosshairs:function(t){for(var e=this.crosshairs,i=t.axes,n=e.length-1;n>=0;n--)for(var s=0;s<i.length;s++)if(e[n].axis===i[s]){e.splice(n,1);break}},hideCrosshairs:function(){for(var t=this.crosshairs,e=0;e<t.length;e++)t[e].hide()},findPane:function(t){for(var e,i=this.panes,n=0;n<i.length;n++)if(i[n].options.name===t){e=i[n];break}return e||i[0]},findPointPane:function(t){for(var e,i=this.panes,n=0;n<i.length;n++)if(i[n].box.containsPoint(t)){e=i[n];break}return e},appendAxis:function(t){this.findPane(t.options.pane).appendAxis(t),this.axes.push(t),t.plotArea=this},removeAxis:function(t){for(var e=[],i=0;i<this.axes.length;i++){var n=this.axes[i];t!==n?e.push(n):n.destroy()}this.axes=e},appendChart:function(t,e){this.charts.push(t),e?e.appendChart(t):this.append(t)},removeChart:function(t){for(var e=[],i=0;i<this.charts.length;i++){var n=this.charts[i];n!==t?e.push(n):n.destroy()}this.charts=e},addToLegend:function(t){for(var e=t.length,i=this.options.legend,n=i.labels||{},s=i.inactiveItems||{},r=s.labels||{},o=[],a=0;a<e;a++){var h=t[a],l=!1!==h.visible;if(!1!==h.visibleInLegend){var c=h.name,u=l?B(n):B(r)||B(n);u&&(c=u({text:Li(c)?c:"",series:h}));var p=h._defaults,d=h.color;E(d)&&p&&(d=p.color);var f=void 0,v=void 0;l?(f={},v=d):(f={color:r.color,font:r.font},v=s.markers.color),Li(c)&&""!==c&&o.push({text:c,labels:f,markerColor:v,series:h,active:l})}}N(i.items,o)},groupAxes:function(t){for(var e=[],i=[],n=0;n<t.length;n++)for(var s=t[n].axes,r=0;r<s.length;r++){var o=s[r];o.options.vertical?i.push(o):e.push(o)}return{x:e,y:i,any:e.concat(i)}},groupSeriesByPane:function(){for(var t=this.series,e={},i=0;i<t.length;i++){var n=t[i],s=this.seriesPaneName(n);e[s]?e[s].push(n):e[s]=[n]}return e},filterVisibleSeries:function(t){for(var e=[],i=0;i<t.length;i++){var n=t[i];!1!==n.visible&&e.push(n)}return e},reflow:function(t){var e=this.options.plotArea,i=this.panes,n=D(e.margin);this.box=t.clone().unpad(n),this.reflowPanes(),this.detachLabels(),this.reflowAxes(i),this.reflowCharts(i)},redraw:function(t){var e=[].concat(t);this.initSeries();var i=this.getRoot();i&&i.cleanGradients();for(var n=0;n<e.length;n++)this.removeCrosshairs(e[n]),e[n].empty();this.render(e),this.detachLabels(),this.reflowAxes(this.panes),this.reflowCharts(e),this.createCrosshairs(e);for(var s=0;s<e.length;s++)e[s].refresh()},axisCrossingValues:function(t,e){for(var i=t.options,n=[].concat(i.axisCrossingValues||i.axisCrossingValue),s=e.length-n.length,r=n[0]||0,o=0;o<s;o++)n.push(r);return n},alignAxisTo:function(t,e,i,n){var s=t.getSlot(i,i,!0),r=t.options.reverse?2:1,o=e.getSlot(n,n,!0),a=e.options.reverse?2:1,h=t.box.translate(o[f+a]-s[f+r],o[v+a]-s[v+r]);t.pane!==e.pane&&h.translate(0,t.pane.box.y1-e.pane.box.y1),t.reflow(h)},alignAxes:function(t,e){for(var i=this,n=t[0],r=e[0],o=this.axisCrossingValues(n,e),a=this.axisCrossingValues(r,t),h={},p={},d={},f={},v=0;v<e.length;v++){var x=e[v],m=x.pane,y=m.id,_=!1!==x.options.visible,b=ln(t,m)||n,w=o;b!==n&&(w=i.axisCrossingValues(b,e)),i.alignAxisTo(x,b,a[v],w[v]),x.options._overlap||(Z(x.lineBox().x1)===Z(b.lineBox().x1)&&(h[y]&&x.reflow(x.box.alignTo(h[y].box,u).translate(-x.options.margin,0)),_&&(h[y]=x)),Z(x.lineBox().x2)===Z(b.lineBox().x2)&&(x._mirrored||(x.options.labels.mirror=!x.options.labels.mirror,x._mirrored=!0),i.alignAxisTo(x,b,a[v],w[v]),p[y]&&x.reflow(x.box.alignTo(p[y].box,g).translate(x.options.margin,0)),_&&(p[y]=x)),0!==v&&r.pane===x.pane&&(x.alignTo(r),x.reflow(x.box)))}for(var A=0;A<t.length;A++){var S=t[A],C=S.pane,k=C.id,P=!1!==S.options.visible,T=ln(e,C)||r,I=a;T!==r&&(I=i.axisCrossingValues(T,t)),i.alignAxisTo(S,T,o[A],I[A]),S.options._overlap||(Z(S.lineBox().y1)===Z(T.lineBox().y1)&&(S._mirrored||(S.options.labels.mirror=!S.options.labels.mirror,S._mirrored=!0),i.alignAxisTo(S,T,o[A],I[A]),d[k]&&S.reflow(S.box.alignTo(d[k].box,l).translate(0,-S.options.margin)),P&&(d[k]=S)),Z(S.lineBox().y2,s.COORD_PRECISION)===Z(T.lineBox().y2,s.COORD_PRECISION)&&(f[k]&&S.reflow(S.box.alignTo(f[k].box,c).translate(0,S.options.margin)),P&&(f[k]=S)),0!==A&&(S.alignTo(n),S.reflow(S.box)))}},shrinkAxisWidth:function(t){for(var e=this.groupAxes(t).any,i=hn(e),n=0,s=0;s<t.length;s++){var r=t[s];r.axes.length>0&&(n=Math.max(n,i.width()-r.contentBox.width()))}if(0!==n)for(var o=0;o<e.length;o++){var a=e[o];a.options.vertical||a.reflow(a.box.shrink(n,0))}},shrinkAxisHeight:function(t){for(var e,i=0;i<t.length;i++){var n=t[i],s=n.axes,r=Math.max(0,hn(s).height()-n.contentBox.height());if(0!==r){for(var o=0;o<s.length;o++){var a=s[o];a.options.vertical&&a.reflow(a.box.shrink(0,r))}e=!0}}return e},fitAxes:function(t){for(var e=this.groupAxes(t).any,i=0,n=0;n<t.length;n++){var s=t[n],r=s.axes,o=s.contentBox;if(r.length>0){var a=hn(r),h=Math.max(o.y1-a.y1,o.y2-a.y2);i=Math.max(i,o.x1-a.x1);for(var l=0;l<r.length;l++){var c=r[l];c.reflow(c.box.translate(0,h))}}}for(var u=0;u<e.length;u++){var p=e[u];p.reflow(p.box.translate(i,0))}},reflowAxes:function(t){for(var e=this.groupAxes(t),i=0;i<t.length;i++)this.reflowPaneAxes(t[i]);e.x.length>0&&e.y.length>0&&(this.alignAxes(e.x,e.y),this.shrinkAxisWidth(t),this.autoRotateAxisLabels(e),this.alignAxes(e.x,e.y),this.shrinkAxisWidth(t)&&this.alignAxes(e.x,e.y),this.shrinkAxisHeight(t),this.alignAxes(e.x,e.y),this.shrinkAxisHeight(t)&&this.alignAxes(e.x,e.y),this.fitAxes(t))},autoRotateAxisLabels:function(t){for(var e,i=this.panes,n=cn(i),s=0;s<n.length;s++){n[s].autoRotateLabels()&&(e=!0)}if(e){for(var r=0;r<i.length;r++)this.reflowPaneAxes(i[r]);t.x.length>0&&t.y.length>0&&(this.alignAxes(t.x,t.y),this.shrinkAxisWidth(i))}},reflowPaneAxes:function(t){var e=t.axes,i=e.length;if(i>0)for(var n=0;n<i;n++)e[n].reflow(t.contentBox)},reflowCharts:function(t){for(var e=this.charts,i=e.length,n=this.box,s=0;s<i;s++){var r=e[s].pane;r&&!I(r,t)||e[s].reflow(n)}},reflowPanes:function(){for(var t=this.box,e=this.panes,i=e.length,n=t.height(),s=0,r=t.y1,o=0;o<i;o++){var a=e[o],h=a.options.height;if(a.options.width=t.width(),a.options.height){if(h.indexOf&&h.indexOf("%")){var l=parseInt(h,10)/100;a.options.height=l*t.height()}a.reflow(t.clone()),n-=a.options.height}else s++}for(var c=0;c<i;c++){var u=e[c];u.options.height||(u.options.height=n/s)}for(var p=0;p<i;p++){var d=e[p],f=t.clone().move(t.x1,r);d.reflow(f),r+=d.options.height}},backgroundBox:function(){for(var t,e=this.axes,i=e.length,n=0;n<i;n++)for(var s=e[n],r=0;r<i;r++){var o=e[r];if(s.options.vertical!==o.options.vertical){var a=s.lineBox().clone().wrap(o.lineBox());t=t?t.wrap(a):a}}return t||this.box},chartsBoxes:function(){for(var t=this.panes,e=[],i=0;i<t.length;i++)e.push(t[i].chartsBox());return e},addBackgroundPaths:function(t){for(var e=this.chartsBoxes(),i=0;i<e.length;i++)t.paths.push(st.fromRect(e[i].toRect()))},backgroundContainsPoint:function(t){for(var e=this.chartsBoxes(),i=0;i<e.length;i++)if(e[i].containsPoint(t))return!0},createVisual:function(){S.fn.createVisual.call(this);var t,e=this.options.plotArea,i=e.opacity,n=e.background,s=e.border;void 0===s&&(s={}),""!==(t=n)&&null!==t&&"none"!==t&&"transparent"!==t&&b(t)||(n=p,i=0);var r=this._bgVisual=new nt.MultiPath({fill:{color:n,opacity:i},stroke:{color:s.width?s.color:"",width:s.width,dashType:s.dashType},zIndex:-1});this.addBackgroundPaths(r),this.appendVisual(r)},pointsByCategoryIndex:function(t){var e=this.charts,i=[];if(null!==t)for(var n=0;n<e.length;n++){if("_navigator"!==e[n].pane.options.name){var s=e[n].categoryPoints[t];if(s&&s.length)for(var r=0;r<s.length;r++){var o=s[r];o&&b(o.value)&&null!==o.value&&i.push(o)}}}return i},pointsBySeriesIndex:function(t){return this.filterPoints((function(e){return e.series.index===t}))},pointsBySeriesName:function(t){return this.filterPoints((function(e){return e.series.name===t}))},filterPoints:function(t){for(var e=this.charts,i=[],n=0;n<e.length;n++)for(var s=e[n].points,r=0;r<s.length;r++){var o=s[r];o&&!1!==o.visible&&t(o)&&i.push(o)}return i},findPoint:function(t){for(var e=this.charts,i=0;i<e.length;i++)for(var n=e[i].points,s=0;s<n.length;s++){var r=n[s];if(r&&!1!==r.visible&&t(r))return r}},paneByPoint:function(t){for(var e=this.panes,i=0;i<e.length;i++){var n=e[i];if(n.box.containsPoint(t))return n}},detachLabels:function(){var t=this.groupAxes(this.panes),e=t.x,i=t.y;this.detachAxisGroupLabels(i,e),this.detachAxisGroupLabels(e,i)},detachAxisGroupLabels:function(t,e){for(var i=0,n=0;n<t.length;n++){var s=t[n],r=s.pane,o=ln(e,r)||e[0],a=n+i,h=this.createLabelAxis(s,a,o);if(h){i++;var l=r.axes.indexOf(s)+i;r.appendAxisAt(h,l)}}},createLabelAxis:function(t,e,i){var n=t.options.labels,r=n.position,o=r!==s.END&&r!==s.START,a=n.visible;if(o||!1===a)return null;var h=this.groupAxes(this.panes),l=i.options.vertical?h.x:h.y,c=this.axisCrossingValues(i,l),u=r===s.END,p=i.range(),d=u?p.max:p.min;if(j(c[e],p.min,p.max)-d==0)return null;c.splice(e+1,0,d),i.options.axisCrossingValues=c;var f=t.clone();return t.clear(),f.options.name=void 0,f.options.line.visible=!1,f.options.crosshair=void 0,f.options.notes=void 0,f.options.plotBands=void 0,f}});function an(t){return!t.pane.axes.some((function(e){return e.options.vertical===t.options.vertical&&e!==t&&!1!==e.options.visible}))}function hn(t){for(var e,i=t.length,n=0;n<i;n++){var s=t[n],r=!1!==s.options.visible;if(r||an(s)){var o=r?s.contentBox():s.lineBox();e?e.wrap(o):e=o.clone()}}return e||new k}function ln(t,e){for(var i=0;i<t.length;i++){var n=t[i];if(n&&n.pane===e)return n}}var cn=function(t){return t.reduce((function(t,e){return t.concat(e.axes)}),[])};T(on,{series:[],plotArea:{margin:{}},background:"",border:{color:x,width:0},paneDefaults:{title:{}},legend:{inactiveItems:{labels:{color:"#919191"},markers:{color:"#919191"}}}});var un={hover:function(t,e){this._dispatchEvent(t,e,Pe)},click:function(t,e){this._dispatchEvent(t,e,ke)}},pn=i.extend({init:function(t,e,i){var n=e.canonicalFields(t),s=e.valueFields(t),r=e.sourceFields(t,n),o=this._seriesFields=[],a=i.query(t.type),h=t.aggregate||a;this._series=t,this._binder=e;for(var l=0;l<n.length;l++){var c=n[l],u=void 0;if(V(h))u=h[c];else{if(0!==l&&!I(c,s))break;u=h}u&&o.push({canonicalName:c,name:r[l],transform:E(u)?u:xt[u]})}},aggregatePoints:function(t,e){var i=this._series,s=this._seriesFields,r=this._bindPoints(t||[]),o=r.dataItems[0],a={};if(o&&!n(o)&&!A(o)){var h=function(){};h.prototype=o,a=new h}for(var l=0;l<s.length;l++){var c=s[l],u=this._bindField(r.values,c.canonicalName),p=c.transform(u,i,r.dataItems,e);if(!(null===p||!V(p)||b(p.length)||p instanceof Date)){a=p;break}b(p)&&dn(c.name,a,p)}return a},_bindPoints:function(t){for(var e=this._binder,i=this._series,n=[],s=[],r=0;r<t.length;r++){var o=t[r];n.push(e.bindPoint(i,o)),s.push(i.data[o])}return{values:n,dataItems:s}},_bindField:function(t,e){for(var i=[],n=t.length,s=0;s<n;s++){var r=t[s],o=r.valueFields,a=void 0;a=b(o[e])?o[e]:r.fields[e],i.push(a)}return i}});function dn(t,e,i){var n=e,s=t;if(t.indexOf(".")>-1){for(var r=t.split(".");r.length>1;)s=r.shift(),b(n[s])||(n[s]={}),n=n[s];s=r.shift()}n[s]=i}var fn=i.extend({init:function(){this._defaults={}},register:function(t,e){for(var i=0;i<t.length;i++)this._defaults[t[i]]=e},query:function(t){return this._defaults[t]}});fn.current=new fn;var vn=bi.extend({createLabel:function(){var t=this.options.labels,e=O({},t,t.from),i=O({},t,t.to);e.visible&&(this.labelFrom=this._createLabel(e),this.append(this.labelFrom)),i.visible&&(this.labelTo=this._createLabel(i),this.append(this.labelTo))},_createLabel:function(t){var e,i=B(t),n=this.pointData();return e=i?i(n):this.formatValue(t.format),new yi(e,O({vertical:this.options.vertical},t),n)},reflow:function(t){this.render();var e=this,i=e.labelFrom,n=e.labelTo,s=e.value;this.box=t,i&&(i.options.aboveAxis=s.from>s.to,i.reflow(t)),n&&(n.options.aboveAxis=s.to>s.from,n.reflow(t)),this.note&&this.note.reflow(t)}});vn.prototype.defaults=O({},vn.prototype.defaults,{labels:{format:"{0} - {1}"},tooltip:{format:"{1}"}});var gn=ki.extend({pointType:function(){return vn},pointValue:function(t){return t.valueFields},formatPointValue:function(t,e){return null===t.value.from&&null===t.value.to?"":this.chartService.format.auto(e,t.value.from,t.value.to)},plotRange:function(t){return t?[t.value.from,t.value.to]:0},updateRange:function(t,e){var i=e.series.axis,s=t.from,a=t.to,h=this.valueAxisRanges[i];null!==t&&n(s)&&n(a)&&((h=this.valueAxisRanges[i]=h||{min:r,max:o}).min=Math.min(h.min,s),h.max=Math.max(h.max,s),h.min=Math.min(h.min,a),h.max=Math.max(h.max,a))},aboveAxis:function(t){var e=t.value;return e.from<e.to}});gn.prototype.plotLimits=ti.prototype.plotLimits;var xn=ni.extend({aliasFor:function(){return this.parent}}),mn="auto",yn=S.extend({init:function(t,e){S.fn.init.call(this),this.value=t,this.options=e,this.aboveAxis=R(this.options.aboveAxis,!0),this.tooltipTracking=!0,this.initLabelsFormat()},render:function(){if(!this._rendered){this._rendered=!0;var t=this.options,e=t.markers,i=t.labels,n=this.value,s=this.fromPoint=new xn(n,O({},this.options,{labels:i.from,markers:e.from})),r=this.toPoint=new xn(n,O({},this.options,{labels:i.to,markers:e.to}));this.copyFields(s),this.copyFields(r),this.append(s),this.append(r)}},reflow:function(t){this.render();var e=t.from,i=t.to;this.positionLabels(e,i),this.fromPoint.reflow(e),this.toPoint.reflow(i),this.box=this.fromPoint.markerBox().clone().wrap(this.toPoint.markerBox())},createHighlight:function(){var t=new at;return t.append(this.fromPoint.createHighlight()),t.append(this.toPoint.createHighlight()),t},highlightVisual:function(){return this.visual},highlightVisualArgs:function(){return{options:this.options,from:this.fromPoint.highlightVisualArgs(),to:this.toPoint.highlightVisualArgs()}},tooltipAnchor:function(){var t=this.owner.pane.clipBox();if(!t||t.overlaps(this.box)){var e,i,n,s=this.box,r=s.center(),o=u;return this.options.vertical?(e=r.x,i=s.y1-5,n=c):(e=s.x2+5,i=r.y,n=h),{point:new C(e,i),align:{horizontal:o,vertical:n}}}},formatValue:function(t){return this.owner.formatPointValue(this,t)},overlapsBox:function(t){return this.box.overlaps(t)},unclipElements:function(){this.fromPoint.unclipElements(),this.toPoint.unclipElements()},initLabelsFormat:function(){var e=this.options.labels;e.format||(e.from&&e.from.format||(e.from=t.extend({},e.from,{format:"{0}"})),e.to&&e.to.format||(e.to=t.extend({},e.to,{format:"{1}"})))},positionLabels:function(t,e){var i,n,s=this.options,r=s.labels,o=s.vertical;r.position===mn&&(o?e.y1<=t.y1?(n=Ht,i=zt):(n=zt,i=Ht):e.x1<=t.x1?(n=u,i=g):(n=g,i=u),r.from&&r.from.position||(this.fromPoint.options.labels.position=i),r.to&&r.to.position||(this.toPoint.options.labels.position=n))},copyFields:function(t){t.dataItem=this.dataItem,t.category=this.category,t.series=this.series,t.color=this.color,t.owner=this.owner}});O(yn.prototype,ei),O(yn.prototype,ii),yn.prototype.defaults={markers:{visible:!1,background:p,size:8,type:d,border:{width:2},opacity:1},labels:{visible:!1,margin:D(3),padding:D(4),animation:{type:Ct,delay:St},position:mn},notes:{label:{}},highlight:{markers:{border:{color:p,width:2}},zIndex:s.HIGHLIGHT_ZINDEX},tooltip:{format:"{0} - {1}"}};var _n=fi.extend({createStrokeSegments:function(){return this.segmentsFromPoints(this.toGeometryPoints(this.toPoints()))},stackSegments:function(){var t=this.fromSegments;return this.fromSegments||(t=this.fromSegments=this.segmentsFromPoints(this.toGeometryPoints(this.fromPoints().reverse()))),t},createStroke:function(t){var e=new st(t),i=new st(t);e.segments.push.apply(e.segments,this.strokeSegments()),i.segments.push.apply(i.segments,this.stackSegments()),this.visual.append(e),this.visual.append(i)},hasStackSegment:function(){return!0},fromPoints:function(){return this.linePoints.map((function(t){return t.fromPoint}))},toPoints:function(){return this.linePoints.map((function(t){return t.toPoint}))}}),bn=_n.extend({createStrokeSegments:function(){return this.createCurveSegments(this.toPoints())},stackSegments:function(){var t=this.fromSegments;return this.fromSegments||(t=this.fromSegments=this.createCurveSegments(this.fromPoints().reverse())),t},createCurveSegments:function(t){return(new F).process(this.toGeometryPoints(t))}}),wn=_n.extend({createStrokeSegments:function(){return this.segmentsFromPoints(this.calculateStepPoints(this.toPoints()))},stackSegments:function(){var t=this.fromSegments;return this.fromSegments||(t=this.fromSegments=this.segmentsFromPoints(this.calculateStepPoints(this.fromPoints()))).reverse(),t}});O(wn.prototype,ri);var An=ti.extend({render:function(){ti.fn.render.call(this),this.renderSegments()},pointType:function(){return yn},createPoint:function(t,e){var i=e.categoryIx,n=e.category,s=e.series,r=e.seriesIx,o=t.valueFields;if(!Li(o.from)&&!Li(o.to)){if(this.seriesMissingValues(s)!==Lt)return null;o={from:0,to:0}}var a=this.pointOptions(s,r);a=this.evalPointOptions(a,o,n,i,s,r);var h=t.fields.color||s.color;E(s.color)&&(h=a.color);var l=new yn(o,a);return l.color=h,this.append(l),l},createSegment:function(t,e,i){var n=(e.line||{}).style;return new("smooth"===n?bn:"step"===n?wn:_n)(t,e,i)},plotRange:function(t,e){return t?[t.value.from,t.value.to]:[e,e]},valueSlot:function(t,e){var i=t.getSlot(e[0],e[0],!this.options.clip),n=t.getSlot(e[1],e[1],!this.options.clip);if(i&&n)return{from:i,to:n}},pointSlot:function(t,e){var i,n,s=e.from,r=e.to;return this.options.invertAxes?(i=new k(s.x1,t.y1,s.x2,t.y2),n=new k(r.x1,t.y1,r.x2,t.y2)):(i=new k(t.x1,s.y1,t.x2,s.y2),n=new k(t.x1,r.y1,t.x2,r.y2)),{from:i,to:n}},addValue:function(t,e){var i=t.valueFields;n(i.from)||(i.from=i.to),n(i.to)||(i.to=i.from),ti.fn.addValue.call(this,t,e)},updateRange:function(t,e){if(null!==t&&n(t.from)&&n(t.to)){var i=e.series.axis,s=this.valueAxisRanges[i]=this.valueAxisRanges[i]||{min:r,max:o},a=t.from,h=t.to;s.min=Math.min(s.min,a,h),s.max=Math.max(s.max,a,h)}},formatPointValue:function(t,e){var i=t.value;return this.chartService.format.auto(e,i.from,i.to)},animationPoints:function(){for(var t=this.points,e=[],i=0;i<t.length;i++){var n=t[i];n&&(e.push((n.fromPoint||{}).marker),e.push((n.toPoint||{}).marker))}return e.concat(this._segments)}});O(An.prototype,li,pi);var Sn=Pi.extend({reflow:function(t){var e=this,i=e.options,n=e.value,s=e.owner.seriesValueAxis(i),r=[],o=[],a=[],h=s.getSlot(n.low,n.high),l=s.getSlot(n.open,n.open),c=s.getSlot(n.close,n.close);l.x1=c.x1=h.x1=t.x1,l.x2=c.x2=h.x2=t.x2;var u=h.center().x;r.push([l.x1,l.y1]),r.push([u,l.y1]),o.push([u,c.y1]),o.push([c.x2,c.y1]),a.push([u,h.y1]),a.push([u,h.y2]),this.lines=[r,o,a],this.box=h.clone().wrap(l.clone().wrap(c)),this.reflowNote()},createBody:function(){}}),Cn=Ii.extend({pointType:function(){return Sn}}),kn=S.extend({init:function(t,e,i){S.fn.init.call(this),this.from=t,this.to=e,this.series=i},linePoints:function(){var t=this.from,e=this.from.box,i=this.to.box,n=[];if(t.isVertical){var s=t.aboveAxis?e.y1:e.y2;n.push([e.x1,s],[i.x2,s])}else{var r=t.aboveAxis?e.x2:e.x1;n.push([r,e.y1],[r,i.y2])}return n},createVisual:function(){S.fn.createVisual.call(this);var t=this.series.line||{},e=st.fromPoints(this.linePoints(),{stroke:{color:t.color,width:t.width,opacity:t.opacity,dashType:t.dashType}});P(e),this.visual.append(e)}});T(kn,{animation:{type:Ct,delay:St}});var Pn=ki.extend({render:function(){ki.fn.render.call(this),this.createSegments()},traverseDataPoints:function(t){for(var e=this.options.series,i=Je(e),s=!this.options.invertAxes,r=0;r<e.length;r++)for(var o=e[r],a=0,h=0,l=0;l<i;l++){var c=yt.current.bindPoint(o,l),u=c.valueFields.value,p=c.fields.summary,d=a,f=void 0;p?"total"===p.toLowerCase()?(c.valueFields.value=a,d=0,f=a):(c.valueFields.value=h,f=d-h,h=0):n(u)&&(h+=u,f=a+=u),t(c,{category:this.categoryAxis.categoryAt(l),categoryIx:l,series:o,seriesIx:r,total:a,runningTotal:h,from:d,to:f,isVertical:s})}},updateRange:function(t,e){ki.fn.updateRange.call(this,{value:e.to},e)},aboveAxis:function(t){return t.value>=0},plotRange:function(t){return[t.from,t.to]},createSegments:function(){for(var t=this.options.series,e=this.seriesPoints,i=this.segments=[],n=0;n<t.length;n++){var s=t[n],r=e[n];if(r)for(var o=void 0,a=0;a<r.length;a++){var h=r[a];if(h&&o){var l=new kn(o,h,s);i.push(l),this.append(l)}o=h}}}}),Tn=[Nt,pe,ae,ge],In=[$t,ve].concat(Tn),En=on.extend({initFields:function(t){if(this.namedCategoryAxes={},this.namedValueAxes={},this.valueAxisRangeTracker=new mi,t.length>0){this.invertAxes=I(t[0].type,[Gt,qt,ve,pe,ge,he,Qt,de]);for(var e=0;e<t.length;e++){var i=t[e].stack;if(i&&"100%"===i.type){this.stack100=!0;break}}}},render:function(t){void 0===t&&(t=this.panes),this.createCategoryAxes(t),this.aggregateCategories(t),this.createCategoryAxesLabels(t),this.createCharts(t),this.createValueAxes(t)},removeAxis:function(t){var e=t.options.name;on.fn.removeAxis.call(this,t),t instanceof q?delete this.namedCategoryAxes[e]:(this.valueAxisRangeTracker.reset(e),delete this.namedValueAxes[e]),t===this.categoryAxis&&delete this.categoryAxis,t===this.valueAxis&&delete this.valueAxis},createCharts:function(t){for(var e=this,i=this.groupSeriesByPane(),n=0;n<t.length;n++){var s=t[n],r=i[s.options.name||"default"]||[];e.addToLegend(r);var o=e.filterVisibleSeries(r);if(o)for(var a=e.groupSeriesByCategoryAxis(o),h=0;h<a.length;h++)e.createChartGroup(a[h],s)}},createChartGroup:function(t,e){this.createAreaChart(Qi(t,[Nt,pe]),e),this.createRangeAreaChart(Qi(t,[ae,ge]),e),this.createBarChart(Qi(t,[Wt,Gt]),e),this.createRangeBarChart(Qi(t,[le,he]),e),this.createBulletChart(Qi(t,[qt,fe]),e),this.createCandlestickChart(Qi(t,Ut),e),this.createBoxPlotChart(Qi(t,[Xt,de]),e),this.createOHLCChart(Qi(t,Jt),e),this.createWaterfallChart(Qi(t,[xe,Qt]),e),this.createLineChart(Qi(t,[$t,ve]),e)},aggregateCategories:function(t){var e=this,i=this.srcSeries||this.series,n=[];this._currentPointsCache={},this._seriesPointsCache=this._seriesPointsCache||{};for(var s=0;s<i.length;s++){var r=i[s],o=e.seriesCategoryAxis(r),a=e.findPane(o.options.pane);r=(Ki(o.options.type,m)||r.categoryField)&&I(a,t)?e.aggregateSeries(r,o):e.filterSeries(r,o),n.push(r)}this._seriesPointsCache=this._currentPointsCache,this._currentPointsCache=null,this.srcSeries=i,this.series=n},filterSeries:function(t,e){var i=(t.data||{}).length;if(e._seriesMax=Math.max(e._seriesMax||0,i),!n(e.options.min)&&!n(e.options.max))return t;var s=e.currentRangeIndices(),r=I(t.type,In),o=O({},t);return o.data=(o.data||[]).slice(s.min,s.max+1),r&&rn(o,s,i,(function(i){return{item:t.data[i],category:e.categoryAt(i,!0),categoryIx:i-s.min}}),(function(e){return b(t.data[e])})),o},clearSeriesPointsCache:function(){this._seriesPointsCache={}},seriesSourcePoints:function(t,e){var i=t.index+";"+e.categoriesHash();if(this._seriesPointsCache[i])return this._currentPointsCache[i]=this._seriesPointsCache[i],this._seriesPointsCache[i];var n=e.options,s=n.srcCategories,r=Ki(n.type,m),o=t.data,a=r?$i:mt,h=[];r||e.mapCategories();for(var l=0;l<o.length;l++){var c=void 0;if(c=t.categoryField?a(t.categoryField,o[l],this.chartService.intl):s[l],b(c)&&null!==c){var u=e.totalIndex(c);h[u]=h[u]||{items:[],category:c},h[u].items.push(l)}}return this._currentPointsCache[i]=h,h},aggregateSeries:function(t,e){if(!t.data.length)return t;for(var i=this.seriesSourcePoints(t,e),n=O({},t),s=new pn(O({},t),yt.current,fn.current),r=n.data=[],o=e.options.dataItems||[],a=e.currentRangeIndices(),h=function(t){var n=t-a.min,r=i[t];if(r||(r=i[t]={}),r.categoryIx=n,!r.item){var o=e.categoryAt(t,!0);r.category=o,r.item=s.aggregatePoints(r.items,o)}return r},l=a.min;l<=a.max;l++){var c=h(l);r[c.categoryIx]=c.item,c.items&&c.items.length&&(o[c.categoryIx]=c.item)}return I(n.type,In)&&rn(n,a,e.totalCount(),h,(function(t){return i[t]})),e.options.dataItems=o,n},appendChart:function(t,e){var i=t.options.series,n=this.seriesCategoryAxis(i[0]),s=n.options.categories,r=Math.max(0,Je(i)-s.length);if(r>0)for(s=n.options.categories=n.options.categories.slice(0);r--;)s.push("");this.valueAxisRangeTracker.update(t.valueAxisRanges),on.fn.appendChart.call(this,t,e)},seriesPaneName:function(t){var e=this.options,i=t.axis,n=[].concat(e.valueAxis),s=K(n,(function(t){return t.name===i}))[0],r=((e.panes||[{}])[0]||{}).name||"default";return(s||{}).pane||r},seriesCategoryAxis:function(t){var e=t.categoryAxis,i=e?this.namedCategoryAxes[e]:this.categoryAxis;if(!i)throw new Error("Unable to locate category axis with name "+e);return i},stackableChartOptions:function(t,e){var i=t.stack;return{isStacked:i,isStacked100:i&&"100%"===i.type,clip:e.options.clip}},groupSeriesByCategoryAxis:function(t){for(var e=[],i={},n=0;n<t.length;n++){var s=t[n].categoryAxis||"$$default$$";i.hasOwnProperty(s)||(i[s]=!0,e.push(s))}for(var r=[],o=0;o<e.length;o++){var a=Vn(t,e[o],o);0!==a.length&&r.push(a)}return r},createBarChart:function(e,i){if(0!==e.length){var n=e[0],s=new ki(this,t.extend({series:e,invertAxes:this.invertAxes,gap:n.gap,spacing:n.spacing},this.stackableChartOptions(n,i)));this.appendChart(s,i)}},createRangeBarChart:function(t,e){if(0!==t.length){var i=t[0],n=new gn(this,{series:t,invertAxes:this.invertAxes,gap:i.gap,spacing:i.spacing});this.appendChart(n,e)}},createBulletChart:function(t,e){if(0!==t.length){var i=t[0],n=new Fi(this,{series:t,invertAxes:this.invertAxes,gap:i.gap,spacing:i.spacing,clip:e.options.clip});this.appendChart(n,e)}},createLineChart:function(e,i){if(0!==e.length){var n=e[0],s=new di(this,t.extend({invertAxes:this.invertAxes,series:e},this.stackableChartOptions(n,i)));this.appendChart(s,i)}},createAreaChart:function(e,i){if(0!==e.length){var n=e[0],s=new xi(this,t.extend({invertAxes:this.invertAxes,series:e},this.stackableChartOptions(n,i)));this.appendChart(s,i)}},createRangeAreaChart:function(t,e){if(0!==t.length){var i=new An(this,{invertAxes:this.invertAxes,series:t,clip:e.options.clip});this.appendChart(i,e)}},createOHLCChart:function(t,e){if(0!==t.length){var i=t[0],n=new Cn(this,{invertAxes:this.invertAxes,gap:i.gap,series:t,spacing:i.spacing,clip:e.options.clip});this.appendChart(n,e)}},createCandlestickChart:function(t,e){if(0!==t.length){var i=t[0],n=new Ii(this,{invertAxes:this.invertAxes,gap:i.gap,series:t,spacing:i.spacing,clip:e.options.clip});this.appendChart(n,e)}},createBoxPlotChart:function(t,e){if(0!==t.length){var i=t[0],n=new Vi(this,{invertAxes:this.invertAxes,gap:i.gap,series:t,spacing:i.spacing,clip:e.options.clip});this.appendChart(n,e)}},createWaterfallChart:function(t,e){if(0!==t.length){var i=t[0],n=new Pn(this,{series:t,invertAxes:this.invertAxes,gap:i.gap,spacing:i.spacing});this.appendChart(n,e)}},axisRequiresRounding:function(t,e){for(var i=Qi(this.series,me),n=0;n<this.series.length;n++){var s=this.series[n];if(I(s.type,Tn)){var r=s.line;r&&r.style===Ft&&i.push(s)}}for(var o=0;o<i.length;o++){var a=i[o].categoryAxis||"";if(a===t||!a&&0===e)return!0}},aggregatedAxis:function(t,e){for(var i=this.series,n=0;n<i.length;n++){var s=i[n].categoryAxis||"";if((s===t||!s&&0===e)&&i[n].categoryField)return!0}},createCategoryAxesLabels:function(){for(var t=this.axes,e=0;e<t.length;e++)t[e]instanceof q&&t[e].createLabels()},createCategoryAxes:function(t){for(var i=this,n=this.invertAxes,s=[].concat(this.options.categoryAxis),o=[],a=0;a<s.length;a++){var h=s[a],l=i.findPane(h.pane);if(I(l,t)){var c=h.name,u=h.categories;void 0===u&&(u=[]),h=O({vertical:n,reverse:!n&&i.chartService.rtl,axisCrossingValue:n?r:0},h),b(h.justified)||(h.justified=i.isJustified()),i.axisRequiresRounding(c,a)&&(h.justified=!1);var p=void 0;if(p=Ji(h,u[0])?new e.DateCategoryAxis(h,i.chartService):new q(h,i.chartService),s[a].categories=p.options.srcCategories,c){if(i.namedCategoryAxes[c])throw new Error("Category axis with name "+c+" is already defined");i.namedCategoryAxes[c]=p}p.axisIndex=a,o.push(p),i.appendAxis(p)}}var d=this.categoryAxis||o[0];this.categoryAxis=d,n?this.axisY=d:this.axisX=d},isJustified:function(){for(var t=this.series,e=0;e<t.length;e++){var i=t[e];if(!I(i.type,Tn))return!1}return!0},createValueAxes:function(t){var i=this,n=this.valueAxisRangeTracker,s=n.query(),r=[].concat(this.options.valueAxis),o=this.invertAxes,a={vertical:!o,reverse:o&&this.chartService.rtl},h=[];this.stack100&&(a.roundToMajorUnit=!1,a.labels={format:"P0"});for(var l=0;l<r.length;l++){var c=r[l],u=i.findPane(c.pane);if(I(u,t)){var p=c.name,d=Ki(c.type,Ge)?{min:.1,max:1}:{min:0,max:1},f=n.query(p)||s||d;0===l&&f&&s&&(f.min=Math.min(f.min,s.min),f.max=Math.max(f.max,s.max));var v=new(Ki(c.type,Ge)?e.LogarithmicAxis:e.NumericAxis)(f.min,f.max,O({},a,c),i.chartService);if(p){if(i.namedValueAxes[p])throw new Error("Value axis with name "+p+" is already defined");i.namedValueAxes[p]=v}v.axisIndex=l,h.push(v),i.appendAxis(v)}}var g=this.valueAxis||h[0];this.valueAxis=g,o?this.axisX=g:this.axisY=g},_dispatchEvent:function(t,e,i){var n=t._eventCoordinates(e),s=new C(n.x,n.y),r=this.pointPane(s),o=[],a=[];if(r){for(var h=r.axes,l=0;l<h.length;l++){var c=h[l];c.getValue?Wi(a,c.getValue(s)):Wi(o,c.getCategory(s))}0===o.length&&Wi(o,this.categoryAxis.getCategory(s)),o.length>0&&a.length>0&&t.trigger(i,{element:M(e),originalEvent:e,category:tn(o),value:tn(a)})}},pointPane:function(t){for(var e=this.panes,i=0;i<e.length;i++){var n=e[i];if(n.contentBox.containsPoint(t))return n}},updateAxisOptions:function(t,e){Rn(this.options,t,e),Rn(this.originalOptions,t,e)}});function Rn(t,e,i){var n=[].concat(e instanceof q?t.categoryAxis:t.valueAxis);O(n[e.axisIndex],i)}function Vn(t,e,i){return K(t,(function(t){return 0===i&&!t.categoryAxis||t.categoryAxis===e}))}T(En,{categoryAxis:{},valueAxis:{}}),O(En.prototype,un);var On=i.extend({init:function(){this._points=[]},destroy:function(){this._points=[]},show:function(t,e){var i=[].concat(t);this.hide();for(var n=0;n<i.length;n++){var s=i[n];s&&s.toggleHighlight&&s.hasHighlight()&&(this.togglePointHighlight(s,!0,e),this._points.push(s))}},togglePointHighlight:function(t,e,i){var n=(t.options.highlight||{}).toggle;if(n){var s={category:t.category,series:t.series,dataItem:t.dataItem,value:t.value,stackValue:t.stackValue,preventDefault:Ln,visual:t.highlightVisual(),show:e};n(s),s._defaultPrevented||t.toggleHighlight(e,i)}else t.toggleHighlight(e,i)},hide:function(){for(var t=this._points;t.length;)this.togglePointHighlight(t.pop(),!1)},isHighlighted:function(t){for(var e=this._points,i=0;i<e.length;i++){if(t===e[i])return!0}return!1}});function Ln(){this._defaultPrevented=!0}function Mn(t,e){var i=(e||"").toLowerCase(),n=t.event;return"none"===i&&!(n.ctrlKey||n.shiftKey||n.altKey)||n[i+"Key"]}function Bn(t){for(var e={},i=0;i<t.length;i++){var n=t[i];n.axis.options.name&&(e[n.axis.options.name]={min:n.range.min,max:n.range.max})}return e}var Hn=i.extend({init:function(t,e){this.plotArea=t,this.options=O({},this.options,e)},start:function(t){return this._active=Mn(t,this.options.key),this._active},move:function(t){if(this._active){var e=this.axisRanges=this._panAxes(t,f).concat(this._panAxes(t,v));if(e.length)return this.axisRanges=e,Bn(e)}},end:function(){var t=this._active;return this._active=!1,t},pan:function(){var t=this.plotArea,e=this.axisRanges;if(e.length){for(var i=0;i<e.length;i++){var n=e[i];t.updateAxisOptions(n.axis,n.range)}t.redraw(t.panes)}},destroy:function(){delete this.plotArea},_panAxes:function(t,e){var i=this.plotArea,n=-t[e].delta,s=(this.options.lock||"").toLowerCase(),r=[];if(0!==n&&(s||"").toLowerCase()!==e)for(var o=i.axes,a=0;a<o.length;a++){var h=o[a];if(e===f&&!h.options.vertical||e===v&&h.options.vertical){var l=h.pan(n);l&&(l.limitRange=!0,r.push({axis:h,range:l}))}}return r}});Hn.prototype.options={key:"none",lock:"none"};var zn=i.extend({init:function(t,e){this.chart=t,this.options=O({},this.options,e),this.createElement()},createElement:function(){var t=this._marquee=document.createElement("div");t.className="k-marquee";var e=document.createElement("div");e.className="k-marquee-color",t.appendChild(e)},removeElement:function(){this._marquee.parentNode&&this._marquee.parentNode.removeChild(this._marquee)},setStyles:function(t){Q(this._marquee,t)},start:function(t){if(Mn(t,this.options.key)){var e=this.chart,i=e._eventCoordinates(t),n=this._zoomPane=e._plotArea.paneByPoint(i),s=n?n.chartsBox().clone():null;if(n&&s){var r=this._elementOffset();return s.translate(r.left,r.top),this._zoomPaneClipBox=s,document.body.appendChild(this._marquee),this.setStyles({left:t.pageX+1,top:t.pageY+1,width:0,height:0}),!0}}return!1},_elementOffset:function(){var t=this.chart.element,i=Q(t,["paddingLeft","paddingTop"]),n=i.paddingLeft,s=i.paddingTop,r=e.elementOffset(t);return{left:n+r.left,top:s+r.top}},move:function(t){this._zoomPane&&this.setStyles(this._selectionPosition(t))},end:function(t){if(this._zoomPane){var e=this._elementOffset(),i=this._selectionPosition(t);i.left-=e.left,i.top-=e.top;var n={x:i.left,y:i.top},s={x:i.left+i.width,y:i.top+i.height};return this._updateAxisRanges(n,s),this.removeElement(),delete this._zoomPane,Bn(this.axisRanges)}},zoom:function(){var t=this.axisRanges;if(t&&t.length){for(var e=this.chart._plotArea,i=0;i<t.length;i++){var n=t[i];e.updateAxisOptions(n.axis,n.range)}e.redraw(e.panes)}},destroy:function(){this.removeElement(),delete this._marquee,delete this.chart},_updateAxisRanges:function(t,e){for(var i=(this.options.lock||"").toLowerCase(),n=[],s=this._zoomPane.axes,r=0;r<s.length;r++){var o=s[r],a=o.options.vertical;if((i!==f||a)&&(i!==v||!a)&&b(o.axisIndex)){var h=o.pointsRange(t,e);h&&n.push({axis:o,range:h})}}this.axisRanges=n},_selectionPosition:function(t){var e=this._zoomPaneClipBox,i={x:t.x.startLocation,y:t.y.startLocation},n=t.x.location,s=t.y.location,r=(this.options.lock||"").toLowerCase(),o=Math.min(i.x,n),a=Math.min(i.y,s),h=Math.abs(i.x-n),l=Math.abs(i.y-s);return r===f&&(o=e.x1,h=e.width()),r===v&&(a=e.y1,l=e.height()),n>e.x2&&(h=e.x2-i.x),n<e.x1&&(h=i.x-e.x1),s>e.y2&&(l=e.y2-i.y),s<e.y1&&(l=i.y-e.y1),{left:Math.max(o,e.x1),top:Math.max(a,e.y1),width:h,height:l}}});zn.prototype.options={key:"shift",lock:"none"};var Dn=nt.util.limitValue,Fn=i.extend({init:function(t,e){this.chart=t,this.options=O({rate:.3},this.options,e)},updateRanges:function(t,e){for(var i=(this.options.lock||"").toLowerCase(),n=[],s=this.chart._plotArea.axes,r=0;r<s.length;r++){var o=s[r],a=o.options.vertical;if((i!==f||a)&&(i!==v||!a)&&o.zoomRange){var h=Dn(this.options.rate,.01,.9),l=o.zoomRange(-t*h,e);l&&n.push({axis:o,range:l})}}return this.axisRanges=n,Bn(n)},zoom:function(){var t=this.axisRanges,e=this.chart._plotArea;if(t&&t.length&&e.updateAxisOptions){for(var i=0;i<t.length;i++){var n=t[i];e.updateAxisOptions(n.axis,n.range)}e.redraw(e.panes)}},destroy:function(){delete this.chart}}),Nn=S.extend({init:function(t,e){S.fn.init.call(this,t),this.chartService=e},render:function(){var t=this.children,e=this.options,i=e.vertical;this.visual=new nt.Layout(null,{spacing:i?0:e.spacing,lineSpacing:i?e.spacing:0,orientation:i?"vertical":"horizontal",reverse:e.rtl,alignItems:i?"start":"center"});for(var n=0;n<t.length;n++){var s=t[n];s.reflow(new k),s.renderVisual()}},reflow:function(t){this.visual.rect(t.toRect()),this.visual.reflow();var i=this.visual.clippedBBox();this.box=i?e.rectToBox(i):new k},renderVisual:function(){this.addVisual()},createVisual:function(){}}),Gn=U.extend({init:function(t){U.fn.init.call(this,t),this.createContainer(),t.rtl?(this.createLabel(),this.createMarker()):(this.createMarker(),this.createLabel())},createContainer:function(){this.container=new e.FloatElement({vertical:!1,wrap:!1,align:h,spacing:this.options.spacing}),this.append(this.container)},createMarker:function(){this.container.append(new z(this.markerOptions()))},markerOptions:function(){var t=this.options,e=t.markerColor;return O({},t.markers,{background:e,border:{color:e}})},createLabel:function(){var t=this.options,e=O({},t.labels);this.container.append(new H(t.text,e))},renderComplete:function(){U.fn.renderComplete.call(this);var t=this.options.cursor||{},e=this._itemOverlay=st.fromRect(this.container.box.toRect(),{fill:{color:p,opacity:0},stroke:null,cursor:t.style||t});this.appendVisual(e)},click:function(t,e){var i=this.eventArgs(e);!t.trigger(ye,i)&&e&&"contextmenu"===e.type&&e.preventDefault()},over:function(t,e){var i=this.eventArgs(e);return t.trigger(_e,i)||t._legendItemHover(i.seriesIndex,i.pointIndex),!0},out:function(t,e){t._unsetActivePoint(),t.trigger(be,this.eventArgs(e))},eventArgs:function(t){var e=this.options;return{element:M(t),text:e.text,series:e.series,seriesIndex:e.series.index,pointIndex:e.pointIndex}},renderVisual:function(){var t=this,e=this.options,i=e.visual;i?(this.visual=i({active:e.active,series:e.series,sender:this.getSender(),pointIndex:e.pointIndex,options:{markers:this.markerOptions(),labels:e.labels},createVisual:function(){t.createVisual(),t.renderChildren(),t.renderComplete();var e=t.visual;return delete t.visual,e}}),this.addVisual()):U.fn.renderVisual.call(this)}}),Xn="horizontal",Yn="custom",qn=S.extend({init:function(t,e){void 0===e&&(e={}),S.fn.init.call(this,t),this.chartService=e,I(this.options.position,[l,g,c,u,Yn])||(this.options.position=g),this.createContainers(),this.createLegendTitle(t.title),this.createItems()},createContainers:function(){var t=this.options,e=t.position,i=t.align,n=e,s=h;e===Yn?n=u:I(e,[l,c])?(n="start"===i?u:"end"===i?g:h,s=e):i&&("start"===i?s=l:"end"===i&&(s=c)),this.container=new U({margin:t.margin,padding:t.padding,background:t.background,border:t.border,vAlign:s,align:n,zIndex:t.zIndex,shrinkToFit:!0}),this.hasTitle()?this.itemsContainer=new U({vAlign:s,align:n,zIndex:t.zIndex,shrinkToFit:!0}):this.itemsContainer=this.container,this.append(this.container)},createItems:function(){var t=this.getService(),e=this.options,i=this.isVertical(),n=new Nn({vertical:i,spacing:e.spacing,rtl:t.rtl},t),s=e.items;e.reverse&&(s=s.slice(0).reverse());for(var r=s.length,o=0;o<r;o++){var a=s[o];n.append(new Gn(O({},{markers:e.markers,labels:e.labels,rtl:t.rtl},e.item,a)))}n.render(),this.itemsContainer.append(n)},isVertical:function(){var t=this.options,e=t.orientation,i=t.position;return i===Yn&&e!==Xn||(b(e)?e!==Xn:I(i,[u,g]))},hasItems:function(){return this.container.children[0].children.length>0},reflow:function(t){var e=this.options,i=t.clone();this.hasItems()?(e.position===Yn?(this.containerCustomReflow(i),this.box=i):this.containerReflow(i),this.hasTitle()&&this.title.reflow(new k(this.container.box.x1,this.title.box.y1,this.container.box.x2,this.title.box.y2))):this.box=i},containerReflow:function(t){var e=this.options,i=this.container,n=e.position,s=e.width,r=e.height,o=n===l||n===c?f:v,a=this.isVertical(),h=t.clone(),p=t.clone();n!==u&&n!==g||(p.y1=h.y1=0),a&&r?(p.y2=p.y1+r,p.align(h,v,i.options.vAlign)):!a&&s&&(p.x2=p.x1+s,p.align(h,f,i.options.align)),i.reflow(p);var d=(p=i.box).clone();(e.offsetX||e.offsetY)&&(p.translate(e.offsetX,e.offsetY),i.reflow(p)),d[o+1]=t[o+1],d[o+2]=t[o+2],this.box=d},containerCustomReflow:function(t){var e=this.options,i=this.container,n=e.offsetX,s=e.offsetY,r=e.width,o=e.height,a=this.isVertical(),h=t.clone();a&&o?h.y2=h.y1+o:!a&&r&&(h.x2=h.x1+r),i.reflow(h),h=i.box,i.reflow(new k(n,s,n+h.width(),s+h.height()))},renderVisual:function(){this.hasItems()&&S.fn.renderVisual.call(this)},createLegendTitle:function(t){var e=O({},{color:x,position:l,align:h},t),i=e.text;if(t&&!1!==t.visible){if(b(e)&&e.visible){var n=B(e);n?i=n({text:i}):e.format&&(i=this.chartService.format.auto(e.format,i))}this.title=new H(i,e),this.createTitleLayout(),this.appendTitleLayoutContent()}},createTitleLayout:function(){this.layout=new e.FloatElement({vertical:!0,wrap:!1}),this.container.append(this.layout)},hasTitle:function(){return Boolean(this.options.title&&!1!==this.options.title.visible)},appendTitleLayoutContent:function(){this.options.title.position===c?(this.layout.append(this.itemsContainer),this.layout.append(this.title)):(this.layout.append(this.title),this.layout.append(this.itemsContainer))}});T(qn,{position:g,items:[],offsetX:0,offsetY:0,margin:D(5),padding:D(5),border:{color:x,width:0},item:{cursor:"pointer",spacing:6},spacing:6,background:"",zIndex:1,markers:{border:{width:0},width:15,height:3,type:"rect",align:u,vAlign:h}});var Un=i.extend({init:function(){this._registry=[]},register:function(t,e){this._registry.push({type:t,seriesTypes:e})},create:function(t,e,i){for(var n,s=this._registry,r=s[0],o=0;o<s.length;o++){var a=s[o];if((n=Qi(t,a.seriesTypes)).length>0){r=a;break}}return new r.type(n,e,i)}});Un.current=new Un;function Wn(t){var e=document.createElement("div");return t&&(e.className=t),e}function Zn(t){for(var e=t;e&&!$(e,"k-handle");)e=e.parentNode;return e}var jn=i.extend({init:function(t,i,n,s){var r=t.element;this.options=O({},this.options,n),this.chart=t,this.observer=s,this.chartElement=r,this.categoryAxis=i,this._dateAxis=this.categoryAxis instanceof e.DateCategoryAxis,this.initOptions(),this.visible=this.options.visible&&r.offsetHeight,this.visible&&(this.createElements(),this.set(this._index(this.options.from),this._index(this.options.to)),this.bindEvents())},onPane:function(t){return this.categoryAxis.pane===t},createElements:function(){var t=this.options,e=this.wrapper=Wn("k-selector");Q(e,{top:t.offset.top,left:t.offset.left,width:t.width,height:t.height,direction:"ltr"});var i=this.selection=Wn("k-selection");this.leftMask=Wn("k-mask"),this.rightMask=Wn("k-mask"),e.appendChild(this.leftMask),e.appendChild(this.rightMask),e.appendChild(i),i.appendChild(Wn("k-selection-bg"));var n=this.leftHandle=Wn("k-handle k-left-handle"),s=this.rightHandle=Wn("k-handle k-right-handle");n.appendChild(Wn()),s.appendChild(Wn()),i.appendChild(n),i.appendChild(s),this.chartElement.appendChild(e);var r=Q(i,["borderLeftWidth","borderRightWidth","height"]),o=Q(n,"height").height,a=Q(s,"height").height;t.selection={border:{left:r.borderLeftWidth,right:r.borderRightWidth}},Q(n,{top:(r.height-o)/2}),Q(s,{top:(r.height-a)/2}),e.style.cssText=e.style.cssText},bindEvents:function(){var t;!1!==this.options.mousewheel&&(this._mousewheelHandler=this._mousewheel.bind(this),J(this.wrapper,((t={})[We]=this._mousewheelHandler,t)));this._domEvents=tt.DomEventsBuilder.create(this.wrapper,{stopPropagation:!0,start:this._start.bind(this),move:this._move.bind(this),end:this._end.bind(this),tap:this._tap.bind(this),press:this._press.bind(this),gesturestart:this._gesturestart.bind(this),gesturechange:this._gesturechange.bind(this),gestureend:this._gestureend.bind(this)})},initOptions:function(){var t=this.options,e=this.categoryAxis.pane.chartsBox(),i=this.chart.chartService.intl;this._dateAxis&&O(t,{min:X(i,t.min),max:X(i,t.max),from:X(i,t.from),to:X(i,t.to)});var n=Q(this.chartElement,["paddingLeft","paddingTop"]),s=n.paddingLeft,r=n.paddingTop;this.options=O({},{width:e.width(),height:e.height()+.1,padding:{left:s,top:r},offset:{left:e.x1+s,top:e.y1+r},from:t.min,to:t.max},t)},destroy:function(){if(this._domEvents&&(this._domEvents.destroy(),delete this._domEvents),clearTimeout(this._mwTimeout),this._state=null,this.wrapper){var t;if(this._mousewheelHandler)et(this.wrapper,((t={})[We]=this._mousewheelHandler,t)),this._mousewheelHandler=null;this.chartElement.removeChild(this.wrapper),this.wrapper=null}},_rangeEventArgs:function(t){return{axis:this.categoryAxis.options,from:this._value(t.from),to:this._value(t.to)}},_start:function(t){var e=this.options,i=M(t);if(!this._state&&i){this.chart._unsetActivePoint(),this._state={moveTarget:Zn(i)||i,startLocation:t.x?t.x.location:0,range:{from:this._index(e.from),to:this._index(e.to)}};var n=this._rangeEventArgs({from:this._index(e.from),to:this._index(e.to)});this.trigger(Me,n)&&(this._state=null)}},_press:function(t){var i;(i=this._state?this._state.moveTarget:Zn(M(t)))&&e.addClass(i,"k-handle-active")},_move:function(t){if(this._state){var e=this,i=e._state,n=e.options,s=e.categoryAxis,r=i.range,o=i.moveTarget,a=s.options.reverse,h=this._index(n.from),l=this._index(n.to),c=this._index(n.min),u=this._index(n.max),p=i.startLocation-t.x.location,d=r.from,f=r.to,v=r.to-r.from,g=Q(this.wrapper,"width").width/(s.categoriesCount()-1),x=Math.round(p/g)*(a?-1:1);if(o){var m=$(o,"k-left-handle"),y=$(o,"k-right-handle");$(o,"k-selection k-selection-bg")?(r.from=Math.min(Math.max(c,h-x),u-v),r.to=Math.min(r.from+v,u)):m&&!a||y&&a?(r.from=Math.min(Math.max(c,h-x),u-1),r.to=Math.max(r.from+1,r.to)):(m&&a||y&&!a)&&(r.to=Math.min(Math.max(c+1,l-x),u),r.from=Math.min(r.to-1,r.from)),r.from===d&&r.to===f||(this.move(r.from,r.to),this.trigger(Be,this._rangeEventArgs(r)))}}},_end:function(){if(this._state){var t=this._state.moveTarget;t&&e.removeClass(t,"k-handle-active");var i=this._state.range;this.set(i.from,i.to),this.trigger(He,this._rangeEventArgs(i)),delete this._state}},_tap:function(t){var e=this.options,i=this.categoryAxis,n=this.chart._eventCoordinates(t),s=i.pointCategoryIndex(new C(n.x,i.box.y1)),r=this._index(e.from),o=this._index(e.to),a=this._index(e.min),h=this._index(e.max),l=o-r,c=r+l/2,u={},p=3===t.event.which,d=Math.round(c-s);this._state||p||(this.chart._unsetActivePoint(),i.options.justified||d--,u.from=Math.min(Math.max(a,r-d),h-l),u.to=Math.min(u.from+l,h),this._start(t),this._state&&(this._state.range=u,this.trigger(Be,this._rangeEventArgs(u)),this._end()))},_mousewheel:function(t){var i=this,n=e.mousewheelDelta(t);if(this._start({target:this.selection}),this._state){var s=this._state.range;t.preventDefault(),t.stopPropagation(),Math.abs(n)>1&&(n*=3),this.options.mousewheel.reverse&&(n*=-1),this.expand(n)&&this.trigger(Be,{axis:this.categoryAxis.options,delta:n,originalEvent:t,from:this._value(s.from),to:this._value(s.to)}),this._mwTimeout&&clearTimeout(this._mwTimeout),this._mwTimeout=setTimeout((function(){i._end()}),Ze)}},_gesturestart:function(t){var e=this.options;this._state={range:{from:this._index(e.from),to:this._index(e.to)}};var i=this._rangeEventArgs(this._state.range);this.trigger(Me,i)?this._state=null:t.preventDefault()},_gestureend:function(){this._state&&(this.trigger(He,this._rangeEventArgs(this._state.range)),delete this._state)},_gesturechange:function(t){var e=this,i=e.chart,n=e._state,s=e.options,r=e.categoryAxis,o=n.range,a=i._toModelCoordinates(t.touches[0].x.location).x,h=i._toModelCoordinates(t.touches[1].x.location).x,l=Math.min(a,h),c=Math.max(a,h);t.preventDefault(),o.from=r.pointCategoryIndex(new C(l))||s.min,o.to=r.pointCategoryIndex(new C(c))||s.max,this.move(o.from,o.to),this.trigger(Be,this._rangeEventArgs(o))},_index:function(t){var e=t;return t instanceof Date&&(e=this.categoryAxis.categoryIndex(t)),e},_value:function(t){var e=t;return this._dateAxis&&(e=this.categoryAxis.categoryAt(t))>this.options.max&&(e=this.options.max),e},_slot:function(t){var e=this.categoryAxis,i=this._index(t);return e.getSlot(i,i,!0)},move:function(t,e){var i=this.options,n=this.categoryAxis.options.reverse,s=i.offset,r=i.padding,o=i.selection.border,a=n?e:t,h=n?t:e,l="x"+(n?2:1),c=this._slot(a),u=Z(c[l]-s.left+r.left);Q(this.leftMask,{width:u}),Q(this.selection,{left:u}),c=this._slot(h);var p=Z(i.width-(c[l]-s.left+r.left));Q(this.rightMask,{width:p});var d=i.width-p;d!==i.width&&(d+=o.right),Q(this.rightMask,{left:d}),Q(this.selection,{width:Math.max(i.width-(u+p)-o.right,0)})},set:function(t,e){var i=this.options,n=this._index(i.min),s=this._index(i.max),r=j(this._index(t),n,s),o=j(this._index(e),r+1,s);i.visible&&this.move(r,o),i.from=this._value(r),i.to=this._value(o)},expand:function(t){var e=this.options,i=this._index(e.min),n=this._index(e.max),s=e.mousewheel.zoom,r=this._index(e.from),o=this._index(e.to),a={from:r,to:o},h=O({},a);if(this._state&&(a=this._state.range),s!==g&&(a.from=j(j(r-t,0,o-1),i,n)),s!==u&&(a.to=j(j(o+t,a.from+1,n),i,n)),a.from!==h.from||a.to!==h.to)return this.set(a.from,a.to),!0},zoom:function(t,e){var i=this.options,n=this._index(i.min),s=this._index(i.max),r=this._index(i.from),o=this._index(i.to),a={from:r,to:o},h=O({},a),l=this.categoryAxis.options.reverse,c=f+(l?"2":"1"),u=this.categoryAxis.lineBox(),p=Math.abs(u[c]-e[f]),d=u.width(),v=Z(p/d,2),g=Z(v*t),x=Z((1-v)*t);if(this._state&&(a=this._state.range),a.from=j(j(r-g,0,o-1),n,s),a.to=j(j(o+x,a.from+1,s),n,s),a.from!==h.from||a.to!==h.to)return this.set(a.from,a.to),!0},trigger:function(t,e){return(this.observer||this.chart).trigger(t,e)}});T(jn,{visible:!0,mousewheel:{zoom:"both"},min:o,max:r});var Kn=Ni.extend({show:function(t){if(t&&t.tooltipAnchor&&(!this._current||this._current!==t)){var e=O({},this.options,t.options.tooltip),i=t.tooltipAnchor();i?(this._current=t,Ni.fn.show.call(this,{point:t,anchor:i},e,t)):this.hide()}},hide:function(){delete this._current,Ni.fn.hide.call(this)}}),Qn=Ni.extend({init:function(t,e){Ni.fn.init.call(this,t.chartService,e),this.plotArea=t,this.formatService=t.chartService.format},showAt:function(t,e){var i=K(t,(function(t){var e=t.series.tooltip;return!(e&&!1===e.visible)}));if(i.length>0){var n=i[0],s=this.plotArea.categoryAxis.getSlot(n.categoryIx),r=e?this._slotAnchor(e,s):this._defaultAnchor(n,s);this.show({anchor:r,shared:!0,points:t,category:n.category,categoryText:this.formatService.auto(this.options.categoryFormat,n.category),series:this.plotArea.series},this.options)}},_slotAnchor:function(t,e){return this.plotArea.categoryAxis.options.vertical||(t.x=e.center().x),{point:t,align:{horizontal:"left",vertical:"center"}}},_defaultAnchor:function(t,e){var i=t.owner.pane.chartsBox(),n=this.plotArea.categoryAxis.options.vertical,s=i.center(),r=e.center();return{point:n?new C(s.x,r.y):new C(r.x,s.y),align:{horizontal:"center",vertical:"center"}}}});T(Qn,{categoryFormat:"{0:d}"});var $n=rt.extend({setup:function(){var t=this.element,e=this.options;if(t.bbox()){this.origin=e.origin;var i=e.vertical?v:f,n=this.fromScale=new ct(1,1);n[i]=Pt,t.transform(ut().scale(n.x,n.y))}else this.abort()},step:function(t){var i=e.interpolateValue(this.fromScale.x,1,t),n=e.interpolateValue(this.fromScale.y,1,t);this.element.transform(ut().scale(i,n,this.origin))},abort:function(){rt.fn.abort.call(this),this.element.transform(null)}});T($n,{duration:St}),ot.current.register(Gt,$n);var Jn=rt.extend({setup:function(){var t=this.center=this.element.bbox().center();this.element.transform(ut().scale(Pt,Pt,t))},step:function(t){this.element.transform(ut().scale(t,t,this.center))}});T(Jn,{easing:"easeOutElastic"}),ot.current.register(Yt,Jn);var ts=rt.extend({setup:function(){this.fadeTo=this.element.opacity(),this.element.opacity(0)},step:function(t){this.element.opacity(t*this.fadeTo)}});T(ts,{duration:200,easing:"linear"}),ot.current.register(Ct,ts);var es=rt.extend({setup:function(){this.element.transform(ut().scale(Pt,Pt,this.options.center))},step:function(t){this.element.transform(ut().scale(t,t,this.options.center))}});T(es,{easing:"easeOutElastic",duration:St}),ot.current.register(te,es);var is=Mi.extend({render:function(){Mi.fn.render.call(this),this.renderSegments()},createSegment:function(t,e,i){return new(e.style===Dt?hi:si)(t,e,i)},animationPoints:function(){return Mi.fn.animationPoints.call(this).concat(this._segments)},createMissingValue:function(t,e){if(e===Lt){var i={x:t.x,y:t.y};return Li(i.x)||(i.x=0),Li(i.y)||(i.y=0),i}}});O(is.prototype,li);var ns=on.extend({initFields:function(){this.namedXAxes={},this.namedYAxes={},this.xAxisRangeTracker=new mi,this.yAxisRangeTracker=new mi},render:function(t){var e=this;void 0===t&&(t=this.panes);for(var i=this.groupSeriesByPane(),n=0;n<t.length;n++){var s=t[n],r=i[s.options.name||"default"]||[];e.addToLegend(r);var o=e.filterVisibleSeries(r);o&&(e.createScatterChart(Qi(o,ce),s),e.createScatterLineChart(Qi(o,ue),s),e.createBubbleChart(Qi(o,Yt),s))}this.createAxes(t)},appendChart:function(t,e){this.xAxisRangeTracker.update(t.xAxisRanges),this.yAxisRangeTracker.update(t.yAxisRanges),on.fn.appendChart.call(this,t,e)},removeAxis:function(t){var e=t.options.name;on.fn.removeAxis.call(this,t),t.options.vertical?(this.yAxisRangeTracker.reset(e),delete this.namedYAxes[e]):(this.xAxisRangeTracker.reset(e),delete this.namedXAxes[e]),t===this.axisX&&delete this.axisX,t===this.axisY&&delete this.axisY},seriesPaneName:function(t){var e=this.options,i=t.xAxis,n=[].concat(e.xAxis),s=K(n,(function(t){return t.name===i}))[0],r=t.yAxis,o=[].concat(e.yAxis),a=K(o,(function(t){return t.name===r}))[0],h=(e.panes||[{}])[0].name||"default";return(s||{}).pane||(a||{}).pane||h},createScatterChart:function(t,e){t.length>0&&this.appendChart(new Mi(this,{series:t,clip:e.options.clip}),e)},createScatterLineChart:function(t,e){t.length>0&&this.appendChart(new is(this,{series:t,clip:e.options.clip}),e)},createBubbleChart:function(t,e){t.length>0&&this.appendChart(new Hi(this,{series:t,clip:e.options.clip}),e)},createXYAxis:function(t,i,n){for(var s,r=t.name,o=i?this.namedYAxes:this.namedXAxes,a=i?this.yAxisRangeTracker:this.xAxisRangeTracker,h=O({reverse:!i&&this.chartService.rtl},t,{vertical:i}),l=Ki(h.type,Ge),c=a.query(),u=l?{min:.1,max:1}:{min:0,max:1},p=a.query(r)||c||u,d=[h.min,h.max],f=this.series,v=0;v<f.length;v++){var g=f[v],x=g[i?"yAxis":"xAxis"];if(x===h.name||0===n&&!x){var y=yt.current.bindPoint(g,0).valueFields;d.push(y[i?"y":"x"]);break}}0===n&&c&&(p.min=Math.min(p.min,c.min),p.max=Math.max(p.max,c.max));for(var _=0;_<d.length;_++)if(d[_]instanceof Date){s=!0;break}var b=new(Ki(h.type,m)||!h.type&&s?e.DateValueAxis:l?e.LogarithmicAxis:e.NumericAxis)(p.min,p.max,h,this.chartService);if(b.axisIndex=n,r){if(o[r])throw new Error((i?"Y":"X")+" axis with name "+r+" is already defined");o[r]=b}return this.appendAxis(b),b},createAxes:function(t){for(var e=this,i=this.options,n=[].concat(i.xAxis),s=[],r=[].concat(i.yAxis),o=[],a=0;a<n.length;a++){var h=e.findPane(n[a].pane);I(h,t)&&s.push(e.createXYAxis(n[a],!1,a))}for(var l=0;l<r.length;l++){var c=e.findPane(r[l].pane);I(c,t)&&o.push(e.createXYAxis(r[l],!0,l))}this.axisX=this.axisX||s[0],this.axisY=this.axisY||o[0]},_dispatchEvent:function(t,e,i){for(var n=t._eventCoordinates(e),s=new C(n.x,n.y),r=this.axes,o=r.length,a=[],h=[],l=0;l<o;l++){var c=r[l],u=c.options.vertical?h:a,p=c.getValue(s);null!==p&&u.push(p)}a.length>0&&h.length>0&&t.trigger(i,{element:M(e),originalEvent:e,x:tn(a),y:tn(h)})},updateAxisOptions:function(t,e){var i=t.options.vertical,n=this.groupAxes(this.panes),s=(i?n.y:n.x).indexOf(t);ss(this.options,s,i,e),ss(this.originalOptions,s,i,e)}});function ss(t,e,i,n){var s=[].concat(i?t.yAxis:t.xAxis)[e];O(s,n)}T(ns,{xAxis:{},yAxis:{}}),O(ns.prototype,un);var rs=S.extend({init:function(t,e,i){S.fn.init.call(this,i),this.value=t,this.sector=e},render:function(){var t=this.options.labels,i=this.owner.chartService,n=this.value;if(!this._rendered&&!1!==this.visible){this._rendered=!0;var s=B(t),r=this.pointData();if(s?n=s(r):t.format&&(n=i.format.auto(t.format,n)),t.visible&&(n||0===n)){if(t.position===h||t.position===Ye)t.color||(t.color=e.autoTextColor(this.options.color)),t.background||(t.background=this.options.color);else{var o=i.theme.seriesDefaults.labels;t.color=t.color||o.color,t.background=t.background||o.background}this.label=new H(n,O({},t,{align:h,vAlign:"",animation:{type:Ct,delay:this.animationDelay}}),r),this.append(this.label)}}},reflow:function(t){this.render(),this.box=t,this.reflowLabel()},reflowLabel:function(){var t=this.options.labels,e=this.label,i=this.sector.clone(),n=t.distance,s=i.middle();if(e){var r,o=e.box.height(),a=e.box.width();if(t.position===h)i.radius=Math.abs((i.radius-o)/2)+o,r=i.point(s),e.reflow(new k(r.x,r.y-o/2,r.x,r.y));else if(t.position===Ye)i.radius=i.radius-o/2,r=i.point(s),e.reflow(new k(r.x,r.y-o/2,r.x,r.y));else{var l;(r=i.clone().expand(n).point(s)).x>=i.center.x?(l=r.x+a,e.orientation=g):(l=r.x-a,e.orientation=u),e.reflow(new k(l,r.y-o,r.x,r.y))}}},createVisual:function(){var t=this,e=this.sector,i=this.options;if(S.fn.createVisual.call(this),this.value)if(i.visual){var n=(e.startAngle+180)%360,s=i.visual({category:this.category,dataItem:this.dataItem,value:this.value,series:this.series,percentage:this.percentage,center:new ct(e.center.x,e.center.y),radius:e.radius,innerRadius:e.innerRadius,startAngle:n,endAngle:n+e.angle,options:i,sender:this.getSender(),createVisual:function(){var e=new at;return t.createSegmentVisual(e),e}});s&&this.visual.append(s)}else this.createSegmentVisual(this.visual)},createSegmentVisual:function(t){var e=this.sector,i=this.options,n=i.border||{},s=n.width>0?{stroke:{color:n.color,width:n.width,opacity:n.opacity,dashType:n.dashType}}:{},r=i.color,o={color:r,opacity:i.opacity},a=this.createSegment(e,O({fill:o,stroke:{opacity:i.opacity},zIndex:i.zIndex},s));t.append(a),_i(i)&&t.append(this.createGradientOverlay(a,{baseColor:r,fallbackFill:o},O({center:[e.center.x,e.center.y],innerRadius:e.innerRadius,radius:e.radius,userSpace:!0},i.overlay)))},createSegment:function(t,i){return i.singleSegment?new nt.Circle(new lt.Circle(new ct(t.center.x,t.center.y),t.radius),i):e.ShapeBuilder.current.createRing(t,i)},createAnimation:function(){var t=this.options,e=this.sector.center;O(t,{animation:{center:[e.x,e.y],delay:this.animationDelay}}),S.fn.createAnimation.call(this)},createHighlight:function(t){var e=this.options.highlight||{},i=e.border||{};return this.createSegment(this.sector,O({},t,{fill:{color:e.color,opacity:e.opacity},stroke:{opacity:i.opacity,width:i.width,color:i.color}}))},highlightVisual:function(){return this.visual.children[0]},highlightVisualArgs:function(){var t=this.sector;return{options:this.options,radius:t.radius,innerRadius:t.innerRadius,center:new ct(t.center.x,t.center.y),startAngle:t.startAngle,endAngle:t.angle+t.startAngle,visual:this.visual}},tooltipAnchor:function(){var t=this.sector.clone().expand(5),e=t.middle();return{point:t.point(e),align:hs(e+180)}},formatValue:function(t){return this.owner.formatPointValue(this,t)},pointData:function(){return{dataItem:this.dataItem,category:this.category,value:this.value,series:this.series,percentage:this.percentage}}}),os=Z(e.rad(30),y),as=Z(e.rad(60),y);function hs(t){var i=e.rad(t),n=Z(Math.sin(i),y),s=Z(Math.cos(i),y);return{horizontal:Math.abs(n)>as?h:s<0?g:u,vertical:Math.abs(n)<os?h:n<0?c:l}}T(rs,{color:p,overlay:{gradient:"roundedBevel"},border:{width:.5},labels:{visible:!1,distance:35,font:s.DEFAULT_FONT,margin:D(.5),align:d,zIndex:1,position:Ue},animation:{type:te},highlight:{visible:!0,border:{width:1}},visible:!0}),O(rs.prototype,ei);var ls={createLegendItem:function(t,e,i){var n=this.options.legend||{},s=n.labels||{},r=n.inactiveItems||{},o=r.labels||{};if(i&&!1!==i.visibleInLegend){var a,h,l=!1!==i.visible,c=l?B(s):B(o)||B(s),u=i.category;c&&(u=c({text:u,series:i.series,dataItem:i.dataItem,percentage:i.percentage,value:t})),l?(a={},h=e.color):(a={color:o.color,font:o.font},h=(r.markers||{}).color),Li(u)&&""!==u&&this.legendItems.push({active:l,pointIndex:i.index,text:u,series:i.series,markerColor:h,labels:a})}}},cs=S.extend({init:function(t,e){S.fn.init.call(this,e),this.plotArea=t,this.chartService=t.chartService,this.points=[],this.legendItems=[],this.render()},render:function(){this.traverseDataPoints(this.addValue.bind(this))},traverseDataPoints:function(t){var i=this.options,n=this.plotArea.options.seriesColors;void 0===n&&(n=[]);for(var s=n.length,r=i.series,o=r.length,a=0;a<o;a++){var l=r[a],c=l.data,u=ji(l),p=u.total,d=u.points,f=u.count,v=360/p,g=void 0;isFinite(v)||(g=360/f);var x=void 0;x=b(l.startAngle)?l.startAngle:i.startAngle,a!==o-1&&l.labels.position===Ue&&(l.labels.position=h);for(var m=0;m<d.length;m++){var y=d[m];if(y){var _=y.fields,w=y.value,A=y.visible,S=0!==w?g||w*v:0,C=1!==c.length&&Boolean(_.explode);E(l.color)||(l.color=_.color||n[m%s]),t(w,new e.Ring(null,0,0,x,S),{owner:this,category:b(_.category)?_.category:"",index:m,series:l,seriesIx:a,dataItem:c[m],percentage:0!==p?w/p:0,explode:C,visibleInLegend:_.visibleInLegend,visible:A,zIndex:o-a,animationDelay:this.animationDelay(m,a,o)}),!1!==A&&(x+=S)}}}},evalSegmentOptions:function(t,e,i){var n=i.series;$e(t,{value:e,series:n,dataItem:i.dataItem,category:i.category,percentage:i.percentage},{defaults:n._defaults,excluded:["data","content","template","visual","toggle"]})},addValue:function(e,i,n){var s=O({},n.series,{index:n.index});if(this.evalSegmentOptions(s,e,n),this.createLegendItem(e,s,n),!1!==n.visible){var r=new rs(e,i,s);t.extend(r,n),this.append(r),this.points.push(r)}},reflow:function(t){var e=this,i=e.options,n=e.points,s=e.seriesConfigs;void 0===s&&(s=[]);var r=n.length,o=t.clone(),a=Math.min(o.width(),o.height()),h=a/2,l=a-.85*a,c=new k(o.x1,o.y1,o.x1+a,o.y1+a),u=c.center(),p=o.center(),d=i.series.length,f=[],v=[],x=R(i.padding,l);this.targetBox=t,x=x>h-5?h-5:x,c.translate(p.x-u.x,p.y-u.y);for(var m=h-x,y=new C(m+c.x1+x,m+c.y1+x),_=0;_<r;_++){var b=n[_],w=b.sector,A=b.seriesIx;if(w.radius=m,w.center=y,s.length){var S=s[A];w.innerRadius=S.innerRadius,w.radius=S.radius}A===d-1&&b.explode&&(w.center=w.clone().setRadius(.15*w.radius).point(w.middle())),b.reflow(c);var P=b.label;P&&P.options.position===Ue&&A===d-1&&(P.orientation===g?v.push(P):f.push(P))}f.length>0&&(f.sort(this.labelComparator(!0)),this.leftLabelsReflow(f)),v.length>0&&(v.sort(this.labelComparator(!1)),this.rightLabelsReflow(v)),this.box=c},leftLabelsReflow:function(t){var e=this.distanceBetweenLabels(t);this.distributeLabels(e,t)},rightLabelsReflow:function(t){var e=this.distanceBetweenLabels(t);this.distributeLabels(e,t)},distanceBetweenLabels:function(t){var e=L(this.points),i=e.sector,n=t.length-1,s=i.radius+e.options.labels.distance,r=[],o=t[0].box,a=Z(o.y1-(i.center.y-s-o.height()-o.height()/2));r.push(a);for(var h=0;h<n;h++){var l=t[h+1].box;o=t[h].box,a=Z(l.y1-o.y2),r.push(a)}return a=Z(i.center.y+s-t[n].box.y2-t[n].box.height()/2),r.push(a),r},distributeLabels:function(t,e){for(var i,n,s,r=t.length,o=0;o<r;o++)for(s=-t[o],i=n=o;s>0&&(i>=0||n<r);)s=this._takeDistance(t,o,--i,s),s=this._takeDistance(t,o,++n,s);this.reflowLabels(t,e)},_takeDistance:function(t,e,i,n){var s=n;if(t[i]>0){var r=Math.min(t[i],s);s-=r,t[i]-=r,t[e]+=r}return s},reflowLabels:function(t,e){var i,n=L(this.points),s=n.sector,r=n.options.labels,o=e.length,a=r.distance,h=s.center.y-(s.radius+a)-e[0].box.height();t[0]+=2;for(var l=0;l<o;l++){var c=e[l],u=c.box;h+=t[l],i=this.hAlignLabel(u.x2,s.clone().expand(a),h,h+u.height(),c.orientation===g),c.orientation===g?(r.align!==d&&(i=s.radius+s.center.x+a),c.reflow(new k(i+u.width(),h,i,h))):(r.align!==d&&(i=s.center.x-s.radius-a),c.reflow(new k(i-u.width(),h,i,h))),h+=u.height()}},createVisual:function(){var t=this,e=this.options.connectors,i=this.points,n=i.length;S.fn.createVisual.call(this),this._connectorLines=[];for(var s=0;s<n;s++){var r=i[s],o=r.sector,a=r.label,h=o.middle(),l=(r.options.connectors||{}).color||e.color;if(a){var c=new st({stroke:{color:l,width:e.width},animation:{type:Ct,delay:r.animationDelay}});if(a.options.position===Ue){var u=a.box,p=o.center,d=o.point(h),f=new C(u.x1,u.center().y),v=void 0,x=void 0,m=void 0;d=o.clone().expand(e.padding).point(h),c.moveTo(d.x,d.y),a.orientation===g?(m=us(p,d,f,x=new C(u.x1-e.padding,u.center().y)),f=new C(x.x-4,x.y),(m=m||f).x=Math.min(m.x,f.x),t.pointInCircle(m,o.center,o.radius+4)||m.x<o.center.x?(v=o.center.x+o.radius+4,r.options.labels.align!==Wt?v<f.x?c.lineTo(v,d.y):c.lineTo(d.x+8,d.y):c.lineTo(v,d.y),c.lineTo(f.x,x.y)):(m.y=x.y,c.lineTo(m.x,m.y))):(m=us(p,d,f,x=new C(u.x2+e.padding,u.center().y)),f=new C(x.x+4,x.y),(m=m||f).x=Math.max(m.x,f.x),t.pointInCircle(m,o.center,o.radius+4)||m.x>o.center.x?(v=o.center.x-o.radius-4,r.options.labels.align!==Wt?v>f.x?c.lineTo(v,d.y):c.lineTo(d.x-8,d.y):c.lineTo(v,d.y),c.lineTo(f.x,x.y)):(m.y=x.y,c.lineTo(m.x,m.y))),c.lineTo(x.x,x.y),t._connectorLines.push(c),t.visual.append(c)}}}},renderVisual:function(){if(S.fn.renderVisual.call(this),e.find(this.options.series,(function(t){return t.autoFit}))){var t=this.targetBox,i=this.box.center(),n=this.visual.bbox();if(!n)return;var s=n.bottomRight(),r=Math.min((i.y-t.y1)/(i.y-n.origin.y),(t.y2-i.y)/(s.y-i.y),(i.x-t.x1)/(i.x-n.origin.x),(t.x2-i.x)/(s.x-i.x));r<1&&this.visual.transform(ut().scale(r,r,[i.x,i.y]))}},labelComparator:function(t){var e=t?-1:1;return function(t,i){return((t.parent.sector.middle()+270)%360-(i.parent.sector.middle()+270)%360)*e}},hAlignLabel:function(t,e,i,n,s){var r=e.radius,o=e.center,a=o.x,h=o.y,l=Math.min(Math.abs(h-i),Math.abs(h-n));return l>r?t:a+Math.sqrt(r*r-l*l)*(s?1:-1)},pointInCircle:function(t,e,i){return Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)<Math.pow(i,2)},formatPointValue:function(t,e){return this.chartService.format.auto(e,t.value)},animationDelay:function(t){return 70*t},stackRoot:function(){return this}});function us(t,e,i,n){var s,r=(n.x-i.x)*(t.y-i.y)-(n.y-i.y)*(t.x-i.x),o=(n.y-i.y)*(e.x-t.x)-(n.x-i.x)*(e.y-t.y);if(0!==o){var a=r/o;s=new C(t.x+a*(e.x-t.x),t.y+a*(e.y-t.y))}return s}T(cs,{startAngle:90,connectors:{width:2,color:"#939393",padding:8},inactiveItems:{markers:{},labels:{}}}),O(cs.prototype,ls),cs.prototype.isStackRoot=!0;var ps=on.extend({render:function(){this.createPieChart(this.series)},createPieChart:function(t){var e=t[0],i=new cs(this,{series:t,padding:e.padding,startAngle:e.startAngle,connectors:e.connectors,legend:this.options.legend});this.appendChart(i)},appendChart:function(t,e){on.fn.appendChart.call(this,t,e),N(this.options.legend.items,t.legendItems)}}),ds=rs.extend({reflowLabel:function(){var t=this.options.labels,e=this.label,i=this.sector.clone(),n=i.middle();if(e){var s=e.box.height();if(t.position===h){i.radius-=(i.radius-i.innerRadius)/2;var r=i.point(n);e.reflow(new k(r.x,r.y-s/2,r.x,r.y))}else rs.fn.reflowLabel.call(this)}},createSegment:function(t,i){return e.ShapeBuilder.current.createRing(t,i)}});T(ds,{overlay:{gradient:"roundedGlass"},labels:{position:h},animation:{type:te}}),O(ds.prototype,ei);var fs=cs.extend({addValue:function(e,i,n){var s=O({},n.series,{index:n.index});if(this.evalSegmentOptions(s,e,n),this.createLegendItem(e,s,n),!1!==n.visible){var r=new ds(e,i,s);t.extend(r,n),this.append(r),this.points.push(r)}},reflow:function(t){for(var e,i=this.options,n=t.clone(),s=Math.min(n.width(),n.height()),r=s/2,o=s-.85*s,a=i.series,h=a.length,l=R(i.padding,o),c=r-(l=l>r-5?r-5:l),u=0,p=0;p<h;p++){var d=a[p];0===p&&b(d.holeSize)&&(e=d.holeSize,c-=d.holeSize),b(d.size)?c-=d.size:u++,b(d.margin)&&p!==h-1&&(c-=d.margin)}b(e)||(c-=e=.75*((r-l)/(h+.75)));var f,v=e,g=0;this.seriesConfigs=[];for(var x=0;x<h;x++){var m=a[x];f=(v+=g)+R(m.size,c/u),this.seriesConfigs.push({innerRadius:v,radius:f}),g=m.margin||0,v=f}cs.fn.reflow.call(this,t)},animationDelay:function(t,e,i){return 50*t+St*(e+1)/(i+1)}});T(fs,{startAngle:90,connectors:{width:2,color:"#939393",padding:8}});var vs=ps.extend({render:function(){this.createDonutChart(this.series)},createDonutChart:function(t){var e=t[0],i=new fs(this,{series:t,padding:e.padding,connectors:e.connectors,legend:this.options.legend});this.appendChart(i)}}),gs=on.extend({initFields:function(){this.valueAxisRangeTracker=new mi},render:function(){this.addToLegend(this.series),this.createPolarAxis(),this.createCharts(),this.createValueAxis()},alignAxes:function(){var t=this.valueAxis,e=t.range(),i=t.options.reverse?e.max:e.min,n=t.getSlot(i),s=this.polarAxis.getSlot(0).center,r=t.box.translate(s.x-n.x1,s.y-n.y1);t.reflow(r)},createValueAxis:function(){var t,i,n=this.valueAxisRangeTracker,s=n.query(),r=this.valueAxisOptions({roundToMajorUnit:!1,zIndex:-1});r.type===Ge?(t=e.RadarLogarithmicAxis,i={min:.1,max:1}):(t=e.RadarNumericAxis,i={min:0,max:1});var o=n.query(name)||s||i;o&&s&&(o.min=Math.min(o.min,s.min),o.max=Math.max(o.max,s.max));var a=new t(o.min,o.max,r,this.chartService);this.valueAxis=a,this.appendAxis(a)},reflowAxes:function(){var t=this,e=t.options.plotArea,i=t.valueAxis,n=t.polarAxis,s=t.box,r=.15*Math.min(s.width(),s.height()),o=D(e.padding||{},r),a=s.clone().unpad(o),l=a.clone();l.y2=l.y1+Math.min(l.width(),l.height()),l.align(a,v,h);var c=l.clone().shrink(0,l.height()/2);n.reflow(l),i.reflow(c);var u=i.lineBox().height()-i.box.height();i.reflow(i.box.unpad({top:u})),this.axisBox=l,this.alignAxes(l)},backgroundBox:function(){return this.box},detachLabels:function(){}}),xs=Mi.extend({pointSlot:function(t,e){var i=t.center.y-e.y1,n=C.onCircle(t.center,t.startAngle,i);return new k(n.x,n.y,n.x,n.y)}});T(xs,{clip:!1});var ms=is.extend({});ms.prototype.pointSlot=xs.prototype.pointSlot,T(ms,{clip:!1});var ys=gi.extend({fillToAxes:function(t){var e=this._polarAxisCenter();t.lineTo(e.x,e.y)},_polarAxisCenter:function(){return this.parent.plotArea.polarAxis.box.center()},strokeSegments:function(){var t=this._strokeSegments;if(!t){var e=this._polarAxisCenter(),i=new F(!1),n=this.points();n.push(e),(t=this._strokeSegments=i.process(n)).pop()}return t}}),_s=fi.extend({fillToAxes:function(t){var e=this.parent.plotArea.polarAxis.box.center(),i=new lt.Segment([e.x,e.y]);t.segments.unshift(i),t.segments.push(i)}}),bs=ms.extend({createSegment:function(t,e,i){return(e.line||{}).style===Dt?new ys(t,e,i):new _s(t,e,i)},createMissingValue:function(t,e){var i;return Li(t.x)&&e!==Mt&&(i={x:t.x,y:t.y},e===Lt&&(i.y=0)),i},seriesMissingValues:function(t){return t.missingValues||Lt},_hasMissingValuesGap:function(){for(var t=this.options.series,e=0;e<t.length;e++)if(this.seriesMissingValues(t[e])===Bt)return!0},sortPoints:function(t){if(t.sort(ws),this._hasMissingValuesGap())for(var e=0;e<t.length;e++){var i=t[e];if(i)Li(i.value.y)||this.seriesMissingValues(i.series)!==Bt||delete t[e]}return t}});function ws(t,e){return t.value.x-e.value.x}var As=gs.extend({createPolarAxis:function(){var t=new e.PolarAxis(this.options.xAxis,this.chartService);this.polarAxis=t,this.axisX=t,this.appendAxis(t)},valueAxisOptions:function(t){return O(t,{majorGridLines:{type:_},minorGridLines:{type:_}},this.options.yAxis)},createValueAxis:function(){gs.fn.createValueAxis.call(this),this.axisY=this.valueAxis},appendChart:function(t,e){this.valueAxisRangeTracker.update(t.yAxisRanges),on.prototype.appendChart.call(this,t,e)},createCharts:function(){var t=this.filterVisibleSeries(this.series),e=this.panes[0];this.createLineChart(Qi(t,[ie]),e),this.createScatterChart(Qi(t,[ne]),e),this.createAreaChart(Qi(t,[ee]),e)},createLineChart:function(t,e){if(0!==t.length){var i=new ms(this,{series:t});this.appendChart(i,e)}},createScatterChart:function(t,e){if(0!==t.length){var i=new xs(this,{series:t});this.appendChart(i,e)}},createAreaChart:function(t,e){if(0!==t.length){var i=new bs(this,{series:t});this.appendChart(i,e)}},_dispatchEvent:function(t,e,i){var n=t._eventCoordinates(e),s=new C(n.x,n.y),r=this.axisX.getValue(s),o=this.axisY.getValue(s);null!==r&&null!==o&&t.trigger(i,{element:M(e),x:r,y:o})},createCrosshairs:function(){}});T(As,{xAxis:{},yAxis:{}}),O(As.prototype,un);var Ss=di.extend({pointSlot:function(t,e){var i=t.center.y-e.y1,n=C.onCircle(t.center,t.middle(),i);return new k(n.x,n.y,n.x,n.y)},renderSegments:function(){if(di.fn.renderSegments.call(this),this._segments&&this._segments.length>1)for(var t=function(t){for(var e=[],i=0;i<t.length;i++){var n=t[i];e[n.seriesIx]=e[n.seriesIx]||[],e[n.seriesIx].push(n)}return e}(this._segments),e=0;e<t.length;e++){var i=t[e];if(i&&i.length>1){var n=i[0].linePoints[0],s=L(i),r=L(s.linePoints),o=0===n.categoryIx,a=r.categoryIx===r.categoriesCount-1;o&&a&&L(i).linePoints.push(n)}}},createSegment:function(t,e,i){var n=new(e.style===Dt?hi:si)(t,e,i),s=this.seriesMissingValues(e);return t.length!==e.data.length&&s!==Mt||(n.options.closed=!0),n}});T(Ss,{clip:!1,limitPoints:!1});var Cs=gi.extend({fillToAxes:function(){}}),ks=fi.extend({fillToAxes:function(){}}),Ps=Ss.extend({createSegment:function(t,e,i,n){var s,r,o,a=this.options.isStacked,h=(e.line||{}).style;return a&&i>0&&n&&(r=n.linePoints.slice(0),s=n),h===Dt?(o=new Cs(t,e,i,s,r)).options.closed=!0:(t.push(t[0]),o=new ks(t,e,i,s,r)),o},seriesMissingValues:function(t){return t.missingValues||Lt}}),Ts=ds.extend({init:function(t,e){ds.fn.init.call(this,t,null,e)}});T(Ts,{overlay:{gradient:"none"},labels:{distance:10}});var Is=S.extend({init:function(t){S.fn.init.call(this,t),this.forEach=t.rtl?Ai:wi},reflow:function(t){var e=this.options,i=this.children,n=e.gap,s=e.spacing,r=i.length,o=r+n+s*(r-1),a=t.angle/o,h=t.startAngle+a*(n/2);this.forEach(i,(function(e){var i=t.clone();i.startAngle=h,i.angle=a,e.sector&&(i.radius=e.sector.radius),e.reflow(i),e.sector=i,h+=a+a*s}))}});T(Is,{gap:1,spacing:0});var Es=S.extend({reflow:function(t){var e=this.options.reverse,i=this.children,n=i.length,s=e?n-1:0,r=e?-1:1;this.box=new k;for(var o=s;o>=0&&o<n;o+=r){var a=i[o].sector;a.startAngle=t.startAngle,a.angle=t.angle}}}),Rs=ki.extend({pointType:function(){return Ts},clusterType:function(){return Is},stackType:function(){return Es},categorySlot:function(t,e){return t.getSlot(e)},pointSlot:function(t,e){var i=t.clone(),n=t.center.y;return i.radius=n-e.y1,i.innerRadius=n-e.y2,i},reflowPoint:function(t,e){t.sector=e,t.reflow()},createAnimation:function(){this.options.animation.center=this.box.toRect().center(),ki.fn.createAnimation.call(this)}});Rs.prototype.reflow=ti.prototype.reflow,T(Rs,{clip:!1,limitPoints:!1,animation:{type:"pie"}});var Vs=gs.extend({createPolarAxis:function(){var t=new e.RadarCategoryAxis(this.options.categoryAxis,this.chartService);this.polarAxis=t,this.categoryAxis=t,this.appendAxis(t),this.aggregateCategories(),this.createCategoryAxesLabels()},valueAxisOptions:function(t){return this._hasBarCharts&&O(t,{majorGridLines:{type:_},minorGridLines:{type:_}}),this._isStacked100&&O(t,{roundToMajorUnit:!1,labels:{format:"P0"}}),O(t,this.options.valueAxis)},aggregateCategories:function(){En.prototype.aggregateCategories.call(this,this.panes)},createCategoryAxesLabels:function(){En.prototype.createCategoryAxesLabels.call(this,this.panes)},filterSeries:function(t){return t},createCharts:function(){var t=this.filterVisibleSeries(this.series),e=this.panes[0];this.createAreaChart(Qi(t,[se]),e),this.createLineChart(Qi(t,[oe]),e),this.createBarChart(Qi(t,[re]),e)},chartOptions:function(t){var e={series:t},i=t[0];if(i){var n=this.filterVisibleSeries(t),s=i.stack;e.isStacked=s&&n.length>1,e.isStacked100=s&&"100%"===s.type&&n.length>1,e.isStacked100&&(this._isStacked100=!0)}return e},createAreaChart:function(t,e){if(0!==t.length){var i=new Ps(this,this.chartOptions(t));this.appendChart(i,e)}},createLineChart:function(t,e){if(0!==t.length){var i=new Ss(this,this.chartOptions(t));this.appendChart(i,e)}},createBarChart:function(t,e){if(0!==t.length){var i=t[0],n=this.chartOptions(t);n.gap=i.gap,n.spacing=i.spacing;var s=new Rs(this,n);this.appendChart(s,e),this._hasBarCharts=!0}},seriesCategoryAxis:function(){return this.categoryAxis},_dispatchEvent:function(t,e,i){var n=t._eventCoordinates(e),s=new C(n.x,n.y),r=this.categoryAxis.getCategory(s),o=this.valueAxis.getValue(s);null!==r&&null!==o&&t.trigger(i,{element:M(e),category:r,value:o})},createCrosshairs:function(){}});O(Vs.prototype,un,{appendChart:En.prototype.appendChart,aggregateSeries:En.prototype.aggregateSeries,seriesSourcePoints:En.prototype.seriesSourcePoints}),T(Vs,{categoryAxis:{categories:[]},valueAxis:{}});var Os=S.extend({init:function(t,e,i){S.fn.init.call(this,e),this.value=t,this.options.index=i.index},reflow:function(t){var e=this.points,i=this.children[0];this.box=new k(e[0].x,e[0].y,e[1].x,e[2].y),i&&i.reflow(new k(t.x1,e[0].y,t.x2,e[2].y))},createVisual:function(){var t,e=this,i=this.options;S.fn.createVisual.call(this),(t=i.visual?i.visual({category:this.category,dataItem:this.dataItem,value:this.value,series:this.series,percentage:this.percentage,points:this.points,options:i,sender:this.getSender(),createVisual:function(){return e.createPath()}}):this.createPath())&&this.visual.append(t)},createPath:function(){var t=this.options,e=t.border;return st.fromPoints(this.points,{fill:{color:t.color,opacity:t.opacity},stroke:{color:e.color,opacity:e.opacity,width:e.width}}).close()},createHighlight:function(t){return st.fromPoints(this.points,t)},highlightVisual:function(){return this.visual.children[0]},highlightVisualArgs:function(){var t=st.fromPoints(this.points).close();return{options:this.options,path:t}},tooltipAnchor:function(){var t=this.box;return{point:new C(t.center().x,t.y1),align:{horizontal:"center",vertical:"top"}}},formatValue:function(t){return this.owner.formatPointValue(this,t)}});T(Os,{color:p,border:{width:1}}),O(Os.prototype,ei);var Ls=S.extend({init:function(t,e){S.fn.init.call(this,e),this.plotArea=t,this.points=[],this.labels=[],this.legendItems=[],this.render()},formatPointValue:function(t,e){return this.chartService.format.auto(e,t.value)},render:function(){var t=this,e=this.options,i=this.plotArea.options.seriesColors;void 0===i&&(i=[]);var n=e.series[0],s=n.data;if(s)for(var r=ji(n),o=r.total,a=r.points,h=0;h<a.length;h++){var l=a[h];if(l){var c=l.fields;E(n.color)||(n.color=c.color||i[h%i.length]),c=O({index:h,owner:t,series:n,dataItem:s[h],percentage:l.value/o},c,{visible:l.visible});var u=l.valueFields.value,p=t.createSegment(u,c),d=t.createLabel(u,c);p&&d&&p.append(d)}}},evalSegmentOptions:function(t,e,i){var n=i.series;$e(t,{value:e,series:n,dataItem:i.dataItem,index:i.index},{defaults:n._defaults,excluded:["data","content","template","toggle","visual"]})},createSegment:function(e,i){var n=O({},i.series);if(this.evalSegmentOptions(n,e,i),this.createLegendItem(e,n,i),!1!==i.visible){var s=new Os(e,n,i);return t.extend(s,i),this.append(s),this.points.push(s),s}},createLabel:function(t,i){var n=i.series,s=i.dataItem,r=O({},this.options.labels,n.labels),o=t;if(r.visible){var a=B(r),h={dataItem:s,value:t,percentage:i.percentage,category:i.category,series:n};a?o=a(h):r.format&&(o=this.plotArea.chartService.format.auto(r.format,o)),r.color||(r.color=e.autoTextColor(n.color),r.background||(r.background=n.color)),this.evalSegmentOptions(r,t,i);var l=new H(o,O({vAlign:r.position},r),h);return this.labels.push(l),l}},labelPadding:function(){for(var t=this.labels,e={left:0,right:0},i=0;i<t.length;i++){var n=t[i].options.align;if(n!==h){var s=t[i].box.width();n===u?e.left=Math.max(e.left,s):e.right=Math.max(e.right,s)}}return e},dynamicSlopeReflow:function(t,e,i){for(var n=this.options,s=this.points,r=s.length,o=s[0],a=o,h=0;h<s.length;h++)s[h].percentage>a.percentage&&(a=s[h]);for(var l=o.percentage/a.percentage*e,c=(e-l)/2,u=0,p=0;p<r;p++){var d=s[p].percentage,f=s[p+1],v=f?f.percentage:d,g=s[p].points=[],x=n.dynamicHeight?i*d:i/r,m=void 0;m=j(m=d?(e-l*(v/d))/2:v?0:e/2,0,e),g.push(new ct(t.x1+c,t.y1+u)),g.push(new ct(t.x1+e-c,t.y1+u)),g.push(new ct(t.x1+e-m,t.y1+x+u)),g.push(new ct(t.x1+m,t.y1+x+u)),c=m,u+=x+n.segmentSpacing,l=j(e-2*m,0,e)}},constantSlopeReflow:function(t,e,i){for(var n=this.options,s=this.points,r=s.length,o=n.neckRatio<=1,a=o?n.neckRatio*e:e,h=o?0:(e-e/n.neckRatio)/2,l=((o?e:e-2*h)-a)/2,c=0,u=0;u<r;u++){var p=s[u].points=[],d=s[u].percentage,f=n.dynamicHeight?l*d:l/r,v=n.dynamicHeight?i*d:i/r;p.push(new ct(t.x1+h,t.y1+c)),p.push(new ct(t.x1+e-h,t.y1+c)),p.push(new ct(t.x1+e-h-f,t.y1+v+c)),p.push(new ct(t.x1+h+f,t.y1+v+c)),h+=f,c+=v+n.segmentSpacing}},reflow:function(t){var e=this.points,i=e.length;if(i){var n=this.options,s=t.clone().unpad(this.labelPadding()),r=s.height()-n.segmentSpacing*(i-1),o=s.width();n.dynamicSlope?this.dynamicSlopeReflow(s,o,r):this.constantSlopeReflow(s,o,r);for(var a=0;a<i;a++)e[a].reflow(t)}}});T(Ls,{neckRatio:.3,width:300,dynamicSlope:!1,dynamicHeight:!0,segmentSpacing:0,labels:{visible:!1,align:h,position:h,zIndex:1}}),O(Ls.prototype,ls);var Ms=on.extend({render:function(){this.createFunnelChart(this.series)},createFunnelChart:function(t){var e=t[0],i=new Ls(this,{series:t,legend:this.options.legend,neckRatio:e.neckRatio,dynamicHeight:e.dynamicHeight,dynamicSlope:e.dynamicSlope,segmentSpacing:e.segmentSpacing,highlight:e.highlight});this.appendChart(i)},appendChart:function(t,e){on.fn.appendChart.call(this,t,e),N(this.options.legend.items,t.legendItems)}}),Bs=S.extend({init:function(t,e){S.fn.init.call(this),this.options=e,this.color=e.color||p,this.value=t},render:function(){this._rendered||(this._rendered=!0,this.createMarker(),this.createLabel(),this.createNote())},createLabel:function(){var t=this.options.labels;if(t.visible){var i,n=this.pointData(),s=B(t),r=t.color;i=s?s(n):this.formatValue(t.format),r||(r=e.autoTextColor(this.color)),this.label=new H(i,O({align:h,vAlign:h,margin:{left:5,right:5},zIndex:R(t.zIndex,this.series.zIndex)},t,{color:r}),n),this.append(this.label)}},formatValue:function(t){return this.owner.formatPointValue(this,t)},reflow:function(t){this.render();var e=this.label;this.box=t,e&&e.reflow(this.markerBox()),this.note&&this.note.reflow(t),this.marker.reflow(this.markerBox())},markerBox:function(){var t=this.options.markers,i=t.border,n=this.box.toRect(),r=R(t.type,"rect")===s.ROUNDED_RECT,o=R(i.width,r?1:0),a=Math.round(o/2);if(t.size){var h=n.center();n.size.width=n.size.height=t.size,n.origin.x=Math.round(h.x-n.size.width/2),n.origin.y=Math.round(h.y-n.size.height/2)}return n.size.width-=o,n.size.height-=o,n.origin.y+=a+.5,n.origin.x+=a+.5,e.rectToBox(n)},markerBorder:function(){var t=this.options,e=t.markers.border,i=R(e.opacity,t.opacity);return{color:e.color||this.color,width:e.width,opacity:i,dashType:e.dashType}},createMarker:function(){var t=this.options,e=t.markers,i=new z({type:R(e.type,"rect"),width:e.size,height:e.size,rotation:e.rotation,background:this.color,border:this.markerBorder(),borderRadius:e.borderRadius,opacity:this.series.opacity||t.opacity,zIndex:R(t.zIndex,this.series.zIndex),animation:t.animation,visual:t.visual},{dataItem:this.dataItem,value:this.value,series:this.series,category:this.category});this.marker=i,this.append(i)},createHighlight:function(t){var e=this.options,i=this.options.highlight.markers||this.options.markers,n=new z({type:R(i.type,"rect"),width:i.size,height:i.size,rotation:i.rotation,background:i.color||this.color,border:this.markerBorder(),borderRadius:i.borderRadius,opacity:this.series.opacity||e.opacity,zIndex:R(e.zIndex,this.series.zIndex)});n.reflow(this.markerBox());var s=n.getElement();return s.options.fill=t.fill,s.options.stroke=t.stroke,s},highlightVisual:function(){return this.rectVisual},highlightVisualArgs:function(){return{options:this.options,rect:this.box.toRect(),visual:this.rectVisual}},tooltipAnchor:function(){var t=this.box.center().x,e=this.box.y1-5;return{point:new C(t,e),align:{horizontal:h,vertical:c}}},overlapsBox:function(t){return this.box.overlaps(t)},unclipElements:function(){},pointData:function(){return{x:this.value.x,y:this.value.y,value:this.value.value,dataItem:this.dataItem,series:this.series}}});O(Bs.prototype,ei),O(Bs.prototype,ii),Bs.prototype.defaults={markers:{type:"rect",borderRadius:4,border:{color:"transparent"}},padding:{top:1},labels:{visible:!1,padding:3},opacity:1,notes:{label:{}}};var Hs=S.extend({init:function(t,e){S.fn.init.call(this,e),this.plotArea=t,this.chartService=t.chartService,this._initFields(),this.render()},_initFields:function(){this.points=[],this.seriesOptions=[],this.valueRange={min:r,max:o},this._evalSeries=[]},render:function(){this.setRange(),this.traverseDataPoints(this.addValue.bind(this))},setRange:function(){for(var t=this,e=this.options.series,i=0;i<e.length;i++)for(var n=e[i],s=0;s<n.data.length;s++){var r=t._bindPoint(n,i,s).valueFields;b(r.value)&&null!==r.value&&(t.valueRange.min=Math.min(t.valueRange.min,r.value),t.valueRange.max=Math.max(t.valueRange.max,r.value))}},addValue:function(e,i){var n;e&&b(e.value)&&null!==e.value&&(n=this.createPoint(e,i))&&t.extend(n,i),this.points.push(n)},evalPointOptions:function(t,e,i){var n=i.series,s=i.seriesIx,r={defaults:n._defaults,excluded:["data","tooltip","content","template","visual","toggle"]},o=this._evalSeries[s];b(o)||(this._evalSeries[s]=o=$e(t,{},r,!0));var a=t;return o&&$e(a=O({},t),{value:e,series:n,dataItem:i.dataItem,min:this.valueRange.min,max:this.valueRange.max},r),a},pointType:function(){return Bs},pointOptions:function(t,e){var i=this.seriesOptions[e];if(!i){var n=this.pointType().prototype.defaults;this.seriesOptions[e]=i=O({},n,{markers:{opacity:t.opacity},tooltip:{format:this.options.tooltip.format},labels:{format:this.options.labels.format}},t)}return i},createPoint:function(t,e){var i=e.series,n=this.pointOptions(i,e.seriesIx),s=e.color||i.color;if(n=this.evalPointOptions(n,t,e),E(i.color))s=n.color;else if(0!==this.valueRange.max){var r=function(t,e){void 0===e&&(e=.05);var i=kendo.parseColor(t),n=1-e;return function(t){var e=i.toHSL(),s=100-e.l,r=n-t;return e.l+=Math.min(r*s,s),e.toCss()}}(s);s=r(t.value/this.valueRange.max)}var o=new Bs(t,n);return o.color=s,this.append(o),o},seriesAxes:function(t){var e=t.xAxis,i=t.yAxis,n=this.plotArea,s=e?n.namedXAxes[e]:n.axisX,r=i?n.namedYAxes[i]:n.axisY;if(!s)throw new Error("Unable to locate X axis with name "+e);if(!r)throw new Error("Unable to locate Y axis with name "+i);return{xAxis:s,yAxis:r}},reflow:function(t){var e=this,i=this.points,n=!this.options.clip,s=0;this.traverseDataPoints((function(t,r){var o=i[s++],a=e.seriesAxes(r.series),h=a.xAxis,l=a.yAxis,c=h.categoryIndex(t.x),u=l.categoryIndex(t.y),p=h.getSlot(c,c,n),d=l.getSlot(u,u,n);if(o)if(p&&d){var f=e.pointSlot(p,d);o.reflow(f)}else o.visible=!1})),this.box=t},pointSlot:function(t,e){return new k(t.x1,e.y1,t.x2,e.y2)},traverseDataPoints:function(t){for(var e=this,i=this.options.series,n=0;n<i.length;n++)for(var s=i[n],r=e.seriesAxes(s),o=r.xAxis,a=r.yAxis,h=o.currentRangeIndices(),l=a.currentRangeIndices(),c=0;c<s.data.length;c++){var u=e._bindPoint(s,n,c),p=u.valueFields,d=u.fields,f=o.totalIndex(p.x),v=a.totalIndex(p.y),g=h.min<=f&&f<=h.max,x=l.min<=v&&v<=l.max;g&&x&&t(p,O({pointIx:c,series:s,seriesIx:n,dataItem:s.data[c],owner:e},d))}},formatPointValue:function(t,e){var i=t.value;return this.chartService.format.auto(e,i.x,i.y,i.value)},animationPoints:function(){for(var t=this.points,e=[],i=0;i<t.length;i++)e.push((t[i]||{}).marker);return e}});T(Hs,{series:[],tooltip:{format:"{0}, {1}: {2}"},labels:{format:"{2}"},clip:!0}),O(Hs.prototype,{_bindPoint:ti.prototype._bindPoint});var zs=on.extend({initFields:function(){this.namedXAxes={},this.namedYAxes={}},render:function(t){void 0===t&&(t=this.panes),this.bindCategories(),this.createAxes(t),this.createCharts(t),this.createAxisLabels()},bindCategories:function(){for(var t=this.srcSeries||this.series,i=0;i<t.length;i++){for(var n=t[i],s=n.data||[],r=this.seriesAxes(n),o=r.xAxis,a=r.yAxis,h=e.createHashSet(o.categories||[]),l=e.createHashSet(a.categories||[]),c=0;c<s.length;c++){var u=yt.current.bindPoint(n,c).valueFields,p=u.x,d=u.y;h.has(p)||h.add(p),l.has(d)||l.add(d)}o.categories=h.values(),a.categories=l.values()}},createCharts:function(t){for(var e=this,i=this.groupSeriesByPane(),n=0;n<t.length;n++){var s=t[n],r=i[s.options.name||"default"]||[];e.addToLegend(r);var o=e.filterVisibleSeries(r);o&&e.createHeatmapChart(Qi(o,[Kt]),s)}},createHeatmapChart:function(t,e){var i=new Hs(this,{series:t});this.appendChart(i,e)},seriesPaneName:function(t){var e=this.options,i=t.xAxis,n=[].concat(e.xAxis),s=K(n,(function(t){return t.name===i}))[0],r=t.yAxis,o=[].concat(e.yAxis),a=K(o,(function(t){return t.name===r}))[0],h=(e.panes||[{}])[0].name||"default";return(s||{}).pane||(a||{}).pane||h},seriesAxes:function(t){var e,i,n=this.options,s=[].concat(n.xAxis),r=t.xAxis;e=r?s.find((function(t){return t.name===r})):s[0];var o=[].concat(n.yAxis),a=t.yAxis;if(i=a?o.find((function(t){return t.name===a})):o[0],!e)throw new Error("Unable to locate X axis with name "+r);if(!i)throw new Error("Unable to locate Y axis with name "+a);return{xAxis:e,yAxis:i}},createAxisLabels:function(){for(var t=this.axes,e=0;e<t.length;e++)t[e].createLabels()},createXYAxis:function(i,n,s){for(var r,o=i.name,a=n?this.namedYAxes:this.namedXAxes,h=t.extend({axisCrossingValue:0},i,{vertical:n,reverse:n||this.chartService.rtl?!i.reverse:i.reverse,justified:!1}),l=h.categories?h.categories[0]:null,c=[h.min,h.max,l],u=this.series,p=0;p<u.length;p++){var d=u[p],f=d[n?"yAxis":"xAxis"];if(f===h.name||0===s&&!f){var v=yt.current.bindPoint(d,0).valueFields;c.push(v[n?"y":"x"]);break}}for(var g=0;g<c.length;g++)if(c[g]instanceof Date){r=!0;break}var x=new(Ki(h.type,m)||!h.type&&r?e.DateCategoryAxis:q)(h,this.chartService);if(x.axisIndex=s,o){if(a[o])throw new Error((n?"Y":"X")+" axis with name "+o+" is already defined");a[o]=x}return this.appendAxis(x),x.mapCategories(),x},createAxes:function(t){for(var e=this,i=this.options,n=[].concat(i.xAxis),s=[],r=[].concat(i.yAxis),o=[],a=0;a<n.length;a++){var h=e.findPane(n[a].pane);I(h,t)&&s.push(e.createXYAxis(n[a],!1,a))}for(var l=0;l<r.length;l++){var c=e.findPane(r[l].pane);I(c,t)&&o.push(e.createXYAxis(r[l],!0,l))}this.axisX=this.axisX||s[0],this.axisY=this.axisY||o[0]},removeAxis:function(t){var e=t.options.name;on.fn.removeAxis.call(this,t),t.options.vertical?delete this.namedYAxes[e]:delete this.namedXAxes[e],t===this.axisX&&delete this.axisX,t===this.axisY&&delete this.axisY},_dispatchEvent:function(t,e,i){for(var n=t._eventCoordinates(e),s=new C(n.x,n.y),r=this.axes,o=r.length,a=[],h=[],l=0;l<o;l++){var c=r[l];Wi(c.options.vertical?h:a,c.getCategory(s))}a.length>0&&h.length>0&&t.trigger(i,{element:M(e),originalEvent:e,x:tn(a),y:tn(h)})},updateAxisOptions:function(t,e){var i=t.options.vertical,n=this.groupAxes(this.panes),s=(i?n.y:n.x).indexOf(t);Ds(this.options,s,i,e),Ds(this.originalOptions,s,i,e)},crosshairOptions:function(e){return t.extend({},e.options.crosshair,{zIndex:0})}});function Ds(t,e,i,n){var s=[].concat(i?t.yAxis:t.xAxis)[e];O(s,n)}T(zs,{xAxis:{},yAxis:{}}),O(zs.prototype,un);var Fs="color",Ns="first",Gs="max",Xs="min",Ys="noteText";Un.current.register(En,[Gt,Wt,$t,ve,Nt,pe,Ut,Jt,qt,fe,Xt,de,le,he,xe,Qt,ae,ge]),Un.current.register(ns,[ce,ue,Yt]),Un.current.register(ps,[te]),Un.current.register(vs,[Zt]),Un.current.register(Ms,[jt]),Un.current.register(As,[ee,ie,ne]),Un.current.register(Vs,[se,re,oe]),Un.current.register(zs,[Kt]),yt.current.register([Gt,Wt,$t,ve,Nt,pe],[a],[Xe,Fs,Ys,Tt,It]),yt.current.register([le,he,ae,ge],["from","to"],[Xe,Fs,Ys]),yt.current.register([xe,Qt],[a],[Xe,Fs,Ys,"summary"]),yt.current.register([ee,ie,ne],[f,v],[Fs]),yt.current.register([se,re,oe],[a],[Fs]),yt.current.register([jt],[a],[Xe,Fs,"visibleInLegend","visible"]),fn.current.register([Gt,Wt,$t,ve,Nt,pe,xe,Qt],{value:Gs,color:Ns,noteText:Ns,errorLow:Xs,errorHigh:Gs}),fn.current.register([le,he,ae,ge],{from:Xs,to:Gs,color:Ns,noteText:Ns}),fn.current.register([se,re,oe],{value:Gs,color:Ns}),yt.current.register([ce,ue,Yt],[f,v],[Fs,Ys,Et,Rt,Vt,Ot]),yt.current.register([Yt],[f,v,"size"],[Fs,Xe,Ys]),yt.current.register([Kt],[f,v,a],[Fs,Ys]),yt.current.register([Ut,Jt],["open","high","low","close"],[Xe,Fs,"downColor",Ys]),fn.current.register([Ut,Jt],{open:Gs,high:Gs,low:Xs,close:Gs,color:Ns,downColor:Ns,noteText:Ns}),yt.current.register([Xt,de],["lower","q1","median","q3","upper","mean","outliers"],[Xe,Fs,Ys]),fn.current.register([Xt,de],{lower:Gs,q1:Gs,median:Gs,q3:Gs,upper:Gs,mean:Gs,outliers:Ns,color:Ns,noteText:Ns}),yt.current.register([qt,fe],["current","target"],[Xe,Fs,"visibleInLegend",Ys]),fn.current.register([qt,fe],{current:Gs,target:Gs,color:Ns,noteText:Ns}),yt.current.register([te,Zt],[a],[Xe,Fs,"explode","visibleInLegend","visible"]);var qs=[Xe,a,f,v],Us=i.extend({init:function(t,i,n,s){var r=this;void 0===s&&(s={}),this.observers=[],this.addObserver(s.observer),this.chartService=new tt.ChartService(this,s),this.chartService.theme=n,this._initElement(t);var o=O({},this.options,i);this._originalOptions=O({},o),this._theme=n,this._initTheme(o,n),this._initHandlers(),this._initSurface(),this.bindCategories(),e.FontLoader.preloadFonts(i,(function(){r.fontLoaded=!0,r._destroyed||(r.trigger("init"),r._redraw(),r._attachEvents())}))},_initElement:function(t){for(this._setElementClass(t),t.style.position="relative";t.firstChild;)t.removeChild(t.firstChild);this.element=t},_setElementClass:function(t){e.addClass(t,"k-chart")},_initTheme:function(e,i){for(var n=[],s=e.series||[],r=0;r<s.length;r++)n.push(t.extend({},s[r]));e.series=n,function(t){for(var e=qs,i=0;i<e.length;i++){var n=e[i]+"Axes";t[n]&&(t[e[i]+"Axis"]=t[n],delete t[n])}}(e),this.applyDefaults(e,i),null===e.seriesColors&&delete e.seriesColors,this.options=O({},i,e),this.applySeriesColors()},getSize:function(){var t=this.options.chartArea||{};return{width:t.width?parseInt(t.width,10):Math.floor(this.element.offsetWidth),height:t.height?parseInt(t.height,10):Math.floor(this.element.offsetHeight)}},resize:function(t){var i=this.getSize(),n=this._size,s=i.width>0||i.height>0;t||s&&(!n||i.width!==n.width||i.height!==n.height)?(this._size=i,this._resize(i,t),this.trigger("resize",i)):s&&this._selections&&e.find(this._selections,(function(t){return!t.visible}))&&(this._destroySelections(),this._setupSelection())},_resize:function(){this._noTransitionsRedraw()},redraw:function(t){if(this.applyDefaults(this.options),this.applySeriesColors(),t){var e=this._model._plotArea,i=e.findPane(t);e.redraw(i)}else this._redraw()},getAxis:function(t){return dt(t,this._plotArea.axes)},findAxisByName:function(t){return this.getAxis(t)},findPaneByName:function(t){for(var e=this._plotArea.panes,i=0;i<e.length;i++)if(e[i].options.name===t)return new ft(e[i])},findPaneByIndex:function(t){var e=this._plotArea.panes;if(e[t])return new ft(e[t])},plotArea:function(){return new vt(this._plotArea)},toggleHighlight:function(t,e){var i,n,s,r=this._plotArea,o=(r.srcSeries||r.series||[])[0];E(e)?i=r.filterPoints(e):(V(e)?(n=e.series,s=e.category):n=s=e,i=o.type===Zt?Ws(r.pointsBySeriesName(n),s):o.type===te||o.type===jt?Ws((r.charts[0]||{}).points,s):r.pointsBySeriesName(n));i&&this.togglePointsHighlight(t,i)},togglePointsHighlight:function(t,e){for(var i=this._highlight,n=0;n<e.length;n++)i.togglePointHighlight(e[n],t)},showTooltip:function(t){var e,i,n=this._sharedTooltip(),s=this._tooltip,r=this._plotArea;if(E(t)?(e=r.findPoint(t))&&n&&(i=e.categoryIx):n&&b(t)&&(i=r.categoryAxis.categoryIndex(t)),n){if(i>=0){var o=this._plotArea.pointsByCategoryIndex(i);s.showAt(o)}}else e&&s.show(e)},hideTooltip:function(){this._tooltip.hide()},_initSurface:function(){var t=this.surface,i=this._surfaceWrap(),n=this.options.chartArea||{};n.width&&e.elementSize(i,{width:n.width}),n.height&&e.elementSize(i,{height:n.height}),t&&t.options.type===this.options.renderAs?(this.surface.clear(),this.surface.resize()):(this._destroySurface(),this.surface=nt.Surface.create(i,{type:this.options.renderAs}),this.surface.bind("mouseenter",this._surfaceMouseenterHandler),this.surface.bind("mouseleave",this._surfaceMouseleaveHandler))},_surfaceWrap:function(){return this.element},_redraw:function(){var t=this._getModel();this._size={width:t.options.width,height:t.options.height},this._destroyView(),this._model=t,this._plotArea=t._plotArea,t.renderVisual(),!1!==this.options.transitions&&t.traverse((function(t){t.animation&&t.animation.setup()})),this._initSurface(),this.surface.draw(t.visual),!1!==this.options.transitions&&t.traverse((function(t){t.animation&&t.animation.play()})),this._tooltip=this._createTooltip(),this._highlight=new On,this._setupSelection(),this._createPannable(),this._createZoomSelection(),this._createMousewheelZoom(),this.trigger(ze),$s(this._plotArea.panes),this._navState||this._cancelDomEvents()},exportVisual:function(t){var e;if(t&&(t.width||t.height||t.options)){var i=this.options,n=O({},t.options,{chartArea:{width:t.width,height:t.height}});Qs(this._originalOptions,n),this.options=O({},this._originalOptions,n),this._initTheme(this.options,this._theme),this.bindCategories();var s=this._getModel();s.renderVisual(),$s(s._plotArea.panes),e=s.visual,this.options=i}else e=this.surface.exportVisual();return e},_sharedTooltip:function(){return this._plotArea instanceof En&&this.options.tooltip&&this.options.tooltip.shared},_createPannable:function(){var t=this.options;!1!==t.pannable&&(this._pannable=new Hn(this._plotArea,t.pannable))},_createZoomSelection:function(){var t=this.options.zoomable,e=(t||{}).selection;!1!==t&&!1!==e&&(this._zoomSelection=new zn(this,e))},_createMousewheelZoom:function(){var t=this.options.zoomable,e=(t||{}).mousewheel;!1!==t&&!1!==e&&(this._mousewheelZoom=new Fn(this,e))},_toggleDragZoomEvents:function(){var t=this.options.pannable,e=this.options.zoomable,i=(e||{}).selection,n=(e||{}).mousewheel,s=!(t||!1!==e&&!1!==i||this.requiresHandlers([Re,Ie,Ee])),r=(!1===e||!1===n)&&!this.requiresHandlers([Ve,Oe,Le]),o=this.element;this._dragZoomEnabled&&s&&r?(o.style.touchAction=this._touchAction||"",this._dragZoomEnabled=!1):this._dragZoomEnabled||s&&r||(o.style.touchAction="none",this._dragZoomEnabled=!0),this._toggleDomEvents(!s,!r)},_toggleDomEvents:function(t,e){var i=this.domEvents;i&&(i.toggleDrag&&i.toggleDrag(t),i.toggleZoom&&i.toggleZoom(e))},_createTooltip:function(){var t=this.options.tooltip;return this._sharedTooltip()?this._createSharedTooltip(t):new Kn(this.chartService,t)},_createSharedTooltip:function(t){return new Qn(this._plotArea,t)},applyDefaults:function(t,e){!function(t,e){var i,n,s,r=(e||{}).axisDefaults||{};function o(t){var e=(t||{}).color||n.color,s=O({},r,r[i],n,n[i],{line:{color:e},labels:{color:e},title:{color:e}},t);return delete s[i],s}for(var a=0;a<qs.length;a++)i=qs[a]+"Axis",n=t.axisDefaults||{},s=(s=[].concat(t[i])).map(o),t[i]=s.length>1?s:s[0]}(t,e),function(t,e){var i=t.series,n=i.length,s=t.seriesDefaults,r=O({},t.seriesDefaults),o=e?O({},e.seriesDefaults):{},a=O({},o);Zs(r),Zs(a);for(var h=0;h<n;h++){var l=i[h].type||t.seriesDefaults.type,c=O({data:[]},a,o[l],{tooltip:t.tooltip},r,s[l]);i[h]._defaults=c,i[h]=O({},c,i[h]),i[h].data=i[h].data||[]}}(t,e)},applySeriesColors:function(){for(var t=this.options,e=t.series,i=t.seriesColors||[],n=0;n<e.length;n++){var s=e[n],r=i[n%i.length],o=s._defaults;s.color=s.color||r,o&&(o.color=o.color||r)}},_getModel:function(){var t=this.options,i=this._createPlotArea(),n=new e.RootElement(this._modelOptions());n.chart=this,n._plotArea=i;var s=W.buildTitle(t.title),r=W.buildTitle(t.subtitle,{align:t.title.align,position:t.title.position});return n.append.apply(n,W.orderTitles([s,r])),t.legend&&t.legend.visible&&n.append(new qn(i.options.legend,this.chartService)),n.append(i),n.reflow(),n},_modelOptions:function(){var t=this.options,e=this.getSize();return O({transitions:t.transitions,width:e.width||s.DEFAULT_WIDTH,height:e.height||s.DEFAULT_HEIGHT},t.chartArea)},_createPlotArea:function(t){var e=this.options;return Un.current.create(t?[]:e.series,e,this.chartService)},_setupSelection:function(){for(var t=this._plotArea.axes,e=this._selections=[],i=0;i<t.length;i++){var n=t[i],s=n.options;if(n instanceof q&&s.select&&!s.vertical){var r=n.range(),o=new jn(this,n,O({min:r.min,max:r.max},s.select));e.push(o)}}},_selectStart:function(t){return this.trigger(Me,t)},_select:function(t){return this.trigger(Be,t)},_selectEnd:function(t){return this.trigger(He,t)},_initHandlers:function(){this._clickHandler=this._click.bind(this),this._mousewheelHandler=this._mousewheel.bind(this),this._mouseleaveHandler=this._mouseleave.bind(this),this._surfaceMouseenterHandler=this._mouseover.bind(this),this._surfaceMouseleaveHandler=this._mouseout.bind(this),this._mousemove=kendo.throttle(this._mousemove.bind(this),20)},addObserver:function(t){t&&this.observers.push(t)},removeObserver:function(t){var e=this.observers.indexOf(t);e>=0&&this.observers.splice(e,1)},requiresHandlers:function(t){for(var e=this.observers,i=0;i<e.length;i++)if(e[i].requiresHandlers(t))return!0},trigger:function(t,e){void 0===e&&(e={}),t===De&&(e.anchor.point=this._toDocumentCoordinates(e.anchor.point)),e.sender=this;for(var i=this.observers,n=!1,s=0;s<i.length;s++)i[s].trigger(t,e)&&(n=!0);return n},_attachEvents:function(){var t,e,i=this.element;(this._touchAction=i.style.touchAction,J(i,((t={}).contextmenu=this._clickHandler,t[We]=this._mousewheelHandler,t.mouseleave=this._mouseleaveHandler,t)),this._shouldAttachMouseMove())&&J(i,((e={}).mousemove=this._mousemove,e));this.domEvents=tt.DomEventsBuilder.create(this.element,{start:this._start.bind(this),move:this._move.bind(this),end:this._end.bind(this),tap:this._tap.bind(this),gesturestart:this._gesturestart.bind(this),gesturechange:this._gesturechange.bind(this),gestureend:this._gestureend.bind(this)}),this._toggleDragZoomEvents()},_mouseleave:function(t){this._hoveredPoint&&(this._hoveredPoint.out(this,t),this._hoveredPoint=null),this._plotAreaHovered&&(this._plotAreaHovered=!1,this.trigger(Te))},_cancelDomEvents:function(){this.domEvents&&this.domEvents.cancel&&this.domEvents.cancel()},_gesturestart:function(t){this._mousewheelZoom&&!this._stopChartHandlers(t)&&(this._gestureDistance=t.distance,this._unsetActivePoint(),this.surface.suspendTracking())},_gestureend:function(t){this._zooming&&!this._stopChartHandlers(t)&&(this.surface&&this.surface.resumeTracking(),this._zooming=!1,this.trigger(Le,{}))},_gesturechange:function(t){var e=this._mousewheelZoom;if(e&&!this._stopChartHandlers(t)){t.preventDefault();var i=this._gestureDistance,n=-t.distance/i+1;if(Math.abs(n)>=.1){n=Math.round(10*n),this._gestureDistance=t.distance;var s={delta:n,axisRanges:js(this._plotArea.axes),originalEvent:t};if(this._zooming||!this.trigger(Ve,s)){var r=this._eventCoordinates(t);this._zooming||(this._zooming=!0),(s.axisRanges=e.updateRanges(n,r))&&!this.trigger(Oe,s)&&e.zoom()}}}},_mouseout:function(t){if(t.element){var e=this._drawingChartElement(t.element,t);e&&e.leave&&e.leave(this,t.originalEvent)}},_start:function(t){var e=this._eventCoordinates(t);!this._stopChartHandlers(t)&&this._plotArea.backgroundContainsPoint(e)&&(this.requiresHandlers([Re,Ie,Ee])&&this._startNavigation(t,e,Re),this._pannable&&this._pannable.start(t)&&(this.surface.suspendTracking(),this._unsetActivePoint(),this._suppressHover=!0,this.chartService.panning=!0),this._zoomSelection&&this._zoomSelection.start(t)&&this.trigger(Ve,{axisRanges:js(this._plotArea.axes),originalEvent:t}))},_move:function(t){var e=this._navState,i=this._pannable;if(!this._stopChartHandlers(t)){if(i){var n=i.move(t);n&&!this.trigger(Ie,{axisRanges:n,originalEvent:t})&&i.pan()}else if(e){for(var s={},r=e.axes,o=0;o<r.length;o++){var a=r[o];if(a.options.name){var h=a.options.vertical?t.y:t.x,l=h.startLocation-h.location;0!==l&&(s[a.options.name]=a.translateRange(l))}}e.axisRanges=s,this.trigger(Ie,{axisRanges:s,originalEvent:t})}this._zoomSelection&&this._zoomSelection.move(t)}},_end:function(t){if(!this._stopChartHandlers(t)){var e=this._pannable;if(e&&e.end(t)?(this.surface.resumeTracking(),this.trigger(Ee,{axisRanges:js(this._plotArea.axes),originalEvent:t}),this._suppressHover=!1,this.chartService.panning=!1):this._endNavigation(t,Ee),this._zoomSelection){var i=this._zoomSelection.end(t);i&&!this.trigger(Oe,{axisRanges:i,originalEvent:t})&&(this._zoomSelection.zoom(),this.trigger(Le,{axisRanges:i,originalEvent:t}))}}},_stopChartHandlers:function(t){var e=this._selections||[];if(!e.length)return!1;var i=this._eventCoordinates(t),n=this._plotArea.paneByPoint(i);if(n)for(var s=0;s<e.length;s++)if(e[s].onPane(n))return!0},_mousewheelZoomRate:function(){var t=(this.options.zoomable||{}).mousewheel||{};return R(t.rate,.3)},_mousewheel:function(t){var i=this,n=e.mousewheelDelta(t),s=this._mousewheelZoom,r=this._eventCoordinates(t);if(!this._stopChartHandlers(t)&&this._plotArea.backgroundContainsPoint(r))if(s){var o={delta:n,axisRanges:js(this._plotArea.axes),originalEvent:t};!this._zooming&&this.trigger(Ve,o)||(t.preventDefault(),this._zooming||(this._unsetActivePoint(),this.surface.suspendTracking(),this._zooming=!0),this._mwTimeout&&clearTimeout(this._mwTimeout),o.axisRanges=s.updateRanges(n,r),o.axisRanges&&!this.trigger(Oe,o)&&s.zoom(),this._mwTimeout=setTimeout((function(){i.trigger(Le,o),i._zooming=!1,i.surface&&i.surface.resumeTracking()}),Ze))}else{var a=this._navState;if(!a)this._startNavigation(t,r,Ve)||(a=this._navState);if(a){var h=a.totalDelta||n;a.totalDelta=h+n;for(var l=this._navState.axes,c={},u=0;u<l.length;u++){var p=l[u],d=p.options.name;d&&(c[d]=p.scaleRange(-h*i._mousewheelZoomRate(),r))}this.trigger(Oe,{delta:n,axisRanges:c,originalEvent:t}),this._mwTimeout&&clearTimeout(this._mwTimeout),this._mwTimeout=setTimeout((function(){i._endNavigation(t,Le)}),Ze)}}},_startNavigation:function(t,e,i){var n=this._model._plotArea,s=n.findPointPane(e),r=n.axes.slice(0);if(s){var o=js(r);this.trigger(i,{axisRanges:o,originalEvent:t})?this._cancelDomEvents():(this._suppressHover=!0,this._unsetActivePoint(),this._navState={axisRanges:o,pane:s,axes:r})}},_endNavigation:function(t,e){this._navState&&(this.trigger(e,{axisRanges:this._navState.axisRanges,originalEvent:t}),this._suppressHover=!1,this._navState=null)},_getChartElement:function(t,e){var i=this.surface.eventTarget(t);if(i)return this._drawingChartElement(i,t,e)},_drawingChartElement:function(t,e,i){for(var n,s=t;s&&!n;)n=s.chartElement,s=s.parent;if(n)return n.aliasFor&&(n=n.aliasFor(e,this._eventCoordinates(e))),i&&(n=n.closest(i))&&n.aliasFor&&(n=n.aliasFor()),n},_eventCoordinates:function(t){var i=e.eventCoordinates(t);return this._toModelCoordinates(i.x,i.y)},_elementPadding:function(){if(!this._padding){var t=Q(this.element,["paddingLeft","paddingTop"]),e=t.paddingLeft,i=t.paddingTop;this._padding={top:i,left:e}}return this._padding},_toDocumentCoordinates:function(t){var i=this._elementPadding(),n=e.elementOffset(this.element);return{left:Z(t.x+i.left+n.left),top:Z(t.y+i.top+n.top)}},_toModelCoordinates:function(t,i){var n=this.element,s=e.elementOffset(n),r=this._elementPadding(),o=e.elementScale(n).invert(),a=new ct(t-s.left-r.left,i-s.top-r.top).transform(o);return new C(a.x,a.y)},_tap:function(t){var e=this,i=this.surface.eventTarget(t),n=this._drawingChartElement(i,t),s=this._sharedTooltip();this._startHover(i,t)||s||this._unsetActivePoint(),s&&this._trackSharedTooltip(this._eventCoordinates(t),t,!0),this._propagateClick(n,t),this.handlingTap=!0,setTimeout((function(){e.handlingTap=!1}),0)},_click:function(t){var e=this._getChartElement(t);this._propagateClick(e,t)},_propagateClick:function(t,e){for(var i=t;i;)i.click&&i.click(this,e),i=i.parent},_startHover:function(t,e){if(this._suppressHover)return!1;var i=this._drawingChartElement(t,e,(function(t){return(t.hover||t.over)&&!(t instanceof on)}));return this._showInactiveOpacity(i,e),i},_displayTooltip:function(t){O({},this.options.tooltip,t.options.tooltip).visible&&this._tooltip.show(t)},_displayInactiveOpacity:function(t,e,i){var n=this._activeChartInstance=this._chartInstanceFromPoint(t);if(n)if(e)this._updateSeriesOpacity(t),this._applySeriesOpacity(n.children,null,!0),this._applySeriesOpacity(n.children,t.series),this._highlight.show(i||t);else{var s;if(!n.supportsPointInactiveOpacity())return void this._highlight.show(t);(s=this._getInactivePoints(t,n))&&s.length&&this._highlight.show(s,1-this._getInactiveOpacityForSeries(t.series))}},_getInactivePoints:function(t,e){return this._getAllPointsOfType(e,t.constructor).filter((function(e){return e!==t}))},_getAllPointsOfType:function(t,e){for(var i=[],n=0;n<t.children.length;n++){var s=t.children[n];s.constructor===e?i.push(s):s.children&&s.children.length&&(i=i.concat(this._getAllPointsOfType(s,e)))}return i},_updateHoveredPoint:function(t,e){var i=this._hoveredPoint;i&&i!==t&&(i.out(this,e),this._hoveredPoint=null),t&&i!==t&&t.over&&(this._hoveredPoint=t,t.over(this,e))},_updateSeriesOpacity:function(t,e){for(var i=this._plotArea,n=i.series.length,s=0;s<n;s++){var r=i.series[s],o=this._getDefaultOpacityForSeries(r),a=this._getInactiveOpacityForSeries(r);e||r===t.series?(r.opacity=o,r.line&&(r.line.opacity=o)):(r.defaultOpacity=o,r.opacity=a,r.line&&(r.line.opacity=a))}},_applySeriesOpacity:function(t,e,i,n){for(var s=0;s<t.length;s++){var r=t[s],o=r.series||n;if(o&&(o.highlight||{}).visible&&r.visual){var a=n?n.opacity:r.series.opacity;(o!==e||i)&&r.visual.opacity(i?1:a)}r.children&&r.children.length&&this._applySeriesOpacity(r.children,e,i,r.series)}},_chartInstanceFromPoint:function(t){for(var e=t.parent;e&&!e.plotArea;)e=e.parent;return e},_showInactiveOpacity:function(t,e){var i=this._activePoint,n=this._plotArea.series.length>1,s=this._hasInactiveOpacity();return this._updateHoveredPoint(t,e),t&&i!==t&&t.hover&&(this._activePoint=t,this._sharedTooltip()||t.hover(this,e)||(this._displayTooltip(t),s?this._displayInactiveOpacity(t,n):this._highlight.show(t))),t},_hideInactiveOpacity:function(t){var e=this._plotArea.series.length>1;this._hasInactiveOpacity()&&(e&&this._activeChartInstance&&(this._updateSeriesOpacity(t,!0),this._applySeriesOpacity(this._activeChartInstance.children,null,!0),this._activeChartInstance=null),this._highlight&&this._highlight.hide(),this._activePoint=null)},_hasInactiveOpacity:function(){var t=void 0!==this.options.seriesDefaults.highlight.inactiveOpacity,e=this.options.series.filter((function(t){return void 0!==t.highlight.inactiveOpacity})).length>0;return t||e},_getInactiveOpacityForSeries:function(t){var e=this.options.seriesDefaults.highlight.inactiveOpacity;return t.highlight.inactiveOpacity||e||t.opacity||s.DEFAULT_SERIES_OPACITY},_getDefaultOpacityForSeries:function(t){return t.defaultOpacity||t.opacity||s.DEFAULT_SERIES_OPACITY},_mouseover:function(t){var e,i=this._startHover(t.element,t.originalEvent);i&&i.tooltipTracking&&!this._mouseMoveTrackHandler&&!this._sharedTooltip()&&(this._mouseMoveTrackHandler=this._mouseMoveTracking.bind(this),J(document,((e={}).mousemove=this._mouseMoveTrackHandler,e)))},_mouseMoveTracking:function(t){var e,i=this,n=i.options,s=i._tooltip,r=i._highlight,o=i._activePoint,a=this._eventCoordinates(t);if(this._plotArea.box.containsPoint(a)){if(o&&o.tooltipTracking&&o.series&&o.parent.getNearestPoint){var h=o.parent.getNearestPoint(a.x,a.y,o.seriesIx);if(h&&h!==o)if(this._activePoint=h,!h.hover(this,t))O({},n.tooltip,h.options.tooltip).visible&&s.show(h),r.show(h)}}else et(document,((e={}).mousemove=this._mouseMoveTrackHandler,e)),this._unsetActivePoint(),this._mouseMoveTrackHandler=null,this._hideInactiveOpacity(o)},_mousemove:function(t){var e=this._eventCoordinates(t),i=this._plotArea;if(this._trackCrosshairs(e),i.hover){var n=i.backgroundContainsPoint(e);n?(this._plotAreaHovered=!0,this._plotArea.hover(this,t)):this._plotAreaHovered&&!n&&(this._plotAreaHovered=!1,this.trigger(Te))}this._sharedTooltip()&&this._trackSharedTooltip(e,t)},_trackCrosshairs:function(t){for(var e=this._plotArea.crosshairs,i=0;i<e.length;i++){var n=e[i];n.box.containsPoint(t)?n.showAt(t):n.hide()}},_trackSharedTooltip:function(t,e,i){if(!this._suppressHover){var n=this,s=n.options.tooltip,r=n._plotArea,o=n._plotArea.categoryAxis,a=n._tooltip,h=n._highlight;if(r.backgroundContainsPoint(t)){var l=o.pointCategoryIndex(t);if(l!==this._tooltipCategoryIx||!this._sharedHighlight&&i){var c=r.pointsByCategoryIndex(l),u=c.map((function(t){return t.eventArgs(e)})),p=u[0]||{};p.categoryPoints=u,c.length>0&&!this.trigger(Ae,p)?(s.visible&&a.showAt(c,t),h.show(c),this._sharedHighlight=!0):a.hide(),this._tooltipCategoryIx=l}else i&&this._sharedHighlight&&(h.hide(),a.hide(),this._sharedHighlight=!1)}else this._sharedHighlight&&(h.hide(),a.hide(),this._tooltipCategoryIx=null,this._sharedHighlight=!1)}},hideElements:function(t){var e=this._plotArea;this._mousemove.cancel(),e.hideCrosshairs(),this._unsetActivePoint(t)},_unsetActivePoint:function(t){var e=this._tooltip,i=this._highlight;this._activePoint=null,this._hoveredPoint=null,!e||t&&t.keepTooltipOpen||e.hide(),this._tooltipCategoryIx=null,this._sharedHighlight=!1,i&&i.hide()},_deferRedraw:function(){this._redraw()},_clearRedrawTimeout:function(){this._redrawTimeout&&(clearInterval(this._redrawTimeout),this._redrawTimeout=null)},bindCategories:function(){for(var t=this.options,e=[].concat(t.categoryAxis),i=0;i<e.length;i++){var n=e[i];!1!==n.autoBind&&this.bindCategoryAxisFromSeries(n,i)}},bindCategoryAxisFromSeries:function(t,i){for(var n,s=this.options.series,r=s.length,o=new e.HashMap,a=[],h=!1,l=0;l<r;l++){var c=s[l],u=c.categoryAxis===t.name||!c.categoryAxis&&0===i,p=c.data,d=p.length,f=c.categoryField&&u;if(h=f||h,f&&d>0)for(var v=(n=Ji(t,mt(c.categoryField,p[0])))?$i:mt,g=0;g<d;g++){var x=p[g],m=v(c.categoryField,x,this.chartService.intl);!n&&o.get(m)||(a.push([m,x]),n||o.set(m,!0))}}if(a.length>0){n&&(a=function(t,i){void 0===i&&(i=e.dateComparer);for(var n=function(t,i){void 0===i&&(i=e.dateComparer);for(var n=1,s=t.length;n<s;n++)if(i(t[n],t[n-1])<0){t.sort(i);break}return t}(t,i),s=n.length,r=s>0?[n[0]]:[],o=1;o<s;o++)0!==i(n[o],L(r))&&r.push(n[o]);return r}(a,(function(t,i){return e.dateComparer(t[0],i[0])})));var y=function(t){for(var e=t.length,i=[],n=0;n<e;n++)for(var s=t[n],r=s.length,o=0;o<r;o++)i[o]=i[o]||[],i[o].push(s[o]);return i}(a);t.categories=y[0]}else h&&(t.categories=[])},_isBindable:function(t){for(var e=yt.current.valueFields(t),i=!0,n=0;n<e.length;n++){var s=e[n];if(s===a?s="field":s+="Field",!b(t[s])){i=!1;break}}return i},_noTransitionsRedraw:function(){var t,e=this.options;!1!==e.transitions&&(e.transitions=!1,t=!0),this._redraw(),t&&(e.transitions=!0)},_legendItemHover:function(t,e){var i,n=this._plotArea,s=this._highlight,r=(n.srcSeries||n.series)[t];if(i=I(r.type,[te,Zt,jt])?n.findPoint((function(i){return i.series.index===t&&i.index===e})):n.pointsBySeriesIndex(t),this._hasInactiveOpacity()&&r.visible&&i){var o=n.series.length>1,a=i.length?i[0]:i;this._displayInactiveOpacity(a,o,i)}else s.show(i)},_shouldAttachMouseMove:function(){return this._plotArea.crosshairs.length||this._tooltip&&this._sharedTooltip()||this.requiresHandlers([Pe,Te])},updateMouseMoveHandler:function(){var t,e;(et(this.element,((t={}).mousemove=this._mousemove,t)),this._shouldAttachMouseMove())&&J(this.element,((e={}).mousemove=this._mousemove,e))},applyOptions:function(t,e){Qs(this._originalOptions,t),this._originalOptions=O(this._originalOptions,t),this.options=O({},this._originalOptions),e&&(this._theme=e,this.chartService.theme=e),this._initTheme(this.options,this._theme),this._toggleDragZoomEvents()},setOptions:function(t,e){this.applyOptions(t,e),this.bindCategories(),this.redraw(),this.updateMouseMoveHandler()},setDirection:function(t){this.chartService.rtl=Boolean(t),this.surface&&"svg"===this.surface.type&&this._destroySurface()},setIntlService:function(t){this.chartService.intl=t},noTransitionsRedraw:function(){this._noTransitionsRedraw()},destroy:function(){var t,e;(this._destroyed=!0,et(this.element,((t={}).contextmenu=this._clickHandler,t[We]=this._mousewheelHandler,t.mousemove=this._mousemove,t.mouseleave=this._mouseleaveHandler,t)),this.domEvents&&(this.domEvents.destroy(),delete this.domEvents),this._mouseMoveTrackHandler)&&et(document,((e={}).mousemove=this._mouseMoveTrackHandler,e));this._destroyView(),this._destroySurface(),this._clearRedrawTimeout()},_destroySurface:function(){var t=this.surface;t&&(t.unbind("mouseenter",this._surfaceMouseenterHandler),t.unbind("mouseleave",this._surfaceMouseleaveHandler),t.destroy(),this.surface=null)},_destroySelections:function(){var t=this._selections;if(t)for(;t.length>0;)t.shift().destroy()},_destroyView:function(){var t=this._model;t&&(t.destroy(),this._model=null),this._unsetActivePoint(),this._destroySelections(),this._tooltip&&this._tooltip.destroy(),this._highlight&&this._highlight.destroy(),this._zoomSelection&&(this._zoomSelection.destroy(),delete this._zoomSelection),this._pannable&&(this._pannable.destroy(),delete this._pannable),this._mousewheelZoom&&(this._mousewheelZoom.destroy(),delete this._mousewheelZoom)}});function Ws(t,e){if(t)for(var i=0;i<t.length;i++)if(t[i].category===e)return[t[i]]}function Zs(t){delete t.bar,delete t.column,delete t.rangeColumn,delete t.line,delete t.verticalLine,delete t.pie,delete t.donut,delete t.area,delete t.verticalArea,delete t.scatter,delete t.scatterLine,delete t.bubble,delete t.candlestick,delete t.ohlc,delete t.boxPlot,delete t.bullet,delete t.verticalBullet,delete t.polarArea,delete t.polarLine,delete t.radarArea,delete t.radarLine,delete t.waterfall}function js(t){for(var e={},i=0;i<t.length;i++){var n=t[i],s=n.options.name;s&&(e[s]=n.range())}return e}var Ks=["data","categories"];function Qs(t,e){for(var i in e)if(!I(i,Ks)&&e.hasOwnProperty(i)){var n=e[i],s=t[i];if(b(s)){var r=null===n;r||!b(n)?(delete t[i],r&&delete e[i]):s&&V(n)&&V(s)&&Qs(s,n)}}}function $s(t){for(var e=0;e<t.length;e++)t[e].notifyRender()}T(Us,{renderAs:"",chartArea:{},legend:{visible:!0,labels:{}},categoryAxis:{},seriesDefaults:{type:Wt,data:[],highlight:{visible:!0},labels:{},negativeValues:{visible:!1}},series:[],seriesColors:null,tooltip:{visible:!1},transitions:!0,valueAxis:{},plotArea:{},title:{},xAxis:{},yAxis:{},panes:[{}],pannable:!1,zoomable:!1}),kendo.deepExtend(kendo.dataviz,{constants:je,Aggregates:xt,AreaChart:xi,AreaSegment:fi,AxisGroupRangeTracker:mi,Bar:bi,BarChart:ki,BarLabel:yi,BoxPlotChart:Vi,BoxPlot:Ei,BubbleChart:Hi,Bullet:Di,BulletChart:Fi,CandlestickChart:Ii,Candlestick:Pi,CategoricalChart:ti,CategoricalErrorBar:Qe,CategoricalPlotArea:En,Chart:Us,ChartContainer:Yi,ClipAnimation:ci,ClusterLayout:Si,Crosshair:Xi,CrosshairTooltip:Gi,DefaultAggregates:fn,DonutChart:fs,DonutPlotArea:vs,DonutSegment:ds,ErrorBarBase:Ke,ErrorRangeCalculator:wt,Highlight:On,SharedTooltip:Qn,Legend:qn,LegendItem:Gn,LegendLayout:Nn,LineChart:di,LinePoint:ni,LineSegment:si,Pane:qi,PieAnimation:es,PieChart:cs,PieChartMixin:ls,PiePlotArea:ps,PieSegment:rs,PlotAreaBase:on,PlotAreaEventsMixin:un,PlotAreaFactory:Un,PointEventsMixin:ei,RangeBar:vn,RangeBarChart:gn,RangeAreaPoint:yn,RangeAreaChart:An,ScatterChart:Mi,ScatterErrorBar:Oi,ScatterLineChart:is,Selection:jn,SeriesAggregator:pn,SeriesBinder:yt,SplineSegment:hi,SplineAreaSegment:gi,StackWrap:Ci,Tooltip:Kn,OHLCChart:Cn,OHLCPoint:Sn,WaterfallChart:Pn,WaterfallSegment:kn,XYPlotArea:ns,MousewheelZoom:Fn,ZoomSelection:zn,Pannable:Hn,ChartAxis:pt,ChartPane:ft,ChartPlotArea:vt,findAxisByName:dt,anyHasZIndex:ui,appendIfNotNull:Wi,areNumbers:Ti,bindSegments:ji,categoriesCount:Je,countNumbers:gt,equalsIgnoreCase:Ki,evalOptions:$e,filterSeriesByType:Qi,getDateField:$i,getField:mt,hasGradientOverlay:_i,hasValue:Li,isDateAxis:Ji,segmentVisible:Zi,singleItemOrArray:tn,createOutOfRangePoints:rn})}(window.kendo.jQuery),function(t,e){var i=".kendoChart",n=window.kendo,s=n.Class,r=n._outerWidth,o=n._outerHeight,a=n.dataviz,h=a.constants,l=a.Chart,c=a.SeriesBinder,u=n.ui.Widget,p=n.data.DataSource,d=n.deepExtend,f=a.defined,v=a.getField,g=a.InstanceObserver,x=a.inArray,m=a.services,y=Array.isArray,_=t.extend,b=n.template,w=n.htmlEncode,A="mouseleave"+i,S=h.AXIS_LABEL_CLICK,C=h.LEGEND_ITEM_CLICK,k=h.LEGEND_ITEM_HOVER,P=h.LEGEND_ITEM_LEAVE,T=h.SERIES_CLICK,I=h.SERIES_HOVER,E=h.SERIES_OVER,R=h.SERIES_LEAVE,V=h.PANE_RENDER,O=h.PLOT_AREA_CLICK,L=h.PLOT_AREA_HOVER,M=h.PLOT_AREA_LEAVE,B=h.DRAG,H=h.DRAG_END,z=h.DRAG_START,D=h.ZOOM_START,F=h.ZOOM,N=h.ZOOM_END,G=h.SELECT_START,X=h.SELECT,Y=h.SELECT_END,q=h.RENDER,U=h.NOTE_CLICK,W=h.NOTE_HOVER,Z=h.NOTE_LEAVE,j=t(document.documentElement),K="change",Q="dataBound",$="leave",J=h.VALUE,tt=h.PIE,et=h.DONUT,it=h.FUNNEL,nt=n.Observable;m.DomEventsBuilder.register({create:function(t,e){return new n.UserEvents(t,d({global:!0,multiTouch:!0,fastTap:!0},e))}});var st=g.extend({handlerMap:{showTooltip:"_showTooltip",hideTooltip:"_hideTooltip",legendItemClick:"_onLegendItemClick",render:"_onRender",init:"_onInit"}}),rt=u.extend({init:function(t,e){var i;n.destroy(t),u.fn.init.call(this,t),e&&(i=e.dataSource,delete e.dataSource),this.options=d({},this.options,e),this.wrapper=this.element,this._attachEvents(),e&&(e.dataSource=i),this._seriesVisibility=new ct,this.bind(this.events,this.options),this._initDataSource(e),n.notify(this,a.ui)},events:[Q,T,I,E,R,S,C,k,P,V,O,L,M,z,B,H,D,F,N,G,X,Y,U,W,Z,q],options:{name:"Chart",renderAs:"",theme:"default",axisDefaults:{},chartArea:{},legend:{},categoryAxis:{},autoBind:!0,seriesDefaults:{},series:[],seriesColors:null,tooltip:{},transitions:!0,valueAxis:{},plotArea:{},title:{},xAxis:{},yAxis:{},panes:[{}],pannable:!1,zoomable:!1},items:function(){return t()},refresh:function(){var t=this,e=t._instance;e.applyDefaults(t.options),e.applySeriesColors(),t._bindSeries(),t._bindCategories(),t.trigger(Q),t._redraw()},getSize:function(){return n.dimensions(this.element)},redraw:function(t){this._size=null,this._instance.redraw(t)},setOptions:function(t){var e=this,i=t.dataSource;delete t.dataSource,u.fn._setEvents.call(e,t),this._instance.applyOptions(t,this._getThemeOptions(t)),this.options=this._instance.options,this._tooltip.setOptions(this.options.tooltip),this._seriesVisibility.setOptions(this.options),this._sourceSeries=null,i&&e.setDataSource(i),e._hasDataSource?e._onDataChanged():(e._bindCategories(),e.redraw()),e._instance.updateMouseMoveHandler()},setDataSource:function(t){var e=this;e.dataSource.unbind(K,e._dataChangeHandler),e.dataSource=t=p.create(t),e._hasDataSource=!0,e._hasData=!1,t.bind(K,e._dataChangeHandler),e.options.autoBind&&t.fetch()},destroy:function(){var t=this,e=t.dataSource;t.element.off(i),e&&e.unbind(K,t._dataChangeHandler),t._instance&&(t._instance.destroy(),delete this._instance),this._tooltip&&(this._tooltip.destroy(),delete this._tooltip),this._destroyCrosshairTooltips(),u.fn.destroy.call(t)},findPaneByName:function(t){for(var e=this._plotArea.panes,i=0;i<e.length;i++)if(e[i].options.name===t)return new ft(this,e[i])},findPaneByIndex:function(t){var e=this._plotArea.panes;if(e[t])return new ft(this,e[t])},findSeries:function(t){for(var e=this._plotArea,i=e.srcSeries||e.series,n=0;n<i.length;n++)if(t(i[n]))return new vt(this,i[n])},findSeriesByName:function(t){return this._createSeries({name:t})},findSeriesByIndex:function(t){return this._createSeries({index:t})},exportVisual:function(t){var e=this._instance;if(e){var i;if(t&&(t.width||t.height)){var n=e.options.chartArea,s=e._originalOptions.chartArea;d(n,t);var r=e._getModel();n.width=s.width,n.height=s.height,r.renderVisual(),function(t){for(var e=0;e<t.length;e++)t[e].notifyRender()}(r._plotArea.panes),i=r.visual}else i=e.exportVisual();return i}},_createSeries:function(t){var e=this._seriesOptions(t);if(e)return new vt(this,e)},_seriesOptions:function(t){var e,i=this._plotArea,n=i.srcSeries||i.series;if(f(t.index))e=n[t.index];else if(f(t.name))for(var s=0;s<n.length;s++)if(n[s].name===t.name){e=n[s];break}return e},_attachEvents:function(){this.element.on(A,this._mouseleave.bind(this))},_mouseleave:function(e){var i=this._instance,n=this._tooltip,s=e.relatedTarget;s&&t(s).closest(n.element).length||!i||i.handlingTap||i.hideElements({keepTooltipOpen:!n.options.autoHide})},_getThemeOptions:function(t){var e=(t||{}).theme;if(e&&-1!==a.SASS_THEMES.indexOf(e.toLowerCase()))return a.autoTheme().chart;if(f(e)){var i=a.ui.themes||{};return(i[e]||i[e.toLowerCase()]||{}).chart||{}}},_initChart:function(){this._createChart(this.options,this._getThemeOptions(this.options)),this.options=this._instance.options,this._seriesVisibility.setOptions(this.options)},_createChart:function(t,e){this._instance=new l(this.element[0],t,e,{observer:new st(this),sender:this,rtl:this._isRtl()})},_onInit:function(t){this._instance=t.sender},_initDataSource:function(t){var e=this,i=(t||{}).dataSource;e._dataChangeHandler=e._onDataChanged.bind(e),e.dataSource=p.create(i).bind("change",e._dataChangeHandler),e._bindCategories(),i&&(e._hasDataSource=!0),this._initChart(),this._initTooltip(),i&&e.options.autoBind&&e.dataSource.fetch()},_destroyCrosshairTooltips:function(){var t=this._crosshairTooltips;if(t)for(var e in t)t[e].destroy();this._crosshairTooltips={}},_getCrosshairTooltip:function(t,e){var i=this._crosshairTooltips=this._crosshairTooltips||{},n=t+e,s=i[n];return s||(s=i[n]=new dt(this.element)),s},_showTooltip:function(t){t.crosshair?this._getCrosshairTooltip(t.axisName,t.axisIndex).show(t):this._tooltip&&this._tooltip.show(t)},_hideTooltip:function(t){t.crosshair?this._getCrosshairTooltip(t.axisName,t.axisIndex).hide():this._tooltip&&this._tooltip.hide()},_onRender:function(t){this._destroyCrosshairTooltips(),this._copyMembers(t.sender),this._hasDataSource&&!this._hasData&&this.options.autoBind||this.trigger(q)},_copyMembers:function(t){this.options=t.options,this._originalOptions=t._originalOptions,this.surface=t.surface,this._plotArea=t._plotArea,this._model=t._model,this._highlight=t._highlight,this._selections=t._selections,this._pannable=t._pannable,this._zoomSelection=t._zoomSelection,this._mousewheelZoom=t._mousewheelZoom},requiresHandlers:function(t){for(var e=this._events,i=0;i<t.length;i++)if(f(e[t[i]]))return!0},_initTooltip:function(){this._tooltip=this._createTooltip(),this._tooltip.bind($,this._tooltipleave.bind(this))},_onLegendItemClick:function(t){this.trigger(C,t)||this._legendItemClick(t.seriesIndex,t.pointIndex)},_legendItemClick:function(e,i){var n=this._instance,s=n._plotArea,r=(s.srcSeries||s.series)[e];if(n._hasInactiveOpacity()&&n._activeChartInstance&&(n._updateSeriesOpacity(null,!0),n._applySeriesOpacity(n._activeChartInstance.children,null,!0),n._activeChartInstance=null),t.inArray(r.type,[tt,et,it])>=0){var o=r.data[i];if(o&&f(o.visible))o.visible=!o.visible;else{var a=r.pointVisibility=r.pointVisibility||{},h=a[i];a[i]=!!f(h)&&!h}}else r.visible=!r.visible,this._seriesVisibility.save(r);n._noTransitionsRedraw()},_createTooltip:function(){return new pt(this.element,_({},this.options.tooltip,{rtl:this._isRtl()}))},_tooltipleave:function(){this._instance&&this._instance.hideElements()},_bindData:function(t){var e,i,n,s=this,r=s.options,o=s._sourceSeries||r.series,a=o.length,h=s.dataSource.view(),l=(s.dataSource.group()||[]).length>0,c=[],u=this._seriesVisibility;for(u.read(),e=0;e<a;e++)i=o[e],s._isBindable(i)&&l?(n=lt(i,h),c=c.concat(n),u.applyByGroup(n,t)):(i=_({},i),c.push(i),u.applyByIndex(i,t));s._sourceSeries=o,r.series=c,this._instance.applySeriesColors(),s._bindSeries(),s._bindCategories(),this._hasData=!0},_onDataChanged:function(t){this._bindData(t),this.trigger(Q),this._instance&&this._instance.fontLoaded&&this._redraw()},_bindSeries:function(){var t,e,i,n,s=this,r=s.dataSource.view(),o=s.options.series,a=o.length;for(t=0;t<a;t++)e=o[t],s._isBindable(e)&&(i=e._groupIx,n=f(i)?(r[i]||{}).items:r,!1!==e.autoBind&&(e.data=n))},_bindCategories:function(){var t,e,i=this,n=i.dataSource.view()||[],s=(i.dataSource.group()||[]).length>0,r=n,o=i.options,a=[].concat(o.categoryAxis);for(s&&n.length&&(r=n[0].items),t=0;t<a.length;t++)!1!==(e=a[t]).autoBind&&i._bindCategoryAxis(e,r,t)},_bindCategoryAxis:function(t,e,i){var n,s,r,o=(e||[]).length;if(t.field)for(t.categories=[],n=0;n<o;n++)r=e[n],s=v(t.field,r),0===n?(t.categories=[s],t.dataItems=[r]):(t.categories.push(s),t.dataItems.push(r));else this._instance&&this._instance.bindCategoryAxisFromSeries(t,i)},_isBindable:function(t){var e,i,n=c.current.valueFields(t),s=!0;for(i=0;i<n.length;i++)if((e=n[i])===J?e="field":e+="Field",!f(t[e])){s=!1;break}return s},_isRtl:function(){return n.support.isRtl(this.element)&&"rtl"===this.element.css("direction")}}),ot=["getAxis","findAxisByName","plotArea","toggleHighlight","showTooltip","hideTooltip","_resize","_redraw","_noTransitionsRedraw","_legendItemHover","_eventCoordinates"];function at(t){rt.fn[t]=function(){var e=this._instance;if(e)return e[t].apply(e,arguments)}}for(var ht=0;ht<ot.length;ht++)at(ot[ht]);function lt(t,i){var s,r,o,a=[],h=t.groupNameTemplate,l=i.length;if(0===l)return(o=d({},t)).visibleInLegend=!1,[o];for(f(h)?(n.logToConsole("'groupNameTemplate' is obsolete and will be removed in future versions. Specify the group name template as 'series.name'"),h&&(s=b(h))):s=b(t.name||function(e){var i=e.group;return""+(f(t.name)?i.value+": "+t.name:i.value)}),r=0;r<l;r++)o=d({},t),n.isFunction(o.color)||(o.color=e),o._groupIx=r,o._groupValue=i[r].value,a.push(o),s&&(o.name=s({series:o,group:i[r]}));return a}a.ExportMixin.extend(rt.fn),n.PDFMixin&&n.PDFMixin.extend(rt.fn),a.ui.plugin(rt);var ct=s.extend({init:function(){this.groups={},this.index={},this.options={}},applyByGroup:function(t,e){if(e&&e.action||this.options.persistSeriesVisibility)for(var i=0;i<t.length;i++)!1===this.groups[t[i]._groupValue]&&(t[i].visible=!1);else this.groups={}},applyByIndex:function(t,e){e&&e.action||this.options.persistSeriesVisibility?!1===this.index[t.index]&&(t.visible=!1):this.index={}},save:function(t){t&&(this.options.persistSeriesVisibility?this.options.series[t.index].visible=t.visible:this.saveState(t))},setOptions:function(t){this.options=t,this.groups={},this.index={}},read:function(){var t=this.options;if(t.persistSeriesVisibility)for(var e=t.series,i=0;i<e.length;i++)this.saveState(e[i])},saveState:function(t){f(t._groupValue)?this.groups[t._groupValue]=t.visible:this.index[t.index]=t.visible}}),ut=n.geometry;var pt=nt.extend({init:function(e,i){var s=this;nt.fn.init.call(s),this.setOptions(i),s.chartElement=e,s.template=pt.template,s.template||(s.template=pt.template=function(t){var e=t.autoHide,i=t.rtl,n=t.font,s=t.border,r=t.opacity;return"<div class='k-tooltip "+(e?"k-tooltip-closable":"")+" k-chart-tooltip "+(i?"k-rtl":"")+"' style='display:none; position: absolute; font: "+n+";"+(s?"border:"+s.width+"px solid;":"")+"opacity: "+r+';\'><div class="k-tooltip-content"></div>'+(e?"":'<div class="k-tooltip-button"><a href="#" class="k-icon k-i-close" title="Close"></a></div>')+"</div>"}),s.element=t(s.template(s.options)),s.move=s.move.bind(s),s._mouseleave=s._mouseleave.bind(s);var r=n.format("[{0}='content'],[{0}='scroller']",n.attr("role"));s._mobileScroller=e.closest(r).data("kendoMobileScroller"),s.downEvent=n.applyEventMap("down",n.guid()),s._closeTooltipHandler=s._closeTooltip.bind(s)},destroy:function(){this._clearShowTimeout(),j.off(this.downEvent,this._closeTooltipHandler),this.element&&(this.element.off(A).remove(),this.element=null)},setOptions:function(t){this.options=d({},this.options,t)},options:{opacity:1,animation:{duration:150},sharedTemplate:function(t){var e=t.colspan,i=t.categoryText,n=t.points,s=t.content;return"<table><th colspan='"+e+"'>"+i+"</th>"+function(t,e,i,n){for(var s="",r=0;r<t.length;r++){var o=t[r];s+="<tr>",e&&(s+="<td><span class='k-chart-shared-tooltip-marker' style='background-color:"+w(o.series.color)+"'></span></td>"),i&&(s+="<td> "+(o.series.name?o.series.name+":":"&nbsp;")+"</td>"),s+="<td>"+n(o)+"</td>",s+="</tr>"}return s}(n,t.colorMarker,t.nameColumn,s)+"</table>"},categoryFormat:"{0:d}",autoHide:!0},move:function(){var t,e=this,i=e.options,n=e.element;e.anchor&&e.element&&(t=e._offset(),e.visible||n.css({top:t.top,left:t.left}),e.visible=!0,e._ensureElement(document.body),n.stop(!0,!0).show().animate({left:t.left,top:t.top},i.animation.duration))},_clearShowTimeout:function(){this.showTimeout&&(clearTimeout(this.showTimeout),this.showTimeout=null)},getAnchor:function(t){var e=this.anchor,i=e.point,n=e.align,s=i.left,r=i.top;return"center"===n.horizontal?s-=t.width/2:"right"===n.horizontal&&(s-=t.width),"center"===n.vertical?r-=t.height/2:"bottom"===n.vertical&&(r-=t.height),{x:s,y:r}},_offset:function(){var e=this,i=e._measure(),s=e.getAnchor(i),a=s.y,h=s.x,l=n.support.zoomLevel(),c=t(window),u=window.pageYOffset||document.documentElement.scrollTop||0,p=window.pageXOffset||document.documentElement.scrollLeft||0,d=(this._mobileScroller||{}).movable;if(d&&1!==d.scale){var f=ut.transform().scale(d.scale,d.scale,[d.x,d.y]),v=new ut.Point(h,a).transform(f);h=v.x,a=v.y}else a+=e._fit(a-u,i.height,o(c)/l),h+=e._fit(h-p,i.width,r(c)/l);return{top:a,left:h}},show:function(t){var n=this;this.anchor=t.anchor,this.element.css(function(t){for(var i in t)t[i]===e&&(t[i]="");return t}(t.style)),this.element.toggleClass("k-chart-tooltip-inverse",!!t.className),this.element.toggleClass("k-chart-shared-tooltip",!!t.shared);var s=t.shared?this._sharedContent(t):this._pointContent(t.point);this.element.find(".k-tooltip-content").html(s),n.options.autoHide||(n.element.off("click"+i).on("click"+i,".k-tooltip-button",n._closeTooltipHandler),j.off(n.downEvent,n._closeTooltipHandler).on(n.downEvent,n._closeTooltipHandler)),this._clearShowTimeout(),this.showTimeout=setTimeout(this.move,100)},hide:function(t){var e=this;(e.options.autoHide||t)&&(clearTimeout(e.showTimeout),e._hideElement(),e.visible&&(e.point=null,e.visible=!1,e.index=null,j.off(e.downEvent,e._closeTooltipHandler)))},_closeTooltip:function(e){t(e.target).is(".k-chart-tooltip, .k-tooltip-content")||(e.preventDefault(),this.chartElement.data("kendoChart")._instance.hideElements(),this.hide(!0))},_sharedContent:function(t){var e=t.points,i=a.grep(e,(function(t){return f(t.series.name)})).length,s=t.series.length>1,r=1;return i&&r++,s&&r++,n.template(this.options.sharedTemplate)({points:e,category:t.category,categoryText:t.categoryText,content:this._pointContent,colorMarker:s,nameColumn:i,colspan:r})},_measure:function(){return this._ensureElement(),{width:r(this.element),height:o(this.element)}},_ensureElement:function(){this.element&&this.element.appendTo(document.body).on(A,this._mouseleave)},_mouseleave:function(e){var i=e.relatedTarget,n=this.chartElement[0];i&&i!==n&&!t.contains(n,i)&&this.trigger($)},_hideElement:function(){var t=this,e=this.element;e&&e.fadeOut({always:function(){t.visible||e.off(A).remove()}})},_pointContent:function(t){var e,i=d({},this.options,t.options.tooltip);return f(t.value)&&(e=t.value.toString()),i.template?e=b(i.template)({value:t.value,category:t.category,series:t.series,dataItem:t.dataItem,percentage:t.percentage,runningTotal:t.runningTotal,total:t.total,low:t.low,high:t.high,xLow:t.xLow,xHigh:t.xHigh,yLow:t.yLow,yHigh:t.yHigh}):i.format&&(e=t.formatValue(i.format)),e},_fit:function(t,e,i){var n=0;return t+e>i&&(n=i-(t+e)),t<0&&(n=-t),n}}),dt=pt.extend({init:function(t,e){pt.fn.init.call(this,t,e),this.element.addClass("k-chart-crosshair-tooltip")},show:function(t){this.element&&(this.anchor=t.anchor,this.element.css(t.style),this.element.html(this.content(t)),this.move())},move:function(){var t=this,e=t.element,i=t._offset();t._ensureElement(),e.css({top:i.top,left:i.left}).show()},content:function(t){var e=t.value,i=t.crosshair.options.tooltip;return i.template&&(e=b(i.template)({value:e})),e},hide:function(){this.element.hide()}}),ft=s.extend({init:function(t,e){this._chart=t,this._pane=e,this.visual=e.visual,this.chartsVisual=e.chartContainer.visual,this.name=e.options.name},series:function(){var t=this._chart,e=t._plotArea.groupSeriesByPane()[this.name||"default"],i=[];if(e)for(var n=0;n<e.length;n++)i.push(new vt(t,e[n]));return i}}),vt=s.extend({init:function(t,e){this._chart=t,this._options=e},points:function(t){var e=this._points;if(!e){var i=this._seriesOptions(),s=this._chart._plotArea;this._points=e=s.pointsBySeriesIndex(i.index)}return n.isFunction(t)&&(e=this._filterPoints(e,t)),e},data:function(t){var e=this._seriesOptions();if(t){var i=this._chart,n=i._plotArea;if(e.data=t,e.categoryField){var s=n.seriesCategoryAxis(e),r=[].concat(i.options.categoryAxis);i._instance.bindCategoryAxisFromSeries(r[s.axisIndex],s.axisIndex)}i._noTransitionsRedraw(),this._clearFields()}return e.data},findPoint:function(t){for(var e=this.points(),i=0;i<e.length;i++)if(t(e[i]))return e[i]},toggleHighlight:function(t,e){e=e?n.isFunction(e)?this.points(e):y(e)?e:[e]:this.points(),this._chart._instance.togglePointsHighlight(t,e)},toggleVisibility:function(t,e){var i=this._chart,s=this._seriesOptions();if(n.isFunction(e))if(x(s.type,[tt,et,it]))for(var r=this._filterData(e),o=0;o<r.length;o++)r[o].visible=t;else s.visible=function(i){return!e(i.dataItem)||t};else s.visible=t,i._seriesVisibility.save(s);i._noTransitionsRedraw(),this._clearFields()},_filterData:function(t){for(var e=this._seriesOptions().data,i=e.length,n=[],s=0;s<i;s++)t(e[s])&&n.push(e[s]);return n},_filterPoints:function(t,e){for(var i=[],n=t.length,s=0;s<n;s++)e(t[s])&&i.push(t[s]);return i},_seriesOptions:function(){var t=this._series;return t||(t=this._series=this._chart._seriesOptions(this._options)),t},_clearFields:function(){delete this._points,delete this._series}});a.Tooltip=pt,a.CrosshairTooltip=dt,a.ChartInstanceObserver=st,a.ChartPane=ft,a.ChartSeries=vt}(window.kendo.jQuery)}));
//# sourceMappingURL=kendo.dataviz.chart.min.js.map
