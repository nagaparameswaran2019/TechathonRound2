/**
 * Kendo UI v2023.1.117 (http://www.telerik.com/kendo-ui)
 * Copyright 2023 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.
 *
 * Kendo UI commercial licenses may be obtained at
 * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete
 * If you do not own a commercial license, this file shall be governed by the trial license terms.
 */
!function(t){"function"==typeof define&&define.amd?define(["kendo.data.min","kendo.popup.min","kendo.window.min","kendo.gantt.data.min","kendo.grid.min","kendo.datetimepicker.min","kendo.numerictextbox.min","kendo.textbox.min","kendo.form.min"],t):t()}((function(){var t,e,i,n,o,s,a,r,d,l,p,u,c,f,h,m,g,v,b,k,y;t=window.kendo.jQuery,e=window.kendo,i=e.ui,n=e.support.browser,o=e.Observable,s=i.Widget,a=e._outerWidth,r=t.extend({F10:121},e.keys),d=t.extend,l=t.isPlainObject,p=".kendoGantt",u="click",c="width",f=".",h={down:{origin:"bottom left",position:"top left"},up:{origin:"top left",position:"bottom left"}},m={buttonDelete:"k-gantt-delete",buttonCancel:"k-gantt-cancel",buttonSave:"k-gantt-update",focused:"k-focus",gridContent:"k-grid-content",hovered:"k-hover",item:"k-item k-menu-item",popupWrapper:"k-popup k-menu-popup",popupList:"k-menu-group k-menu-group-md k-reset",popup:{form:"k-popup-edit-form",editForm:"k-gantt-edit-form",formContainer:"k-edit-form-container",resourcesFormContainer:"k-resources-form-container",message:"k-popup-message",buttonsContainer:"k-edit-buttons",button:"k-button",buttonDefaults:"k-button-md k-rounded-md k-button-solid k-button-solid-base",editField:"k-edit-field",editLabel:"k-edit-label",resourcesField:"k-gantt-resources"},primary:"k-button-solid-primary",toolbar:{appendButton:"k-gantt-create"}},g=o.extend({init:function(t,e){o.fn.init.call(this),this.element=t,this.options=d(!0,{},this.options,e),this._popup()},options:{direction:"down"},destroy:function(){clearTimeout(this._focusTimeout),this.popup.destroy(),this.element.off(p),this.list.off(p),this.unbind()},_adjustListWidth:function(){var t,e,i=this.list,o=i[0].style.width,s=this.element,r=a(i);!i.data(c)&&o||(e=(t=window.getComputedStyle?window.getComputedStyle(s[0],null):0)?parseFloat(t.width):a(s),t&&(n.mozilla||n.msie)&&(e+=parseFloat(t.paddingLeft)+parseFloat(t.paddingRight)+parseFloat(t.borderLeftWidth)+parseFloat(t.borderRightWidth)),r>(o="border-box"!==i.css("box-sizing")?e-(a(i)-i.width()):e)&&(o=r),i.css({fontFamily:s.css("font-family"),width:o}).data(c,o))},_current:function(t){var e=this.list.find(f+m.focused),i=e[t]();i.length&&(e.removeClass(m.focused).removeAttr("id"),i.addClass(m.focused).trigger("focus"))},_popup:function(){var i=this,n="li.k-item",o=this.options.messages.actions;this.list=t(function(t){var e=t.styles,i=t.actions;return'<div class="'+e.popupWrapper+'"><ul class="'+e.popupList+'" role="listbox" aria-label="Add dropdown">'+i.map((function(t){return'<li tabindex="0" class="'+e.item+'" data-action="'+t.data+'" role="option"><span class="k-link k-menu-link"><span class="k-menu-link-text">'+t.text+"</span></span></li>"}))+"</ul></div>"}({styles:m,actions:[{data:"add",text:o.addChild},{data:"insert-before",text:o.insertBefore},{data:"insert-after",text:o.insertAfter}]})),this.element.append(this.list),this.popup=new e.ui.Popup(this.list,d({anchor:this.element,open:function(){i._adjustListWidth()},animation:this.options.animation},h[this.options.direction])),this.element.on(u+p,(function(n){var o=t(this).attr(e.attr("action"));n.preventDefault(),o?i.trigger("command",{type:o}):(i.popup.open(),i.list.find("li:first").addClass(m.focused).trigger("focus"))})),this.list.find(n).hover((function(){t(this).addClass(m.hovered)}),(function(){t(this).removeClass(m.hovered)})).end().on(u+p,n,(function(){i.trigger("command",{type:t(this).attr(e.attr("action"))}),i.popup.close()})),this.popup.bind("close",(function(){i.list.find(n).removeClass(m.focused),i.element.parents("["+e.attr("role")+'="gantt"]').find(f+m.gridContent+" > table").first().trigger("focus")})),this.list.find("ul").on("keydown"+p,(function(t){switch(t.keyCode){case r.UP:t.preventDefault(),i._current("prev");break;case r.DOWN:t.preventDefault(),i._current("next");break;case r.ENTER:i.list.find(f+m.focused).click();break;case r.ESC:t.preventDefault(),i.popup.close()}}))}}),v={desktop:{dateRange:function(i,n){var o={name:n.field,title:n.title},s=n.model.fields[n.field].validation;s&&l(s)&&s.message&&(o[e.attr("dateCompare-msg")]=s.message),t('<input type="text" required id="'+n.field+'"'+e.attr("type")+'="date" '+e.attr("role")+'="datetimepicker" '+e.attr("bind")+'="value:'+n.field+'" '+e.attr("validate")+"='true' />").attr(o).appendTo(i),t("<span "+e.attr("for")+'="'+n.field+'" class="k-invalid-msg"/>').hide().appendTo(i)},resources:function(e,i){t('<div class="'+m.popup.resourcesField+'" style="display:none"></div><a href="#" class="'+i.styles.button+" "+i.styles.buttonDefaults+'"><span class="k-button-text">'+i.messages.assignButton+"</span></a>").on("click",i.click).appendTo(e)},readonly:function(t,e){var i=e.field,n="";null!==e.model.get(i)&&(n=e.model.get(i)),t.append("<span>"+n+"</span>")}}},b=e.Observable.extend({init:function(t,i){e.Observable.fn.init.call(this),this.element=t,this.options=d(!0,{},this.options,i),this.createButton=this.options.createButton},fields:function(e,i,n){var o,s=this,a=this.options,r=a.messages.editor,l=a.resources;return a.editable.template?o=t.map(i.fields,(function(t,e){return{field:e}})):(o=[{field:"title",title:r.title},{field:"start",title:r.start,editor:e.dateRange},{field:"end",title:r.end,editor:e.dateRange},{field:"percentComplete",title:r.percentComplete,format:"p0"}],n&&o.splice.apply(o,[1,0].concat([{field:"plannedStart",title:r.plannedStart,editor:e.dateRange},{field:"plannedEnd",title:r.plannedEnd,editor:e.dateRange}])),i.get(l.field)&&o.push({field:l.field,title:r.resources,messages:r,editor:e.resources,click:function(t){t.preventDefault(),l.editor(s.container.find(f+m.popup.resourcesField),i)},styles:m.popup}),o=o.map((function(t){return!i.editable||i.editable(t.field)?t:d(!0,t,{editor:e.readonly})}))),o.map((function(t){return d(!0,t,{label:t.title})}))},_buildEditTemplate:function(t){var i=this.options.editable.template,n=d({},e.Template,this.options.templateSettings),o="";return i?("string"==typeof i&&(i=e.unescape(i)),o+=e.template(i,n)(t)):(this.renderForm=!0,o+='<div class="k-gantt-form"></div>'),o}}),k=b.extend({destroy:function(){this.close(),this.unbind()},close:function(){var t=this,e=function(){t.editable&&(t.container.data("kendoWindow").destroy(),t.editable=null,t.container=null),t.popup&&(t.popup.destroy(),t.popup=null)};t.editable&&t.container.is(":visible")?(t.trigger("close",{window:t.container}),t.container.data("kendoWindow").bind("deactivate",e).close()):e()},editTask:function(t,e){this.editable=this._createPopupEditor(t,e)},showDialog:function(i){for(var n=i.buttons,o=m.popup,s=e.format('<div class="{0}"><div class="{1}"><p class="{2}">{3}</p><div class="{4}">',o.form,o.formContainer,o.message,i.text,o.buttonsContainer),a=0,r=n.length;a<r;a++)s+=this.createButton(n[a]);s+="</div></div></div>";var d=this.element;this.popup&&this.popup.destroy();var l=this.popup=t(s).appendTo(d).eq(0).on("click",f+o.button,(function(e){e.preventDefault(),l.close();var i=t(e.currentTarget).index();n[i].click()})).kendoWindow({modal:!0,autoFocus:!1,resizable:!1,draggable:!1,title:i.title,visible:!1,deactivate:function(){this.destroy(),d.trigger("focus")}}).getKendoWindow();l.center().open(),l.element.find(".k-button-solid-primary").trigger("focus")},_createPopupEditor:function(i,n){var o,s=this,a=this.options.messages,r=m.popup,l=e.format('<div {0}="{1}" class="{2} {3}"><div class="{4}">',e.attr("uid"),i.uid,r.form,r.editForm,r.formContainer),c=this.fields(v.desktop,i,n);l+=this._buildEditTemplate(i),l+='<div class="'+r.buttonsContainer+'">',l+=this.createButton({name:"update",text:a.save,className:m.primary}),l+=this.createButton({name:"cancel",text:a.cancel}),!1!==s.options.editable.destroy&&(l+=this.createButton({name:"delete",text:a.destroy})),l+="</div></div></div>";var h=this.container=t(l).appendTo(this.element).eq(0).kendoWindow(d({modal:!0,resizable:!1,draggable:!0,title:a.editor.editorTitle,visible:!1,close:function(t){t.userTriggered&&s.trigger("cancel",{container:h,model:i})&&t.preventDefault()}},{}));return this.renderForm?(this.form=h.find(".k-gantt-form").kendoForm({items:c,formData:i,buttonsTemplate:function(){return""},validatable:{validateOnBlur:!0}}).data("kendoForm"),o=this.form.editable):o=h.kendoEditable({model:i,clearContainer:!1,validateOnBlur:!0,target:s.options.target}).data("kendoEditable"),e.cycleForm(h),this.trigger("edit",{container:h,model:i})?s.trigger("cancel",{container:h,model:i}):(h.data("kendoWindow").center().open(),h.on(u+p,f+m.buttonCancel,(function(t){t.preventDefault(),t.stopPropagation(),s.trigger("cancel",{container:h,model:i})})),h.on(u+p,f+m.buttonSave,(function(t){t.preventDefault(),t.stopPropagation();for(var e,o=s.fields(v.desktop,i,n),a={},r=0,d=o.length;r<d;r++)a[e=o[r].field]=i.get(e);s.trigger("save",{container:h,model:i,updateInfo:a})})),h.on(u+p,f+m.buttonDelete,(function(t){t.preventDefault(),t.stopPropagation(),s.trigger("remove",{container:h,model:i})}))),o}}),y=s.extend({init:function(t,e){s.fn.init.call(this,t,e),this.wrapper=this.element,this.model=this.options.model,this.resourcesField=this.options.resourcesField,this.createButton=this.options.createButton,this._initContainer(),this._attachHandlers()},events:["save"],close:function(){this.window.bind("deactivate",this.destroy.bind(this)).close()},destroy:function(){this._dettachHandlers(),this.grid.destroy(),this.grid=null,this.window.destroy(),this.window=null,s.fn.destroy.call(this),e.destroy(this.wrapper),this.element=this.wrapper=null},open:function(){this.window.center().open()},_attachHandlers:function(){var i=this.grid,n=this._cancelProxy=this._cancel.bind(this);this.container.on(u+p,f+m.buttonCancel,this._cancelProxy),this._saveProxy=this._save.bind(this),this.container.on(u+p,f+m.buttonSave,this._saveProxy),this.window.bind("close",(function(t){t.userTriggered&&n(t)})),i.wrapper.on(u+p,"input[type='checkbox']",(function(){var n=t(this),o=t(n).closest("tr"),s=i.dataSource.getByUid(o.attr(e.attr("uid"))),a=t(n).is(":checked")?1:"";s.set("value",a)}))},_cancel:function(t){t.preventDefault(),this.close()},_createButtons:function(){for(var t=this.options.buttons,e='<div class="'+m.popup.buttonsContainer+'">',i=0,n=t.length;i<n;i++)e+=this.createButton(t[i]);e+="</div>",this.container.append(e)},_dettachHandlers:function(){this._cancelProxy=null,this._saveProxy=null,this.container.off(p),this.grid.wrapper.off()},_initContainer:function(){var i=this,n=m.popup,o=e.format('<div class="{0} {1}"><div class="{2} {3}"></div></div>"',n.form,n.editForm,n.formContainer,n.resourcesFormContainer);o=t(o),this.container=o.find(f+n.resourcesFormContainer),this.window=o.kendoWindow({modal:!0,resizable:!1,draggable:!0,visible:!1,title:this.options.messages.resourcesEditorTitle,open:function(){i.grid.resize(!0)}}).data("kendoWindow"),this._resourceGrid(),this._createButtons()},_resourceGrid:function(){var i=this.options.messages,n=t('<div id="resources-grid"/>').appendTo(this.container);this.grid=new e.ui.Grid(n,{columns:[{field:"name",title:i.resourcesHeader,template:function(t){var e=t.name,i=t.value;return"<label><input type='checkbox' value='"+e+"'"+(i>0&&null!==i?'checked="checked"':"")+"/>"+e+"</labe>"}},{field:"value",title:i.unitsHeader,template:function(t){var i=t.format,n=null!==t.value?t.value:"";return i?e.toString(n,i):n}}],height:280,sortable:!0,editable:!0,filterable:!0,dataSource:{data:this.options.data,schema:{model:{id:"id",fields:{id:{from:"id"},name:{from:"name",type:"string",editable:!1},value:{from:"value",type:"number",validation:this.options.unitsValidation},format:{from:"format",type:"string"}}}}},save:function(t){var e=!!t.values.value;t.container.parent().find("input[type='checkbox']").prop("checked",e)}})},_save:function(t){t.preventDefault(),this._updateModel(),this.wrapper.is(f+m.popup.resourcesField)||this.trigger("save",{container:this.wrapper,model:this.model}),this.close()},_updateModel:function(){for(var t,e=[],i=this.grid.dataSource.data(),n=0,o=i.length;n<o;n++)null!==(t=i[n].get("value"))&&t>0&&e.push(i[n]);this.model[this.resourcesField]=e}}),e.gantt={TaskDropDown:g,Editor:b,PopupEditor:k,ResourceEditor:y}}));
//# sourceMappingURL=kendo.gantt.editors.min.js.map
