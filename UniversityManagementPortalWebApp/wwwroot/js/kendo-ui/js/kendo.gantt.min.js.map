{"version":3,"file":"kendo.gantt.min.js","names":["factory","define","amd","$","undefined$1","defaultCommands","kendo","window","keys","extend","F10","supportsMedia","mobileOS","support","Widget","ui","ObservableObject","data","ObservableArray","Query","isArray","Array","inArray","isFunction","isPlainObject","outerWidth","_outerWidth","outerHeight","_outerHeight","NS","TABINDEX","CLICK","STRING","ARIA_DESCENDANT","ACTIVE_CELL","DOT","BUTTON_TEMPLATE","ref","text","styles","className","action","iconClass","COMMAND_BUTTON_TEMPLATE","attr","ganttStyles","wrapper","plannedTasks","rowHeight","content","listWrapper","list","timelineWrapper","timeline","splitBarWrapper","splitBar","splitBarHover","popupWrapper","popupList","resizeHandle","icon","item","line","buttonDelete","buttonCancel","buttonSave","buttonToggle","buttonDefaults","primary","hovered","selected","focused","focusedCell","gridHeader","gridHeaderWrap","gridContent","tasks","popup","form","editForm","formContainer","resourcesFormContainer","message","buttonsContainer","button","editField","editLabel","resourcesField","toolbar","headerWrapper","footerWrapper","views","viewsWrapper","viewsDropdown","iconPlus","iconPdf","iconToggle","viewButton","link","pdfButton","appendButton","selector","uid","focusTable","table","direct","parents","scrollPositions","parentsUntil","filter","index","element","getComputedStyles","overflow","add","each","parent","scrollTop","setActive","e","focus","Gantt","init","options","events","dataSource","append","pdf","fn","call","this","_events","_wrapper","_resources","length","_timeline","_toolbar","_footer","_adjustDimensions","_preventRefresh","view","_selectedViewName","_dataSource","_assignments","_dropDowns","_list","_dependencies","_resizable","_scrollable","_dataBind","_attachEvents","_createEditor","notify","name","autoBind","navigatable","selectable","editable","resizable","columnResizeHandleWidth","columns","dependencies","resources","assignments","taskTemplate","messages","save","cancel","destroy","deleteTaskConfirmation","deleteDependencyConfirmation","deleteTaskWindowTitle","deleteDependencyWindowTitle","selectView","day","week","month","year","start","end","actions","addChild","insertBefore","insertAfter","editor","editorTitle","resourcesEditorTitle","title","plannedStart","plannedEnd","percentComplete","assignButton","resourcesHeader","unitsHeader","switchText","offsetTooltipAdvanced","offsetTooltipDelay","seconds","minutes","hours","days","showWorkHours","showWorkDays","workDayStart","Date","workDayEnd","workWeekStart","workWeekEnd","hourSpan","snap","height","listWidth","showPlannedTasks","select","value","find","_selectionUpdate","trigger","clearSelection","unbind","_refreshHandler","_progressHandler","_errorHandler","_dependencyRefreshHandler","_dependencyErrorHandler","footerDropDown","headerDropDown","_editor","_resizeDraggable","off","_mediaQuery","removeListener","_mediaQueryHandler","_resizeHandler","footer","setOptions","newOptions","deepExtend","selectedView","map","isSettings","type","empty","_setEvents","resize","bind","on","matches","splitBarHandleClassName","join","width","addClass","layout","appendTo","css","treelistWrapper","splitbar","toggleButton","that","viewsSelector","viewsDropdownSelector","pdfSelector","toggleSelector","contentSelector","treelist","_actions","template","ns","Object","toLowerCase","HEADER_VIEWS_TEMPLATE","prepend","label","VIEWS_DROPDOWN_TEMPLATE","toggeSwitchWrap","removeClass","refresh","_resize","matchMedia","addListener","val","preventDefault","children","focusedViewIndex","_focusedView","closest","keyCode","RIGHT","LEFT","ENTER","SPACEBAR","_viewByIndex","saveAsPDF","is","relatedTarget","expanded","html","create","i","_createButton","_createPlannedTasksSwitch","command","commandName","replace","indexOf","Error","split","toolbarHeight","footerHeight","totalHeight","totalWidth","splitBarWidth","treeListWidth","timelineWidth","_scrollTo","scrollTarget","id","get","scrollIntoView","actionsSelector","actionMessages","handler","orderId","task","_createNewModel","dataItem","taskParent","firstSlot","_timeSlots","target","set","_createTask","gantt","TaskDropDown","eq","direction","animation","open","effects","_getListEditable","update","reorder","mode","move","reorderable","_getListOptions","filterable","columnMenu","field","_attachResourceEditor","column","_createResourceEditor","_attachListEvents","restoreFocus","_cachedCurrent","rowIndex","columnIndex","_current","oldIndex","newIndex","oldWidth","newWidth","_navigatable","container","model","cell","_preventItemChange","closeCell","key","updatedValues","values","previousTask","updateDuration","duration","updatePlannedDuration","plannedDuration","hasOwnProperty","getTime","updateInfo","hasChanges","cancelChanges","_updateAssignments","_requestStart","sync","then","row","position","parentId","source","sort","dir","_updateTask","selection","toggleButtons","removeAttr","listElement","listOptions","GanttList","prefix","remove","edit","navigate","trimOptions","GanttTimeline","viewName","getByUid","resizeStart","dependency","predecessorId","predecessor","successorId","successor","_createDependency","currentUid","current","editTask","removeTask","removeDependency","_error","GanttDataSource","refreshDependencies","GanttDependencyDataSource","dataTextField","dataColorField","dataFormatField","DataSource","_assignmentsRefreshHandler","dataTaskIdField","dataResourceIdField","dataValueField","PopupEditor","createButton","_createPopupButton","cancelTask","saveTask","_onDialogClose","unitsValidation","step","assignmentsModel","schema","fields","Units","validation","_resourceEditor","ResourceEditor","_wrapResourceData","buttons","range","_render","taskTree","_renderDependencies","date","_scrollToDate","_modelFromElement","setDataSource","fetch","setDependenciesDataSource","items","assignment","resource","taskId","resourceId","hasMatch","operator","toArray","_updateAssignment","splice","_removeAssignment","shift","j","newLength","_createAssignment","close","taskCopy","toJSON","_editTask","dirty","_syncDataSource","resourceValueField","_taskConfirm","_removeTask","insert","_scrollToUid","_preventDependencyRefresh","resourceValue","_dependencyConfirm","_removeDependency","_removeTaskDependencies","_removeTaskAssignments","callback","_confirm","confirmation","click","showDialog","_progress","cachedUid","scrollToUid","cachedIndex","_selected","_assignResources","_renderTree","group","assigments","applyTaskResource","setter","wrapTask","resourcedId","valueFormat","formatedValue","toString","push","color","result","taskAssignments","valuePerResource","format","toggle","progress","timelineScroll","treeListWrapper","hover","kendoResizable","orientation","handle","scrollLeft","delta","x","initialDelta","isRtl","_renderCurrentTime","headerSelector","timelineHeader","timelineContent","treeListHeader","treeListContent","wheelDeltaY","currentTarget","one","cellIndex","headerTable","contentTable","tables","expandState","scroll","reverse","offsetWidth","scrollVertical","_rowHeight","moveVertical","method","sibling","first","last","moveHorizontal","subling","toggleExpandedState","summary","deleteAction","selectedTask","isInput","ctrlKey","_focusTimeout","setTimeout","focusableItems","_getToolbarItems","idx","itemToFocus","shiftKey","TAB","isCell","altKey","UP","DOWN","_startEditHandler","stopPropagation","DELETE","tagName","concat","activeElement","_activeElement","promises","when","apply","done","_adjustHeight","switchLabel","plannedToggle","Switch","checked","change","_togglePlannedTasks","unchecked","toggleSwitch","toggleClass","_setPlanned","PDFMixin","_drawPDF","listTableWidth","clone","_drawPDFShadow","avoidLinks","plugin","jQuery"],"sources":["kendo.gantt.js"],"mappings":"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","sourcesContent":["(function (factory) {\n    typeof define === 'function' && define.amd ? define(['kendo.data', 'kendo.resizable', 'kendo.switch', 'kendo.gantt.data', 'kendo.gantt.editors', 'kendo.gantt.list', 'kendo.gantt.timeline', 'kendo.pdf'], factory) :\n    factory();\n})((function () {\n    var __meta__ = {\n        id: \"gantt\",\n        name: \"Gantt\",\n        category: \"web\",\n        description: \"The Gantt component.\",\n        depends: [ \"data\", \"resizable\", \"switch\", \"gantt.data\", \"gantt.editors\", \"gantt.list\", \"gantt.timeline\", \"pdf\" ]\n    };\n\n    (function($, undefined$1) {\n\n        var kendo = window.kendo,\n            keys = $.extend({ F10: 121 }, kendo.keys),\n            supportsMedia = \"matchMedia\" in window,\n            mobileOS = kendo.support.mobileOS,\n            Widget = kendo.ui.Widget,\n            ObservableObject = kendo.data.ObservableObject,\n            ObservableArray = kendo.data.ObservableArray,\n            Query = kendo.data.Query,\n            isArray = Array.isArray,\n            inArray = $.inArray,\n            isFunction = kendo.isFunction,\n            extend = $.extend,\n            isPlainObject = $.isPlainObject,\n            outerWidth = kendo._outerWidth,\n            outerHeight = kendo._outerHeight,\n            defaultIndicatorWidth = 3,\n\n            NS = \".kendoGantt\",\n            PERCENTAGE_FORMAT = \"p0\",\n            TABINDEX = \"tabIndex\",\n            CLICK = \"click\",\n            STRING = \"string\",\n            ARIA_DESCENDANT = \"aria-activedescendant\",\n            ARIA_LABEL = \"aria-label\",\n            ACTIVE_CELL = \"gantt_active_cell\",\n            DOT = \".\",\n            TASK_DELETE_CONFIRM = \"Are you sure you want to delete this task?\",\n            DEPENDENCY_DELETE_CONFIRM = \"Are you sure you want to delete this dependency?\",\n            TOGGLE_BUTTON_TEMPLATE = function (ref) {\n                var styles = ref.styles;\n\n                return (\"<button class=\\\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button k-gantt-toggle\\\" type=\\\"button\\\" \" + ARIA_LABEL + \"=\\\"Toggle\\\"><span class=\\\"k-button-icon \" + (styles.iconToggle) + \"\\\"></span></button>\");\n        },\n            BUTTON_TEMPLATE = function (ref) {\n                var text = ref.text;\n                var styles = ref.styles;\n                var className = ref.className;\n                var action = ref.action;\n                var iconClass = ref.iconClass;\n\n                return \"<button aria-label=\\\"\" + text + \"\\\" class=\\\"\" + (styles.button) + \" \" + (styles.buttonDefaults) + \" \" + className + \"\\\" type=\\\"button\\\" \" +\n                \"\" + (action ? 'data-action=\"' + action + '\"' : '') +\n            '>' +\n                \"<span class=\\\"k-button-icon \" + iconClass + \"\\\"></span>\" +\n                \"<span class=\\\"k-button-text\\\">\" + text + \"</span>\" +\n            '</button>';\n        },\n            COMMAND_BUTTON_TEMPLATE = function (ref) {\n                var className = ref.className;\n                var attr = ref.attr;\n                var text = ref.text;\n\n                return (\"<a class=\\\"\" + className + \"\\\" \" + attr + \" href=\\\"#\\\"><span class=\\\"k-button-text\\\">\" + text + \"</span></a>\");\n        },\n            VIEWS_DROPDOWN_TEMPLATE = function (ref) {\n                var label = ref.label;\n                var styles = ref.styles;\n                var views = ref.views;\n\n                return \"<select aria-label=\\\"\" + label + \"\\\" class=\\\"k-dropdown k-picker k-dropdown-list \" + (styles.viewsDropdown) + \"\\\">\" +\n                \"\" + (Object.keys(views).map(function (view) { return '<option value=\"' + view + '\">' + views[view].title + '</option>'; }).join(\"\")) +\n            '</select>';\n        },\n            HEADER_VIEWS_TEMPLATE = function (ref) {\n                var styles = ref.styles;\n                var views = ref.views;\n                var ns = ref.ns;\n\n                return \"<div class=\\\"\" + (styles.viewsWrapper) + \"\\\">\" +\n                \"<span class=\\\"k-button-group \" + (styles.views) + \"\\\">\" +\n                    \"\" + (Object.keys(views).map(function (view) { return '<button type=\"button\" class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-view-' + view.toLowerCase() + '\" data-' + ns + 'name=\"' + view + '\">' +\n                        '<span class=\"k-button-text\">' + views[view].title + '</span>' +\n                    '</button>'; }).join(\"\")) +\n                '</span>' +\n            '</div>';\n        };\n\n        var ganttStyles = {\n            wrapper: \"k-widget k-gantt\",\n            plannedTasks: \"k-gantt-planned\",\n            rowHeight: \"k-gantt-rowheight\",\n            content: \"k-gantt-content\",\n            listWrapper: \"k-gantt-treelist\",\n            list: \"k-gantt-treelist\",\n            timelineWrapper: \"k-gantt-timeline\",\n            timeline: \"k-gantt-timeline\",\n            splitBarWrapper: \"k-splitbar k-splitbar-horizontal k-splitbar-draggable-horizontal\",\n            splitBar: \"k-splitbar\",\n            splitBarHover: \"k-splitbar-horizontal-hover\",\n            popupWrapper: \"k-list-container\",\n            popupList: \"k-list k-reset\",\n            resizeHandle: \"k-resize-handle\",\n            icon: \"k-icon\",\n            item: \"k-item\",\n            line: \"k-gantt-line\",\n            buttonDelete: \"k-gantt-delete\",\n            buttonCancel: \"k-gantt-cancel\",\n            buttonSave: \"k-gantt-update\",\n            buttonToggle: \"k-gantt-toggle\",\n            buttonDefaults: \"k-button-md k-rounded-md k-button-solid\",\n            primary: \"k-button-solid-primary\",\n            hovered: \"k-hover\",\n            selected: \"k-selected\",\n            focused: \"k-focus\",\n            focusedCell: \"k-focus\",\n            gridHeader: \"k-grid-header\",\n            gridHeaderWrap: \"k-grid-header-wrap\",\n            gridContent: \"k-grid-content\",\n            tasks: \"k-gantt-tasks\",\n            popup: {\n                form: \"k-popup-edit-form\",\n                editForm: \"k-gantt-edit-form\",\n                formContainer: \"k-edit-form-container\",\n                resourcesFormContainer: \"k-resources-form-container\",\n                message: \"k-popup-message\",\n                buttonsContainer: \"k-edit-buttons\",\n                button: \"k-button\",\n                editField: \"k-edit-field\",\n                editLabel: \"k-edit-label\",\n                resourcesField: \"k-gantt-resources\"\n            },\n            toolbar: {\n                headerWrapper: \"k-gantt-header k-toolbar k-gantt-toolbar\",\n                footerWrapper: \"k-gantt-footer k-toolbar k-gantt-toolbar\",\n                toolbar: \"k-gantt-toolbar\",\n                views: \"k-gantt-views\",\n                viewsWrapper: \"k-gantt-views-wrapper\",\n                viewsDropdown: \"k-views-dropdown\",\n                button: \"k-button\",\n                buttonToggle: \"k-gantt-toggle\",\n                buttonDefaults: \"k-button-md k-rounded-md k-button-solid\",\n                iconPlus: \"k-icon k-i-plus\",\n                iconPdf: \"k-icon k-i-file-pdf\",\n                iconToggle: \"k-icon k-i-layout-1-by-4\",\n                viewButton: \"k-view\",\n                link: \"k-link\",\n                pdfButton: \"k-gantt-pdf\",\n                appendButton: \"k-gantt-create\"\n            }\n        };\n\n        function selector(uid) {\n            return \"[\" + kendo.attr(\"uid\") + (uid ? \"='\" + uid + \"']\" : \"]\");\n        }\n\n        function trimOptions(options) {\n            delete options.name;\n            delete options.prefix;\n\n            delete options.remove;\n            delete options.edit;\n            delete options.add;\n            delete options.navigate;\n\n            return options;\n        }\n\n        function focusTable(table, direct) {\n            var wrapper = table.parents('[' + kendo.attr(\"role\") + '=\"gantt\"]');\n            var scrollPositions = [];\n            var parents = scrollableParents(wrapper);\n\n            table.attr(TABINDEX, 0);\n\n            if (direct) {\n                parents.each(function(index, parent) {\n                    scrollPositions[index] = $(parent).scrollTop();\n                });\n            }\n\n            try {\n                //The setActive method does not cause the document to scroll to the active object in the current page\n                table[0].setActive();\n            } catch (e) {\n                table[0].focus();\n            }\n\n            if (direct) {\n                parents.each(function(index, parent) {\n                    $(parent).scrollTop(scrollPositions[index]);\n                });\n            }\n        }\n\n        function scrollableParents(element) {\n            return $(element).parentsUntil(\"body\")\n                    .filter(function(index, element) {\n                        var computedStyle = kendo.getComputedStyles(element, [\"overflow\"]);\n                        return computedStyle.overflow != \"visible\";\n                    })\n                    .add(window);\n        }\n\n        var defaultCommands;\n\n        var Gantt = Widget.extend({\n            init: function(element, options, events) {\n                if (isArray(options)) {\n                    options = { dataSource: options };\n                }\n\n                defaultCommands = {\n                    append: {\n                        text: \"Add Task\",\n                        action: \"add\",\n                        className: Gantt.styles.toolbar.appendButton + \" k-button-solid-base\",\n                        iconClass: Gantt.styles.toolbar.iconPlus\n                    },\n                    pdf: {\n                        text: \"Export to PDF\",\n                        className: Gantt.styles.toolbar.pdfButton + \" k-button-solid-base\",\n                        iconClass: Gantt.styles.toolbar.iconPdf\n                    }\n                };\n\n                Widget.fn.init.call(this, element, options);\n\n                if (events) {\n                    this._events = events;\n                }\n\n                this._wrapper();\n\n                this._resources();\n\n                if (!this.options.views || !this.options.views.length) {\n                    this.options.views = [\"day\", \"week\", \"month\"];\n                }\n\n                this._timeline();\n\n                this._toolbar();\n\n                this._footer();\n\n                this._adjustDimensions();\n\n                // Prevent extra refresh from setting the view\n                this._preventRefresh = true;\n\n                this.view(this.timeline._selectedViewName);\n\n                this._preventRefresh = false;\n\n                this._dataSource();\n\n                this._assignments();\n\n                this._dropDowns();\n\n                this._list();\n\n                this._dependencies();\n\n                this._resizable();\n\n                this._scrollable();\n\n                this._dataBind();\n\n                this._attachEvents();\n\n                this._createEditor();\n\n                kendo.notify(this);\n            },\n\n            events: [\n                \"dataBinding\",\n                \"dataBound\",\n                \"add\",\n                \"edit\",\n                \"remove\",\n                \"cancel\",\n                \"save\",\n                \"change\",\n                \"navigate\",\n                \"moveStart\",\n                \"move\",\n                \"moveEnd\",\n                \"resizeStart\",\n                \"resize\",\n                \"resizeEnd\",\n                \"columnHide\",\n                \"columnReorder\",\n                \"columnResize\",\n                \"columnShow\",\n                \"togglePlannedTasks\"\n            ],\n\n            options: {\n                name: \"Gantt\",\n                autoBind: true,\n                navigatable: false,\n                selectable: true,\n                editable: true,\n                resizable: false,\n                columnResizeHandleWidth: defaultIndicatorWidth,\n                columns: [],\n                views: [],\n                dataSource: {},\n                dependencies: {},\n                resources: {},\n                assignments: {},\n                taskTemplate: null,\n                messages: {\n                    save: \"Save\",\n                    cancel: \"Cancel\",\n                    destroy: \"Delete\",\n                    deleteTaskConfirmation: TASK_DELETE_CONFIRM,\n                    deleteDependencyConfirmation: DEPENDENCY_DELETE_CONFIRM,\n                    deleteTaskWindowTitle: \"Delete task\",\n                    deleteDependencyWindowTitle: \"Delete dependency\",\n                    selectView: \"Select view\",\n                    views: {\n                        day: \"Day\",\n                        week: \"Week\",\n                        month: \"Month\",\n                        year: \"Year\",\n                        start: \"Start\",\n                        end: \"End\"\n                    },\n                    actions: {\n                        append: \"Add Task\",\n                        addChild: \"Add Child\",\n                        insertBefore: \"Add Above\",\n                        insertAfter: \"Add Below\",\n                        pdf: \"Export to PDF\"\n                    },\n                    editor: {\n                        editorTitle: \"Task\",\n                        resourcesEditorTitle: \"Resources\",\n                        title: \"Title\",\n                        start: \"Start\",\n                        end: \"End\",\n                        plannedStart: \"Planned Start\",\n                        plannedEnd: \"Planned End\",\n                        percentComplete: \"Complete\",\n                        resources: \"Resources\",\n                        assignButton: \"Assign\",\n                        resourcesHeader: \"Resources\",\n                        unitsHeader: \"Units\"\n                    },\n                    plannedTasks: {\n                        switchText: \"Planned Tasks\",\n                        offsetTooltipAdvanced: \"Met deadline earlier\",\n                        offsetTooltipDelay: \"Delay\",\n                        seconds: \"seconds\",\n                        minutes: \"minutes\",\n                        hours: \"hours\",\n                        days: \"days\"\n                    }\n                },\n                showWorkHours: true,\n                showWorkDays: true,\n                toolbar: null,\n                workDayStart: new Date(1980, 1, 1, 8, 0, 0),\n                workDayEnd: new Date(1980, 1, 1, 17, 0, 0),\n                workWeekStart: 1,\n                workWeekEnd: 5,\n                hourSpan: 1,\n                snap: true,\n                height: 600,\n                listWidth: \"30%\",\n                rowHeight: null,\n                showPlannedTasks: false\n            },\n\n            select: function(value) {\n                var list = this.list;\n\n                if (!value) {\n                    return list.select();\n                }\n\n                if (typeof value === STRING) {\n                    value = list.content.find(value);\n                }\n\n                list.select(value);\n                this._selectionUpdate();\n\n                this.list.element.find(\"table[role=treegrid]\").trigger(\"focus\");\n                return;\n            },\n\n            clearSelection: function() {\n                this.list.clearSelection();\n                this._selectionUpdate();\n            },\n\n            destroy: function() {\n                Widget.fn.destroy.call(this);\n\n                if (this.dataSource) {\n                    this.dataSource.unbind(\"change\", this._refreshHandler);\n                    this.dataSource.unbind(\"progress\", this._progressHandler);\n                    this.dataSource.unbind(\"error\", this._errorHandler);\n                }\n\n                if (this.dependencies) {\n                    this.dependencies.unbind(\"change\", this._dependencyRefreshHandler);\n                    this.dependencies.unbind(\"error\", this._dependencyErrorHandler);\n                }\n\n                if (this.timeline) {\n                    this.timeline.unbind();\n                    this.timeline.destroy();\n                }\n\n                if (this.list) {\n                    this.list.unbind();\n                    this.list.destroy();\n                }\n\n                if (this.footerDropDown) {\n                    this.footerDropDown.destroy();\n                }\n\n                if (this.headerDropDown) {\n                    this.headerDropDown.destroy();\n                }\n\n                if (this._editor) {\n                    this._editor.destroy();\n                }\n\n                if (this._resizeDraggable) {\n                    this._resizeDraggable.destroy();\n                }\n\n                this.toolbar.off(NS);\n\n                if (supportsMedia) {\n                    this._mediaQuery.removeListener(this._mediaQueryHandler);\n                    this._mediaQuery = null;\n                }\n\n                $(window).off(\"resize\" + NS, this._resizeHandler);\n                $(this.wrapper).off(NS);\n\n                this.toolbar = null;\n                this.footer = null;\n\n                kendo.destroy(this.element);\n            },\n\n            setOptions: function(options) {\n                var newOptions = kendo.deepExtend({}, this.options, options);\n\n                var events = this._events;\n\n                if (!options.views) {\n                    var selectedView = this.view().name;\n\n                    newOptions.views = $.map(this.options.views, function(view) {\n                        var isSettings = isPlainObject(view);\n                        var name = isSettings ? ((typeof view.type !== \"string\") ? view.title : view.type) : view;\n\n                        if (selectedView === name) {\n                            if (isSettings) {\n                                view.selected = true;\n                            } else {\n                                view = { type: name, selected: true };\n                            }\n                        } else if (isSettings) {\n                            view.selected = false;\n                        }\n\n                        return view;\n                    });\n                }\n\n                if (!options.dataSource) { newOptions.dataSource = this.dataSource; }\n                if (!options.dependencies) { newOptions.dependencies = this.dependencies; }\n                if (!options.resources) { newOptions.resources = this.resources; }\n                if (!options.assignments) { newOptions.assignments = this.assignments; }\n\n                this.destroy();\n                this.element.empty();\n                this.options = null;\n\n                this.init(this.element, newOptions, events);\n\n                Widget.fn._setEvents.call(this, newOptions);\n            },\n\n            _attachEvents: function() {\n                this._resizeHandler = this.resize.bind(this, false);\n                $(window).on(\"resize\" + NS, this._resizeHandler);\n\n                if (supportsMedia && this._mediaQuery.matches === true) {\n                    this._mediaQueryHandler({ matches: true });\n                }\n            },\n\n            _wrapper: function() {\n                var ganttStyles = Gantt.styles;\n                var splitBarHandleClassName = [ganttStyles.icon, ganttStyles.resizeHandle].join(\" \");\n                var options = this.options;\n                var height = options.height;\n                var width = options.width;\n\n                this.wrapper = this.element.addClass(ganttStyles.wrapper).attr(\"role\", \"application\");\n                this.layout = $(\"<div class='\" + ganttStyles.content + \"' />\").appendTo(this.wrapper)\n                    .append(\"<div class='\" + ganttStyles.listWrapper + \"'><div></div></div>\")\n                    .append(\"<div class='\" + ganttStyles.splitBarWrapper + \"'><div class='\" + splitBarHandleClassName + \"'></div></div>\")\n                    .append(\"<div class='\" + ganttStyles.timelineWrapper + \"'><div></div></div>\");\n\n                if (options.showPlannedTasks) {\n                    this.wrapper.addClass(ganttStyles.plannedTasks);\n                }\n\n                if (height) {\n                    this.wrapper.css(\"height\", height);\n                }\n\n                if (width) {\n                    this.wrapper.css(\"width\", width);\n                }\n\n                if (options.rowHeight) {\n                    this.wrapper.addClass(ganttStyles.rowHeight);\n                }\n\n                this.treelistWrapper = this.wrapper.find(DOT + ganttStyles.list);\n                this.splitbar = this.wrapper.find(DOT + ganttStyles.splitBar);\n                this.timelineWrapper = this.wrapper.find(DOT + ganttStyles.timeline);\n\n                this.treelistWrapper.css(\"width\", options.listWidth);\n                this.timelineWrapper.css(\"width\", this.wrapper.width() - this.treelistWrapper.outerWidth() - this.splitbar.outerWidth() );\n            },\n\n            _toolbar: function() {\n                var that = this;\n                var ganttStyles = Gantt.styles;\n                var viewsSelector = DOT + ganttStyles.toolbar.views + \" > button\";\n                var viewsDropdownSelector = DOT + ganttStyles.toolbar.viewsDropdown;\n                var pdfSelector = DOT + ganttStyles.toolbar.pdfButton;\n                var toggleSelector = DOT + ganttStyles.buttonToggle;\n                var contentSelector = DOT + ganttStyles.gridContent;\n                var splitbar = that.splitbar;\n                var treelist = that.treelistWrapper;\n                var timeline = that.timelineWrapper;\n                var actions = this.options.toolbar;\n                var toolbar;\n                var views;\n                var toggleButton;\n                var mediaQueryHandler = function(e) {\n\n                    if (e.matches) {\n                        treelist.addClass(\"k-hidden\");\n                        splitbar.addClass(\"k-hidden\");\n\n                        treelist.width(\"100%\");\n                    } else {\n                        treelist.removeClass(\"k-hidden\");\n                        splitbar.removeClass(\"k-hidden\");\n                        timeline.removeClass(\"k-hidden\");\n\n                        treelist.width(treelist.outerWidth());\n\n                        that.refresh();\n\n                        timeline\n                            .find(contentSelector)\n                            .scrollTop(that.scrollTop);\n                    }\n\n                    that._resize();\n                };\n\n                if (!isFunction(actions)) {\n                    actions = (typeof actions === STRING ? actions : this._actions(actions));\n                    actions = kendo.template(actions).bind(this);\n                }\n\n                toggleButton = $(TOGGLE_BUTTON_TEMPLATE({ styles: ganttStyles.toolbar }));\n\n                views = $(HEADER_VIEWS_TEMPLATE({\n                    ns: kendo.ns,\n                    views: this.timeline.views,\n                    styles: ganttStyles.toolbar\n                }));\n\n                toolbar = $(\"<div role='toolbar' class='\" + ganttStyles.toolbar.headerWrapper + \"'>\")\n                    .append(toggleButton)\n                    .append(actions({}))\n                    .append(\"<span class='k-spacer k-toolbar-spacer' />\")\n                    .append(views);\n\n                if (views.find(\"button\").length > 1) {\n                    views.prepend(VIEWS_DROPDOWN_TEMPLATE({\n                        ns: kendo.ns,\n                        views: this.timeline.views,\n                        styles: ganttStyles.toolbar,\n                        label: this.options.messages.selectView\n                    }));\n                }\n\n                if (this.toggeSwitchWrap) {\n                    this.toggeSwitchWrap.insertBefore(views);\n                }\n\n                this.wrapper.prepend(toolbar);\n                this.toolbar = toolbar;\n\n                if (supportsMedia) {\n                    this._mediaQueryHandler = mediaQueryHandler.bind(this);\n                    this._mediaQuery = window.matchMedia(\"(max-width: 480px)\");\n                    this._mediaQuery.addListener(this._mediaQueryHandler);\n                }\n\n                toolbar\n                    .on(\"change\" + NS, viewsDropdownSelector, function() {\n                        var list = that.list;\n                        var name = $(this).val();\n\n                        if (list.editable && list.editable.trigger(\"validate\")) {\n                            return;\n                        }\n\n                        if (!that.trigger(\"navigate\", { view: name })) {\n                            that.view(name);\n                        }\n\n                        that.toolbar.find(DOT + ganttStyles.focused).removeClass(ganttStyles.focused);\n                    })\n                    .on(CLICK + NS, viewsSelector, function(e) {\n                        e.preventDefault();\n\n                        var list = that.list;\n                        var name = $(this).attr(kendo.attr(\"name\"));\n\n                        if (list.editor && !list.editor.end()) {\n                            return;\n                        }\n\n                        if (!that.trigger(\"navigate\", { view: name })) {\n                            that.view(name);\n                        }\n\n                        that.toolbar.find(DOT + ganttStyles.focused).removeClass(ganttStyles.focused);\n                    })\n                    .on(\"keydown\" + NS, viewsSelector, function(e) {\n                        var views = $(DOT + ganttStyles.toolbar.views).children(\":not(.k-current-view)\");\n                        var focusedViewIndex = views.index((that._focusedView && that._focusedView[0]) || views.closest(DOT + ganttStyles.selected)[0]);\n\n                        if (e.keyCode === keys.RIGHT) {\n                            $(that.toolbar.find(DOT + ganttStyles.focused)).removeClass(ganttStyles.focused);\n                            that._focusedView = focusedViewIndex + 1 === views.length ? $(views[0]) : $(views[focusedViewIndex + 1]);\n                            that._focusedView.trigger(\"focus\").addClass(ganttStyles.focused);\n                            e.preventDefault();\n                        } else if (e.keyCode === keys.LEFT) {\n                            $(that.toolbar.find(DOT + ganttStyles.focused)).removeClass(ganttStyles.focused);\n                            that._focusedView = focusedViewIndex === 0 ? $(views[views.length - 1]) : $(views[focusedViewIndex - 1]);\n                            that._focusedView.trigger(\"focus\").addClass(ganttStyles.focused);\n                            e.preventDefault();\n                        } else if ((e.keyCode === keys.ENTER || e.keyCode === keys.SPACEBAR) && that._focusedView) {\n                            that.view(that._focusedView.text().toLowerCase());\n                            e.preventDefault();\n                        } else if (e.keyCode >= 49 && e.keyCode <= 57) {\n                            that.view(that.timeline._viewByIndex(e.keyCode - 49));\n                        }\n                    })\n                    .on(CLICK + NS, pdfSelector, function(e) {\n                        e.preventDefault();\n\n                        that.saveAsPDF();\n                    })\n                    .on(CLICK + NS, toggleSelector, function(e) {\n                        e.preventDefault();\n\n                        if (treelist.is(\":visible\")) {\n                            treelist.addClass(\"k-hidden\");\n                            timeline.removeClass(\"k-hidden\");\n\n                            that.refresh();\n\n                            timeline\n                                .find(contentSelector)\n                                .scrollTop(that.scrollTop);\n                        } else {\n                            treelist.removeClass(\"k-hidden\");\n                            timeline.addClass(\"k-hidden\");\n\n                            treelist\n                                .find(contentSelector)\n                                .scrollTop(that.scrollTop);\n                        }\n\n                        that._resize();\n                    });\n\n                this.wrapper\n                    .on(\"focusout\" + NS, function(e) {\n                        if (!$(e.relatedTarget).closest(DOT + ganttStyles.toolbar.toolbar).length) {\n                            that.toolbar.find(DOT + ganttStyles.focused).removeClass(ganttStyles.focused);\n                        }\n                        if (!$(e.relatedTarget).closest(DOT + ganttStyles.toolbar.views).length) {\n                            that.toolbar.find(DOT + ganttStyles.toolbar.views).removeClass(ganttStyles.toolbar.expanded);\n                        }\n                    });\n\n            },\n\n            _actions: function() {\n                var options = this.options;\n                var editable = options.editable;\n                var actions = options.toolbar;\n                var html = \"\";\n                var action;\n\n                if (!isArray(actions)) {\n                    if (editable && editable.create !== false) {\n                        actions = [\"append\"];\n                    } else {\n                        return function () { return html; };\n                    }\n                }\n\n                for (var i = 0, length = actions.length; i < length; i++) {\n                    action = actions[i];\n\n                    if (action === \"plannedTasks\" || action.name === \"plannedTasks\") {\n                        this._createPlannedTasksSwitch();\n                        continue;\n                    }\n\n                    html += this._createButton(action);\n                }\n\n                return function () { return html; };\n            },\n\n            _footer: function() {\n                var editable = this.options.editable;\n\n                if (!editable || editable.create === false) {\n                    return;\n                }\n\n                var ganttStyles = Gantt.styles.toolbar;\n                var messages = this.options.messages.actions;\n                var button = $(kendo.template(BUTTON_TEMPLATE)(extend(true, { styles: ganttStyles }, defaultCommands.append, { text: messages.append })));\n                var footer = $(\"<div role='toolbar' class='\" + ganttStyles.footerWrapper + \"'>\").append(button);\n\n                this.wrapper.append(footer);\n                this.footer = footer;\n            },\n\n            _createButton: function(command) {\n                var template = command.template || BUTTON_TEMPLATE;\n                var messages = this.options.messages.actions;\n                var commandName = typeof command === STRING ? command : command.name || command.text;\n                var className = defaultCommands[commandName] ? defaultCommands[commandName].className : \"k-gantt-\" + (commandName || \"\").replace(/\\s/g, \"\");\n                var options = {\n                    iconClass: \"\",\n                    action: \"\",\n                    text: commandName,\n                    className: className,\n                    styles: Gantt.styles.toolbar\n                };\n\n                if (!options.className) {\n                    options.className = \"k-button-solid-base\";\n                } else if (options.className.indexOf(\"k-button-solid-primary\") === -1) {\n                    options.className += \" k-button-solid-base\";\n                }\n\n                if (!commandName && !(isPlainObject(command) && command.template)) {\n                    throw new Error(\"Custom commands should have name specified\");\n                }\n\n                options = extend(true, options, defaultCommands[commandName], { text: messages[commandName] });\n\n                if (isPlainObject(command)) {\n                    if (command.className && inArray(options.className, command.className.split(\" \")) < 0) {\n                        command.className += \" \" + options.className;\n                    }\n\n                    options = extend(true, options, command);\n                }\n\n                return kendo.template(template)(options);\n            },\n\n            _adjustDimensions: function() {\n                var element = this.element;\n                var toolbarHeight = outerHeight(this.toolbar);\n                var footerHeight = this.footer ? outerHeight(this.footer) : 0;\n                var totalHeight = element.height();\n                var totalWidth = element.width();\n                var splitBarWidth = this.splitbar.is(\":visible\") ? outerWidth(this.splitbar) : 0;\n                var treeListWidth = this.treelistWrapper.is(\":visible\") ? outerWidth(this.treelistWrapper) : 0;\n                var timelineWidth = totalWidth - ( treeListWidth + splitBarWidth );\n\n                this.layout.children().height(totalHeight - (toolbarHeight + footerHeight));\n                this.timelineWrapper.width(timelineWidth);\n\n                if (totalWidth < (treeListWidth + splitBarWidth)) {\n                    this.treelistWrapper.width(totalWidth - splitBarWidth);\n                }\n            },\n\n            _scrollTo: function(value) {\n                var view = this.timeline.view();\n                var list = this.list;\n                var attr = kendo.attr(\"uid\");\n                var id = typeof value === \"string\" ? value :\n                    value.closest(\"tr\" + selector()).attr(attr);\n                var action;\n                var scrollTarget;\n                var scrollIntoView = function() {\n                    if (scrollTarget.length !== 0) {\n                        action();\n                    }\n                };\n\n                if (view.content.is(\":visible\")) {\n                    scrollTarget = view.content.find(selector(id));\n                    action = function() {\n                        view._scrollTo(scrollTarget);\n                    };\n                } else {\n                    scrollTarget = list.element.find(selector(id));\n                    action = function() {\n                        scrollTarget.get(0).scrollIntoView();\n                    };\n                }\n\n                scrollIntoView();\n            },\n\n            _dropDowns: function() {\n                var that = this;\n                var actionsSelector = DOT + Gantt.styles.toolbar.appendButton;\n                var actionMessages = this.options.messages.actions;\n                var timeline = this.timeline;\n                var editable = this.options.editable;\n\n                var handler = function(e) {\n                    var type = e.type;\n                    var orderId;\n                    var dataSource = that.dataSource;\n                    var task = dataSource._createNewModel({});\n                    var selected = that.dataItem(that.select());\n                    var parent = dataSource.taskParent(selected);\n                    var firstSlot = timeline.view()._timeSlots()[0];\n                    var target = type === \"add\" ? selected : parent;\n                    var editable = that.list.editor;\n\n                    if (editable && editable.trigger(\"validate\")) {\n                        return;\n                    }\n\n                    task.set(\"title\", \"New task\");\n\n                    if (target) {\n                        task.set(\"parentId\", target.get(\"id\"));\n                        task.set(\"start\", target.get(\"start\"));\n                        task.set(\"end\", target.get(\"end\"));\n                        task.set(\"plannedStart\", target.get(\"plannedStart\"));\n                        task.set(\"plannedEnd\", target.get(\"plannedEnd\"));\n                    } else {\n                        task.set(\"start\", firstSlot.start);\n                        task.set(\"end\", firstSlot.end);\n                    }\n\n                    if (type !== \"add\") {\n                        orderId = selected.get(\"orderId\");\n                        orderId = type === \"insert-before\" ? orderId : orderId + 1;\n                    }\n\n                    that._createTask(task, orderId);\n                };\n\n                if (!editable || editable.create === false) {\n                    return;\n                }\n\n                this.footerDropDown = new kendo.gantt.TaskDropDown(this.footer.children(actionsSelector).eq(0), {\n                    messages: {\n                        actions: actionMessages\n                    },\n                    direction: \"up\",\n                    animation: {\n                        open: {\n                            effects: \"slideIn:up\"\n                        }\n                    }\n                });\n\n                this.headerDropDown = new kendo.gantt.TaskDropDown(this.toolbar.children(actionsSelector).eq(0), {\n                    messages: {\n                        actions: actionMessages\n                    }\n                });\n\n                this.footerDropDown.bind(\"command\", handler);\n                this.headerDropDown.bind(\"command\", handler);\n            },\n\n            _getListEditable: function() {\n                var editable = false,\n                    options = this.options;\n\n                if (options.editable !== false) {\n                    editable = \"incell\";\n\n                    if (options.editable && options.editable.update === false) {\n                        editable = false;\n                    } else {\n                        if (!options.editable || options.editable.reorder !== false) {\n                            editable = {\n                                mode: \"incell\",\n                                move: {\n                                    reorderable: true\n                                }\n                            };\n                        }\n                    }\n                }\n\n                return editable;\n            },\n\n            _getListOptions: function() {\n                var options = this.options,\n                    editable = this._getListEditable(),\n                    listWrapper = this.wrapper.find(DOT + ganttStyles.list),\n                    ganttListOptions = {\n                        columns: options.columns || [],\n                        dataSource: this.dataSource,\n                        selectable: options.selectable,\n                        reorderable: options.reorderable,\n                        editable: editable,\n                        resizable: options.resizable,\n                        filterable: options.filterable,\n                        columnMenu: options.columnMenu,\n                        columnResizeHandleWidth: this.options.columnResizeHandleWidth,\n                        listWidth: outerWidth(listWrapper),\n                        resourcesField: this.resources.field,\n                        rowHeight: this.options.rowHeight\n                    };\n\n                return ganttListOptions;\n            },\n\n            _attachResourceEditor: function(columns) {\n                var column;\n\n                for (var i = 0; i < columns.length; i++) {\n                    column = columns[i];\n\n                    if (column.field === this.resources.field && typeof column.editor !== \"function\") {\n                        column.editor = this._createResourceEditor.bind(this);\n                    }\n                }\n            },\n\n            _attachListEvents: function() {\n                var that = this,\n                    navigatable = that.options.navigatable,\n                    restoreFocus = function() {\n                        var element;\n\n                        if (navigatable && that._cachedCurrent) {\n                            element = that.list.content.find(\"tr\").eq(that._cachedCurrent.rowIndex).find(\"td\").eq(that._cachedCurrent.columnIndex);\n\n                            that._current(element);\n\n                            focusTable(that.list.content.find(\"table\"), true);\n                        }\n\n                        delete that._cachedCurrent;\n                    };\n\n                that.list\n                    .bind(\"columnShow\", function(e) {\n                        that.trigger(\"columnShow\", { column: e.column });\n                    })\n                    .bind(\"columnHide\", function(e) {\n                        that.trigger(\"columnHide\", { column: e.column });\n                    })\n                    .bind(\"columnReorder\", function(e) {\n                        that.trigger(\"columnReorder\", { column: e.column, oldIndex: e.oldIndex, newIndex: e.newIndex });\n                    })\n                    .bind(\"columnResize\", function(e) {\n                        that.trigger(\"columnResize\", { column: e.column, oldWidth: e.oldWidth, newWidth: e.newWidth });\n                    })\n                    .bind(\"render\", function() {\n                        that._navigatable();\n                     }, true)\n                    .bind(\"beforeEdit\", function(e) {\n                        that._cachedCurrent = {\n                            rowIndex: e.container.closest(\"tr\").index(),\n                            columnIndex: e.container.index()\n                        };\n\n                        if (that.trigger(\"edit\", { task: e.model, container: e.container })) {\n                            e.preventDefault();\n                        }\n                    })\n                    .bind(\"cancel\", function(e) {\n                        if (that.trigger(\"cancel\", { task: e.model, container: e.cell })) {\n                            e.preventDefault();\n                            return;\n                        }\n\n                        that._preventItemChange = true;\n                        that.list.closeCell(true);\n                        restoreFocus();\n                    })\n                    .bind(\"save\", function(e) {\n                        var updatedValues = e.values,\n                            key;\n\n                        that.previousTask = {};\n                        that._preventRefresh = true;\n\n                        if (that.updateDuration === null || that.updateDuration === undefined$1) {\n                            that.updateDuration = e.model.duration();\n                        }\n\n                        if (that.updatePlannedDuration === null || that.updatePlannedDuration === undefined$1) {\n                            that.updatePlannedDuration = e.model.plannedDuration();\n                        }\n\n                        if (updatedValues.hasOwnProperty(\"start\")) {\n                            updatedValues.end = new Date(updatedValues.start.getTime() + that.updateDuration);\n                        }\n\n                        if (updatedValues.hasOwnProperty(\"plannedStart\") && updatedValues.plannedStart) {\n                            updatedValues.plannedEnd = new Date(updatedValues.plannedStart.getTime() + that.updatePlannedDuration);\n                        }\n\n                        for (key in updatedValues) {\n                            if (updatedValues.hasOwnProperty(key)) {\n                                that.previousTask[key] = e.model.get(key);\n                            }\n                        }\n\n                        that.updatedValues = updatedValues;\n                    })\n                    .bind(\"itemChange\", function(e) {\n                        var updateInfo = that.updatedValues,\n                            task = e.data,\n                            resourcesField = that.resources.field,\n                            previousTask = that.previousTask,\n                            key;\n\n                        if (that._preventItemChange) {\n                            that._preventItemChange = false;\n                            return;\n                        }\n\n                        for (key in previousTask) {\n                            if (previousTask.hasOwnProperty(key)) {\n                                task.set(key, previousTask[key]);\n                            }\n                        }\n\n                        that.previousTask = {};\n\n                        if (!that.trigger(\"save\", { task: task, values: updateInfo })) {\n                            if (updateInfo) {\n                                that._preventRefresh = true;\n                                that.dataSource.update(task, updateInfo);\n\n                                if (updateInfo[resourcesField]) {\n                                    that._updateAssignments(task.get(\"id\"), updateInfo[resourcesField]);\n                                }\n                            }\n\n                            that._preventRefresh = false;\n                            that._requestStart();\n                            that.dataSource.sync().then(function() {\n                                restoreFocus();\n                            });\n                        } else if (that.dataSource.hasChanges()) {\n                            that.dataSource.cancelChanges(task);\n                            that._preventRefresh = false;\n                            that.refresh();\n                        }\n\n                        that.updatedValues = null;\n                        that.updateDuration = null;\n                    })\n                    .bind(\"change\", function() {\n                        that.trigger(\"change\");\n\n                        that._selectionUpdate();\n\n                    })\n                    .bind(\"collapse\", function(e) {\n                        e.preventDefault();\n\n                        var row = that.list.element.find(\"tr[data-uid='\" + e.model.uid + \"']\");\n                        e.model.set(\"expanded\", false);\n\n                        that._cachedCurrent = {\n                            rowIndex: row.index(),\n                            columnIndex: row.find(\".k-focus\").index()\n                        };\n\n                        restoreFocus();\n                    })\n                    .bind(\"expand\", function(e) {\n                        e.preventDefault();\n\n                        var row = that.list.element.find(\"tr[data-uid='\" + e.model.uid + \"']\");\n                        e.model.set(\"expanded\", true);\n\n                        that._cachedCurrent = {\n                            rowIndex: row.index(),\n                            columnIndex: row.find(\".k-focus\").index()\n                        };\n\n                        restoreFocus();\n                    })\n                    .bind(\"dragend\", function(e) {\n                        var dataSource = that.dataSource,\n                            task, updateInfo;\n\n                        if (e.position === \"over\") {\n                            dataSource.cancelChanges();\n\n                            updateInfo = {\n                                parentId: e.source.parentId\n                            };\n\n                            task = dataSource.get(e.source.id);\n\n                            if (!that.trigger(\"save\", { task: task, values: updateInfo })) {\n                                dataSource.update(task, updateInfo);\n                            }\n\n                            dataSource.sync();\n                        }\n                    })\n                    .bind(\"dataBound\", function() {\n                        if (that.dataSource.sort().length === 0) {\n                            that.dataSource.sort([{ field: \"orderId\", dir: \"asc\" }]);\n                        }\n                    })\n                    .bind(\"reorder\", function(e) {\n                        that._updateTask(e.task, e.updateInfo);\n                        restoreFocus();\n                    });\n            },\n\n            _selectionUpdate: function() {\n                var that = this,\n                    selection = that.list.select(),\n                    toggleButtons = this.wrapper.find(DOT + ganttStyles.toolbar.toolbar + \" \" + DOT + ganttStyles.toolbar.appendButton);\n\n                if (selection.length) {\n                    toggleButtons.removeAttr(\"data-action\", \"add\");\n                    that.timeline.select(\"[data-uid='\" + selection.attr(\"data-uid\") + \"']\");\n                } else {\n                    toggleButtons.attr(\"data-action\", \"add\");\n                    that.timeline.clearSelection();\n                }\n            },\n\n            _list: function() {\n                var ganttStyles = Gantt.styles,\n                    listWrapper = this.wrapper.find(DOT + ganttStyles.list),\n                    listElement = listWrapper.find(\"> div\"),\n                    listOptions = this._getListOptions();\n\n                this._attachResourceEditor(listOptions.columns);\n\n                this.list = new kendo.ui.GanttList(listElement, listOptions);\n\n                this._attachListEvents();\n            },\n\n            _timeline: function() {\n                var that = this;\n                var ganttStyles = Gantt.styles;\n                var options = trimOptions(extend(true, { resourcesField: this.resources.field }, this.options));\n                var element = this.wrapper.find(DOT + ganttStyles.timeline + \" > div\");\n\n                this.timeline = new kendo.ui.GanttTimeline(element, options);\n\n                this.timeline\n                    .bind(\"navigate\", function(e) {\n                        var viewName = e.view.replace(/\\./g, \"\\\\.\").toLowerCase();\n\n                        that.toolbar\n                            .find(DOT + ganttStyles.toolbar.views + \" > button\")\n                            .removeClass(ganttStyles.selected)\n                            .end()\n                            .find(DOT + ganttStyles.toolbar.viewButton + \"-\" + viewName)\n                            .addClass(ganttStyles.selected);\n\n                        that.toolbar\n                            .find(DOT + ganttStyles.toolbar.viewsDropdown)\n                            .val(e.view);\n\n                        that.refresh();\n                    })\n                    .bind(\"moveStart\", function(e) {\n                        var editable = that.list.editor;\n\n                        if (editable && !editable.end()) {\n                            e.preventDefault();\n                            return;\n                        }\n\n                        if (that.trigger(\"moveStart\", { task: e.task })) {\n                            e.preventDefault();\n                        }\n                    })\n                    .bind(\"move\", function(e) {\n                        var task = e.task;\n                        var start = e.start;\n                        var end = new Date(start.getTime() + task.duration());\n\n                        if (that.trigger(\"move\", { task: task, start: start, end: end })) {\n                            e.preventDefault();\n                        }\n                    })\n                    .bind(\"moveEnd\", function(e) {\n                        var task = e.task;\n                        var start = e.start;\n                        var end = new Date(start.getTime() + task.duration());\n\n                        if (!that.trigger(\"moveEnd\", { task: task, start: start, end: end })) {\n                            that._updateTask(that.dataSource.getByUid(task.uid), {\n                                start: start,\n                                end: end\n                            });\n                        }\n                    })\n                    .bind(\"resizeStart\", function(e) {\n                        var editable = that.list.editor;\n\n                        if (editable && !editable.end()) {\n                            e.preventDefault();\n                            return;\n                        }\n\n                        if (that.trigger(\"resizeStart\", { task: e.task })) {\n                            e.preventDefault();\n                        }\n                    })\n                    .bind(\"resize\", function(e) {\n                        if (that.trigger(\"resize\", { task: e.task, start: e.start, end: e.end })) {\n                            e.preventDefault();\n                        }\n                    })\n                    .bind(\"resizeEnd\", function(e) {\n                        var task = e.task;\n                        var updateInfo = {};\n\n                        if (e.resizeStart) {\n                            updateInfo.start = e.start;\n                        } else {\n                            updateInfo.end = e.end;\n                        }\n\n                        if (!that.trigger(\"resizeEnd\", { task: task, start: e.start, end: e.end })) {\n                            that._updateTask(that.dataSource.getByUid(task.uid), updateInfo);\n                        }\n                    })\n                    .bind(\"percentResizeStart\", function(e) {\n                        var editable = that.list.editor;\n\n                        if (editable && !editable.end()) {\n                            e.preventDefault();\n                        }\n                    })\n                    .bind(\"percentResizeEnd\", function(e) {\n                        that._updateTask(that.dataSource.getByUid(e.task.uid), { percentComplete: e.percentComplete });\n                    })\n                    .bind(\"dependencyDragStart\", function(e) {\n                        var editable = that.list.editor;\n\n                        if (editable && !editable.end()) {\n                            e.preventDefault();\n                        }\n                    })\n                    .bind(\"dependencyDragEnd\", function(e) {\n                        var dependency = that.dependencies._createNewModel({\n                            type: e.type,\n                            predecessorId: e.predecessor.id,\n                            successorId: e.successor.id\n                        });\n\n                        that._createDependency(dependency);\n                    })\n                    .bind(\"select\", function(e) {\n                        var editable = that.list.editor,\n                            current = that.select(),\n                            currentUid;\n\n                        if (editable) {\n                            editable.end();\n                        }\n\n                        if (current && current.length) {\n                            currentUid = current.data(\"uid\");\n                        }\n\n                        if (currentUid !== e.uid) {\n                            that.select(\"[data-uid='\" + e.uid + \"']\");\n                            that.trigger(\"change\");\n                        }\n                    })\n                    .bind(\"editTask\", function(e) {\n                        var editable = that.list.editor;\n\n                        if (editable && !editable.end()) {\n                            return;\n                        }\n\n                        that.editTask(e.uid);\n                    })\n                    .bind(\"clear\", function() {\n                        that.clearSelection();\n                        that.trigger(\"change\");\n                    })\n                    .bind(\"removeTask\", function(e) {\n                        var editable = that.list.editor;\n\n                        if (editable && !editable.end()) {\n                            return;\n                        }\n\n                        that.removeTask(that.dataSource.getByUid(e.uid));\n                    })\n                    .bind(\"removeDependency\", function(e) {\n                        var editable = that.list.editor;\n\n                        if (editable && !editable.end()) {\n                            return;\n                        }\n\n                        that.removeDependency(that.dependencies.getByUid(e.uid));\n                    });\n            },\n\n            _dataSource: function() {\n                var options = this.options;\n                var dataSource = options.dataSource;\n\n                dataSource = isArray(dataSource) ? { data: dataSource } : dataSource;\n\n                if (this.dataSource && this._refreshHandler) {\n                    this.dataSource\n                        .unbind(\"change\", this._refreshHandler)\n                        .unbind(\"progress\", this._progressHandler)\n                        .unbind(\"error\", this._errorHandler);\n                } else {\n                    this._refreshHandler = this.refresh.bind(this);\n                    this._progressHandler = this._requestStart.bind(this);\n                    this._errorHandler = this._error.bind(this);\n                }\n\n                this.dataSource = kendo.data.GanttDataSource.create(dataSource)\n                    .bind(\"change\", this._refreshHandler)\n                    .bind(\"progress\", this._progressHandler)\n                    .bind(\"error\", this._errorHandler);\n            },\n\n            _dependencies: function() {\n                var dependencies = this.options.dependencies || {};\n                var dataSource = isArray(dependencies) ? { data: dependencies } : dependencies;\n\n                if (this.dependencies && this._dependencyRefreshHandler) {\n                    this.dependencies\n                        .unbind(\"change\", this._dependencyRefreshHandler)\n                        .unbind(\"error\", this._dependencyErrorHandler);\n                } else {\n                    this._dependencyRefreshHandler = this.refreshDependencies.bind(this);\n                    this._dependencyErrorHandler = this._error.bind(this);\n                }\n\n                this.dependencies = kendo.data.GanttDependencyDataSource.create(dataSource)\n                    .bind(\"change\", this._dependencyRefreshHandler)\n                    .bind(\"error\", this._dependencyErrorHandler);\n            },\n\n            _resources: function() {\n                var resources = this.options.resources;\n                var dataSource = resources.dataSource || {};\n\n                this.resources = {\n                    field: \"resources\",\n                    dataTextField: \"name\",\n                    dataColorField: \"color\",\n                    dataFormatField: \"format\"\n                };\n\n                extend(this.resources, resources);\n\n                this.resources.dataSource = kendo.data.DataSource.create(dataSource);\n            },\n\n            _assignments: function() {\n                var assignments = this.options.assignments;\n                var dataSource = assignments.dataSource || { };\n\n                if (this.assignments) {\n                    this.assignments.dataSource\n                        .unbind(\"change\", this._assignmentsRefreshHandler);\n                } else {\n                    this._assignmentsRefreshHandler = this.refresh.bind(this);\n                }\n\n                this.assignments = {\n                    dataTaskIdField: \"taskId\",\n                    dataResourceIdField: \"resourceId\",\n                    dataValueField: \"value\"\n                };\n\n                extend(this.assignments, assignments);\n\n                this.assignments.dataSource = kendo.data.DataSource.create(dataSource);\n\n                this.assignments.dataSource\n                    .bind(\"change\", this._assignmentsRefreshHandler);\n            },\n\n            _createEditor: function() {\n                var that = this;\n\n                var editor = this._editor = new kendo.gantt.PopupEditor(this.wrapper, extend({}, this.options, {\n                    target: this,\n                    resources: {\n                        field: this.resources.field,\n                        editor: this._createResourceEditor.bind(this)\n                    },\n                    createButton: this._createPopupButton.bind(this)\n                }));\n\n                editor\n                    .bind(\"cancel\", function(e) {\n                        var task = that.dataSource.getByUid(e.model.uid);\n\n                        if (that.trigger(\"cancel\", { container: e.container, task: task })) {\n                            e.preventDefault();\n                            return;\n                        }\n\n                        that.cancelTask();\n                    })\n                    .bind(\"edit\", function(e) {\n                        var task = that.dataSource.getByUid(e.model.uid);\n\n                        if (that.trigger(\"edit\", { container: e.container, task: task })) {\n                            e.preventDefault();\n                        }\n                    })\n                    .bind(\"save\", function(e) {\n                        var task = that.dataSource.getByUid(e.model.uid);\n\n                        that.saveTask(task, e.updateInfo);\n                    })\n                    .bind(\"remove\", function(e) {\n                        that.removeTask(e.model.uid);\n                    })\n                    .bind(\"close\", that._onDialogClose);\n            },\n\n            _onDialogClose: function() {},\n\n            _createResourceEditor: function(container, options) {\n                var that = this;\n                var model = options instanceof ObservableObject ? options : options.model;\n                var id = model.get(\"id\");\n                var messages = this.options.messages;\n                var resourcesField = this.resources.field;\n                var unitsValidation = { step: 0.01 };\n                var assignmentsModel = this.assignments.dataSource.options.schema.model;\n\n                if (assignmentsModel && assignmentsModel.fields.Units && assignmentsModel.fields.Units.validation) {\n                    extend(true, unitsValidation, assignmentsModel.fields.Units.validation);\n                }\n\n                var editor = this._resourceEditor = new kendo.gantt.ResourceEditor(container, {\n                    resourcesField: resourcesField,\n                    unitsValidation: unitsValidation,\n                    data: this._wrapResourceData(id),\n                    model: model,\n                    messages: extend({}, messages.editor),\n                    buttons: [\n                        { name: \"update\", text: messages.save, className: Gantt.styles.primary },\n                        { name: \"cancel\", text: messages.cancel }\n                    ],\n                    createButton: this._createPopupButton.bind(this),\n                    save: function(e) {\n                        that._updateAssignments(e.model.get(\"id\"), e.model.get(resourcesField));\n                    }\n                });\n\n                editor.open();\n            },\n\n            _createPopupButton: function(command) {\n                var commandName = command.name || command.text;\n                var options = {\n                    className: Gantt.styles.popup.button + \" \" + Gantt.styles.buttonDefaults + \" k-gantt-\" + (commandName || \"\").replace(/\\s/g, \"\"),\n                    text: commandName,\n                    attr: \"\"\n                };\n\n                if (!commandName && !(isPlainObject(command) && command.template)) {\n                    throw new Error(\"Custom commands should have name specified\");\n                }\n\n                if (isPlainObject(command)) {\n                    if (command.className) {\n                        command.className += \" \" + options.className;\n                    }\n\n                    options = extend(true, options, command);\n                }\n\n                if (!options.className) {\n                    options.className = \"k-button-solid-base\";\n                } else if (options.className.indexOf(\"k-button-solid-primary\") === -1) {\n                    options.className += \" k-button-solid-base\";\n                }\n\n                return kendo.template(COMMAND_BUTTON_TEMPLATE)(options);\n            },\n\n            view: function(type) {\n                return this.timeline.view(type);\n            },\n\n            range: function(range) {\n                var dataSource = this.dataSource;\n                var view = this.view();\n                var timeline = this.timeline;\n\n                if (range) {\n                    view.options.range = {\n                        start: range.start,\n                        end: range.end\n                    };\n\n                    timeline._render(dataSource.taskTree());\n                    timeline._renderDependencies(this.dependencies.view());\n                }\n\n                return {\n                    start: view.start,\n                    end: view.end\n                };\n            },\n\n            date: function(date) {\n                var view = this.view();\n\n                if (date) {\n                    view.options.date = date;\n                    view._scrollToDate(date);\n                }\n\n                return view.options.date;\n            },\n\n            dataItem: function(value) {\n                if (!value) {\n                    return null;\n                }\n\n                var list = this.list;\n                var element = list.element.find(value);\n\n                return list._modelFromElement(element);\n            },\n\n            setDataSource: function(dataSource) {\n                this.options.dataSource = dataSource;\n\n                this._dataSource();\n\n                this.list.setDataSource(this.dataSource);\n\n                if (this.options.autoBind) {\n                    dataSource.fetch();\n                }\n            },\n\n            setDependenciesDataSource: function(dependencies) {\n                this.options.dependencies = dependencies;\n\n                this._dependencies();\n\n                if (this.options.autoBind) {\n                    dependencies.fetch();\n                }\n            },\n\n            items: function() {\n                return this.wrapper.children(\".k-task\");\n            },\n\n            _updateAssignments: function(id, resources) {\n                var dataSource = this.assignments.dataSource;\n                var taskId = this.assignments.dataTaskIdField;\n                var resourceId = this.assignments.dataResourceIdField;\n                var hasMatch = false;\n                var assignments = new Query(dataSource.view())\n                    .filter({\n                        field: taskId,\n                        operator: \"eq\",\n                        value: id\n                    }).toArray();\n                var assignment;\n                var resource;\n                var value;\n\n                while (assignments.length) {\n                    assignment = assignments[0];\n\n                    for (var i = 0, length = resources.length; i < length; i++) {\n                        resource = resources[i];\n\n                        if (assignment.get(resourceId) === resource.get(\"id\")) {\n                            value = resources[i].get(\"value\");\n                            this._updateAssignment(assignment, value);\n                            resources.splice(i, 1);\n                            hasMatch = true;\n                            break;\n                        }\n                    }\n\n                    if (!hasMatch) {\n                        this._removeAssignment(assignment);\n                    }\n\n                    hasMatch = false;\n\n                    assignments.shift();\n                }\n\n                for (var j = 0, newLength = resources.length; j < newLength; j++) {\n                    resource = resources[j];\n                    this._createAssignment(resource, id);\n                }\n\n                dataSource.sync();\n            },\n\n            cancelTask: function() {\n                var editor = this._editor;\n                var container = editor.container;\n\n                if (container) {\n                    editor.close();\n                }\n            },\n\n            editTask: function(uid) {\n                var task = typeof uid === \"string\" ? this.dataSource.getByUid(uid) : uid;\n\n                if (!task) {\n                    return;\n                }\n\n                var taskCopy = this.dataSource._createNewModel(task.toJSON());\n                taskCopy.uid = task.uid;\n\n                this.cancelTask();\n\n                this._editTask(taskCopy);\n            },\n\n            _editTask: function(task) {\n                this._editor.editTask(task, this.options.editable.plannedTasks);\n            },\n\n            saveTask: function(task, updateInfo) {\n                var editor = this._editor;\n                var container = editor.container;\n                var editable = editor.editable;\n\n                if (container && editable && editable.end()) {\n                    this._updateTask(task, updateInfo);\n                }\n            },\n\n            _updateTask: function(task, updateInfo) {\n                var that = this;\n                var resourcesField = that.resources.field;\n\n                if (!that.trigger(\"save\", { task: task, values: updateInfo })) {\n                    if (updateInfo) {\n                        that._preventRefresh = true;\n\n                        that.dataSource.update(task, updateInfo);\n\n                        if (updateInfo[resourcesField]) {\n                            that._updateAssignments(task.get(\"id\"), updateInfo[resourcesField]);\n                        }\n                    }\n\n                    that._syncDataSource();\n                } else if (task && task.dirty) {\n                    that.dataSource.cancelChanges(task);\n                    that._preventRefresh = false;\n                    that.refresh();\n                }\n            },\n\n            _updateAssignment: function(assignment, value) {\n                var resourceValueField = this.assignments.dataValueField;\n\n                assignment.set(resourceValueField, value);\n            },\n\n            removeTask: function(uid) {\n                var that = this;\n                var task = typeof uid === \"string\" ? this.dataSource.getByUid(uid) : uid;\n\n                if (!task) {\n                    return;\n                }\n\n                this._taskConfirm(function(cancel) {\n                    if (!cancel) {\n                        that._removeTask(task);\n                    }\n                }, task);\n            },\n\n            _createTask: function(task, index) {\n                if (!this.trigger(\"add\", {\n                    task: task,\n                    dependency: null\n                })) {\n                    var dataSource = this.dataSource;\n\n                    this._preventRefresh = true;\n\n                    if (index === undefined$1) {\n                        dataSource.add(task);\n                    } else {\n                        dataSource.insert(index, task);\n                    }\n\n                    this._scrollToUid = task.uid;\n                    this._syncDataSource();\n                }\n            },\n\n            _createDependency: function(dependency) {\n                if (!this.trigger(\"add\", {\n                    task: null,\n                    dependency: dependency\n                })) {\n                    this._preventDependencyRefresh = true;\n\n                    this.dependencies.add(dependency);\n\n                    this._preventDependencyRefresh = false;\n\n                    this.dependencies.sync();\n                }\n            },\n\n            _createAssignment: function(resource, id) {\n                var assignments = this.assignments;\n                var dataSource = assignments.dataSource;\n                var taskId = assignments.dataTaskIdField;\n                var resourceId = assignments.dataResourceIdField;\n                var resourceValue = assignments.dataValueField;\n                var assignment = dataSource._createNewModel();\n\n                assignment[taskId] = id;\n                assignment[resourceId] = resource.get(\"id\");\n                assignment[resourceValue] = resource.get(\"value\");\n\n                dataSource.add(assignment);\n            },\n\n            removeDependency: function(uid) {\n                var that = this;\n                var dependency = typeof uid === \"string\" ? this.dependencies.getByUid(uid) : uid;\n\n                if (!dependency) {\n                    return;\n                }\n\n                this._dependencyConfirm(function(cancel) {\n                    if (!cancel) {\n                        that._removeDependency(dependency);\n                    }\n                }, dependency);\n            },\n\n            _removeTaskDependencies: function(task, dependencies) {\n                this._preventDependencyRefresh = true;\n\n                for (var i = 0, length = dependencies.length; i < length; i++) {\n                    this.dependencies.remove(dependencies[i]);\n                }\n\n                this._preventDependencyRefresh = false;\n\n                this.dependencies.sync();\n            },\n\n            _removeTaskAssignments: function(task) {\n                var dataSource = this.assignments.dataSource;\n                var assignments = dataSource.view();\n                var filter = {\n                    field: this.assignments.dataTaskIdField,\n                    operator: \"eq\",\n                    value: task.get(\"id\")\n                };\n\n                assignments = new Query(assignments).filter(filter).toArray();\n\n                this._preventRefresh = true;\n\n                for (var i = 0, length = assignments.length; i < length; i++) {\n                    dataSource.remove(assignments[i]);\n                }\n\n                this._preventRefresh = false;\n\n                dataSource.sync();\n            },\n\n            _removeTask: function(task) {\n                var dependencies = this.dependencies.dependencies(task.id);\n\n                if (!this.trigger(\"remove\", {\n                    task: task,\n                    dependencies: dependencies\n                })) {\n                    this._removeTaskDependencies(task, dependencies);\n                    this._removeTaskAssignments(task);\n\n                    this._preventRefresh = true;\n\n                    if (this.dataSource.remove(task)) {\n                        this._syncDataSource();\n                    }\n\n                    this._preventRefresh = false;\n                }\n            },\n\n            _removeDependency: function(dependency) {\n                if (!this.trigger(\"remove\", {\n                    task: null,\n                    dependencies: [dependency]\n                })) {\n                    if (this.dependencies.remove(dependency)) {\n                        this.dependencies.sync();\n                    }\n                }\n            },\n\n            _removeAssignment: function(assignment) {\n                this.assignments.dataSource.remove(assignment);\n            },\n\n            _taskConfirm: function(callback, task) {\n                var messages = this.options.messages;\n\n                this._confirm(callback, {\n                    model: task,\n                    text: messages.deleteTaskConfirmation,\n                    title: messages.deleteTaskWindowTitle\n                });\n            },\n\n            _dependencyConfirm: function(callback, dependency) {\n                var messages = this.options.messages;\n\n                this._confirm(callback, {\n                    model: dependency,\n                    text: messages.deleteDependencyConfirmation,\n                    title: messages.deleteDependencyWindowTitle\n                });\n            },\n\n            _confirm: function(callback, options) {\n                var editable = this.options.editable;\n                var messages;\n                var buttons;\n\n                if (editable === true || editable.confirmation !== false) {\n                    messages = this.options.messages;\n                    buttons = [\n                        { name: \"delete\", text: messages.destroy, className: Gantt.styles.primary, click: function() { callback(); } },\n                        { name: \"cancel\", text: messages.cancel, click: function() { callback(true); } }\n                    ];\n\n                    this.showDialog(extend(true, {}, options, { buttons: buttons }));\n                } else {\n                    callback();\n                }\n            },\n\n            showDialog: function(options) {\n                this._editor.showDialog(options);\n            },\n\n            refresh: function() {\n                if (this._preventRefresh || !this.list || this.list.editor) {\n                    return;\n                }\n\n                this._progress(false);\n\n                var dataSource = this.dataSource;\n                var taskTree = dataSource.taskTree();\n                var scrollToUid = this._scrollToUid;\n                var current;\n                var cachedUid;\n                var cachedIndex = -1;\n                var selected = this.select()[0] ? this.select().data(\"uid\") : this._selected;\n\n                if (this.current) {\n                    cachedUid = this.current.closest(\"tr\").attr(kendo.attr(\"uid\"));\n                    cachedIndex = this.current.index();\n                }\n\n                if (this.trigger(\"dataBinding\")) {\n                    return;\n                }\n\n                if (this.resources.dataSource.data().length !== 0) {\n                    this._assignResources(taskTree);\n                }\n\n                if (this._editor) {\n                    this._editor.close();\n                }\n\n                this.clearSelection();\n                this.list._renderTree(taskTree);\n                this.timeline._render(taskTree);\n                this.timeline._renderDependencies(this.dependencies.view());\n\n                if (scrollToUid) {\n                    this._scrollTo(scrollToUid);\n                    this.select(selector(scrollToUid));\n                }\n\n                if ((scrollToUid || cachedUid) && cachedIndex >= 0) {\n                    current = this.list.element\n                        .find(\"tr\" + selector((scrollToUid || cachedUid)) + \" > td\").eq(cachedIndex);\n\n                    this._current(current);\n                }\n\n                this._scrollToUid = null;\n\n                if (selected) {\n                    this._selected = selected;\n                    this.select(\"[data-uid=\" + selected + \"]\");\n                }\n\n                this.trigger(\"dataBound\");\n            },\n\n            refreshDependencies: function() {\n                if (this._preventDependencyRefresh) {\n                    return;\n                }\n\n                if (this.trigger(\"dataBinding\")) {\n                    return;\n                }\n\n                this.timeline._renderDependencies(this.dependencies.view());\n\n                this.trigger(\"dataBound\");\n            },\n\n            _assignResources: function(taskTree) {\n                var resources = this.resources;\n                var assignments = this.assignments;\n                var groupAssigments = function() {\n                    var data = assignments.dataSource.view();\n                    var group = {\n                        field: assignments.dataTaskIdField\n                    };\n\n                    data = new Query(data).group(group).toArray();\n\n                    return data;\n                };\n                var assigments = groupAssigments();\n                var applyTaskResource = function(task, action) {\n                    var taskId = task.get(\"id\");\n\n                    kendo.setter(resources.field)(task, new ObservableArray([]));\n\n                    for (var i = 0, length = assigments.length; i < length; i++) {\n                        if (assigments[i].value === taskId) {\n                            action(task, assigments[i].items);\n                        }\n                    }\n                };\n                var wrapTask = function(task, items) {\n                    for (var j = 0, length = items.length; j < length; j++) {\n                        var item = items[j];\n                        var resource = resources.dataSource.get(item.get(assignments.dataResourceIdField));\n                        var resourceValue = item.get(assignments.dataValueField);\n                        var resourcedId = item.get(assignments.dataResourceIdField);\n                        var valueFormat = resource.get(resources.dataFormatField) || PERCENTAGE_FORMAT;\n                        var formatedValue = kendo.toString(resourceValue, valueFormat);\n\n                        task[resources.field].push(new ObservableObject({\n                            id: resourcedId,\n                            name: resource.get(resources.dataTextField),\n                            color: resource.get(resources.dataColorField),\n                            value: resourceValue,\n                            formatedValue: formatedValue\n                        }));\n                    }\n                };\n\n                for (var i = 0, length = taskTree.length; i < length; i++) {\n                    applyTaskResource(taskTree[i], wrapTask);\n                }\n            },\n\n            _wrapResourceData: function(id) {\n                var that = this;\n                var result = [];\n                var resource;\n                var resources = this.resources.dataSource.view();\n                var assignments = this.assignments.dataSource.view();\n                var taskAssignments = new Query(assignments).filter({\n                    field: that.assignments.dataTaskIdField,\n                    operator: \"eq\",\n                    value: id\n                }).toArray();\n                var valuePerResource = function(id) {\n                    var resourceValue = null;\n\n                    new Query(taskAssignments).filter({\n                        field: that.assignments.dataResourceIdField,\n                        operator: \"eq\",\n                        value: id\n                    }).select(function(assignment) {\n                        resourceValue += assignment.get(that.assignments.dataValueField);\n                    });\n\n                    return resourceValue;\n                };\n\n                for (var i = 0, length = resources.length; i < length; i++) {\n                    resource = resources[i];\n                    result.push({\n                        id: resource.get(\"id\"),\n                        name: resource.get(that.resources.dataTextField),\n                        format: resource.get(that.resources.dataFormatField) || PERCENTAGE_FORMAT,\n                        value: valuePerResource(resource.id)\n                    });\n                }\n\n                return result;\n            },\n\n            _syncDataSource: function() {\n                this._preventRefresh = false;\n                this._requestStart();\n                this.dataSource.sync();\n            },\n\n            _requestStart: function() {\n                this._progress(true);\n            },\n\n            _error: function() {\n                this._progress(false);\n            },\n\n            _progress: function(toggle) {\n                kendo.ui.progress(this.element, toggle);\n            },\n\n            _resizable: function() {\n                var that = this;\n                var wrapper = this.wrapper;\n                var ganttStyles = Gantt.styles;\n                var contentSelector = DOT + ganttStyles.gridContent;\n                var treeListWrapper = wrapper.find(DOT + ganttStyles.list);\n                var timelineWrapper = wrapper.find(DOT + ganttStyles.timeline);\n                var treeListWidth;\n                var timelineWidth;\n                var timelineScroll;\n\n                this._resizeDraggable = wrapper\n                    .find(DOT + ganttStyles.splitBar)\n                    .height(treeListWrapper.height())\n                    .hover(function() {\n                        $(this).addClass(ganttStyles.splitBarHover);\n                    }, function() {\n                        $(this).removeClass(ganttStyles.splitBarHover);\n                    })\n                    .end()\n                    .kendoResizable({\n                        orientation: \"horizontal\",\n                        handle: DOT + ganttStyles.splitBar,\n                        \"start\": function() {\n                            treeListWidth = treeListWrapper.width();\n                            timelineWidth = timelineWrapper.width();\n                            timelineScroll = kendo.scrollLeft(timelineWrapper.find(contentSelector));\n                        },\n                        \"resize\": function(e) {\n                            var delta = e.x.initialDelta;\n\n                            if (kendo.support.isRtl(wrapper)) {\n                                delta *= -1;\n                            }\n\n                            if (treeListWidth + delta < 0 || timelineWidth - delta < 0) {\n                                return;\n                            }\n\n                            treeListWrapper.width(treeListWidth + delta);\n                            timelineWrapper.width(timelineWidth - delta);\n                            kendo.scrollLeft(timelineWrapper.find(contentSelector), (timelineScroll + delta));\n\n                            that.timeline.view()._renderCurrentTime();\n                        }\n                    }).data(\"kendoResizable\");\n            },\n\n            _scrollable: function() {\n                var that = this;\n                var ganttStyles = Gantt.styles;\n                var contentSelector = DOT + ganttStyles.gridContent;\n                var headerSelector = DOT + ganttStyles.gridHeaderWrap;\n                var timelineHeader = this.timeline.element.find(headerSelector);\n                var timelineContent = this.timeline.element.find(contentSelector);\n                var treeListHeader = this.list.element.find(headerSelector);\n                var treeListContent = this.list.element.find(contentSelector);\n\n                if (mobileOS) {\n                    treeListContent.css(\"overflow-y\", \"auto\");\n                }\n\n                timelineContent.on(\"scroll\", function() {\n                    that.scrollTop = this.scrollTop;\n                    kendo.scrollLeft(timelineHeader, this.scrollLeft);\n                    treeListContent.scrollTop(this.scrollTop);\n                });\n\n                treeListContent\n                    .on(\"scroll\", function() {\n                        kendo.scrollLeft(treeListHeader, this.scrollLeft);\n                    })\n                    .on(\"DOMMouseScroll\" + NS + \" mousewheel\" + NS, function(e) {\n                        var scrollTop = timelineContent.scrollTop();\n                        var delta = kendo.wheelDeltaY(e);\n\n                        if (delta) {\n                            e.preventDefault();\n                            //In Firefox DOMMouseScroll event cannot be canceled\n                            $(e.currentTarget).one(\"wheel\" + NS, false);\n\n                            timelineContent.scrollTop(scrollTop + (-delta));\n                        }\n                    });\n            },\n\n            _navigatable: function() {\n                var that = this;\n                var navigatable = this.options.navigatable;\n                var editable = this.options.editable;\n                var ganttStyles = Gantt.styles;\n                var contentSelector = DOT + ganttStyles.gridContent;\n                var headerSelector = DOT + ganttStyles.gridHeaderWrap;\n                var headerTable = this.list.element.find(headerSelector).find(\"table\");\n                var contentTable = this.list.element.find(contentSelector).find(\"table\");\n                var isRtl = kendo.support.isRtl(this.wrapper);\n                var timelineContent = this.timeline.element.find(DOT + ganttStyles.gridContent);\n                var tables = headerTable.add(contentTable);\n                var attr = selector();\n                var cellIndex;\n                var expandState = {\n                    collapse: false,\n                    expand: true\n                };\n\n                var scroll = function(reverse) {\n                    var width = that.timeline.view()._timeSlots()[0].offsetWidth;\n                    kendo.scrollLeft(timelineContent, kendo.scrollLeft(timelineContent) + (reverse ? -width : width));\n                };\n\n                var scrollVertical = function(reverse) {\n                    var height = that.timeline.view()._rowHeight;\n                    timelineContent.scrollTop(timelineContent.scrollTop() + (reverse ? -height : height));\n                };\n\n                var moveVertical = function(method) {\n                    var parent = that.current.parent(\"tr\" + selector());\n                    var index = that.current.index();\n                    var sibling = parent[method]('tr:visible').first();\n\n                    if (sibling.length !== 0) {\n                        that._current(sibling.children(\"td\").eq(index));\n                        that._scrollTo(that.current);\n                    } else {\n                        if (that.current.is(\"td\") && method == \"prevAll\") {\n                            focusTable(headerTable);\n                            that._current(headerTable.find(\"tr\").last().children(\"th\").eq(index));\n                            that._scrollTo(that.current);\n                        } else if (that.current.is(\"th\") && method == \"nextAll\") {\n                            focusTable(contentTable);\n                            that._current(contentTable.find(\"tr\").first().children(\"td\").eq(index));\n                            that._scrollTo(that.current);\n                        }\n                    }\n                };\n                var moveHorizontal = function(method) {\n                    var subling = that.current[method]();\n\n                    if (subling.length !== 0) {\n                        that._current(subling);\n                        cellIndex = that.current.index();\n                    }\n                };\n                var toggleExpandedState = function(value) {\n                    var model = that.dataItem(that.current);\n\n                    if (model.summary && model.expanded !== value) {\n                        model.set(\"expanded\", value);\n                    }\n                };\n                var deleteAction = function() {\n                    var editable = that.options.editable;\n\n                    if (!editable || editable.destroy === false || that.list.editor) {\n                        return;\n                    }\n\n                    var selectedTask = that.select();\n                    var uid = kendo.attr(\"uid\");\n\n                    if (selectedTask.length) {\n                        that.removeTask(selectedTask.attr(uid));\n                    }\n                };\n\n                $(this.wrapper)\n                    .on(\"mousedown\" + NS, \"tr\" + attr + \", div\" + attr + \":not(\" + DOT + ganttStyles.line + \")\", function(e) {\n                        var currentTarget = $(e.currentTarget);\n                        var isInput = $(e.target).is(\":button,a,:input,a>.k-icon,textarea,span.k-icon:not(.k-i-none),span.k-link,.k-input,.k-multiselect-wrap,.k-input-value-text,.k-input-inner\");\n                        var current;\n\n                        if (e.ctrlKey) {\n                            return;\n                        }\n\n                        if (navigatable) {\n                            if (currentTarget.is(\"tr\")) {\n                                current = $(e.target).closest(\"td\");\n                            } else {\n                                current = that.list\n                                    .content.find(\"tr\" + selector(currentTarget.attr(kendo.attr(\"uid\"))) + \" > td\").first();\n                            }\n\n                            that._current(current);\n                        }\n\n                        if ((navigatable || editable) && !isInput) {\n                            that._focusTimeout = setTimeout(function() {\n                                focusTable(that.list.content.find(\"table\"), true);\n                            }, 2);\n                        }\n                    })\n\n                    .on(\"keydown\" + NS, function(e) {\n                        var key = e.keyCode;\n                        var that = this;\n                        var focusableItems = $(that._getToolbarItems());\n                        var idx = focusableItems.index(that.toolbar.find(DOT + ganttStyles.focused)[0]);\n                        if (idx === -1 && $(e.target).closest(DOT + ganttStyles.toolbar.views).length) {\n                            idx = focusableItems.index(that.toolbar.find(\".k-gantt-views > .k-selected:visible, .k-views-dropdown:visible\")[0]);\n                        }\n                        var itemToFocus = e.shiftKey ? focusableItems[idx - 1] : focusableItems[idx + 1];\n\n                        if (key === keys.F10) {\n                            that.toolbar.find(\".k-button:visible\").first().addClass(ganttStyles.focused).trigger(\"focus\");\n                            e.preventDefault();\n                        } else if (key == keys.TAB && $(e.target).closest(DOT + ganttStyles.toolbar.toolbar).length) {\n                            that.toolbar.find(DOT + ganttStyles.focused).removeClass(ganttStyles.focused).trigger(\"blur\");\n                            if (itemToFocus) {\n                                $(itemToFocus).addClass(ganttStyles.focused).trigger(\"focus\");\n                                e.preventDefault();\n                                return;\n                            }\n                            if (this.list.element.is(\":visible\")) {\n                                this.list.element.find(\"table[role=treegrid]\").trigger(\"focus\");\n                            } else {\n                                this.element.find(DOT + ganttStyles.tasks)[0].focus();\n                            }\n                            e.preventDefault();\n                        }\n\n                    }.bind(this));\n\n                if (navigatable !== true) {\n                    contentTable\n                        .on(\"keydown\" + NS, function(e) {\n                            if (e.keyCode == keys.DELETE) {\n                                deleteAction();\n                            }\n                        });\n\n                    return;\n                }\n\n                tables\n                    .on(\"focus\" + NS, function() {\n                        var selector = this === contentTable.get(0) ? \"td\" : \"th\";\n                        var selection = that.select();\n                        var current = that.current || $((selection.length ? selection : this))\n                            .find(selector).eq((cellIndex || 0));\n\n                        that._current(current);\n                        $(that.toolbar.find(DOT + ganttStyles.focused)).removeClass(ganttStyles.focused);\n                    })\n                    .on(\"blur\" + NS, function() {\n                        that._current();\n\n                        if (this == headerTable) {\n                            $(this).attr(TABINDEX, -1);\n                        }\n                    })\n                    .on(\"keydown\" + NS, function(e) {\n                        var key = e.keyCode;\n                        var isCell;\n\n                        if (!that.current) {\n                            return;\n                        }\n\n                        isCell = that.current.is(\"td\");\n\n                        switch (key) {\n                            case keys.RIGHT:\n                                e.preventDefault();\n                                if (e.altKey) {\n                                    scroll();\n                                } else if (e.ctrlKey) {\n                                    toggleExpandedState(isRtl ? expandState.collapse : expandState.expand);\n                                } else {\n                                    moveHorizontal(isRtl ? \"prev\" : \"next\");\n                                }\n                                break;\n                            case keys.LEFT:\n                                e.preventDefault();\n                                if (e.altKey) {\n                                    scroll(true);\n                                } else if (e.ctrlKey) {\n                                    toggleExpandedState(isRtl ? expandState.expand : expandState.collapse);\n                                } else {\n                                    moveHorizontal(isRtl ? \"next\" : \"prev\");\n                                }\n                                break;\n                            case keys.UP:\n                                e.preventDefault();\n                                if (e.altKey) {\n                                    scrollVertical(true);\n                                } else {\n                                    moveVertical(\"prevAll\");\n                                }\n                                break;\n                            case keys.DOWN:\n                                e.preventDefault();\n                                if (e.altKey) {\n                                    scrollVertical();\n                                } else {\n                                    moveVertical(\"nextAll\");\n                                }\n                                break;\n                            case keys.SPACEBAR:\n                                e.preventDefault();\n                                if (isCell) {\n                                    if (!that.select() || that.current.closest(\"tr\")[0] !== that.select()[0]) {\n                                        that.select(that.current.closest(\"tr\"));\n                                        that.trigger(\"change\");\n                                    }\n                                }\n                                break;\n                            case keys.ENTER:\n                                e.preventDefault();\n                                if (isCell) {\n                                    if (that.options.editable && that.options.editable.update !== false) {\n                                        that.list._startEditHandler(that.current);\n                                        $(this).one(\"keyup\", function(e) {\n                                            /* Stop the event propagation so that the list widget won't close its editor immediately */\n                                            e.stopPropagation();\n                                        });\n                                    }\n                                } else {\n                                    /* Sort */\n                                    that.current\n                                        .children(\"a.k-link\")\n                                        .click();\n                                }\n                                break;\n                            case keys.DELETE:\n                                if (isCell) {\n                                    deleteAction();\n                                }\n                                break;\n                            default:\n                                if (key >= 49 && key <= 57 && e.target.tagName.toLowerCase() !== \"input\") {\n                                   that.view(that.timeline._viewByIndex(key - 49));\n                                }\n                                break;\n                        }\n                    });\n            },\n\n            _getToolbarItems: function() {\n                return this.toolbar.find(\"> .k-button:visible\").toArray().concat(\n                    this.toolbar.find(\".k-views-dropdown:visible\").toArray(),\n                    this.toolbar.find(\".k-gantt-views > .k-selected:visible\").toArray()\n                );\n            },\n\n            _current: function(element) {\n                var ganttStyles = Gantt.styles;\n                var activeElement;\n\n                if (this.current && this.current.length) {\n                    this.current\n                        .removeClass(ganttStyles.focusedCell)\n                        .removeAttr(\"id\");\n                }\n\n                if (element && element.length) {\n                    this.current = element\n                        .addClass(ganttStyles.focusedCell)\n                        .attr(\"id\", ACTIVE_CELL);\n\n                    activeElement = $(kendo._activeElement());\n\n                    if (activeElement.is(\"table\") && this.wrapper.find(activeElement).length > 0) {\n                        activeElement\n                            .removeAttr(ARIA_DESCENDANT)\n                            .attr(ARIA_DESCENDANT, ACTIVE_CELL);\n                    }\n                } else {\n                    this.current = null;\n                }\n            },\n\n            _dataBind: function() {\n                var that = this;\n\n                if (that.options.autoBind) {\n                    this._preventRefresh = true;\n                    this._preventDependencyRefresh = true;\n\n                    var promises = $.map([\n                        this.dataSource,\n                        this.dependencies,\n                        this.resources.dataSource,\n                        this.assignments.dataSource\n                    ],\n                    function(dataSource) {\n                        return dataSource.fetch();\n                    });\n\n                    $.when.apply(null, promises)\n                        .done(function() {\n                            that._preventRefresh = false;\n                            that._preventDependencyRefresh = false;\n                            that.refresh();\n                        });\n                }\n            },\n\n            _resize: function() {\n                this._adjustDimensions();\n                this.timeline.view()._adjustHeight();\n                this.timeline.view()._renderCurrentTime();\n                this.list._adjustHeight();\n            },\n\n            _createPlannedTasksSwitch: function() {\n                var that = this;\n                var switchLabel = that.options.messages.plannedTasks.switchText;\n                var toggeSwitchWrap = $(\"<span class='k-gantt-planned-wrap'><label>\" + switchLabel + \"</label></span>\");\n                var plannedToggle = new kendo.ui.Switch($(\"<input id='planned-switch' class='k-gantt-planned-switch'>\"), {\n                    checked: that.options.showPlannedTasks,\n                    change: that._togglePlannedTasks.bind(that),\n                    messages: {\n                        checked: \"\",\n                        unchecked: \"\"\n                    }\n                });\n\n                toggeSwitchWrap.append(plannedToggle.wrapper);\n\n                that.toggeSwitchWrap = toggeSwitchWrap;\n                that.toggleSwitch = plannedToggle;\n            },\n\n            _togglePlannedTasks: function(e) {\n                var timeline = this.timeline;\n\n                if (!this.trigger(\"togglePlannedTasks\", { showPlannedTasks: !timeline.options.showPlannedTasks })) {\n                    this.wrapper.toggleClass(ganttStyles.plannedTasks);\n                    timeline._setPlanned(!timeline.options.showPlannedTasks);\n                    timeline._render(this.dataSource.taskTree());\n                    timeline._renderDependencies(this.dependencies.view());\n                } else {\n                    e.preventDefault();\n                }\n            }\n        });\n\n        if (kendo.PDFMixin) {\n            kendo.PDFMixin.extend(Gantt.fn);\n\n            Gantt.fn._drawPDF = function() {\n                var ganttStyles = Gantt.styles;\n                var listTableWidth = this.wrapper.find(DOT + ganttStyles.list + \" \" + DOT + ganttStyles.gridContent + \">table\").width();\n                var content = this.wrapper.clone();\n\n                content.find(DOT + ganttStyles.list).css(\"width\", listTableWidth);\n\n                return this._drawPDFShadow({\n                    content: content\n                }, {\n                    avoidLinks: this.options.pdf.avoidLinks\n                });\n            };\n        }\n\n        kendo.ui.plugin(Gantt);\n\n        extend(true, Gantt, { styles: ganttStyles });\n\n    })(window.kendo.jQuery);\n\n}));\n"]}