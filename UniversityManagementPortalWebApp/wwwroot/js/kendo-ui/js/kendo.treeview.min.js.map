{"version":3,"file":"kendo.treeview.min.js","names":["factory","define","amd","$","undefined$1","TreeView","subGroup","nodeContents","nodeIcon","spriteRe","kendo","window","ui","data","encode","htmlEncode","extend","template","isArray","Array","Widget","HierarchicalDataSource","keys","NS","TEMP_NS","SELECT","CHECK","NAVIGATE","CHANGE","ERROR","CHECKED","INDETERMINATE","DRAGSTART","DRAG","DROP","DRAGEND","DATABOUND","ITEMSLOADED","LOADCOMPLETED","REQUESTEND","CLICK","UNDEFINED","KSTATEHOVER","KTREEVIEW","NODE","STRING","ARIA_CHECKED","ARIA_SELECTED","ARIA_DISABLED","ARIA_EXPANDED","ARIA_ACTIVEDESCENDANT","ARIA_BUSY","DISABLED","bindings","text","url","spriteCssClass","imageUrl","isDomElement","o","HTMLElement","nodeType","nodeName","contentChild","filter","node","result","children","length","checkboxes","find","insertAction","indexOffset","nodeData","referenceNode","parentNode","group","closest","parent","is","this","_dataSourceMove","dataSource","model","referenceItem","dataItem","referenceNodeIndex","indexOf","index","_insert","updateNodeHtml","wrapper","toggleButton","checkbox","innerWrapper","hasClass","prependTo","remove","removeAttr","appendTo","append","eq","addClass","container","tmp","toLowerCase","nextSibling","nodeValue","trim","test","className","insertBefore","firstChild","appendChild","moveContents","DataBoundWidget","init","element","options","inferred","list","that","hasDataSource","loadOnDemand","prototype","call","_dataSourceUids","_animation","_accessors","_templates","root","_wrapper","_group","_applyCssClasses","_tabindex","attr","_dataSource","_attachEvents","_dragging","_syncHtmlAndDataSource","autoBind","_progress","fetch","_attemptLoadCompleted","bind","checkChildren","updateIndeterminate","id","_ariaId","format","guid","notify","clickableItems","MOUSEENTER","_clickHandler","_click","on","e","preventDefault","removeClass","_toggleButtonClick","_keydown","_keypress","_focus","_blur","_mousedown","_checkboxChange","_retryRequest","target","focus","i","item","uid","itemCheckbox","view","uidAttr","expandedAttr","checkboxesEnabled","items","expanded","hasChildren","checked","prop","next","animationOptions","animation","hasCollapseAnimation","collapse","expand","reverse","effects","hide","enabled","dragAndDrop","dragging","widget","HierarchicalDragAndDrop","reorderable","$angular","autoScroll","allowedContainers","itemSelector","hintText","_hintText","contains","source","destination","dropHintContainer","itemFromTarget","content","first","last","dropPositionFrom","dropHint","prevAll","dragstart","trigger","sourceNode","drag","originalEvent","dropTarget","pageY","pageX","statusClass","status","setStatusClass","setStatus","drop","navigationTarget","_tempPreventNavigation","destinationNode","valid","setValid","state","dropPosition","position","dragend","triggerDragEnd","current","insertAfter","destroy","ev","off","templates","dragClue","treeview","fieldAccessor","_fieldAccessor","ref","encoded","_checkboxes","setAttributes","attributes","hasOwnProperty","wrapperCssClass","firstLevel","cssClass","groupLength","textClass","isLink","selected","toggleButtonClass","groupAttributes","groupCssClass","r","renderItems","itemContent","itemElement","tag","textAttr","toJSON","loading","messages","retry","requestFailed","setDataSource","one","_bindDataSource","_refreshHandler","refresh","_errorHandler","_error","_loadCompletedHandler","_loadCompleted","_requestEndHandler","_dsRequestEnd","_loadedNodes","setTimeout","type","_loadCompletedFired","concat","nodes","_unbindDataSource","unbind","silentRead","fields","field","create","recursiveRead","_initChildren","events","name","duration","dataTextField","size","textField","fieldName","fieldBindings","count","getter","map","x","d","Math","min","level","setOptions","fn","_trigger","eventName","_setChecked","datasource","value","isFunction","_setCheckedValue","_setIndeterminate","siblings","all","indeterminate","subnodes","_bubbleIndeterminate","skipDownward","_skip","set","isChecked","_preventChange","currentTarget","toggle","browser","support","msie","edge","_clickTarget","_focusable","select","clickTarget","touch","_nextVisible","scrollContainer","containers","offsets","documentElement","document","scrollHeight","clientHeight","push","scrollTop","focusElement","_enabled","skipSelf","wrapperRe","itemRe","_expanded","nextParent","_previousVisible","lastChild","prev","key","keyCode","focused","rtl","isRtl","RIGHT","LEFT","DOWN","UP","HOME","END","ENTER","SPACEBAR","matchToFocus","focusedNode","get","_match","clearTimeout","_matchTimer","_matchNextByText","startIndex","contents","href","wrap","_getSelectedNode","groupElement","css","_nodes","groupData","each","_updateNodeClasses","defaultTemplate","html","renderCheckBox","rounded","replace","textWrap","_processNodes","callback","getByUid","_dataItem","_insertNode","insertCallback","collapsed","childrenData","updatedGroupLength","nodeHtml","_renderItem","angular","elements","_renderGroup","_updateNodes","nodeWrapper","isCollapsed","context","render","setCheckedState","findByUid","toggleClass","end","_toggle","ns","_appendItems","dataItems","viewItems","rootItems","_refreshChildren","child","empty","_refreshRoot","groupHtml","parentElement","_angularItems","action","bubble","_remove","_loaded","load","retryHtml","loaded","enable","arguments","_current","_updateActiveDescendant","direction","height","kendoStop","kendoAnimate","reset","complete","force","showProgress","loadingText","_objectOrSelf","referenceDataItem","destTreeview","destDataSource","loadPromise","Deferred","resolve","promise","_toObservableData","obj","jQuery","ObservableArray","splice","apply","success","loadModel","inserted","done","max","add","noop","keepData","prevSibling","detach","findByText","getAttribute","expandPath","path","nodeIds","slice","nodeElement","then","proceed","shift","_parentIds","parents","unshift","expandTo","Node","len","cssProperties","registerPrefix","plugin"],"sources":["kendo.treeview.js"],"mappings":"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","sourcesContent":["(function (factory) {\n    typeof define === 'function' && define.amd ? define(['kendo.data', 'kendo.treeview.draganddrop', 'kendo.html.input'], factory) :\n    factory();\n})((function () {\n    var __meta__ = {\n        id: \"treeview\",\n        name: \"TreeView\",\n        category: \"web\",\n        description: \"The TreeView widget displays hierarchical data in a traditional tree structure,with support for interactive drag-and-drop operations.\",\n        depends: [ \"data\", \"html.input\" ],\n        features: [{\n            id: \"treeview-dragging\",\n            name: \"Drag & Drop\",\n            description: \"Support for drag & drop\",\n            depends: [ \"treeview.draganddrop\" ]\n        }]\n    };\n\n\n    (function($, undefined$1) {\n        var kendo = window.kendo,\n            ui = kendo.ui,\n            data = kendo.data,\n            encode = kendo.htmlEncode,\n            extend = $.extend,\n            template = kendo.template,\n            isArray = Array.isArray,\n            Widget = ui.Widget,\n            HierarchicalDataSource = data.HierarchicalDataSource,\n            keys = kendo.keys,\n            NS = \".kendoTreeView\",\n            TEMP_NS = \".kendoTreeViewTemp\",\n            SELECT = \"select\",\n            CHECK = \"check\",\n            NAVIGATE = \"navigate\",\n            EXPAND = \"expand\",\n            CHANGE = \"change\",\n            ERROR = \"error\",\n            CHECKED = \"checked\",\n            INDETERMINATE = \"indeterminate\",\n            COLLAPSE = \"collapse\",\n            DRAGSTART = \"dragstart\",\n            DRAG = \"drag\",\n            DROP = \"drop\",\n            DRAGEND = \"dragend\",\n            DATABOUND = \"dataBound\",\n            ITEMSLOADED = \"itemsLoaded\",\n            LOADCOMPLETED = \"loadCompleted\",\n            REQUESTEND = \"requestEnd\",\n            CLICK = \"click\",\n            KENDOKEYDOWN = \"kendoKeydown\",\n            UNDEFINED = \"undefined\",\n            KSTATEHOVER = \"k-hover\",\n            KTREEVIEW = \"k-treeview\",\n            VISIBLE = \":visible\",\n            NODE = \".k-item\",\n            STRING = \"string\",\n            ARIA_CHECKED = \"aria-checked\",\n            ARIA_SELECTED = \"aria-selected\",\n            ARIA_DISABLED = \"aria-disabled\",\n            ARIA_EXPANDED = \"aria-expanded\",\n            ARIA_ACTIVEDESCENDANT = \"aria-activedescendant\",\n            ARIA_BUSY = \"aria-busy\",\n            DISABLED = \"k-disabled\",\n            TreeView,\n            subGroup, nodeContents, nodeIcon,\n            spriteRe,\n            bindings = {\n                text: \"dataTextField\",\n                url: \"dataUrlField\",\n                spriteCssClass: \"dataSpriteCssClassField\",\n                imageUrl: \"dataImageUrlField\"\n            },\n            isJQueryInstance = function(obj) {\n                return (obj instanceof kendo.jQuery) || (window.jQuery && obj instanceof window.jQuery);\n            },\n            isDomElement = function(o) {\n                return (\n                    typeof HTMLElement === \"object\" ? o instanceof HTMLElement : //DOM2\n                    o && typeof o === \"object\" && o.nodeType === 1 && typeof o.nodeName === STRING\n                );\n            };\n\n        function contentChild(filter) {\n            return function(node) {\n                var result = node.children(\".k-animation-container\");\n\n                if (!result.length) {\n                    result = node;\n                }\n\n                return result.children(filter);\n            };\n        }\n\n        function templateNoWith(code) {\n            return kendo.template(code, { useWithBlock: false });\n        }\n\n        subGroup = contentChild(\".k-group\");\n        nodeContents = contentChild(\".k-group,.k-content\");\n        nodeIcon = function(node) {\n            return node.children(\"div\").find(\".k-treeview-toggle > .k-icon\");\n        };\n\n        function checkboxes(node) {\n             return node.find(\".k-checkbox-wrapper:first input[type=checkbox]\");\n        }\n\n        function insertAction(indexOffset) {\n            return function(nodeData, referenceNode) {\n                referenceNode = referenceNode.closest(NODE);\n\n                var group = referenceNode.parent(),\n                    parentNode;\n\n                if (group.parent().is(\"li\")) {\n                    parentNode = group.parent();\n                }\n\n                return this._dataSourceMove(nodeData, group, parentNode, function(dataSource, model) {\n                    var referenceItem = this.dataItem(referenceNode);\n                    var referenceNodeIndex = referenceItem && referenceNode.parent().children().length !== referenceItem.parent().length ? referenceItem.parent().indexOf(referenceItem) : referenceNode.index();\n\n                    return this._insert(dataSource.data(), model, referenceNodeIndex + indexOffset);\n                });\n            };\n        }\n\n        spriteRe = /k-sprite/;\n\n        function moveContents(node, container) {\n            var tmp;\n\n            while (node && node.nodeName.toLowerCase() != \"ul\") {\n                tmp = node;\n                node = node.nextSibling;\n\n                if (tmp.nodeType == 3) {\n                    tmp.nodeValue = kendo.trim(tmp.nodeValue);\n                }\n\n                if (spriteRe.test(tmp.className)) {\n                    container.insertBefore(tmp, container.firstChild);\n                } else {\n                    container.appendChild(tmp);\n                }\n            }\n        }\n\n        function updateNodeHtml(node) {\n            var wrapper = node.children(\"div\"),\n                group = node.children(\"ul\"),\n                toggleButton = wrapper.find(\".k-treeview-toggle > .k-icon\"),\n                checkbox = node.children(\"input[type=checkbox]\"),\n                innerWrapper = wrapper.children(\".k-in\");\n\n            if (node.hasClass(\"k-treeview\")) {\n                return;\n            }\n\n            if (!wrapper.length) {\n                wrapper = $(\"<div />\").prependTo(node);\n            }\n\n            if (!toggleButton.length && group.length) {\n                toggleButton = $(\"<span class='k-treeview-toggle'><span class='k-icon' /></span>\").prependTo(wrapper);\n            } else if (!group.length || !group.children().length) {\n                toggleButton.parent().remove();\n                group.remove();\n                node.removeAttr(ARIA_EXPANDED);\n            }\n\n            if (checkbox.length) {\n                $(\"<span class='k-checkbox-wrapper' />\").appendTo(wrapper).append(checkbox);\n            }\n\n            if (!innerWrapper.length) {\n                innerWrapper = node.children(\"a\").eq(0).addClass(\"k-in k-link\");\n\n                if (!innerWrapper.length) {\n                    innerWrapper = $(\"<span class='k-treeview-leaf k-in' />\");\n                }\n\n                innerWrapper.appendTo(wrapper);\n\n                if (wrapper.length) {\n                    moveContents(wrapper[0].nextSibling, innerWrapper[0]);\n                }\n            }\n        }\n\n        TreeView = kendo.ui.DataBoundWidget.extend({\n            init: function(element, options) {\n                var that = this,\n                    inferred = false,\n                    hasDataSource = options && !!options.dataSource,\n                    list;\n\n                if (isArray(options)) {\n                    options = { dataSource: options };\n                }\n\n                if (options && typeof options.loadOnDemand == UNDEFINED && isArray(options.dataSource)) {\n                    options.loadOnDemand = false;\n                }\n\n                Widget.prototype.init.call(that, element, options);\n\n                element = that.element;\n                options = that.options;\n\n                that._dataSourceUids = {};\n\n                list = (element.is(\"ul\") && element) ||\n                       (element.hasClass(KTREEVIEW) && element.children(\"ul\"));\n\n                inferred = !hasDataSource && list.length;\n\n                if (inferred) {\n                    options.dataSource.list = list;\n                }\n\n                that._animation();\n\n                that._accessors();\n\n                that._templates();\n\n                // render treeview if it's not already rendered\n                if (!element.hasClass(KTREEVIEW)) {\n                    that._wrapper();\n\n                    if (list) {\n                        that.root = element;\n                        that._group(that.wrapper);\n                    }\n                } else {\n                    // otherwise just initialize properties\n                    that.wrapper = element;\n                    that.root = element.children(\"ul\").eq(0);\n                }\n\n                that._applyCssClasses();\n                that._tabindex();\n\n                that.wrapper.attr(\"role\", \"tree\");\n                that.wrapper.find(\">ul\").attr(\"role\", \"none\");\n\n                that._dataSource(inferred);\n\n                that._attachEvents();\n\n                that._dragging();\n\n                if (!inferred) {\n                    if (options.autoBind) {\n                        that._progress(true);\n                        that.dataSource.fetch(this._attemptLoadCompleted.bind(this));\n                    }\n                } else {\n                    that._syncHtmlAndDataSource();\n                }\n\n                if (options.checkboxes && options.checkboxes.checkChildren) {\n                    that.updateIndeterminate();\n                }\n\n                if (that.element[0].id) {\n                    that._ariaId = kendo.format(\"{0}_tv_active\", that.element[0].id);\n                } else {\n                    that._ariaId = kendo.guid() + \"_tv_active\";\n                }\n\n                kendo.notify(that);\n            },\n\n            _attachEvents: function() {\n                var that = this,\n                    clickableItems = \".k-in:not(.k-selected,.k-disabled)\",\n                    MOUSEENTER = \"mouseenter\";\n\n                that._clickHandler = that._click.bind(that);\n\n                that.wrapper\n                    .on(MOUSEENTER + NS, \".k-in.k-selected\", function(e) { e.preventDefault(); })\n                    .on(MOUSEENTER + NS, clickableItems, function() { $(this).addClass(KSTATEHOVER); })\n                    .on(\"mouseleave\" + NS, clickableItems, function() { $(this).removeClass(KSTATEHOVER); })\n                    .on(CLICK + NS, clickableItems, that._clickHandler)\n                    .on(\"dblclick\" + NS, \".k-in:not(.k-disabled)\", that._toggleButtonClick.bind(that))\n                    .on(CLICK + NS, \".k-i-expand,.k-i-collapse\", that._toggleButtonClick.bind(that))\n                    .on(\"keydown\" + NS, that, that._keydown.bind(that))\n                    .on(\"keypress\" + NS, that._keypress.bind(that))\n                    .on(\"focus\" + NS, that._focus.bind(that))\n                    .on(\"blur\" + NS, that._blur.bind(that))\n                    .on(\"mousedown\" + NS, \".k-in,.k-checkbox-wrapper :checkbox,.k-i-expand,.k-i-collapse\", that._mousedown.bind(that))\n                    .on(\"change\" + NS, \".k-checkbox-wrapper :checkbox\", that._checkboxChange.bind(that))\n                    .on(\"click\" + NS, \".k-request-retry\", that._retryRequest.bind(that))\n                    .on(\"click\" + NS, \".k-link.k-disabled\", function(e) { e.preventDefault(); })\n                    .on(\"click\" + NS, function(e) {\n                        var target = $(e.target);\n\n                        if (!target.is(\":kendoFocusable\") && !target.find(\"input,select,textarea,button,object\").is(\":kendoFocusable\")) {\n                            that.focus();\n                        }\n                    });\n            },\n\n            _syncHtmlAndDataSource: function(root, dataSource) {\n                root = root || this.root;\n                dataSource = dataSource || this.dataSource;\n                var data = dataSource.view(),\n                    uidAttr = kendo.attr(\"uid\"),\n                    expandedAttr = kendo.attr(\"expanded\"),\n                    checkboxesEnabled = this.options.checkboxes,\n                    items = root.children(\"li\"),\n                    i,\n                    item,\n                    dataItem,\n                    uid,\n                    itemCheckbox;\n\n                for (i = 0; i < items.length; i++) {\n                    dataItem = data[i];\n                    uid = dataItem.uid;\n                    item = items.eq(i);\n                    item.attr(\"role\", \"treeitem\")\n                        .attr(uidAttr, uid)\n                        .attr(ARIA_SELECTED, item.hasClass(\"k-selected\"));\n\n                    dataItem.expanded = item.attr(expandedAttr) === \"true\";\n\n                    if (dataItem.hasChildren) {\n                        item.attr(ARIA_EXPANDED, dataItem.expanded);\n                    }\n\n                    if (checkboxesEnabled) {\n                        itemCheckbox = checkboxes(item);\n                        dataItem.checked = itemCheckbox.prop(CHECKED);\n                        itemCheckbox.attr(\"id\", \"_\" + uid);\n                        itemCheckbox.next(\".k-checkbox-label\").attr(\"for\", \"_\" + uid);\n\n                        item.attr(ARIA_CHECKED, item.checked);\n                    }\n\n                    this._syncHtmlAndDataSource(item.children(\"ul\"), dataItem.children);\n                }\n            },\n\n            _animation: function() {\n                var options = this.options,\n                    animationOptions = options.animation,\n                    hasCollapseAnimation = animationOptions.collapse && \"effects\" in animationOptions.collapse,\n                    collapse = extend({}, animationOptions.expand, animationOptions.collapse);\n\n                if (!hasCollapseAnimation) {\n                    collapse = extend(collapse, { reverse: true });\n                }\n\n                if (animationOptions === false) {\n                    animationOptions = {\n                        expand: { effects: {} },\n                        collapse: { hide: true, effects: {} }\n                    };\n                }\n\n                animationOptions.collapse = extend(collapse, { hide: true });\n                options.animation = animationOptions;\n            },\n\n            _dragging: function() {\n                var enabled = this.options.dragAndDrop;\n                var dragging = this.dragging;\n\n                if (enabled && !dragging) {\n                    var widget = this;\n\n                    this.dragging = new ui.HierarchicalDragAndDrop(this.element, {\n                        reorderable: true,\n                        $angular: this.options.$angular,\n                        autoScroll: this.options.autoScroll,\n                        filter: \"div:not(.k-disabled) .k-in\",\n                        allowedContainers: \".k-treeview\",\n                        itemSelector: \".k-treeview .k-item\",\n                        hintText: this._hintText.bind(this),\n                        contains: function(source, destination) {\n                            return $.contains(source, destination);\n                        },\n                        dropHintContainer: function(item) {\n                            return item;\n                        },\n                        itemFromTarget: function(target) {\n                            var item = target.closest(\".k-treeview-top,.k-treeview-mid,.k-treeview-bot\");\n                            return {\n                                item: item,\n                                content: target.closest(\".k-in\"),\n                                first: item.hasClass(\"k-treeview-top\"),\n                                last: item.hasClass(\"k-treeview-bot\")\n                            };\n                        },\n                        dropPositionFrom: function(dropHint) {\n                            return dropHint.prevAll(\".k-in\").length > 0 ? \"after\" : \"before\";\n                        },\n                        dragstart: function(source) {\n                            widget.wrapper.attr(kendo.attr(\"scrollable\"), false);\n                            return widget.trigger(DRAGSTART, { sourceNode: source[0] });\n                        },\n                        drag: function(options) {\n                            widget.trigger(DRAG, {\n                                originalEvent: options.originalEvent,\n                                sourceNode: options.source[0],\n                                dropTarget: options.target[0],\n                                pageY: options.pageY,\n                                pageX: options.pageX,\n                                statusClass: options.status,\n                                setStatusClass: options.setStatus\n                            });\n                        },\n                        drop: function(options) {\n                            var dropTarget = $(options.dropTarget);\n                            var navigationTarget = dropTarget.closest(\"a\");\n\n                            if (navigationTarget && navigationTarget.attr(\"href\")) {\n                                widget._tempPreventNavigation(navigationTarget);\n                            }\n\n                            return widget.trigger(DROP, {\n                                originalEvent: options.originalEvent,\n                                sourceNode: options.source,\n                                destinationNode: options.destination,\n                                valid: options.valid,\n                                setValid: function(state) {\n                                    this.valid = state;\n                                    options.setValid(state);\n                                },\n                                dropTarget: options.dropTarget,\n                                dropPosition: options.position\n                            });\n                        },\n                        dragend: function(options) {\n                            var source = options.source;\n                            var destination = options.destination;\n                            var position = options.position;\n\n                            widget.wrapper.removeAttr(kendo.attr(\"scrollable\"));\n\n                            function triggerDragEnd(source) {\n                                if (widget.options.checkboxes && widget.options.checkboxes.checkChildren) {\n                                    widget.updateIndeterminate();\n                                }\n\n                                widget.current(source);\n                                widget.element.focus();\n\n                                widget.trigger(DRAGEND, {\n                                    originalEvent: options.originalEvent,\n                                    sourceNode: source && source[0],\n                                    destinationNode: destination[0],\n                                    dropPosition: position\n                                });\n                            }\n\n                            // perform reorder / move\n                            // different handling is necessary because append might be async in remote bound tree\n                            if (position == \"over\") {\n                                widget.append(source, destination, triggerDragEnd);\n                            } else {\n                                if (position == \"before\") {\n                                    source = widget.insertBefore(source, destination);\n                                } else if (position == \"after\") {\n                                    source = widget.insertAfter(source, destination);\n                                }\n\n                                triggerDragEnd(source);\n                            }\n                        }\n                    });\n                } else if (!enabled && dragging) {\n                    dragging.destroy();\n                    this.dragging = null;\n                }\n            },\n\n            _tempPreventNavigation: function(node) {\n                node.on(CLICK + NS + TEMP_NS, function(ev) {\n                    ev.preventDefault();\n                    node.off(CLICK + NS + TEMP_NS);\n                });\n            },\n\n            _hintText: function(node) {\n                return this.templates.dragClue({\n                    item: this.dataItem(node),\n                    treeview: this.options\n                });\n            },\n\n            _templates: function() {\n                var that = this,\n                    options = that.options,\n                    fieldAccessor = that._fieldAccessor.bind(that);\n\n                if (options.template && typeof options.template == STRING) {\n                    options.template = template(options.template);\n                } else if (!options.template) {\n                    options.template = function (ref) {\n                        var item = ref.item;\n\n                        var text = fieldAccessor(\"text\")(item);\n\n                        if (typeof item.encoded != 'undefined' && item.encoded === false) {\n                            return (\"<span class='k-treeview-leaf-text'>\" + text + \"</span>\");\n                        }\n\n                        return (\"<span class='k-treeview-leaf-text'>\" + (encode(text)) + \"</span>\");\n                    };\n                }\n\n                that._checkboxes();\n\n                that.templates = {\n                    setAttributes: function(item) {\n                        var result = \"\";\n                        var attributes = item.attr || {};\n\n                        for (var attr in attributes) {\n                            if (attributes.hasOwnProperty(attr) && attr !== \"class\") {\n                                result += attr + \"=\\\"\" + attributes[attr] + \"\\\" \";\n                            }\n                        }\n\n                        return result;\n                    },\n                    wrapperCssClass: function(group, item) {\n                        var result = \"k-item k-treeview-item\",\n                            index = item.index;\n\n                        if (group.firstLevel && index === 0) {\n                            result += \" k-first\";\n                        }\n\n                        if (index == group.length - 1) {\n                            result += \" k-last\";\n                        }\n\n                        return result;\n                    },\n                    cssClass: function(group, item) {\n                        var result = \"\",\n                            index = item.index,\n                            groupLength = group.length - 1;\n\n                        if (group.firstLevel && index === 0) {\n                            result += \"k-treeview-top \";\n                        }\n\n                        if (index === 0 && index != groupLength) {\n                            result += \"k-treeview-top\";\n                        } else if (index == groupLength) {\n                            result += \"k-treeview-bot\";\n                        } else {\n                            result += \"k-treeview-mid\";\n                        }\n\n                        return result;\n                    },\n                    textClass: function(item, isLink) {\n                        var result = \"k-treeview-leaf k-in\";\n\n                        if (isLink) {\n                            result += \" k-link\";\n                        }\n\n                        if (item.enabled === false) {\n                            result += \" k-disabled\";\n                        }\n\n                        if (item.selected === true) {\n                            result += \" k-selected\";\n                        }\n\n                        return result;\n                    },\n                    toggleButtonClass: function(item) {\n                        var result = \"k-icon\";\n\n                        if (item.expanded !== true) {\n                            result += \" k-i-expand\";\n                        } else {\n                            result += \" k-i-collapse\";\n                        }\n\n                        return result;\n                    },\n                    groupAttributes: function(group) {\n                        var attributes = \"\";\n\n                        if (!group.firstLevel) {\n                            attributes = \"role='group'\";\n                        }\n\n                        return attributes + (group.expanded !== true ? \" style='display:none'\" : \"\");\n                    },\n                    groupCssClass: function(group) {\n                        var cssClass = \"k-group k-treeview-group\";\n\n                        if (group.firstLevel) {\n                            cssClass += \" k-treeview-lines\";\n                        }\n\n                        return cssClass;\n                    },\n                    dragClue: function (data) { return data.treeview.template(data); },\n                    group: function (data) { return \"<ul class='\" + (data.r.groupCssClass(data.group)) + \"'\" + (data.r.groupAttributes(data.group)) + \">\" +\n                        data.renderItems(data) +\n                    \"</ul>\"; },\n                    itemContent: function (data) {\n                        var imageUrl = fieldAccessor(\"imageUrl\")(data.item);\n                        var spriteCssClass = fieldAccessor(\"spriteCssClass\")(data.item);\n                        var result = \"\";\n\n                        if (imageUrl) {\n                            result += \"<img class='k-image' alt='' src='\" + imageUrl + \"'>\";\n                        }\n\n                        if (spriteCssClass) {\n                            result += \"<span class='k-sprite \" + spriteCssClass + \"'></span>\";\n                        }\n\n                        result += data.treeview.template(data);\n\n                        return result;\n                    },\n                    itemElement: function (data) {\n                        var item = data.item,\n                            r = data.r;\n                        var url = fieldAccessor(\"url\")(item),\n                            tag = url ? 'a' : 'span',\n                            textAttr = url ? ' href=\"' + url + '\"' : '';\n                        var result = \"<div class=\\\"\" + (r.cssClass(data.group, item)) + \"\\\">\";\n\n                        if (item.hasChildren) {\n                            result += \"<span class='k-treeview-toggle'>\" +\n                                        \"<span class='\" + (r.toggleButtonClass(item)) + \"'></span>\" +\n                                      \"</span>\";\n                        }\n\n                        if (data.treeview.checkboxes) {\n                            result += \"<span class='k-checkbox-wrapper' role='presentation'>\" +\n                                        data.treeview.checkboxes.template(data) +\n                                      \"</span>\";\n                        }\n\n                        result += \"<\" + tag + \" class='\" + (r.textClass(item, !!url)) + \"'\" + textAttr + \">\" +\n                                     r.itemContent(data) +\n                                  \"</\" + tag + \">\";\n\n                        result += \"</div>\";\n\n                        return result;\n                    },\n                    item: function (data) {\n                        var item = data.item,\n                            r = data.r;\n                        var result =\n                            \"<li role='treeitem' class=\\\"\" + (r.wrapperCssClass(data.group, item)) + \"\\\"\" +\n                            (kendo.attr(\"uid\")) + \"=\\\"\" + (item.uid) + \"\\\"\" +\n                            (r.setAttributes(item.toJSON ? item.toJSON() : item)) + \" \";\n\n                        if (data.treeview.checkboxes) {\n                            result +=\n                                \"aria-checked=\\\"\" + (item.checked ? 'true' : 'false') + \"\\\" \";\n                        }\n\n                        result +=\n                            \"aria-selected=\\\"\" + (item.selected ? 'true' : 'false') + \"\\\" \" +\n                                \"\" + (item.enabled === false ? 'aria-disabled=\"true\"' : '');\n\n                        if (item.hasChildren) {\n                            result += \"aria-expanded=\\\"\" + (item.expanded ? \"true\" : \"false\") + \"\\\" \";\n                        }\n\n                        result +=\n                            \"data-expanded=\\\"\" + (item.expanded ? \"true\" : \"false\") + \"\\\" >\" +\n                            r.itemElement(data) +\n                            \"</li>\";\n\n                        return result;\n                    },\n                    loading: function (ref) {\n                            var messages = ref.messages;\n\n                            return (\"<div class='k-icon k-i-loading'></div> \" + (encode(messages.loading)));\n                },\n                    retry: function (ref) {\n                            var messages = ref.messages;\n\n                            return (encode(messages.requestFailed)) + \" \" +\n                        \"<button class='k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-request-retry'><span class='k-button-text'>\" + (encode(messages.retry)) + \"</span></button>\";\n                }\n                };\n            },\n\n            items: function() {\n                return this.element.find(\".k-item > div:first-child\");\n            },\n\n            setDataSource: function(dataSource) {\n                var options = this.options;\n\n                options.dataSource = dataSource;\n\n                this._dataSourceUids = {};\n\n                this._dataSource();\n\n                if (options.checkboxes && options.checkboxes.checkChildren) {\n                    this.dataSource.one(\"change\", this.updateIndeterminate.bind(this, null));\n                }\n\n                if (this.options.autoBind) {\n                    this.dataSource.fetch(this._attemptLoadCompleted.bind(this));\n                }\n            },\n\n            _bindDataSource: function() {\n                var that = this;\n\n                that._refreshHandler = that.refresh.bind(that);\n                that._errorHandler = that._error.bind(that);\n                that._loadCompletedHandler = that._loadCompleted.bind(that);\n                that._requestEndHandler = that._dsRequestEnd.bind(that);\n                that._loadedNodes = [];\n\n                that.dataSource.bind(CHANGE, that._refreshHandler);\n                that.dataSource.bind(ERROR, that._errorHandler);\n\n                that.dataSource.bind(ITEMSLOADED, that._loadCompletedHandler);\n                that.dataSource.bind(REQUESTEND, that._requestEndHandler);\n            },\n\n            _dsRequestEnd: function(e) {\n                var that = this;\n\n                setTimeout(function() {\n                    if (e.type === \"read\" && !that._loadCompletedFired) {\n                        that._attemptLoadCompleted();\n                    }\n                });\n            },\n\n            _loadCompleted: function(e) {\n                var that = this;\n                that._loadedNodes = that._loadedNodes.concat(e.nodes);\n\n                if (!that.dataSource.loading() && that.options.loadOnDemand === false) {\n                    that.trigger(LOADCOMPLETED, { nodes: that._loadedNodes });\n                    that._loadedNodes = [];\n                }\n            },\n\n            _attemptLoadCompleted: function() { // If there are no items to be loaded ensure event is triggered on dataBound\n                var that = this,\n                    items = that.dataSource.view(),\n                    current, i;\n\n                if (that.options.loadOnDemand === false) {\n                    for (i = 0; i < items.length; i++) {\n                        current = items[i];\n                        if (current.hasChildren && (!current.children || !current.children.data() || current.children.data().length === 0)) {\n                            return;\n                        }\n                    }\n\n                    that._loadCompletedFired = true;\n                    that.trigger(LOADCOMPLETED, { nodes: [] });\n                }\n            },\n\n            _unbindDataSource: function() {\n                var dataSource = this.dataSource;\n\n                if (dataSource) {\n                    dataSource.unbind(CHANGE, this._refreshHandler);\n                    dataSource.unbind(ERROR, this._errorHandler);\n                    dataSource.unbind(ITEMSLOADED, this._loadCompletedHandler);\n                    dataSource.unbind(REQUESTEND, this._requestEndHandler);\n                }\n            },\n\n            _dataSource: function(silentRead) {\n                var that = this,\n                    options = that.options,\n                    dataSource = options.dataSource;\n\n                function recursiveRead(data) {\n                    for (var i = 0; i < data.length; i++) {\n                        data[i]._initChildren();\n\n                        data[i].children.fetch();\n\n                        recursiveRead(data[i].children.view());\n                    }\n                }\n\n                dataSource = isArray(dataSource) ? { data: dataSource } : dataSource;\n\n                that._unbindDataSource();\n\n                if (!dataSource.fields) {\n                    dataSource.fields = [\n                        { field: \"text\" },\n                        { field: \"url\" },\n                        { field: \"spriteCssClass\" },\n                        { field: \"imageUrl\" }\n                    ];\n                }\n\n                that.dataSource = dataSource = HierarchicalDataSource.create(dataSource);\n\n                if (silentRead) {\n                    dataSource.fetch();\n\n                    recursiveRead(dataSource.view());\n                }\n\n                that._bindDataSource();\n            },\n\n            events: [\n                DRAGSTART,\n                DRAG,\n                DROP,\n                DRAGEND,\n\n                DATABOUND,\n                LOADCOMPLETED,\n\n                EXPAND,\n                COLLAPSE,\n                SELECT,\n                CHANGE,\n                NAVIGATE,\n                CHECK,\n                KENDOKEYDOWN\n            ],\n\n            options: {\n                name: \"TreeView\",\n                dataSource: {},\n                animation: {\n                    expand: {\n                        effects: \"expand:vertical\",\n                        duration: 200\n                    }, collapse: {\n                        duration: 100\n                    }\n                },\n                messages: {\n                    loading: \"Loading...\",\n                    requestFailed: \"Request failed.\",\n                    retry: \"Retry\"\n                },\n                dragAndDrop: false,\n                checkboxes: false,\n                autoBind: true,\n                autoScroll: false,\n                loadOnDemand: true,\n                template: \"\",\n                dataTextField: null,\n                size: \"medium\"\n            },\n\n            _accessors: function() {\n                var that = this,\n                    options = that.options,\n                    i, field, textField,\n                    element = that.element;\n\n                for (i in bindings) {\n                    field = options[bindings[i]];\n                    textField = element.attr(kendo.attr(i + \"-field\"));\n\n                    if (!field && textField) {\n                        field = textField;\n                    }\n\n                    if (!field) {\n                        field = i;\n                    }\n\n                    if (!isArray(field)) {\n                        field = [field];\n                    }\n\n                    options[bindings[i]] = field;\n                }\n            },\n\n            // generates accessor function for a given field name, honoring the data*Field arrays\n            _fieldAccessor: function(fieldName) {\n                var fieldBindings = this.options[bindings[fieldName]],\n                    count = fieldBindings.length;\n\n                return (function(item) {\n                    if (count === 0) {\n                        return kendo.getter(fieldName)(item);\n                    }\n\n                    return $.map(fieldBindings, function(x) {\n                        return function(d) { return kendo.getter(x)(d); };\n                    })[Math.min(item.level(), count - 1)](item);\n                });\n            },\n\n            setOptions: function(options) {\n                Widget.fn.setOptions.call(this, options);\n\n                this._animation();\n\n                this._dragging();\n\n                this._accessors();\n\n                this._templates();\n            },\n\n            _trigger: function(eventName, node) {\n                return this.trigger(eventName, {\n                    node: node.closest(NODE)[0]\n                });\n            },\n\n            _setChecked: function(datasource, value) {\n                if (!datasource || !kendo.isFunction(datasource.view)) {\n                    return;\n                }\n\n                for (var i = 0, nodes = datasource.view(); i < nodes.length; i++) {\n                    if (nodes[i].enabled !== false) {\n                        this._setCheckedValue(nodes[i], value);\n                    }\n\n                    if (nodes[i].children) {\n                        this._setChecked(nodes[i].children, value);\n                    }\n                }\n            },\n\n            _setCheckedValue: function(node, value) {\n                node[CHECKED] = value;\n            },\n\n            _setIndeterminate: function(node) {\n                var group = subGroup(node),\n                    siblings, length,\n                    all = true,\n                    i;\n\n                if (!group.length) {\n                    return;\n                }\n\n                siblings = checkboxes(group.children());\n\n                length = siblings.length;\n\n                if (!length) {\n                    return;\n                } else if (length > 1) {\n                    for (i = 1; i < length; i++) {\n                        if (siblings[i].checked != siblings[i - 1].checked ||\n                            siblings[i].indeterminate || siblings[i - 1].indeterminate) {\n                            all = false;\n                            break;\n                        }\n                    }\n                } else {\n                    all = !siblings[0].indeterminate;\n                }\n\n                node.attr(ARIA_CHECKED, all ? siblings[0].checked : \"mixed\");\n\n                return checkboxes(node)\n                    .data(INDETERMINATE, !all)\n                    .prop(INDETERMINATE, !all)\n                    .prop(CHECKED, all && siblings[0].checked);\n            },\n\n            updateIndeterminate: function(node) {\n                // top-down update of inital indeterminate state for all nodes\n                node = node || this.wrapper;\n\n                var subnodes = subGroup(node).children();\n                var i;\n                var checkbox;\n                var dataItem;\n\n                if (subnodes.length) {\n                    for (i = 0; i < subnodes.length; i++) {\n                        this.updateIndeterminate(subnodes.eq(i));\n                    }\n\n                    if (node.is(\".k-treeview\")) {\n                        return;\n                    }\n\n                    checkbox = this._setIndeterminate(node);\n\n                    dataItem = this.dataItem(node);\n\n                    if (checkbox && checkbox.prop(CHECKED)) {\n                        dataItem.checked = true;\n                    } else {\n                        if (dataItem) {\n                            delete dataItem.checked;\n                        }\n                    }\n                }\n            },\n\n            _bubbleIndeterminate: function(node, skipDownward) {\n                // bottom-up setting of indeterminate state of parent nodes\n                if (!node.length) {\n                    return;\n                }\n\n                if (!skipDownward) {\n                    //update the indeterminate state of the node itself\n                    this.updateIndeterminate(node);\n                }\n\n                var parentNode = this.parent(node),\n                    checkbox;\n\n                if (parentNode.length) {\n                    this._setIndeterminate(parentNode);\n\n                    checkbox = parentNode.children(\"div\").find(\".k-checkbox-wrapper input[type=checkbox]\");\n\n                    this._skip = true;\n                    if (checkbox.prop(INDETERMINATE) === false) {\n                        this.dataItem(parentNode).set(CHECKED, checkbox.prop(CHECKED));\n                    } else {\n                        // delete this.dataItem(parentNode).checked;\n                        this.dataItem(parentNode).set(CHECKED, false);\n                    }\n\n                    this._skip = false;\n\n                    this._bubbleIndeterminate(parentNode, true);\n                }\n            },\n\n            _checkboxChange: function(e) {\n                var that = this;\n                var checkbox = $(e.target);\n                var isChecked = checkbox.prop(CHECKED);\n                var node = checkbox.closest(NODE);\n                var dataItem = this.dataItem(node);\n\n                if (this._preventChange) {\n                    return;\n                }\n\n                if (dataItem.checked != isChecked) {\n                    dataItem.set(CHECKED, isChecked);\n                    node.attr(ARIA_CHECKED, isChecked);\n                    this._trigger(CHECK, node);\n                }\n\n                if (checkbox.is(\":focus\")) {\n                    that._trigger(NAVIGATE, node);\n                    that.focus();\n                }\n            },\n\n            _toggleButtonClick: function(e) {\n                var node = $(e.currentTarget).closest(NODE);\n\n                if (node.is(\"[aria-disabled='true']\")) {\n                    return;\n                }\n\n                this.toggle(node);\n            },\n\n            _mousedown: function(e) {\n                var that = this;\n                var currentTarget = $(e.currentTarget);\n                var node = $(e.currentTarget).closest(NODE);\n                var browser = kendo.support.browser;\n\n                if (node.is(\"[aria-disabled='true']\")) {\n                    return;\n                }\n\n                //IE does not trigger change for indeterminate checkboxes\n                if ((browser.msie || browser.edge) && currentTarget.is(\":checkbox\")) {\n                    if (currentTarget.prop(INDETERMINATE)) {\n                        that._preventChange = false;\n\n                        currentTarget.prop(CHECKED, !currentTarget.prop(CHECKED));\n                        currentTarget.trigger(CHANGE);\n\n                        currentTarget.on(CLICK + NS, function(e) {\n                            e.preventDefault();\n                        });\n\n                        that._preventChange = true;\n                    } else {\n                        currentTarget.off(CLICK + NS);\n                        that._preventChange = false;\n                    }\n                }\n\n                that._clickTarget = node;\n                that.current(node);\n            },\n\n            _focusable: function(node) {\n                return node && node.length && node.is(\":visible\") && !node.find(\".k-in\").first().hasClass(DISABLED);\n            },\n\n            _focus: function() {\n                var current = this.select(),\n                    clickTarget = this._clickTarget;\n\n                // suppress initial focus state on touch devices (until keyboard is used)\n                if (kendo.support.touch) {\n                    return;\n                }\n\n                if (clickTarget && clickTarget.length) {\n                    current = clickTarget;\n                }\n\n                if (!this._focusable(current)) {\n                    current = this.current();\n                }\n\n                if (!this._focusable(current)) {\n                    current = this._nextVisible($());\n                }\n\n                this.current(current);\n            },\n\n            focus: function() {\n                var wrapper = this.wrapper,\n                    scrollContainer = wrapper[0],\n                    containers = [],\n                    offsets = [],\n                    documentElement = document.documentElement,\n                    i;\n\n                do {\n                    scrollContainer = scrollContainer.parentNode;\n\n                    if (scrollContainer.scrollHeight > scrollContainer.clientHeight) {\n                        containers.push(scrollContainer);\n                        offsets.push(scrollContainer.scrollTop);\n                    }\n                } while (scrollContainer != documentElement);\n\n                kendo.focusElement(wrapper);\n\n                for (i = 0; i < containers.length; i++) {\n                    containers[i].scrollTop = offsets[i];\n                }\n            },\n\n            _blur: function() {\n                this.current().find(\".k-in\").first().removeClass(\"k-focus\");\n            },\n\n            _enabled: function(node) {\n                return !node.children(\"div\").children(\".k-in\").hasClass(DISABLED);\n            },\n\n            parent: function(node) {\n                var wrapperRe = /\\bk-treeview\\b(?!-)/,\n                    itemRe = /\\bk-item\\b/,\n                    result,\n                    skipSelf;\n\n                if (typeof node == STRING) {\n                    node = this.element.find(node);\n                }\n\n                if (!isDomElement(node)) {\n                    node = node[0];\n                }\n\n                skipSelf = itemRe.test(node.className);\n\n                do {\n                    node = node.parentNode;\n\n                    if (itemRe.test(node.className)) {\n                        if (skipSelf) {\n                            result = node;\n                        } else {\n                            skipSelf = true;\n                        }\n                    }\n                } while (!wrapperRe.test(node.className) && !result);\n\n                return $(result);\n            },\n\n            _nextVisible: function(node) {\n                var that = this,\n                    expanded = that._expanded(node),\n                    result;\n\n                function nextParent(node) {\n                    while (node.length && !node.next().length) {\n                        node = that.parent(node);\n                    }\n\n                    if (node.next().length) {\n                        return node.next();\n                    } else {\n                        return node;\n                    }\n                }\n\n                if (!node.length || !node.is(\":visible\")) {\n                    result = that.root.children().eq(0);\n                } else if (expanded) {\n                    result = subGroup(node).children().first();\n\n                    // expanded node with no children\n                    if (!result.length) {\n                        result = nextParent(node);\n                    }\n                } else {\n                    result = nextParent(node);\n                }\n\n                return result;\n            },\n\n            _previousVisible: function(node) {\n                var that = this,\n                    lastChild,\n                    result;\n\n                if (!node.length || node.prev().length) {\n                    if (node.length) {\n                        result = node.prev();\n                    } else {\n                        result = that.root.children().last();\n                    }\n\n                    while (that._expanded(result)) {\n                        lastChild = subGroup(result).children().last();\n\n                        if (!lastChild.length) {\n                            break;\n                        }\n\n                        result = lastChild;\n                    }\n                } else {\n                    result = that.parent(node) || node;\n                }\n\n                return result;\n            },\n\n            _keydown: function(e) {\n                var that = this,\n                    key = e.keyCode,\n                    target,\n                    focused = that.current(),\n                    expanded = that._expanded(focused),\n                    checkbox = focused.find(\".k-checkbox-wrapper\").first().find(\":checkbox\"),\n                    rtl = kendo.support.isRtl(that.element);\n\n                if (e.target != e.currentTarget) {\n                    return;\n                }\n\n                if ((!rtl && key == keys.RIGHT) || (rtl && key == keys.LEFT)) {\n                    if (expanded) {\n                        target = that._nextVisible(focused);\n                    } else if (!focused.find(\".k-in\").first().hasClass(DISABLED)) {\n                        that.expand(focused);\n                    }\n                } else if ((!rtl && key == keys.LEFT) || (rtl && key == keys.RIGHT)) {\n                    if (expanded && !focused.find(\".k-in\").first().hasClass(DISABLED)) {\n                        that.collapse(focused);\n                    } else {\n                        target = that.parent(focused);\n\n                        if (!that._enabled(target)) {\n                            target = undefined$1;\n                        }\n                    }\n                } else if (key == keys.DOWN) {\n                    target = that._nextVisible(focused);\n                } else if (key == keys.UP) {\n                    target = that._previousVisible(focused);\n                } else if (key == keys.HOME) {\n                    target = that._nextVisible($());\n                } else if (key == keys.END) {\n                    target = that._previousVisible($());\n                } else if (key == keys.ENTER && !focused.find(\".k-in\").first().hasClass(DISABLED)) {\n                    if (!focused.find(\".k-in\").first().hasClass(\"k-selected\")) {\n                        if (!that._trigger(SELECT, focused)) {\n                            that.select(focused);\n                        }\n                    }\n                } else if (key == keys.SPACEBAR && checkbox.length) {\n                    if (!focused.find(\".k-in\").first().hasClass(DISABLED)) {\n                        checkbox.prop(CHECKED, !checkbox.prop(CHECKED))\n                            .data(INDETERMINATE, false)\n                            .prop(INDETERMINATE, false);\n\n                        that._checkboxChange({ target: checkbox });\n                    }\n                    target = focused;\n                }\n\n                if (target) {\n                    e.preventDefault();\n\n                    if (focused[0] != target[0]) {\n                        that._trigger(NAVIGATE, target);\n                        that.current(target);\n                    }\n                }\n            },\n\n            _keypress: function(e) {\n                var that = this;\n                var delay = 300;\n                var focusedNode = that.current().get(0);\n                var matchToFocus;\n                var key = e.key;\n                var isPrintable = key.length === 1;\n\n                if (!isPrintable) {\n                    return;\n                }\n\n                if (!that._match) {\n                    that._match = \"\";\n                }\n\n                that._match += key;\n                clearTimeout(that._matchTimer);\n                that._matchTimer = setTimeout(function() {\n                    that._match = \"\";\n                }, delay);\n\n                matchToFocus = focusedNode &&\n                                that._matchNextByText(\n                                    Array.prototype.indexOf.call(that.element.find(\".k-item\"),\n                                    focusedNode), that._match\n                                );\n\n                if (!matchToFocus.length) {\n                    matchToFocus = that._matchNextByText(-1, that._match);\n                }\n\n                if (matchToFocus.get(0) && matchToFocus.get(0) !== focusedNode) {\n                    that._trigger(NAVIGATE, matchToFocus);\n                    that.current(matchToFocus);\n                }\n            },\n\n            _matchNextByText: function(startIndex, text) {\n                var element = this.element;\n                var textNodes = element.find(\".k-in\").filter(function(i, element) {\n                    return (i > startIndex &&\n                            $(element).is(\":visible\") &&\n                            $(element).text().toLowerCase().indexOf(text) === 0);\n                });\n\n                return textNodes.eq(0).closest(NODE);\n            },\n\n            _click: function(e) {\n                var that = this,\n                    node = $(e.currentTarget),\n                    contents = nodeContents(node.closest(NODE)),\n                    href = node.attr(\"href\"),\n                    shouldNavigate;\n\n                if (href) {\n                    shouldNavigate = href == \"#\" || href.indexOf(\"#\" + this.element.id + \"-\") >= 0;\n                } else {\n                    shouldNavigate = contents.length && !contents.children().length;\n                }\n\n                if (shouldNavigate) {\n                    e.preventDefault();\n                }\n\n                if (!node.hasClass(\".k-selected\") && !that._trigger(SELECT, node)) {\n                    that.select(node);\n                }\n            },\n\n            _wrapper: function() {\n                var that = this,\n                    element = that.element,\n                    wrapper, root,\n                    wrapperClasses = \"k-treeview\";\n\n                if (element.is(\"ul\")) {\n                    wrapper = element.wrap('<div />').parent();\n                    root = element;\n                } else {\n                    wrapper = element;\n                    root = wrapper.children(\"ul\").eq(0);\n                }\n\n                that.wrapper = wrapper.addClass(wrapperClasses);\n                that.root = root;\n            },\n\n            _getSelectedNode: function() {\n                return this.element.find(\".k-selected\").closest(NODE);\n            },\n\n            _group: function(item) {\n                var that = this,\n                    firstLevel = item.hasClass(KTREEVIEW),\n                    group = {\n                        firstLevel: firstLevel,\n                        expanded: firstLevel || that._expanded(item)\n                    },\n                    groupElement = item.children(\"ul\");\n\n                groupElement\n                    .addClass(that.templates.groupCssClass(group))\n                    .css(\"display\", group.expanded ? \"\" : \"none\");\n\n                if (!firstLevel) {\n                    groupElement.attr(\"role\", \"group\");\n                }\n\n                that._nodes(groupElement, group);\n            },\n\n            _nodes: function(groupElement, groupData) {\n                var that = this,\n                    nodes = groupElement.children(\"li\"),\n                    nodeData;\n\n                groupData = extend({ length: nodes.length }, groupData);\n\n                nodes.each(function(i, node) {\n                    node = $(node);\n\n                    nodeData = { index: i, expanded: that._expanded(node) };\n\n                    updateNodeHtml(node);\n\n                    that._updateNodeClasses(node, groupData, nodeData);\n\n                    // iterate over child nodes\n                    that._group(node);\n                });\n            },\n\n            _checkboxes: function() {\n                var options = this.options;\n                var checkboxes = options.checkboxes;\n                var defaultTemplate, checkbox;\n\n                if (checkboxes) {\n                    defaultTemplate = kendo.html.renderCheckBox($(\"<input/>\"), $.extend({}, options, {\n                        rounded: \"medium\"\n                    }));\n\n                    defaultTemplate = defaultTemplate.replace(\">\", \"\");\n\n                    checkbox = function (ref) {\n                        var item = ref.item;\n\n                        return defaultTemplate +\n                    \" id=\\\"_\" + (item.uid) + \"\\\" aria-hidden=\\\"true\\\" type=\\\"checkbox\\\" tabindex=\\\"-1\\\"\" +\n                    (checkboxes.name ? 'name=\"' + checkboxes.name + '\"' : '') + \" \" +\n                    ((item.enabled === false) ? 'disabled' : '') + \" \" +\n                    (item.checked ? 'checked' : '') + \"/>\";\n                    };\n\n                    checkboxes = extend({\n                        template: checkbox\n                    }, options.checkboxes);\n\n                    if (typeof checkboxes.template == STRING) {\n                        checkboxes.template = template(checkboxes.template);\n                    }\n\n                    options.checkboxes = checkboxes;\n                }\n            },\n\n            _updateNodeClasses: function(node, groupData, nodeData) {\n                var wrapper = node.children(\"div\"),\n                    group = node.children(\"ul\"),\n                    templates = this.templates;\n\n                if (node.hasClass(\"k-treeview\")) {\n                    return;\n                }\n\n                nodeData = nodeData || {};\n                nodeData.expanded = typeof nodeData.expanded != UNDEFINED ? nodeData.expanded : this._expanded(node);\n                nodeData.index = typeof nodeData.index != UNDEFINED ? nodeData.index : node.index();\n                nodeData.enabled = typeof nodeData.enabled != UNDEFINED ? nodeData.enabled : !wrapper.children(\".k-in\").hasClass(\"k-disabled\");\n\n                groupData = groupData || {};\n                groupData.firstLevel = typeof groupData.firstLevel != UNDEFINED ? groupData.firstLevel : node.parent().parent().hasClass(KTREEVIEW);\n                groupData.length = typeof groupData.length != UNDEFINED ? groupData.length : node.parent().children().length;\n\n                // li\n                node.removeClass(\"k-first k-last\")\n                    .addClass(templates.wrapperCssClass(groupData, nodeData));\n\n                // div\n                wrapper.removeClass(\"k-treeview-top k-treeview-mid k-treeview-bot\")\n                       .addClass(templates.cssClass(groupData, nodeData));\n\n                // span / a\n                var textWrap = wrapper.children(\".k-in\");\n                var isLink = textWrap[0] && textWrap[0].nodeName.toLowerCase() == \"a\";\n                textWrap.removeClass(\"k-in k-link k-disabled\")\n                    .addClass(templates.textClass(nodeData, isLink));\n\n                // toggle button\n                if (group.length || node.attr(\"data-hasChildren\") == \"true\") {\n                    wrapper.find(\".k-treeview-toggle > .k-icon\").removeClass(\"k-i-expand k-i-collapse\")\n                        .addClass(templates.toggleButtonClass(nodeData));\n\n                    group.addClass(\"k-group k-treeview-group\");\n                }\n            },\n\n\n            _processNodes: function(nodes, callback) {\n                var that = this;\n                var items = that.element.find(nodes);\n                for (var i = 0; i < items.length; i++) {\n                    callback.call(that, i, $(items[i]).closest(NODE));\n                }\n            },\n\n            dataItem: function(node) {\n                var uid = $(node).closest(NODE).attr(kendo.attr(\"uid\")),\n                    dataSource = this.dataSource;\n\n                return dataSource && dataSource.getByUid(uid);\n            },\n\n            _dataItem: function(node) {\n                var uid = $(node).closest(NODE).attr(kendo.attr(\"uid\")),\n                    dataSource = this.dataSource;\n\n                return dataSource && this._dataSourceUids[uid];\n            },\n\n            _insertNode: function(nodeData, index, parentNode, insertCallback, collapsed) {\n                var that = this,\n                    group = subGroup(parentNode),\n                    updatedGroupLength = group.children().length + 1,\n                    childrenData,\n                    groupData = {\n                        firstLevel: parentNode.hasClass(KTREEVIEW),\n                        expanded: !collapsed,\n                        length: updatedGroupLength\n                    }, node, i, item, nodeHtml = \"\", firstChild, lastChild,\n                    append = function(item, group) {\n                        item.appendTo(group);\n                    };\n\n                for (i = 0; i < nodeData.length; i++) {\n                    item = nodeData[i];\n\n                    item.index = index + i;\n\n                    nodeHtml += that._renderItem({\n                        group: groupData,\n                        item: item\n                    });\n                }\n\n                node = $(nodeHtml);\n\n                if (!node.length) {\n                    return;\n                }\n\n                that.angular(\"compile\", function() {\n                    return {\n                        elements: node.get(),\n                        data: nodeData.map(function(item) {\n                            return { dataItem: item };\n                        })\n                    };\n                });\n\n                if (!group.length) {\n                    group = $(that._renderGroup({\n                        group: groupData\n                    })).appendTo(parentNode);\n\n                    parentNode.attr(ARIA_EXPANDED, true);\n                }\n\n                insertCallback(node, group);\n\n                if (parentNode.hasClass(\"k-item\")) {\n                    updateNodeHtml(parentNode);\n                    that._updateNodeClasses(parentNode, groupData, { expanded: !collapsed });\n                }\n\n                firstChild = node.prev().first();\n                lastChild = node.next().last();\n\n                that._updateNodeClasses(firstChild, {}, { expanded: firstChild.attr(kendo.attr(\"expanded\")) == \"true\" });\n                that._updateNodeClasses(lastChild, {}, { expanded: lastChild.attr(kendo.attr(\"expanded\")) == \"true\" });\n\n                // render sub-nodes\n                for (i = 0; i < nodeData.length; i++) {\n                    item = nodeData[i];\n\n                    if (item.hasChildren) {\n                        childrenData = item.children.data();\n\n                        if (childrenData.length) {\n                            that._insertNode(childrenData, item.index, node.eq(i), append, !item.expanded);\n                        }\n                    }\n                }\n\n                return node;\n            },\n\n            _updateNodes: function(items, field) {\n                var that = this;\n                var i, node, nodeWrapper, item, isChecked, isCollapsed, kin;\n                var context = { treeview: that.options, item: item };\n                var render = field != \"expanded\" && field != \"checked\";\n\n                function setCheckedState(root, state) {\n                    if (root.is(\".k-group\")) {\n                        root.find(\".k-item:not([aria-disabled])\").attr(ARIA_CHECKED, state);\n                    }\n\n                    root.find(\".k-checkbox-wrapper input[type=checkbox]:not([disabled])\")\n                        .prop(CHECKED, state)\n                        .data(INDETERMINATE, false)\n                        .prop(INDETERMINATE, false);\n                }\n\n                if (field == \"selected\") {\n                    item = items[0];\n\n                    node = that.findByUid(item.uid);\n                    kin = node.find(\".k-in\").first();\n\n                    kin.removeClass(\"k-hover\")\n                        .toggleClass(\"k-selected\", item[field])\n                        .end();\n\n                    if (item[field]) {\n                        that.current(node);\n                    }\n\n                    node.attr(ARIA_SELECTED, !!item[field]);\n                } else {\n                    var elements = $.map(items, function(item) {\n                        return that.findByUid(item.uid).children(\"div\");\n                    });\n\n                    if (render) {\n                        that.angular(\"cleanup\", function() { return { elements: elements }; });\n                    }\n\n                    for (i = 0; i < items.length; i++) {\n                        context.item = item = items[i];\n                        nodeWrapper = elements[i];\n                        node = nodeWrapper.parent();\n\n                        if (render) {\n                            if (kendo.unbind) {\n                                kendo.unbind(nodeWrapper);\n                            }\n                            nodeWrapper.children(\".k-in\")\n                                .html(that.templates.itemContent(context));\n                        }\n\n                        if (field == CHECKED) {\n                            isChecked = item[field];\n\n                            setCheckedState(nodeWrapper, isChecked);\n\n                            node.attr(ARIA_CHECKED, isChecked);\n\n                            if (that.options.checkboxes.checkChildren) {\n                                setCheckedState(node.children(\".k-group\"), isChecked);\n\n                                that._setChecked(item.children, isChecked);\n\n                                that._bubbleIndeterminate(node);\n                            }\n                        } else if (field == \"expanded\") {\n                            that._toggle(node, item, item[field]);\n                        } else if (field == \"enabled\") {\n                            node.find(\".k-checkbox-wrapper input[type=checkbox]\").prop(\"disabled\", !item[field]);\n\n                            isCollapsed = !nodeContents(node).is(VISIBLE);\n\n                            node.removeAttr(ARIA_DISABLED);\n\n                            if (!item[field]) {\n                                if (item.selected) {\n                                    item.set(\"selected\", false);\n                                }\n\n                                if (item.expanded) {\n                                    item.set(\"expanded\", false);\n                                }\n\n                                isCollapsed = true;\n                                node.attr(ARIA_SELECTED, false)\n                                    .attr(ARIA_DISABLED, true);\n                            }\n\n                            that._updateNodeClasses(node, {}, { enabled: item[field], expanded: !isCollapsed });\n                        }\n\n                        if (nodeWrapper.length) {\n                            this.trigger(\"itemChange\", { item: nodeWrapper, data: item, ns: ui });\n                        }\n                    }\n\n                    if (render) {\n                        that.angular(\"compile\", function() {\n                            return {\n                                elements: elements,\n                                data: $.map(items, function(item) {\n                                    return [{ dataItem: item }];\n                                })\n                            };\n                        });\n                    }\n                }\n            },\n\n            _appendItems: function(index, items, parentNode) {\n                var group = subGroup(parentNode);\n                var children = group.children();\n                var collapsed = !this._expanded(parentNode);\n\n                if (this.element === parentNode) {\n                    var dataItems = this.dataSource.data();\n                    var viewItems = this.dataSource.view();\n                    var rootItems = viewItems.length < dataItems.length ? viewItems : dataItems;\n                    index = rootItems.indexOf(items[0]);\n                } else if (items.length) {\n                    index = items[0].parent().indexOf(items[0]);\n                }\n\n                if (typeof index == UNDEFINED) {\n                    index = children.length;\n                }\n\n                this._insertNode(items, index, parentNode, function(item, group) {\n                    // insert node into DOM\n                    if (index >= children.length) {\n                        item.appendTo(group);\n                    } else {\n                        item.insertBefore(children.eq(index));\n                    }\n                }, collapsed);\n\n                if (!collapsed) {\n                    this._updateNodeClasses(parentNode, {}, { expanded: !collapsed });\n                    subGroup(parentNode).css(\"display\", \"block\");\n                }\n            },\n\n            _refreshChildren: function(parentNode, items, index) {\n                var i, children, child;\n                var options = this.options;\n                var loadOnDemand = options.loadOnDemand;\n                var checkChildren = options.checkboxes && options.checkboxes.checkChildren;\n\n                subGroup(parentNode).empty();\n\n                if (!items.length) {\n                    updateNodeHtml(parentNode);\n                } else {\n                    this._appendItems(index, items, parentNode);\n\n                    children = subGroup(parentNode).children();\n\n                    if (loadOnDemand && checkChildren) {\n                        this._bubbleIndeterminate(children.last());\n                    }\n\n                    for (i = 0; i < children.length; i++) {\n                        child = children.eq(i);\n                        this.trigger(\"itemChange\", {\n                            item: child.children(\"div\"),\n                            data: items[i],\n                            ns: ui\n                        });\n                    }\n                }\n            },\n\n            _refreshRoot: function(items) {\n                var groupHtml = this._renderGroup({\n                        items: items,\n                        group: {\n                            firstLevel: true,\n                            expanded: true\n                        }\n                    });\n\n                if (this.root.length && this.root[0].parentElement) {\n                    this._angularItems(\"cleanup\");\n\n                    var group = $(groupHtml);\n\n                    this.root\n                        .attr(\"class\", group.attr(\"class\"))\n                        .html(group.html());\n                } else {\n                    this.root = this.wrapper.html(groupHtml).children(\"ul\");\n                }\n\n                var elements = this.root.children(\".k-item\");\n                for (var i = 0; i < items.length; i++) {\n                    this.trigger(\"itemChange\", {\n                        item: elements.eq(i),\n                        data: items[i],\n                        ns: ui\n                    });\n                }\n                this._angularItems(\"compile\");\n            },\n\n            refresh: function(e) {\n                var node = e.node;\n                var action = e.action;\n                var items = e.items;\n                var parentNode = this.wrapper;\n                var options = this.options;\n                var loadOnDemand = options.loadOnDemand;\n                var checkChildren = options.checkboxes && options.checkboxes.checkChildren;\n                var i;\n\n                if (this._skip) {\n                    return;\n                }\n\n                for (i = 0; i < items.length; i++) {\n                    this._dataSourceUids[items[i].uid] = items[i];\n                }\n\n                if (e.field) {\n                    if (!items[0] || !items[0].level) {\n                        return;\n                    }\n\n                    return this._updateNodes(items, e.field);\n                }\n\n                if (node) {\n                    parentNode = this.findByUid(node.uid);\n                    this._progress(parentNode, false);\n                }\n\n                if (checkChildren && action != \"remove\") {\n                    var bubble = false;\n\n                    for (i = 0; i < items.length; i++) {\n                        if (\"checked\" in items[i]) {\n                            bubble = true;\n                            break;\n                        }\n                    }\n\n                    if (!bubble && node && node.checked) {\n                        for (i = 0; i < items.length; i++) {\n                            items[i].checked = true;\n                        }\n                    }\n                }\n\n                if (action == \"add\") {\n                    this._appendItems(e.index, items, parentNode);\n                } else if (action == \"remove\") {\n                    this._remove(this.findByUid(items[0].uid), false);\n                } else if (action == \"itemchange\") {\n                    this._updateNodes(items);\n                } else if (action == \"itemloaded\") {\n                    this._refreshChildren(parentNode, items, e.index);\n                } else {\n                    this._refreshRoot(items);\n                    this.element.attr(ARIA_BUSY, false);\n                }\n\n                if (action != \"remove\") {\n                    for (i = 0; i < items.length; i++) {\n                        if (!loadOnDemand || items[i].expanded || items[i]._loaded) {\n                            items[i].load();\n                        }\n                    }\n                }\n\n                this.wrapper.find(\">ul\").attr(\"role\", \"none\");\n\n\n                this.trigger(DATABOUND, { node: node ? parentNode : undefined$1 });\n                if (this.dataSource.filter() && this.options.checkboxes.checkChildren) {\n                    this.updateIndeterminate(parentNode);\n                }\n            },\n\n            _error: function(e) {\n                var node = e.node && this.findByUid(e.node.uid);\n                var retryHtml = this.templates.retry({ messages: this.options.messages });\n\n                if (node) {\n                    this._progress(node, false);\n                    this._expanded(node, false);\n                    nodeIcon(node).addClass(\"k-i-reload\");\n                    e.node.loaded(false);\n                } else {\n                    this._progress(false);\n                    this.dataSource.data([]);\n                    this.element.html(retryHtml);\n                }\n            },\n\n            _retryRequest: function(e) {\n                e.preventDefault();\n\n                this.dataSource.fetch(this._attemptLoadCompleted.bind(this));\n            },\n\n            expand: function(nodes) {\n                this._processNodes(nodes, function(index, item) {\n                    this.toggle(item, true);\n                });\n            },\n\n            collapse: function(nodes) {\n                this._processNodes(nodes, function(index, item) {\n                    this.toggle(item, false);\n                });\n            },\n\n            enable: function(nodes, enable) {\n                if (typeof nodes === \"boolean\") {\n                    enable = nodes;\n                    nodes = this.items();\n                } else {\n                    enable = arguments.length == 2 ? !!enable : true;\n                }\n\n                this._processNodes(nodes, function(index, item) {\n                    this.dataItem(item).set(\"enabled\", enable);\n                });\n            },\n\n            current: function(node) {\n                var that = this,\n                    current = that._current,\n                    element = that.element;\n\n                if (arguments.length > 0 && node && node.length) {\n                    if (current) {\n                        current.find(\".k-in\").first().removeClass(\"k-focus\");\n                    }\n\n                    current = that._current = $(node, element).closest(NODE);\n                    current.find(\".k-in\").first().addClass(\"k-focus\");\n                    that._updateActiveDescendant();\n\n                    return;\n                }\n\n                if (!current) {\n                    current = that._nextVisible($());\n                }\n\n                return current;\n            },\n\n            _updateActiveDescendant: function() {\n                var current = this._current,\n                    id = current[0].id || this._ariaId,\n                    prev = this.element.find(\"#\" + this._ariaId);\n\n                if (prev.length > 0) {\n                    prev.removeAttr(\"id\");\n                }\n\n                this.wrapper.removeAttr(ARIA_ACTIVEDESCENDANT);\n                current.attr(\"id\", id);\n                this.wrapper.attr(ARIA_ACTIVEDESCENDANT, id);\n            },\n\n            select: function(node) {\n                var that = this,\n                    element = that.element;\n\n                if (!arguments.length) {\n                    return element.find(\".k-selected\").closest(NODE);\n                }\n\n                node = $(node, element).closest(NODE);\n\n                element.find(\".k-selected\").each(function() {\n                    var dataItem = that.dataItem(this);\n                    if (dataItem) {\n                        dataItem.set(\"selected\", false);\n                        delete dataItem.selected;\n                    } else {\n                        $(this).removeClass(\"k-selected\");\n                    }\n                });\n\n                if (node.length) {\n                    that.dataItem(node).set(\"selected\", true);\n                    that._clickTarget = node;\n                }\n\n                that.trigger(CHANGE);\n            },\n\n            _toggle: function(node, dataItem, expand) {\n                var options = this.options;\n                var contents = nodeContents(node);\n                var direction = expand ? \"expand\" : \"collapse\";\n                var loaded;\n\n                if (contents.data(\"animating\")) {\n                    return;\n                }\n\n                loaded = dataItem && dataItem.loaded();\n\n                if (expand && !loaded) {\n                    if (options.loadOnDemand) {\n                        this._progress(node, true);\n                    }\n\n                    contents.remove();\n                    dataItem.load();\n                } else {\n                    this._updateNodeClasses(node, {}, { expanded: expand });\n\n                    if (!expand) {\n                        contents.css(\"height\", contents.height()).css(\"height\");\n                    }\n\n                    contents\n                        .kendoStop(true, true)\n                        .kendoAnimate(extend(\n                            { reset: true },\n                            options.animation[direction],\n                            { complete: function() {\n                                if (expand) {\n                                    contents.css(\"height\", \"\");\n                                }\n                            } }\n                        ));\n                }\n\n            },\n\n            toggle: function(node, expand) {\n                node = $(node);\n\n                if (!nodeIcon(node).is(\".k-i-expand, .k-i-collapse\")) {\n                    return;\n                }\n\n                if (arguments.length == 1) {\n                    expand = !this._expanded(node);\n                }\n\n                this._expanded(node, expand);\n            },\n\n            destroy: function() {\n                var that = this;\n\n                Widget.fn.destroy.call(that);\n\n                that.wrapper.off(NS);\n                that.wrapper.find(\".k-checkbox-wrapper :checkbox\").off(NS);\n                that._clickHandler = null;\n\n                that._unbindDataSource();\n\n                if (that.dragging) {\n                    that.dragging.destroy();\n                }\n\n                that._dataSourceUids = {};\n\n                kendo.destroy(that.element);\n\n                that.root = that.wrapper = that.element = null;\n            },\n\n            _expanded: function(node, value, force) {\n                var expandedAttr = kendo.attr(\"expanded\");\n                var dataItem;\n                var expanded = value;\n                var direction = expanded ? \"expand\" : \"collapse\";\n\n                if (arguments.length == 1) {\n                    dataItem = this._dataItem(node);\n                    return node.attr(expandedAttr) === \"true\" || (dataItem && dataItem.expanded);\n                }\n\n                dataItem = this.dataItem(node);\n\n                if (nodeContents(node).data(\"animating\")) {\n                    return;\n                }\n\n                if (force || !this._trigger(direction, node)) {\n                    if (expanded) {\n                        node.attr(expandedAttr, \"true\");\n                        node.attr(ARIA_EXPANDED, \"true\");\n                    } else {\n                        node.removeAttr(expandedAttr);\n                        node.attr(ARIA_EXPANDED, \"false\");\n                    }\n\n                    if (dataItem) {\n                        dataItem.set(\"expanded\", expanded);\n                        // necessary when expanding an item yields an error and the item is not expanded as a result\n                        expanded = dataItem.expanded;\n                    }\n                }\n            },\n\n            _progress: function(node, showProgress) {\n                var element = this.element;\n                var loadingText = this.templates.loading({ messages: this.options.messages });\n\n                if (arguments.length == 1) {\n                    showProgress = node;\n\n                    if (showProgress) {\n                        element.html(loadingText);\n                    } else {\n                        element.empty();\n                    }\n\n                    element.attr(ARIA_BUSY, showProgress);\n                } else {\n                    nodeIcon(node).toggleClass(\"k-i-loading\", showProgress).removeClass(\"k-i-reload\");\n                    node.attr(ARIA_BUSY, showProgress);\n                }\n            },\n\n            text: function(node, text) {\n                var dataItem = this.dataItem(node),\n                    fieldBindings = this.options[bindings.text],\n                    level = dataItem.level(),\n                    length = fieldBindings.length,\n                    field = fieldBindings[Math.min(level, length - 1)];\n\n                if (text) {\n                    dataItem.set(field, text);\n                } else {\n                    return dataItem[field];\n                }\n            },\n\n            _objectOrSelf: function(node) {\n                return $(node).closest(\"[data-role=treeview]\").data(\"kendoTreeView\") || this;\n            },\n\n            _dataSourceMove: function(nodeData, group, parentNode, callback) {\n                var referenceDataItem,\n                    destTreeview = this._objectOrSelf(parentNode || group),\n                    destDataSource = destTreeview.dataSource;\n                var loadPromise = $.Deferred().resolve().promise();\n\n                if (parentNode && parentNode[0] != destTreeview.element[0]) {\n                    referenceDataItem = destTreeview.dataItem(parentNode);\n\n                    if (!referenceDataItem.loaded()) {\n                        destTreeview._progress(parentNode, true);\n                        loadPromise = referenceDataItem.load();\n                    }\n\n                    if (parentNode != this.root) {\n                        destDataSource = referenceDataItem.children;\n\n                        if (!destDataSource || !(destDataSource instanceof HierarchicalDataSource)) {\n                            referenceDataItem._initChildren();\n                            referenceDataItem.loaded(true);\n                            destDataSource = referenceDataItem.children;\n                        }\n                    }\n                }\n\n                nodeData = this._toObservableData(nodeData);\n\n                return callback.call(destTreeview, destDataSource, nodeData, loadPromise);\n            },\n\n            _toObservableData: function(node) {\n                var dataItem = node, dataSource, uid;\n\n                if (isJQueryInstance(node) || isDomElement(node)) {\n                    dataSource = this._objectOrSelf(node).dataSource;\n                    uid = $(node).attr(kendo.attr(\"uid\"));\n                    dataItem = dataSource.getByUid(uid);\n\n                    if (dataItem) {\n                        dataItem = dataSource.remove(dataItem);\n                    }\n                }\n\n                return dataItem;\n            },\n\n            _insert: function(data, model, index) {\n                if (!(model instanceof kendo.data.ObservableArray)) {\n                    if (!isArray(model)) {\n                        model = [model];\n                    }\n                } else {\n                    // items will be converted to new Node instances\n                    model = model.toJSON();\n                }\n\n                var parentNode = data.parent();\n\n                if (parentNode && parentNode._initChildren) {\n                    parentNode.hasChildren = true;\n                    parentNode._initChildren();\n                }\n\n                data.splice.apply(data, [ index, 0 ].concat(model));\n\n                return this.findByUid(data[index].uid);\n            },\n\n            insertAfter: insertAction(1),\n\n            insertBefore: insertAction(0),\n\n            append: function(nodeData, parentNode, success) {\n                var group = this.root;\n\n                if (parentNode && nodeData instanceof jQuery && parentNode[0] === nodeData[0]) {\n                    return;\n                }\n\n                parentNode = parentNode && parentNode.length ? parentNode : null;\n\n                if (parentNode) {\n                    group = subGroup(parentNode);\n                }\n\n                return this._dataSourceMove(nodeData, group, parentNode, function(dataSource, model, loadModel) {\n                    var inserted;\n                    var that = this;\n\n                    function add() {\n                        if (parentNode) {\n                            that._expanded(parentNode, true, true);\n                        }\n\n                        var data = dataSource.data(),\n                            index = Math.max(data.length, 0);\n\n                        return that._insert(data, model, index);\n                    }\n\n                    loadModel.done(function() {\n                        inserted = add();\n                        success = success || $.noop;\n                        success(inserted);\n                    });\n\n                    return inserted || null;\n                });\n            },\n\n            _remove: function(node, keepData) {\n                var that = this,\n                    parentNode,\n                    prevSibling, nextSibling;\n\n                node = $(node, that.element);\n\n                if (node.attr(\"id\") === that.element.attr(ARIA_ACTIVEDESCENDANT)) {\n                    that.element.removeAttr(ARIA_ACTIVEDESCENDANT);\n                }\n\n                this.angular(\"cleanup\", function() {\n                    return { elements: node.get() };\n                });\n\n                parentNode = node.parent().parent();\n                prevSibling = node.prev();\n                nextSibling = node.next();\n\n                node[keepData ? \"detach\" : \"remove\"]();\n\n                if (parentNode.hasClass(\"k-item\")) {\n                    updateNodeHtml(parentNode);\n                    that._updateNodeClasses(parentNode);\n                }\n\n                that._updateNodeClasses(prevSibling);\n                that._updateNodeClasses(nextSibling);\n\n                return node;\n            },\n\n            remove: function(node) {\n                var dataItem = this.dataItem(node);\n                if (dataItem) {\n                    this.dataSource.remove(dataItem);\n                }\n            },\n\n            detach: function(node) {\n                return this._remove(node, true);\n            },\n\n            findByText: function(text) {\n                return $(this.element).find(\".k-in\").filter(function(i, element) {\n                    return $(element).text() == text;\n                }).closest(NODE);\n            },\n\n            findByUid: function(uid) {\n                var items = this.element.find(\".k-item\");\n                var uidAttr = kendo.attr(\"uid\");\n                var result;\n\n                for (var i = 0; i < items.length; i++) {\n                    if (items[i].getAttribute(uidAttr) == uid) {\n                        result = items[i];\n                        break;\n                    }\n                }\n\n                return $(result);\n            },\n\n            expandPath: function(path, complete) {\n                var treeview = this;\n                var nodeIds = path.slice(0);\n                var callback = complete || $.noop;\n\n                function proceed() {\n                    nodeIds.shift();\n\n                    if (nodeIds.length) {\n                        expand(nodeIds[0]).then(proceed);\n                    } else {\n                        callback.call(treeview);\n                    }\n                }\n\n                function expand(id) {\n                    var result = $.Deferred();\n                    var node = treeview.dataSource.get(id);\n                    var expandedAttr = kendo.attr(\"expanded\");\n                    var nodeElement;\n\n                    if (node) {\n                        nodeElement = treeview.findByUid(node.uid);\n\n                        if (node.loaded()) {\n                            node.set(\"expanded\", true);\n                            nodeElement.attr(expandedAttr, true);\n                            nodeElement.attr(ARIA_EXPANDED, true);\n                            result.resolve();\n                        } else {\n                            // manually show progress of the node\n                            // should be moved to `refresh`\n                            // if the datasource starts triggering a `requestStart` event for nodes\n                            treeview._progress(nodeElement, true);\n\n                            node.load().then(function() {\n                                node.set(\"expanded\", true);\n                                nodeElement.attr(expandedAttr, true);\n                                nodeElement.attr(ARIA_EXPANDED, true);\n                                result.resolve();\n                            });\n                        }\n                    } else {\n                        result.resolve();\n                    }\n\n                    return result.promise();\n                }\n\n                // expand async nodes\n                expand(nodeIds[0]).then(proceed);\n            },\n\n            _parentIds: function(node) {\n                var parent = node && node.parentNode();\n                var parents = [];\n                while (parent && parent.parentNode) {\n                    parents.unshift(parent.id);\n                    parent = parent.parentNode();\n                }\n\n                return parents;\n            },\n\n            expandTo: function(node) {\n                if (!(node instanceof kendo.data.Node)) {\n                    node = this.dataSource.get(node);\n                }\n\n                var parents = this._parentIds(node);\n\n                this.expandPath(parents);\n            },\n\n            _renderItem: function(options) {\n                if (!options.group) {\n                    options.group = {};\n                }\n\n                options.treeview = this.options;\n\n                options.r = this.templates;\n\n                return this.templates.item(options);\n            },\n\n            _renderGroup: function(options) {\n                var that = this;\n\n                options.renderItems = function(options) {\n                        var html = \"\",\n                            i = 0,\n                            items = options.items,\n                            len = items ? items.length : 0,\n                            group = options.group;\n\n                        group.length = len;\n\n                        for (; i < len; i++) {\n                            options.group = group;\n                            options.item = items[i];\n                            options.item.index = i;\n                            html += that._renderItem(options);\n                        }\n\n                        return html;\n                    };\n\n                options.r = that.templates;\n\n                return that.templates.group(options);\n            }\n        });\n\n        kendo.cssProperties.registerPrefix(\"TreeView\", \"k-treeview-\");\n\n        ui.plugin(TreeView);\n    })(window.kendo.jQuery);\n\n}));\n"]}