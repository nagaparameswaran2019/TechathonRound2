{"version":3,"file":"kendo.actionsheet.min.js","names":["factory","define","amd","$","undefined$1","kendo","window","encode","htmlEncode","Widget","ui","ns","Popup","TabKeyTrap","DOCUMENT_ELEMENT","document","documentElement","HIDDEN","HEADER_ID","extend","template","CLICK","hexColor","HEADER_TEMPLATE","ref","title","ITEM_TEMPLATE","disabled","icon","text","description","defaultItem","iconClass","iconSize","iconColor","click","noop","group","ActionSheet","init","element","options","that","this","fn","call","_hasItems","items","length","_mapItems","_wrapper","_popup","_header","_items","_footer","_tabKeyTrap","wrapper","downEvent","applyEventMap","guid","_mousedownProxy","_mousedown","bind","on","_keydown","events","name","popup","map","defaultItemsMapper","addClass","ACTION_SHEET","wrap","parent","prepend","attr","role","isRtl","support","anchor","omitOriginOffsets","appendTo","modal","animation","_openHandler","append","_createItems","topGroupFilter","itemsFilter","idx","item","itemTemplate","itemElement","data","result","inlineStyles","filter","container","test","color","fontSize","Object","keys","css","prop","bottomGroupFilter","destroy","off","open","removeClass","_elementHeight","outerHeight","outerWidth","trap","close","e","keyCode","target","ESC","stopPropagation","hasClass","ENTER","trigger","find","eq","contains","eventTarget","plugin","jQuery"],"sources":["kendo.actionsheet.js"],"mappings":"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","sourcesContent":["(function (factory) {\n    typeof define === 'function' && define.amd ? define(['kendo.core', 'kendo.popup'], factory) :\n    factory();\n})((function () {\n    var __meta__ = {\n        id: \"ActionSheet\",\n        name: \"ActionSheet\",\n        category: \"web\", // suite\n        description: \"The ActionSheet widget displays a set of choices related to a task the user initiates.\",\n        depends: [\"core\", \"popup\"] // dependencies\n    };\n\n    (function($, undefined$1) {\n        var kendo = window.kendo;\n        var encode = kendo.htmlEncode;\n        var Widget = kendo.ui.Widget;\n        var ui = kendo.ui;\n        var ns = \".kendoActionSheet\";\n        var Popup = ui.Popup;\n        var TabKeyTrap = Popup.TabKeyTrap;\n        var DOCUMENT_ELEMENT = $(document.documentElement);\n        var MOUSEDOWN = \"down\";\n        var OPEN = \"open\";\n        var CLOSE = \"close\";\n        var ACTIVATE = \"activate\";\n        var ACTION_SHEET_CONTAINER = \"k-actionsheet-container\";\n        var OVERLAY = \"k-overlay\";\n        var ACTION_SHEET = \"k-actionsheet k-actionsheet-jq\";\n        var ACTION_SHEET_BOTTOM = \"k-actionsheet-bottom\";\n        var STATEDISABLED = \"k-disabled\";\n        var HIDDEN = \"k-hidden\";\n        var HEADER_ID = \"actionsheet-header\";\n        var extend = $.extend;\n        var template = kendo.template;\n        var CLICK = \"click\";\n        var KEYDOWN = \"keydown\";\n        var hexColor = /^#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/;\n        var HEADER_TEMPLATE = function (ref) {\n            var title = ref.title;\n\n            return (\"<span id=\\\"\" + HEADER_ID + \"\\\" class=\\\"k-actionsheet-header\\\">\" + title + \"</span>\");\n        };\n        var ITEM_TEMPLATE = function (ref) {\n            var disabled = ref.disabled;\n            var icon = ref.icon;\n            var text = ref.text;\n            var description = ref.description;\n\n            return (\"<span role=\\\"button\\\" tabindex=\\\"0\\\" class=\\\"k-actionsheet-item \" + (disabled ? STATEDISABLED : \"\") + \"\\\"><span class=\\\"k-actionsheet-action\\\">\" + (icon ? icon : \"\") + \"<span class=\\\"k-actionsheet-item-text\\\"><span class=\\\"k-actionsheet-item-title\\\">\" + (encode(text)) + \"</span>\" + (description ? '<span class=\"k-actionsheet-item-description\">' + encode(description) + '</span>' : '') + \"</span></span></span>\");\n        };\n        var SEPARATOR = '<hr class=\"k-hr\" />';\n        var defaultItem = {\n            text: \"\",\n            description: \"\",\n            iconClass: \"\",\n            iconSize: 0,\n            iconColor: \"\",\n            click: $.noop,\n            group: \"top\",\n            disabled: false\n        };\n\n        function contains(container, target) {\n            if (!container || !target) {\n                return false;\n            }\n            return container === target || $.contains(container, target);\n        }\n\n        function createIcon(data) {\n            var result = $('<span></span>');\n            var inlineStyles = {};\n\n            if (!data.iconClass) {\n                return '';\n            }\n\n            result.addClass(data.iconClass + \" k-actionsheet-item-icon\");\n\n            if (data.iconColor && hexColor.test(data.iconColor)) {\n                inlineStyles.color = data.iconColor;\n            } else if (data.iconColor) {\n                result.addClass(\"k-text-\" + data.iconColor);\n            }\n\n            if (data.iconSize) {\n                inlineStyles.fontSize = data.iconSize;\n            }\n\n            if (Object.keys(inlineStyles).length) {\n                result.css(inlineStyles);\n            }\n\n            return result;\n        }\n\n        var ActionSheet = Widget.extend({\n            init: function(element, options) {\n                var that = this;\n\n                Widget.fn.init.call(that, element, options);\n\n                that._hasItems = options.items && options.items.length;\n                that._mapItems();\n                that._wrapper();\n                that._popup();\n                that._header();\n                that._items();\n                that._footer();\n\n                that._tabKeyTrap = new TabKeyTrap(that.wrapper);\n\n                that.downEvent = kendo.applyEventMap(MOUSEDOWN, kendo.guid());\n                that._mousedownProxy = that._mousedown.bind(that);\n                that.wrapper.on(KEYDOWN + ns, that, that._keydown.bind(that));\n            },\n\n            events: [\n                OPEN,\n                CLOSE\n            ],\n\n            options: {\n                name: \"ActionSheet\",\n                title: \"\",\n                items: [],\n                popup: null\n            },\n\n            _mapItems: function() {\n                var that = this;\n\n                if (!that._hasItems) {\n                    return;\n                }\n\n                that.options.items = that.options.items.map(defaultItemsMapper);\n            },\n\n            _wrapper: function() {\n                var that = this;\n                var element = that.element;\n                var wrapper;\n\n                element.addClass(ACTION_SHEET + \" \" + ACTION_SHEET_BOTTOM + \" k-popup\");\n                that.wrapper = wrapper = element.wrap(\"<div class='\" + ACTION_SHEET_CONTAINER + \" \" + HIDDEN + \"'></div>\").parent();\n                wrapper.prepend($('<div></div>').addClass(OVERLAY));\n\n                element.attr({\n                    role: \"dialog\",\n                    \"aria-modal\": true,\n                    \"aria-labelledby\": HEADER_ID\n                });\n            },\n\n            _popup: function() {\n                var that = this;\n                var options = that.options;\n\n                that.popup = new Popup(that.element, extend(options.popup,\n                    options,\n                    {\n                        name: \"Popup\",\n                        isRtl: kendo.support.isRtl(options.anchor),\n                        omitOriginOffsets: true,\n                        appendTo: that.wrapper,\n                        modal: true,\n                        animation: false,\n                        anchor: that.wrapper\n                    }));\n\n                that.popup.bind(ACTIVATE, that._openHandler.bind(that));\n            },\n\n            _header: function() {\n                var that = this;\n                var options = that.options;\n\n                if (!options.title) {\n                    return;\n                }\n\n                that.element.append(template(HEADER_TEMPLATE)(options));\n            },\n\n            _items: function() {\n                var that = this;\n\n                if (!that._hasItems) {\n                    return;\n                }\n\n                that._createItems(topGroupFilter);\n            },\n\n            _createItems: function(itemsFilter) {\n                var that = this;\n                var items = that.options.items.filter(itemsFilter);\n                var idx;\n                var item;\n                var itemTemplate;\n                var itemElement;\n                var container = $(\"<div class='k-actionsheet-items' role='group'></div>\");\n                var icon;\n\n                if (!items.length) {\n                    return;\n                }\n\n                that.element.append(container);\n                itemTemplate = template(ITEM_TEMPLATE);\n\n                for (idx = 0; idx < items.length; idx++) {\n                    item = items[idx];\n                    icon = createIcon(item);\n                    itemElement = $(itemTemplate(extend({}, item, { icon: icon && icon.prop('outerHTML') })));\n                    container.append(itemElement);\n\n                    if (item.click) {\n                        itemElement.on(CLICK + ns, item.click.bind(that));\n                    }\n                }\n            },\n\n            _footer: function() {\n                var that = this;\n\n                if (!that._hasItems) {\n                    return;\n                }\n                that.element.append(SEPARATOR);\n                that._createItems(bottomGroupFilter);\n            },\n\n            destroy: function() {\n                var that = this;\n\n                Widget.fn.destroy.call(that);\n                that.element.off(ns);\n                that.wrapper.off(ns);\n                that.popup.destroy();\n            },\n\n            open: function() {\n                var that = this;\n\n                that.wrapper.removeClass(HIDDEN);\n                that._elementHeight = that._elementHeight || that.element.outerHeight();\n                that.popup.open((that.wrapper.outerWidth() - that.element.outerWidth()) / 2, that.wrapper.outerHeight() - that._elementHeight);\n                DOCUMENT_ELEMENT.off(that.downEvent, that._mousedownProxy)\n                    .on(that.downEvent, that._mousedownProxy);\n\n                that._tabKeyTrap.trap();\n            },\n\n            close: function() {\n                var that = this;\n\n                that.popup.close();\n                that.wrapper.addClass(HIDDEN);\n                DOCUMENT_ELEMENT.off(that.downEvent, that._mousedownProxy);\n            },\n\n            _keydown: function(e) {\n                var that = this;\n                var keys = kendo.keys;\n                var keyCode = e.keyCode;\n                var target = $(e.target);\n\n                if (keyCode == keys.ESC) {\n                    e.stopPropagation();\n                    that.close();\n                } else if (target.hasClass(\"k-actionsheet-item \") && keyCode === keys.ENTER) {\n                    target.trigger(CLICK);\n                }\n            },\n\n            _openHandler: function() {\n                var that = this;\n\n                that.element.find('.k-actionsheet-item').eq(0).trigger(\"focus\");\n            },\n\n            _mousedown: function(e) {\n                var that = this;\n                var container = that.element[0];\n                var target = kendo.eventTarget(e);\n\n                if (!contains(container, target)) {\n                    that.close();\n                }\n            }\n        });\n\n        function topGroupFilter(item) {\n            return item.group === \"top\";\n        }\n\n        function bottomGroupFilter(item) {\n            return item.group !== \"top\";\n        }\n\n        function defaultItemsMapper(item) {\n            return extend({}, defaultItem, item);\n        }\n\n        ui.plugin(ActionSheet);\n\n    })(window.kendo.jQuery);\n\n}));\n"]}