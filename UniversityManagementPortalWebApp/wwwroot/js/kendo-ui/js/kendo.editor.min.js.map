{"version":3,"file":"kendo.editor.min.js","names":["factory","define","amd","$","editorNS","Command","GenericCommand","EditorUtils","registerTool","Tool","ToolTemplate","RestorePoint","extend","InsertHtmlCommand","InsertHtmlTool","kendo","UndoRedoStack","Observable","init","options","fn","call","this","clear","events","push","command","stack","slice","currentCommandIndex","undo","canUndo","trigger","redo","canRedo","length","deepExtend","util","undefined$1","window","Class","Widget","ui","os","support","mobileOS","browser","keys","SELECT","SELECT_OVERLAY_SELECTOR","PLACEHOLDER_CLASS","getHtml","template","useWithBlock","editorWrapperTemplate","buttonTemplate","data","popup","toHyphens","cssClass","replace","iconTextButtonTemplate","tableWizardButtonTemplate","colorPickerTemplate","comboBoxTemplate","dropDownListTemplate","separatorTemplate","overflowAnchorTemplate","formatByName","name","format","i","inArray","tags","getToolCssClass","superscript","subscript","justifyLeft","justifyCenter","justifyRight","justifyFull","insertUnorderedList","insertOrderedList","insertUpperRomanList","insertLowerRomanList","import","indent","outdent","createLink","unlink","insertImage","insertFile","viewHtml","foreColor","backColor","createTable","addColumnLeft","addColumnRight","addRowAbove","addRowBelow","deleteRow","deleteColumn","mergeCellsHorizontally","mergeCellsVertically","splitCellHorizontally","splitCellVertically","tableWizard","tableWizardInsert","tableAlignLeft","tableAlignCenter","tableAlignRight","cleanFormatting","copyFormat","applyFormat","toolName","tool","toolOptions","toLowerCase","Editor","defaultTools","registerFormat","formatName","formats","cacheComments","content","comments","index","retrieveComments","supportedContentEditable","document","documentElement","toolGroups","element","value","toolbarContainer","toolbarOptions","type","domElement","that","editor","dom","Dom","tools","_registerHandler","closest","update","bind","_wrapTextarea","wrapper","find","id","attr","addClass","insertBefore","toolbar","Toolbar","bindTo","setTimeout","heightStyle","style","height","expectedHeight","parseInt","actualHeight","indexOf","isNaN","_resizable","_initializeContentElement","keyboard","Keyboard","BackspaceHandler","TypingHandler","SystemHandler","SelectAllHandler","clipboard","Clipboard","undoRedoStack","textarea","encoded","defaultValue","trim","deserializedRoot","Serializer","htmlToDom","deserialization","getAllComments","innerHTML","mousedown","_endTyping","mouseup","e","_mouseup","_initializeImmutables","_ariaLabel","resize","notify","setOptions","_initializePlaceholder","_togglePlaceholder","show","body","$body","placeholder","toggleClass","isTypingInProgress","endTyping","saveSelection","_selectionChange","_selectionStarted","resizable","isPlainObject","draggableElement","insertAfter","kendoResizable","start","currentTarget","initialSize","last","append","delta","y","initialDelta","newSize","min","max","Infinity","Math","resizeend","remove","ios","getKendoResizable","draggable","ignore","_initializeElementResizing","ElementResizingFactory","current","create","_showElementResizeHandlesProxy","_showElementResizeHandles","_destroyElementResizing","elementResizing","destroy","unbind","parentNode","showResizeHandles","_initializeColumnResizing","ColumnResizing","_destroyColumnResizing","columnResizing","_initializeRowResizing","RowResizing","_destroyRowResizing","rowResizing","w","width","h","editorWrap","editArea","css","appendTo","_createContentElement","stylesheets","iframe","wnd","doc","lang","specifiedDomain","domain","domainScript","src","hide","title","messages","editAreaTitle","frameBorder","tabIndex","location","hostname","contentWindow","contentDocument","one","decorateFrom","getElementsByTagName","getAttribute","open","write","isRtl","edge","chrome","map","href","join","close","_blur","old","val","_oldValue","encodedValue","_spellCorrect","beforeCorrection","falseTrigger","contextmenu","_spellCorrectTimeout","getRange","input","mozilla","_finishUpdate","handler","eventNames","NS","_handlers","t","hasOwnProperty","applyEventMap","split","on","_deregisterHandlers","handlers","off","blurTrigger","mousedownTrigger","createElement","setAttribute","appendChild","interval","setInterval","clearInterval","_mousedown","execCommand","touch","keydown","_activeElement","focus","parentElement","target","nodeName","_cachedHeight","restoreHeight","range","keyCode","BACKSPACE","DELETE","F10","preventPopupHide","preventDefault","LEFT","RIGHT","left","container","offset","next","nextChar","nodeType","nodeValue","setStart","collapse","selectRange","toolFromShortcut","keyPressCommand","test","exec","_runPostContentKeyCommands","clearTimeout","keypress","keyup","selectionCodes","TAB","PAGEUP","PAGEDOWN","END","HOME","UP","DOWN","INSERT","ctrlKey","altKey","shiftKey","_refreshInterval","click","createRange","selectNode","focusin","hasAttribute","focusout","active","toolbarContainerElement","get","contains","focused","removeClass","$head","head","immutables","Immutables","parents","stopPropagation","gecko","which","is","tagName","toolsFromShortcut","o","changesContent","refresh","_destroyResizings","bold","italic","underline","strikethrough","insertHtml","fontName","fontNameInherit","fontSize","fontSizeInherit","formatBlock","formatting","emptyFolder","uploadFile","overflowAnchor","orderBy","orderBySize","orderByName","invalidFileType","deleteFile","overwriteFile","directoryNotFound","imageWebAddress","imageAltText","imageWidth","imageHeight","fileWebAddress","fileTitle","fileText","linkWebAddress","linkText","linkToolTip","linkOpenInNewWindow","dialogUpdate","dialogInsert","dialogOk","dialogCancel","createTableHint","tableTab","cellTab","accessibilityTab","caption","summary","units","cellSpacing","cellPadding","cellMargin","alignment","background","border","borderStyle","collapseBorders","wrapText","associateCellsWithHeaders","alignLeft","alignCenter","alignRight","alignLeftTop","alignCenterTop","alignRightTop","alignLeftMiddle","alignCenterMiddle","alignRightMiddle","alignLeftBottom","alignCenterBottom","alignRightBottom","alignRemove","columns","rows","selectAllCells","exportAs","print","headerRows","headerColumns","tableSummaryPlaceholder","associateNone","associateScope","associateIds","borderNone","custom","serialization","entities","semantic","scripts","optimizeTags","keepEOL","pasteCleanup","all","keepNewLines","msAllFormatting","msConvertLists","msTags","none","span","dialogOptions","modal","animation","imageBrowser","fileBrowser","text","concat","_focusOutside","_destroyUploadWidget","dispose","msie","_uploadWidget","state","textNodes","finder","RangeUtils","collapsed","startContainer","getFormat","isFormatted","html","currentHtml","domToXhtml","selectionRestorePoint","refreshTools","commonAncestorContainer","_focusBody","scrollTop","activeElement","scrollHeight","clientHeight","restoreSelection","toRange","encode","getSelection","SelectionUtils","selectionFromDocument","selection","removeAllRanges","addRange","rangeCount","getRangeAt","endContainer","startOffset","endOffset","_containsRange","isAncestorOrSelf","_deleteSavedRange","_range","selectedHtml","cloneContents","paste","params","Error","toolById","async","change","managesUndoRedo","plugin","initialize","unselectable","commandArguments","noop","UndoTool","nodes","key","ctrl","emptyElementContent","emptyTableCellContent","PDFMixin","prototype","_drawPDF","drawing","drawDOM","pdf","saveAsPDF","progress","Deferred","promise","args","then","root","exportPDF","done","dataURI","saveAs","fileName","proxyURL","proxyTarget","forceProxy","resolve","fail","err","reject","jQuery","STYLE","FLOAT","CSSFLOAT","STYLEFLOAT","CLASS","KMARKER","makeMap","items","len","obj","empty","nonListBlockElements","blockElements","block","selfClosing","inlineElements","inline","fillAttrs","nonEmptyNonTextContentElements","normalize","node","version","parent","firstChild","prev","nextSibling","persistedScrollTop","whitespace","emptyspace","rgb","bom","whitespaceOrBom","cssAttributes","htmlRe","entityRe","entityTable","findNodeIndex","skipText","previousSibling","isDataNode","isAncestorOf","findClosestAncestor","rootElem","iterator","createNodeIterator","NodeFilter","SHOW_COMMENT","FILTER_ACCEPT","curNode","nextNode","getNodeLength","childNodes","splitDataNode","temp","newNode","cloneNode","denormalizedText","deleteData","attrEquals","attributes","cssFloat","blockParentOrBody","parentOfType","ownerDocument","blockParents","blocks","windowFromDocument","defaultView","parentWindow","nodeTypes","ELEMENT_NODE","ATTRIBUTE_NODE","TEXT_NODE","CDATA_SECTION_NODE","ENTITY_REFERENCE_NODE","ENTITY_NODE","PROCESSING_INSTRUCTION_NODE","COMMENT_NODE","DOCUMENT_NODE","DOCUMENT_TYPE_NODE","DOCUMENT_FRAGMENT_NODE","NOTATION_NODE","toHex","color","matches","x","toString","encodableChars","c","charCode","charCodeAt","entity","isBom","stripBom","stripBomNode","removeChild","insignificant","className","_moz_dirty","_moz_editor_bogus_node","tableCell","significantNodes","grep","child","emptyTextNode","emptyNode","significantChildNodes","isWhitespace","lastTextNode","result","lastChild","isMarker","allowsTextContent","every","allWhitespaceContent","isEmptyspace","htmlIndentSpace","sibling","el","direction","isBlock","isPrevBlock","isNextBlock","isSelfClosing","isEmpty","isInline","isBr","list","scrollContainer","compatMode","scrollingElement","scrollTo","toStart","elementTop","elementHeight","marker","windowHeight","innerHeight","top","offsetHeight","ceil","persistScrollTop","offsetParent","offsetTop","offsetLeft","restoreScrollTop","undefined","insertAt","newElement","position","referenceElement","removeChildren","removeTextSiblings","closestBy","condition","rootCondition","ofType","changeTag","skipAttributes","attribute","specified","cssText","editableParent","contentEditable","wrap","unwrap","createEmptyNode","removeAttribute","mergeAttributes","origin","traverseCss","each","unstyle","inlineStyle","getEffectiveBackground","backgroundStyle","innerText","classNames","classes","commonAncestor","ancestors","first","j","arguments$1","arguments","count","paths","minPathLength","output","reverse","closestSplittableParent","apply","editableParents","editableAncestor","closestEditable","types","editable","closestEditableOfType","filter","invert","filterBy","match","ensureTrailingBreaks","elements","ensureTrailingBreak","removeTrailingBreak","br","reMapTableColumns","table","colAttr","_mapColIndices","clearTableMappings","removeAttr","registeredColumns","rowIndex","cells","colIndex","cellIndex","cell","rowSpan","_mapColspan","colSpan","ci","ri","associateWithIds","theadRows","numberOfTheadRows","tableRows","numberOfTableRows","theadMatrix","tbodyMatrix","tHead","_getNumberOfHeaderRows","_generateIdsForColumns","_generateIdsForRows","_assignIds","col","colspan","rowspan","k","l","timestamp","Date","getTime","row","headers","pushHeaderId","forEach","_onlyUnique","_getNumberOfColumns","currentIndex","numberOfCols","Number","_getNumberOfHeaderColumns","numberOfHeaderRows","number","self","fontSizeMappings","quoteRe","brRe","pixelRe","emptyPRe","cssDeclaration","sizzleAttr","scriptAttr","onerrorRe","bomSpan","div","supportsLeadingWhitespace","isFunction","toEditableHtml","_toEditableImmutables","immutable","prependTo","_fillEmptyElements","p","children","_removeSystemElements","_resetOrderedLists","ol","originalStart","ols","_preventScriptExecution","attributesToRemove","deserialize","semanticFilter","mapStart","tag","tagMap","end","skipEncoding","canOptimize","semanticAttributes","specifiedAttributes","textDecoration","font","fontFamily","size","inlineStyles","ignoredStylePrefixes","prop","startsWith","strong","em","b","u","item","styleObj","splice","face","styleAttr","properties","property","lastIndex","cssProperties","$node","htmlEncode","skip","childNode","mapper","previous","jqNode","serialize","hasClass","shouldOptimize","isEmptyBomNode","runCustom","script","childrenCount","textOnly","DropDownList","SelectBox","_initSelectOverlay","autoSize","listWidth","whiteSpace","_listWidth","scrollbar","fillMode","rounded","selectBox","view","dataSource","select","decorate","registerPrefix","registerValues","values","roundedValues","selectionFromWindow","W3CSelection","selectionFromRange","rangeDocument","documentFromRange","W3CRange","updateRangeProperties","fixIvalidRange","setEnd","setStartBefore","setStartAfter","setEndBefore","setEndAfter","selectNodeContents","deleteContents","cloneRange","deleteSubtree","hasPartialSubtree","getSubtreeIterator","RangeIterator","cloneSubtree","frag","createDocumentFragment","extractContents","extractSubtree","originalRange","insertNode","startNodeName","endNodeName","startAncestor","endAncestor","compareBoundaries","ex","isInvalidRange","fromNode","_current","_next","_end","hasNext","traverse","callback","inStartContainer","inEndContainer","nodeIndex","getSubRange","subRange","textRange","createTextRange","adoptContainer","duplicate","right","textRangeContainer","adoptEndPoint","compareEndPoints","movedStart","movedEnd","cursorNode","textOffset","isData","anchorNode","anchorParent","cursor","moveToElementText","setEndPoint","comparison","appended","RangeEnumerator","enumerate","visit","ImmutablesRangeIterator","ImmutablesRangeEnumerator","rootNode","getEditable","nodeToPath","serializedImmutables","removeImmutables","restoreImmutables","lastType","restoreHtml","path","toRangePoint","denormalizedOffset","Marker","caret","addCaret","removeCaret","containerIndex","textNode","add","expand","isExpandable","rangeBoundary","_removeDeadMarkers","createTextNode","_normalizedIndex","pointer","shouldNormalizeStart","shouldNormalizeEnd","isBomSelected","charAt","collapsedToStart","startParent","endParent","startIndex","endIndex","boundary","editableTextNodes","immutableParent","image","stringify","partition","partitionRange","contents","mapAll","mapped","getAll","predicate","selector","getMarkers","isStartOf","isEndOf","wrapSelectedElements","startEditable","endEditable","isEnd","beforeCaret","afterCaret","search","substring","complexBlocks","IMMUTABALE","IMMUTABALE_MARKER_SELECTOR","immutablesContext","randomId","chars","round","random","updateToolOptions","_initOptions","_toHtml","replaceWith","isDeleting","_cancelDeleting","_cancelTyping","typingInProgress","isTypingKey","backspace","del","cancelDeleting","nextImmutable","closestSelectionLi","closestImmutableLi","_removeImmutable","forwards","commonContainer","_nextNode","startRestorePoint","expandImmutablesIn","startImmutableParent","endImmutableParent","toolsToBeUpdated","serialized","restorePoint","formatter","lockRange","releaseRange","point","createDialog","kendoWindow","toggle","endRestorePoint","outerWidth","_outerWidth","outerHeight","_outerHeight","OVERFLOWANCHOR","focusable","toolNamesByCssClass","OverflowAnchorTool","overflowPopup","_initPopup","_resizeHandler","onResize","groups","basic","links","lists","tablesInsert","tablesAddDelete","tablesMerge","tablesPosition","advanced","fonts","colors","formatPainter","overflowFlaseTools","prepend","dragHandle","effects","minHeight","visible","autoFocus","actions","dragend","_moved","_toggleOverflowStyles","_initOverflowPopup","kendoPopup","anchor","copyAnchorStyles","activate","focusOverflowPopup","isResizable","toolGroupFor","isCustomTool","_editor","expandTools","render","combobox","dropDown","isOpened","stopImmediatePropagation","_attachEvents","_toolName","description","tooltip","inheritText","_appendShortcutSequence","editorElement","editorOffset","editorOptions","_getWindowWidth","_overlaps","box","toolbarWrapper","toolbarWrapperOffset","toolbarWrapperLeft","toolbarWrapperTop","boxOffset","boxOffsetLeft","boxOffsetTop","TABINDEX","localizedText","res","shift","alt","_nativeTools","currentTool","nativeTools","toolElement","groupName","newGroupName","group","toolConfig","groupPosition","endGroup","startGroup","not","updateGroups","angular","unbindResize","popupElement","attachToolsEvents","buttons","enabledButtons","disabledButtons","editorTools","focusableItems","focusElement","currentContainer","move","constrain","ESC","ENTER","SPACEBAR","_executeToolCommand","button","toolname","toCamelCase","lastIndexOf","_immutablesContext","_updateImmutablesState","uiElement","trackImmutables","display","uiData","groupUi","_resize","containerWidth","toolbarWindow","_refreshWidths","_shrink","_stretch","idx","visibleGroups","_groupsWidth","_visibleGroups","eq","_hideGroup","hiddenGroups","_hiddenGroups","_showGroup","sort","a","detach","groupWidth","ViewHtmlCommand","cmd","dialog","center","ref","FormatCommand","FormatTool","MOUSEDOWN_NS","InlineFormatFinder","numberOfSiblings","referenceNode","textNodesCount","elementNodesCount","markerCount","findSuitable","sourceNode","findFormat","InlineFormatter","formatNode","formatNodes","consolidate","outerMostInline","pop","GreedyInlineFormatFinder","greedyProperty","fontAttr","getInlineCssValue","attributeValue","pair","cssIndex","propertyAndValue","getFormatInner","parentsUntil","addBack","toArray","GreedyInlineFormatter","action","InlineFormatTool","DelayedExecutionTool","FontTool","cssAttr","domAttr","initOptions","dataTextField","dataValueField","highlightFirst","widget","newRange","ColorTool","palette","_widget","ColorPicker","closeOnSelect","views","preview","toolIcon","storedRange","_inputFocused","picker","sender","_popup","_value","toCssRgba","fontWeight","fontStyle","HTTP_PROTOCOL","protocolRegExp","endLinkCharsRegExp","LinkFormatFinder","LinkFormatter","markers","UnlinkCommand","LinkCommand","url","_dialogTemplate","_initialText","img","_close","_apply","_keydown","linkUrl","_dialog","textInput","AutoLinkCommand","detectedLink","detectLink","linkMarker","linkRange","_ensureWebProtocol","startNode","traverser","LeftDomTextTraverser","cancelAtNode","DomTextLinkDetection","_hasProtocolPrefix","_prefixWithWebProtocol","UnlinkTool","DomPos","_detectEnd","blank","clone","_detectStart","_isLinkDetected","puntuationOptions","extendOptions","RightDomTextTraverser","_skipStartPuntuation","lastIndexOfRegExp","ii","r","str","DomTextTraverser","cancel","_traverse","edgeNode","subText","splitIndex","BlockFormatFinder","candidate","suitable","f","_resolveListsItems","until","ImmutablesNS","BlockFormatter","ancestor","_handleImmutables","images","imageAttributes","nonImages","applyFormatting","immutableFormat","namedFormat","GreedyBlockFormatter","formatTag","ListFormatter","blockFormatter","BlockFormatTool","listElements","textAlign","float","marginLeft","marginRight","listStylePosition","ListFormatFinder","altAttr","matchesType","isList","unwrapTag","li","isImmutable","containsAny","_parentLists","merge","breakable","findSuitableNode","applyOnSection","section","pushAncestor","listStyleType","lastSection","lastNodes","sections","addLastSection","ul","fragment","ListCommand","ListTool","FormattingTool","toFormattingItem","dot","context","kendoSelectBox","autoWidth","dataItem","toJSON","dataBound","getFormattingValue","n","_ancestor","field","operator","CleanFormatCommand","tagsToClean","clean","listFormatter","unwrapListItem","KEDITORIMAGEURL","KEDITORIMAGETITLE","KEDITORIMAGEWIDTH","KEDITORIMAGEHEIGHT","ImageCommand","removeIEAttributes","onload","onerror","showBrowser","applied","isIE","ImageBrowser","transport","read","_imageBrowser","ev","selected","dialogHeight","loadingOverlay","ImportCommand","_initializeUploadWidget","importOptions","upload","kendoUpload","success","_onUploadSuccess","_onUploadProgress","_onUploadSelect","error","_onUploadError","complete","_onUploadComplete","showFileList","multiple","saveUrl","autoUpload","saveField","validation","allowedExtensions","maxFileSize","getKendoUpload","_trigger","clearAllFiles","_removeLoadingOverlay","response","files","validationErrors","_initLoadingOverlay","eventType","uploadEvent","_iframeWrapper","_container","postProcess","genericCommand","_selectBox","selectbox","initialValue","ExportAsCommand","exportType","postToProxy","generateForm","submit","exportAsOptions","form","method","valueInput","exportTypeInput","fileNameInput","antiForgeryInput","csrf_param","ExportAsTool","changeHandler","displayName","unshift","valueTemplate","_exec","indentDirection","IndentFormatter","parentList","targets","mapImmutables","siblingList","nestedList","getListTypeAttr","targetIndex","styleType","targetNode","listParent","siblings","nextAll","IndentCommand","indentFormatter","OutdentCommand","OutdentTool","isOutdentable","listParentsCount","suitableNodes","ParagraphCommand","_insertMarker","_moveFocus","focusNode","shouldTrim","startInBlock","endInBlock","_blankAfter","paragraph","heading","tableNode","rng","emptyParagraphContent","parentChildrenLength","_insertParagraphAfter","NewLineCommand","filler","kbrParent","oldIE","KEDITORFILEURL","KEDITORFILETEXT","KEDITORFILETITLE","FileCommand","file","FileBrowser","_fileBrowser","ACTIVESTATE","SELECTEDSTATE","SCOPE","ROW","COL","ROWGROUP","COLGROUP","COLSPAN","ROWSPAN","TABLE","THEAD","TBODY","TR","TD","TH","getTouches","columnTemplate","tableFormatFinder","TableCommand","skipCleaners","_tableHtml","columnHtml","rowHeight","Array","insertedTable","PopupTool","popupTemplate","_open","_activate","_toggle","TableWizardTool","TableWizardCommand","insertNewTable","twTool","InsertTableTool","cols","cellWidth","cellHeight","firstCell","lastCell","getOffset","tableFromLocation","floor","clientY","clientX","scrollLeft","offsetWidth","autoApplyNS","_setTableSize","_valid","status","initiallyVisible","selectedRows","selectedColumns","changed","tableSize","TableModificationCommand","_clearColIndexAttr","_findRowSpanCell","_resetElementResizing","_findNextTdInRow","td","lastTd","_adjustColgroups","colgroup","colElements","colgroupElements","numberOfCells","_associateHeaderIds","InsertRowCommand","cellCount","newRow","createdCell","_appendCell","newCell","InsertColumnCommand","columnIndex","_processForColSpan","_resizeCells","selectedCell","colSpanEffect","parsedWidth","unit","calculatedWidth","parseFloat","DeleteRowCommand","rowParent","_focusElement","_handleRowSpanCells","adjacentCell","nextRow","firstRow","before","_reduceRowSpan","rowSpanValue","DeleteColumnCommand","columnCount","_handleColSpanCells","after","_reduceColSpan","colSpanValue","MergeCellsHorizontallyCommand","nextTd","_getColspan","MergeCellsVerticallyCommand","tr","targetRow","bottomTd","_getRowspan","SplitCellCommand","emptyTd","_splitCellHorizontally","_splitCellVertically","_getRowspanValue","_getColspanValue","tdToAdd","colSpanResult","rowSpanResult","TableModificationTool","commandsMap","insert","delete","column","TableFormatCommand","_showResizeHandles","TableFormatTool","isTable","align","cleaners","ScriptCleaner","TabCleaner","MSWordFormatCleaner","WebkitFormatCleaner","HtmlTagsCleaner","HtmlAttrCleaner","HtmlContentCleaner","CustomCleaner","htmlToFragment","_startModification","_inProgress","_endModification","modificationInfo","_contentModification","_removeBomNodes","_onBeforeCopy","oncopy","oncut","_fileToDataURL","blob","deferred","reader","FileReader","File","getAsFile","readAsDataURL","_triggerPaste","_handleImagePaste","clipboardData","originalEvent","_insertImages","when","results","onpaste","clipboardNode","_decoreateClipboardNode","webkit","_moveToCaretPosition","clipboardRange","containers","ondragover","ondrop","dataTransfer","borderWidth","overflow","margin","padding","fontVariant","lineSpacing","lineHeight","nodeOffset","caretOffset","_caretOffset","translate","transform","rangeChanged","isStartTextNode","prevLength","bomNode","splittableParent","applicable","splittable","fragmentsHtml","elm","rangeEnd","focusedTable","siblingNodes","lastSiblingIndex","lastSibling","Cleaner","replacements","customReplacements","junkReplacements","convertFontMatch","$0","$1","closing","family","stripEmptyAnchors","listType","listData","startingSymbol","matchSymbol","symbol","isNumber","trimStartText","_guessUnorderedListStyle","_guessOrderedListStyle","_convertToLi","_checkForBullet","_getHtmlNoBullet","extractListLevels","level","_createList","rootMargin","rootIndex","lastRootLi","isLastRootLi","rootList","blockChildren","lastMargin","levels","acceptedNameTags","listIndex","levelType","removeAttributes","significantStyles","addSignificantStyles","isSignificantCss","removeAttributeNode","createColGroup","convertHeaders","boldedCells","removeParagraphs","paragraphs","removeTextNodes","trs","currentNode","tables","longestRow","titles","removeFormatting","filters","DomCleaner","cleanDom","collectTags","collectAttr","TextContainer","HtmlTextLines","separators","line","lines","inlineBlockText","resetLine","appendText","textContainer","appendInlineBlockText","flashInlineBlockText","endLine","il","il1","jl","jl1","DomEnumerator","preventDown","hasText","enumerator","buildText","getDefaultSeparators","htmlLines","thead","tbody","cleaner","cellText","PREVIOUS_SIBLING","getSibling","tableCells","tableCellsWrappers","inTable","RemoveTableContent","cellsTypes","startCell","endCell","_removeContent","getNext","evt","Event","isDefaultPrevented","deleteSelection","startTyping","_removeBomSpan","textContent","_addCaret","_restoreCaret","_handleDelete","caretPlaceholder","_merge","_cleanBomBefore","_handleBackspace","startAtLi","liIndex","startAtNonFirstLi","rangeStartNode","previousNode","_handleSelection","parentElementOrNode","_surroundFullyContent","_surroundFullySelectedAnchor","toLocaleLowerCase","_join","startImmutable","endImmutable","_moveMarker","_root","dest","_mergeWithTextNode","appendedNode","_isCaret","systemCommandIsInProgress","createUndoCommand","isModifierKey","isSystem","_toSelectableImmutables","_selectEditorBody","isCharacter","String","fromCharCode","modifier","_getShortcutModifier","navigator","platform","toUpperCase","metaKey","found","matchKey","toolKey","isArray","onEndTyping","stopTyping","force","timeout","what","ExportPdfCommand","PrintCommand","CopyFormatCommand","blockStyles","collectStyles","rangeNodes","populateStyles","destination","styleValue","styleKey","attributeKey","styles","nodeStyles","ApplyFormatCommand","removeEmptyElementsFromRange","cleanInlineParents","applyBlockStyles","applyInlineStyles","emptyElements","blockParent","outerWrapper","previousNodes","nextNodes","prevWrapper","nextWrapper","listItems","currentStyle","createdNode","topNode","CopyFormatTool","ApplyFormatTool","global","math","REGEX_NUMBER_IN_PERCENTAGES","REGEX_NUMBER_IN_PIXELS","STRING","inPercentages","ResizingUtils","lowerBound","upperBound","getScrollBarWidth","calculatePercentageRatio","total","inPixels","toPercentages","toPixels","KEY_DOWN","MOUSE_LEAVE","MOUSE_UP","TableElementResizing","_attachEventHandlers","eventNamespace","rootElement","_destroyResizeHandle","rtl","handle","dataAttribute","detectElementBorderHovering","resizingInProgress","resizing","handleOptions","tableElement","resizeHandle","elementBorderHovered","showResizeHandle","_initResizeHandle","setResizeHandlePosition","setResizeHandleDimensions","setResizeHandleDataAttributes","_attachResizeHandleEventHandlers","_initResizable","_hideResizeMarker","markerClass","_destroyResizable","Resizable","onResizeStart","onResizeEnd","_disableKeyboard","setResizeHandleDragPosition","_enableKeyboard","_forceResizing","userEvents","ResizingFactory","resizingName","_destroyResizing","_initResizing","parentTable","resizingType","abs","RESIZE_HANDLE_CLASS","RESIZE_MARKER_CLASS","BODY","COLATTR","COMMA","handleWidth","borderOffset","mousePosition","tableInnerElement","tBodies","scrollTopOffset","scrollLeftOffset","columnWidthOffset","scrollBarWidth","columnOffsetLeft","innerElementOffsetTop","tableHead","tableBody","fullHeight","columnWidth","columnLeftOffset","adjacentColumnWidth","resizeHandleOffsetLeft","handleOffset","newWidth","initialAdjacentColumnWidth","initialColumnWidth","nextColumn","rtlModifier","initialDeltaX","_setTableComputedWidth","_setColumnsComputedWidth","_resizeColumn","_resizeTopAndBottomColumns","_resizeAdjacentColumns","innerElementWidth","currentColumnsWidths","topAndBottomColumns","innerTableElement","deltaWidth","adjacentColumns","_resizeAdjacentColumn","adjacentColumn","handleHeight","rowOffsetLeft","rowOffsetTop","topInnerTableElement","$row","tableTopOffset","resizeHandleOffsetTop","currentRowHeight","initialTableHeight","tableHeadHeight","tableBodyHeight","initialStyleHeight","newRowHeight","_setRowsHeightInPixels","_setTableHeight","_setRowsHeightInPercentages","currentRowsHeights","newHeight","Draggable","DRAG_START","DRAG","DRAG_END","HALF_INSIDE","MOUSE_OVER","MOUSE_OUT","EAST","NORTH","NORTHEAST","NORTHWEST","SOUTH","SOUTHEAST","SOUTHWEST","WEST","ElementResizeHandle","_addStyles","_initDraggable","_initPositioningStrategy","_initDraggingStrategy","resizableElement","_destroyDraggable","_setPosition","_positioningStrategy","getPosition","_onMouseOver","_onMouseOut","HandlePositioningStrategy","_draggable","dragstart","_onDragStart","drag","_onDrag","_onDragEnd","_draggingStrategy","adjustDragDelta","deltaX","deltaY","initialDeltaY","HandleDraggingStrategy","StrategyFactory","_items","register","itemsLength","PositioningStrategyFactory","calculatePosition","handleOffsetPosition","applyHandleOffset","applyScrollOffset","rootLeft","EastPositioningStrategy","NorthPositioningStrategy","NortheastPositioningStrategy","NorthwestPositioningStrategy","SouthPositioningStrategy","SoutheastPositioningStrategy","SouthwestPositioningStrategy","WestPositioningStrategy","DraggingStrategyFactory","adjustment","deltas","xAxisAdjustment","yAxisAdjustment","HorizontalDraggingStrategy","EastDraggingStrategy","WestDraggingStrategy","VerticalDraggingStrategy","NorthDraggingStrategy","SouthDraggingStrategy","HorizontalAndVerticalDraggingStrategy","NorthEastDraggingStrategy","NorthWestDraggingStrategy","SouthEastDraggingStrategy","SouthWestDraggingStrategy","RESIZE_HANDLE_WRAPPER_CLASS","ELEMENT_RESIZING_CLASS","MOUSE_DOWN","ELEMENT_TYPES","WIDTH","HEIGHT","isUndefined","ElementResizing","handles","_destroyResizeHandles","appendHandlesTo","minWidth","_resizeWidth","_resizeHeight","_getMaxDimensionValue","dimension","dimensionLowercase","parentDimension","parentScrollOffset","_initResizeHandles","_bindToResizeHandlesEvents","_onResizeHandleDragStart","_initialElementHeight","_initialElementWidth","_onResizeHandleDrag","_onResizeHandleDragEnd","TableResizing","_hasRowsInPixels","ratioValue","ratioTotalValue","constrainedWidth","styleWidth","currentWidth","parentWidth","maxWidth","_setColumnsWidth","constrainedHeight","styleHeight","currentHeight","parentHeight","maxHeight","hasRowsInPixels","parentColumn","columnsLength","isWidthInPercentages","ImageResizing","_onResizeHandleDragVertical","_onResizeHandleDragHorizontal","_onResizeHandleDragLocked","_getDeltas","initialWidth","initialHeight","MAX_SAFE_INTEGER","hasImg","eventTarget","eventCurrentTarget","isResizeHandleOrChild","tableResizing","cellsFormatFinder","reUnit","COL_INDEX","selectedTable","_sourceTable","_selectedTable","selectedCells","_selectedTableCells","_selectedCells","closeCallback","onDialogClose","parseTable","TableWizardDialog","insertTable","createNewTable","updateTable","_ensureFocusableAfterTable","lastSelectedRow","cellProp","tableProp","tableProperties","_lastInCollection","_deleteTableRows","_addRows","_updateColumns","_updateTableProperties","cellProperties","_updateCellProperties","_updateCaption","_updateHeadersWithThead","_updateHeadersNoThead","_updateHeaderAssociates","_isHeadingRow","_isHeadingCell","cellsWithHeadersAssociated","headingIds","checkHeader","header","headersArray","headersAttr","some","_insertCells","insertCell","createTHead","_createTableRows","createTBody","cellsWithHeaders","_addScopes","initialIndex","cellPropToAll","insertRow","cellsLength","newRowsCount","firstRowLastCell","numberOfColumns","lastCurrentCell","rowColumns","deleteCell","_getStylesData","captionContent","deleteCaption","createCaption","_getAlignmentData","captionAlignment","verticalAlign","_swapToHeaderCells","deleteTHead","_removeScopes","_removeAssociates","headerCols","widthUnit","heightUnit","backgroundColor","bgColor","borderColor","borderCollapse","tStyle","captionClone","tableAlignment","_getAlignment","numberOfHeaderColumns","tableJson","_getUnit","parseTableRows","rowData","cellData","parseCell","cStyle","horizontalOnly","hAlign","vAlign","collection","TableWizardEditTool","numericTextBoxSettings","borderStyles","tableAlignmentDropDownSettings","cellAlignmentDropDownSettings","accessibilityAlignmentDropDownSettings","dialogTemplate","tableData","closeHandler","collectDialogValues","_initTabStripComponent","_initTableViewComponents","_initCellViewComponents","_initAccessibilityViewComponents","components","tabStrip","kendoTabStrip","_collectTableViewValues","_collectCellViewValues","_collectAccessibilityViewValues","tableView","checked","cellView","accessibilityView","_addUnit","_initNumericTextbox","headerColumnsNumeric","currentNumberOfColumnsHeaders","headerRowsNumeric","currentNumberOfRowHeaders","numberOfRows","_initDropDownList","_initTableAlignmentDropDown","_initColorPicker","_initInput","_initBorderStyleDropDown","_initCheckbox","_initCellAlignmentDropDown","_initAccessibilityAlignmentDropDown","_initAssociationDropDown","valuePrimitive","storage","settings","component","kendoNumericTextBox","kendoDropDownList","_setComponentValue","optionLabel","_initAlignmentDropDown","kendoColorPicker","clearButton","_destroyComponents"],"sources":["kendo.editor.js"],"mappings":"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","sourcesContent":["(function (factory) {\n    typeof define === 'function' && define.amd ? define(['kendo.combobox', 'kendo.dropdownlist', 'kendo.resizable', 'kendo.window', 'kendo.colorpicker', 'kendo.imagebrowser', 'kendo.numerictextbox', 'kendo.core', 'kendo.filebrowser', 'kendo.draganddrop', 'kendo.tabstrip'], factory) :\n    factory();\n})((function () {\n    (function(kendo) {\n        var UndoRedoStack = kendo.Observable.extend({\n            init: function(options) {\n                kendo.Observable.fn.init.call(this, options);\n                this.clear();\n            },\n            events: [ \"undo\", \"redo\" ],\n            push: function (command) {\n                this.stack = this.stack.slice(0, this.currentCommandIndex + 1);\n                this.currentCommandIndex = this.stack.push(command) - 1;\n            },\n            undo: function () {\n                if (this.canUndo()) {\n                    var command = this.stack[this.currentCommandIndex--];\n                    command.undo();\n                    this.trigger(\"undo\", { command: command });\n                }\n            },\n            redo: function () {\n                if (this.canRedo()) {\n                    var command = this.stack[++this.currentCommandIndex];\n                    command.redo();\n                    this.trigger(\"redo\", { command: command });\n                }\n            },\n            clear: function() {\n                this.stack = [];\n                this.currentCommandIndex = -1;\n            },\n            canUndo: function () {\n                return this.currentCommandIndex >= 0;\n            },\n            canRedo: function () {\n                return this.currentCommandIndex != this.stack.length - 1;\n            }\n        });\n\n        kendo.deepExtend(kendo, {\n            util: {\n                UndoRedoStack: UndoRedoStack\n            }\n        });\n    })(kendo);\n\n    (function($,undefined$1) {\n\n        // Imports ================================================================\n        var kendo = window.kendo,\n            Class = kendo.Class,\n            Widget = kendo.ui.Widget,\n            os = kendo.support.mobileOS,\n            browser = kendo.support.browser,\n            extend = $.extend,\n            deepExtend = kendo.deepExtend,\n            keys = kendo.keys;\n\n        var SELECT = \"select\";\n        var SELECT_OVERLAY_SELECTOR = \"select.k-select-overlay\";\n        var PLACEHOLDER_CLASS = \"k-placeholder\";\n        var PLACEHOLDER_TAG_ID = \"placeholder\";\n        var REFRESH_INTERVAL = 200;\n        var DEFAULT_LANGUAGE = \"en\";\n\n        // options can be: template (as string), cssClass, title, defaultValue\n        var ToolTemplate = Class.extend({\n            init: function(options) {\n                this.options = options;\n            },\n\n            getHtml: function() {\n                var options = this.options;\n                return kendo.template(options.template, { useWithBlock: false })(options);\n            }\n        });\n\n        var EditorUtils = {\n            editorWrapperTemplate: function () { return '<table cellspacing=\"0\" cellpadding=\"0\" class=\"k-widget k-editor\" role=\"presentation\">' +\n                    '<tbody>' +\n                        '<tr role=\"presentation\"><td class=\"k-editor-toolbar-wrap\" role=\"presentation\"><ul class=\"k-toolbar k-editor-toolbar\" role=\"toolbar\"></ul></td></tr>' +\n                        '<tr><td class=\"k-editable-area k-editor-content\"></td></tr>' +\n                    '</tbody>' +\n                '</table>'; },\n\n            buttonTemplate: function (data) { return \"<button type=\\\"button\\\" tabindex=\\\"0\\\" role=\\\"button\\\" class=\\\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-tool\\\" \" + (data.popup ? \"data-popup\" : \"\") + \" title=\\\"\" + (data.title) + \"\\\" aria-label=\\\"\" + (data.title) + \"\\\">\" +\n                    \"<span class=\\\"\" + (\"k-icon k-i-\" + kendo.toHyphens(data.cssClass.replace(\"k-\", \"\"))) + \"\\\"></span>\" +\n                    \"<span class=\\\"k-tool-text k-button-text\\\">\" + (data.title) + \"</span>\" +\n                '</button>'; },\n\n            iconTextButtonTemplate: function (data) { return \"<button type=\\\"button\\\" tabindex=\\\"0\\\" role=\\\"button\\\" class=\\\"k-i-import k-button k-button-md k-rounded-md k-button-solid k-button-solid-base\\\" \" + (data.popup ? \"data-popup\" : \"\") + \" title=\\\"\" + (data.title) + \"\\\" aria-label=\\\"\" + (data.title) + \"\\\">\" +\n                    \"<span class=\\\"k-button-icon \" + (\"k-icon k-i-\" + kendo.toHyphens(data.cssClass.replace(\"k-\", \"\"))) + \"\\\"></span>\" +\n                    \"<span class=\\\"k-button-text\\\">\" + (data.title) + \"</span>\" +\n                \"</button>\"; },\n\n            tableWizardButtonTemplate: function (data) { return \"<button type=\\\"button\\\" tabindex=\\\"0\\\" role=\\\"button\\\" class=\\\"k-tool k-button k-button-md k-rounded-md k-button-solid k-button-solid-base\\\" \" + (data.popup ? \"data-popup\" : \"\") + \" title=\\\"\" + (data.title) + \"\\\" aria-label=\\\"\" + (data.title) + \"\\\">\" +\n                    \"<span class=\\\"\" + (\"k-icon k-i-\" + kendo.toHyphens(data.cssClass.replace(\"k-\", \"\"))) + \"\\\"></span>\" +\n                    \"<span class=\\\"k-tool-text\\\">\" + (data.title) + \"</span>\" +\n                \"</button>\"; },\n\n            colorPickerTemplate: function (data) { return (\"<input class=\\\"k-colorpicker k-icon k-i-\" + (data.cssClass.replace(\"k-\", \"\")) + \"\\\" />\"); },\n\n            comboBoxTemplate: function (data) { return (\"<select title=\\\"\" + (data.title) + \"\\\" aria-label=\\\"\" + (data.title) + \"\\\" class=\\\"\" + (data.cssClass) + \"\\\"></select>\"); },\n\n            dropDownListTemplate: function (data) { return (\"<span class=\\\"k-editor-dropdown\\\"><select title=\\\"\" + (data.title) + \"\\\" aria-label=\\\"\" + (data.title) + \"\\\" class=\\\"\" + (data.cssClass) + \"\\\"></select></span>\"); },\n\n            separatorTemplate: function () { return '<span class=\"k-separator\"></span>'; },\n\n            overflowAnchorTemplate: function (data) { return \"<button type=\\\"button\\\" tabindex=\\\"0\\\" role=\\\"button\\\" class=\\\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button k-tool k-overflow-anchor\\\" data-popup\" +\n                    \" title=\\\"\" + (data.title) + \"\\\" aria-label=\\\"\" + (data.title) + \"\\\" aria-haspopup=\\\"true\\\" aria-expanded=\\\"false\\\">\" +\n                    \"<span class=\\\"k-icon k-i-more-vertical k-button-icon\\\"></span>\" +\n                \"</button>\"; },\n\n            formatByName: function(name, format) {\n                for (var i = 0; i < format.length; i++) {\n                    if ($.inArray(name, format[i].tags) >= 0) {\n                        return format[i];\n                    }\n                }\n            },\n\n            getToolCssClass: function(name) {\n                var toolCssClassNames = {\n\n                    superscript: \"sup-script\",\n                    subscript: \"sub-script\",\n                    justifyLeft: \"align-left\",\n                    justifyCenter: \"align-center\",\n                    justifyRight: \"align-right\",\n                    justifyFull: \"align-justify\",\n                    insertUnorderedList: \"list-unordered\",\n                    insertOrderedList: \"list-ordered\",\n                    insertUpperRomanList: \"list-roman-upper\",\n                    insertLowerRomanList: \"list-roman-lower\",\n                    \"import\": \"import\",\n                    indent: \"indent-increase\",\n                    outdent: \"indent-decrease\",\n                    createLink: \"link-horizontal\",\n                    unlink: \"unlink-horizontal\",\n                    insertImage: \"image\",\n                    insertFile: \"file-add\",\n                    viewHtml: \"html\",\n                    foreColor: \"foreground-color\",\n                    backColor: \"paint\",\n                    createTable: \"table-insert\",\n                    addColumnLeft: \"table-column-insert-left\",\n                    addColumnRight: \"table-column-insert-right\",\n                    addRowAbove: \"table-row-insert-above\",\n                    addRowBelow: \"table-row-insert-below\",\n                    deleteRow: \"table-row-delete\",\n                    deleteColumn: \"table-column-delete\",\n                    mergeCellsHorizontally: \"cells-merge-horizontally\",\n                    mergeCellsVertically: \"cells-merge-vertically\",\n                    splitCellHorizontally: \"cell-split-horizontally\",\n                    splitCellVertically: \"cell-split-vertically\",\n                    tableWizard: \"table-properties\",\n                    tableWizardInsert: \"table-wizard\",\n                    tableAlignLeft: \"table-position-left\",\n                    tableAlignCenter: \"table-position-center\",\n                    tableAlignRight: \"table-position-right\",\n                    cleanFormatting: \"clear-css\",\n                    copyFormat: \"copy-format\",\n                    applyFormat: \"apply-format\"\n                };\n\n                var cssClass = toolCssClassNames[name];\n                if (cssClass) {\n                    return cssClass;\n                }\n                return name;\n            },\n\n            registerTool: function(toolName, tool) {\n                var toolOptions = tool.options;\n                if (toolOptions && toolOptions.template) {\n                    toolOptions.template.options.cssClass = \"k-\" + EditorUtils.getToolCssClass(toolName);\n                }\n\n                if (!tool.name) {\n                    tool.options.name = toolName;\n                    tool.name = toolName.toLowerCase();\n                }\n\n                Editor.defaultTools[toolName] = tool;\n            },\n\n            registerFormat: function(formatName, format) {\n                Editor.fn.options.formats[formatName] = format;\n            },\n\n            cacheComments: function(content, comments) {\n                for (var index in comments) {\n                    content = content.replace(comments[index], \"{\" + index + \"}\");\n                }\n                return content;\n            },\n\n            retrieveComments: function(content, comments) {\n                for (var index in comments) {\n                    content = content.replace(\"{\" + index + \"}\", comments[index]);\n                }\n                return content;\n            }\n        };\n\n        var messages = {\n            bold: \"Bold\",\n            italic: \"Italic\",\n            underline: \"Underline\",\n            strikethrough: \"Strikethrough\",\n            superscript: \"Superscript\",\n            subscript: \"Subscript\",\n            justifyCenter: \"Center text\",\n            justifyLeft: \"Align text left\",\n            justifyRight: \"Align text right\",\n            justifyFull: \"Justify\",\n            insertUnorderedList: \"Insert unordered list\",\n            insertOrderedList: \"Insert ordered list\",\n            indent: \"Indent\",\n            outdent: \"Outdent\",\n            createLink: \"Insert hyperlink\",\n            unlink: \"Remove hyperlink\",\n            insertImage: \"Insert image\",\n            insertFile: \"Insert file\",\n            insertHtml: \"Insert HTML\",\n            viewHtml: \"View HTML\",\n            fontName: \"Select font family\",\n            fontNameInherit: \"(inherited font)\",\n            fontSize: \"Select font size\",\n            fontSizeInherit: \"(inherited size)\",\n            formatBlock: \"Format\",\n            formatting: \"Format\",\n            foreColor: \"Color\",\n            backColor: \"Background color\",\n            style: \"Styles\",\n            emptyFolder: \"Empty Folder\",\n            editAreaTitle: \"Editable area. Press F10 for toolbar.\",\n            uploadFile: \"Upload\",\n            overflowAnchor: \"More tools\",\n            orderBy: \"Arrange by:\",\n            orderBySize: \"Size\",\n            orderByName: \"Name\",\n            invalidFileType: \"The selected file \\\"{0}\\\" is not valid. Supported file types are {1}.\",\n            deleteFile: 'Are you sure you want to delete \"{0}\"?',\n            overwriteFile: 'A file with name \"{0}\" already exists in the current directory. Do you want to overwrite it?',\n            directoryNotFound: \"A directory with this name was not found.\",\n            imageWebAddress: \"Web address\",\n            imageAltText: \"Alternate text\",\n            imageWidth: \"Width (px)\",\n            imageHeight: \"Height (px)\",\n            fileWebAddress: \"Web address\",\n            fileTitle: \"Title\",\n            fileText: \"Text\",\n            linkWebAddress: \"Web address\",\n            linkText: \"Text\",\n            linkToolTip: \"ToolTip\",\n            linkOpenInNewWindow: \"Open link in new window\",\n            dialogUpdate: \"Update\",\n            dialogInsert: \"Insert\",\n            dialogOk: \"Ok\",\n            dialogCancel: \"Cancel\",\n            cleanFormatting: \"Clean formatting\",\n            createTable: \"Create a table\",\n            createTableHint: \"Create a {0} x {1} table\",\n            addColumnLeft: \"Add column on the left\",\n            addColumnRight: \"Add column on the right\",\n            addRowAbove: \"Add row above\",\n            addRowBelow: \"Add row below\",\n            deleteRow: \"Delete row\",\n            deleteColumn: \"Delete column\",\n            mergeCellsHorizontally: \"Merge cells horizontally\",\n            mergeCellsVertically: \"Merge cells vertically\",\n            splitCellHorizontally: \"Split cells horizontally\",\n            splitCellVertically: \"Split cells vertically\",\n            tableAlignLeft: \"Table Align Left\",\n            tableAlignCenter: \"Table Align Center\",\n            tableAlignRight: \"Table Align Right\",\n            tableWizard: \"Table Wizard\",\n            tableTab: \"Table\",\n            cellTab: \"Cell\",\n            accessibilityTab: \"Accessibility\",\n            caption: \"Caption\",\n            summary: \"Summary\",\n            width: \"Width\",\n            height: \"Height\",\n            units: \"Units\",\n            cellSpacing: \"Cell Spacing\",\n            cellPadding: \"Cell Padding\",\n            cellMargin: \"Cell Margin\",\n            alignment: \"Alignment\",\n            background: \"Background\",\n            cssClass: \"CSS Class\",\n            id: \"ID\",\n            border: \"Border\",\n            borderStyle: \"Border Style\",\n            collapseBorders: \"Collapse borders\",\n            wrapText: \"Wrap text\",\n            associateCellsWithHeaders: \"Associate headers\",\n            alignLeft: \"Align Left\",\n            alignCenter: \"Align Center\",\n            alignRight: \"Align Right\",\n            alignLeftTop: \"Align Left Top\",\n            alignCenterTop: \"Align Center Top\",\n            alignRightTop: \"Align Right Top\",\n            alignLeftMiddle: \"Align Left Middle\",\n            alignCenterMiddle: \"Align Center Middle\",\n            alignRightMiddle: \"Align Right Middle\",\n            alignLeftBottom: \"Align Left Bottom\",\n            alignCenterBottom: \"Align Center Bottom\",\n            alignRightBottom: \"Align Right Bottom\",\n            alignRemove: \"Remove Alignment\",\n            columns: \"Columns\",\n            rows: \"Rows\",\n            selectAllCells: \"Select All Cells\",\n            exportAs: \"Export As\",\n            \"import\": \"Import\",\n            print: \"Print\",\n            headerRows: \"Header Rows\",\n            headerColumns: \"Header Cols\",\n            tableSummaryPlaceholder: \"Summary attribute is not HTML5 compatible.\",\n            associateNone: \"None\",\n            associateScope: \"Associate using 'scope' attribute\",\n            associateIds: \"Associate using Ids\",\n            copyFormat: \"Copy format\",\n            applyFormat: \"Apply format\",\n            borderNone: \"None\",\n            undo: \"Undo\",\n            redo: \"Redo\"\n        };\n\n        var supportedContentEditable = typeof(document.documentElement.contentEditable) != 'undefined';\n\n        var toolGroups = {\n            basic: [ \"bold\", \"italic\", \"underline\" ],\n            alignment: [ \"justifyLeft\", \"justifyCenter\", \"justifyRight\" ],\n            lists: [ \"insertUnorderedList\", \"insertOrderedList\" ],\n            indenting: [ \"indent\", \"outdent\" ],\n            formatPainter: [ \"copyFormat\", \"applyFormat\" ],\n            links: [ \"createLink\", \"unlink\" ],\n            tables: [ \"tableWizard\", \"createTable\", \"addColumnLeft\", \"addColumnRight\", \"addRowAbove\", \"addRowBelow\", \"deleteRow\", \"deleteColumn\", \"mergeCellsHorizontally\", \"mergeCellsVertically\", \"splitCellHorizontally\", \"splitCellVertically\", \"tableAlignLeft\", \"tableAlignCenter\", \"tableAlignRight\" ]\n        };\n\n        var Editor = Widget.extend({\n            init: function(element, options) {\n                var that = this,\n                    value,\n                    editorNS = kendo.ui.editor,\n                    toolbarContainer,\n                    toolbarOptions,\n                    type, comments;\n                var domElement;\n                var dom = editorNS.Dom;\n\n                /* suppress initialization in devices w/o proper contenteditable support */\n                if (!supportedContentEditable) {\n                    return;\n                }\n\n                Widget.fn.init.call(that, element, options);\n\n                that.options = deepExtend({}, that.options, options);\n                that.options.tools = that.options.tools.slice();\n\n                element = that.element;\n                domElement = element[0];\n\n                type = dom.name(domElement);\n\n                this._registerHandler(\n                    element.closest(\"form\"), \"submit\", that.update.bind(that, undefined$1)\n                );\n\n                toolbarOptions = extend({}, that.options);\n                toolbarOptions.editor = that;\n\n                if (type == \"textarea\") {\n                    that._wrapTextarea();\n\n                    toolbarContainer = that.wrapper.find(\".k-editor-toolbar\");\n\n                    if (domElement.id) {\n                        toolbarContainer.attr(\"aria-controls\", domElement.id);\n                    }\n                } else {\n                    that.element.attr(\"contenteditable\", true).addClass(\"k-widget k-editor k-editor-inline\");\n\n                    toolbarOptions.popup = true;\n\n                    toolbarContainer = $('<ul class=\"k-toolbar k-editor-toolbar\" role=\"toolbar\" />').insertBefore(element);\n                }\n\n                that.toolbar = new editorNS.Toolbar(toolbarContainer[0], toolbarOptions);\n\n                that.toolbar.bindTo(that);\n\n                if (type == \"textarea\") {\n                    setTimeout(function() {\n                        var heightStyle = that.wrapper[0].style.height;\n                        var expectedHeight = parseInt(heightStyle, 10);\n                        var actualHeight = that.wrapper.height();\n                        if (heightStyle.indexOf(\"px\") > 0 && !isNaN(expectedHeight) && actualHeight > expectedHeight) {\n                            that.wrapper.height(expectedHeight - (actualHeight - expectedHeight));\n                        }\n                    });\n                }\n\n                that._resizable();\n                that._initializeContentElement(that);\n\n                that.keyboard = new editorNS.Keyboard([\n                    new editorNS.BackspaceHandler(that),\n                    new editorNS.TypingHandler(that),\n                    new editorNS.SystemHandler(that),\n                    new editorNS.SelectAllHandler(that)\n                ]);\n\n                that.clipboard = new editorNS.Clipboard(this);\n\n                that.undoRedoStack = new kendo.util.UndoRedoStack();\n\n                if (options && options.value) {\n                    value = options.value;\n                } else if (that.textarea) {\n                    // indented HTML introduces problematic ranges in IE\n                    value = domElement.value;\n\n                    if (!value.replace(/\\s/g, '').length) {\n                        value = value.replace(/\\s/g, '');\n                    }\n\n                    // revert encoding of value when content is fetched from cache\n                    if (that.options.encoded && domElement.defaultValue && domElement.defaultValue.trim().length) {\n                        value = domElement.defaultValue;\n                    }\n\n                    var deserializedRoot = editorNS.Serializer.htmlToDom(value, $(\"<div></div>\")[0], that.options.deserialization);\n                    comments = dom.getAllComments(deserializedRoot);\n                    value = EditorUtils.cacheComments(value, comments);\n                    value = value.replace(/[\\r\\n\\v\\f\\t ]+/ig, \" \");\n                    value = EditorUtils.retrieveComments(value, comments);\n                } else {\n                    value = domElement.innerHTML;\n                }\n\n                that.value(value || '\\ufeff');\n\n                // using $.proxy here will break #5337\n                this._registerHandler(document, {\n                    \"mousedown\": function() { that._endTyping(); },\n                    \"mouseup\": function(e) { that._mouseup(e); }\n                });\n\n                that._initializeImmutables();\n\n                if (type == \"textarea\") {\n                    that._ariaLabel(that.wrapper.find(\"iframe\"));\n                }\n\n                that.toolbar.resize();\n\n                kendo.notify(that);\n            },\n\n            setOptions: function(options) {\n                var editor = this;\n\n                Widget.fn.setOptions.call(editor, options);\n                if (options.tools) {\n                    editor.toolbar.bindTo(editor);\n                }\n\n                this._initializePlaceholder();\n            },\n\n            _togglePlaceholder: function(show) {\n                var that = this,\n                    body = that.body,\n                    $body = $(body),\n                    placeholder = that.options.placeholder;\n\n                if (!that.textarea || !placeholder) {\n                    return;\n                }\n\n                $body.attr('aria-label', function() {\n                    return show ? placeholder : \"\";\n                });\n\n                $body.toggleClass(PLACEHOLDER_CLASS, show);\n            },\n\n            _endTyping: function() {\n                var keyboard = this.keyboard;\n\n                try {\n                    if (keyboard.isTypingInProgress()) {\n                        keyboard.endTyping(true);\n                        this.saveSelection();\n                    }\n                } catch (e) { }\n            },\n\n            _selectionChange: function() {\n                this._selectionStarted = false;\n                this.saveSelection();\n                this.trigger(\"select\", {});\n            },\n\n            _resizable: function() {\n                var resizable = this.options.resizable;\n                var isResizable = $.isPlainObject(resizable) ? (resizable.content === undefined$1 || resizable.content === true) : resizable;\n\n                if (isResizable && this.textarea) {\n                    var draggableElement = $(\"<div class='k-resize-handle'><span class='k-icon k-i-arrow-45-down-right'></span></div>\")\n                        .insertAfter(this.textarea);\n\n                    this.wrapper.addClass('k-resizable');\n\n                    this.wrapper.kendoResizable(extend({}, this.options.resizable, {\n                        draggableElement: draggableElement,\n                        start: function(e) {\n                            var editor = this.editor = $(e.currentTarget).closest(\".k-editor\");\n                            this.initialSize = editor.height();\n                            editor.find(\"td\").last().append(\"<div class='k-overlay' />\");\n                        },\n                        resize: function(e) {\n                            var delta = e.y.initialDelta;\n                            var newSize = this.initialSize + delta;\n                            var min = this.options.min || 0;\n                            var max = this.options.max || Infinity;\n\n                            newSize = Math.min(max, Math.max(min, newSize));\n\n                            this.editor.height(newSize);\n                        },\n                        resizeend: function() {\n                            this.editor.find(\".k-overlay\").remove();\n                            this.editor = null;\n                        }\n                    }));\n\n                    if (kendo.support.mobileOS.ios) {\n                        var resizableWidget = this.wrapper.getKendoResizable();\n                        resizableWidget.draggable.options.ignore = SELECT_OVERLAY_SELECTOR;\n                    }\n                }\n            },\n\n            _initializeElementResizing: function() {\n                var editor = this;\n\n                kendo.ui.editor.ElementResizingFactory.current.create(editor);\n\n                editor._showElementResizeHandlesProxy = editor._showElementResizeHandles.bind(editor);\n                editor.bind(SELECT, editor._showElementResizeHandlesProxy);\n            },\n\n            _destroyElementResizing: function() {\n                var editor = this;\n                var elementResizing = editor.elementResizing;\n\n                if (elementResizing) {\n                    elementResizing.destroy();\n                    editor.elementResizing = null;\n                }\n\n                if (editor._showElementResizeHandlesProxy) {\n                    editor.unbind(SELECT, editor._showElementResizeHandlesProxy);\n                }\n            },\n\n            _showElementResizeHandles: function() {\n                var editor = this;\n                var elementResizing = editor.elementResizing;\n\n                if (elementResizing && elementResizing.element && elementResizing.element.parentNode) {\n                    elementResizing.showResizeHandles();\n                } else if (elementResizing && (!elementResizing.element || !elementResizing.element.parentNode)) {\n                    editor._destroyElementResizing();\n                }\n            },\n\n            _initializeColumnResizing: function() {\n                kendo.ui.editor.ColumnResizing.create(this);\n            },\n\n            _destroyColumnResizing: function() {\n                var editor = this;\n\n                if (editor.columnResizing) {\n                    editor.columnResizing.destroy();\n                    editor.columnResizing = null;\n                }\n            },\n\n            _initializeRowResizing: function() {\n                kendo.ui.editor.RowResizing.create(this);\n            },\n\n            _destroyRowResizing: function() {\n                var editor = this;\n\n                if (editor.rowResizing) {\n                    editor.rowResizing.destroy();\n                    editor.rowResizing = null;\n                }\n            },\n\n            _wrapTextarea: function() {\n                var that = this,\n                    textarea = that.element,\n                    w = textarea[0].style.width,\n                    h = textarea[0].style.height,\n                    template = EditorUtils.editorWrapperTemplate(),\n                    editorWrap = $(template).insertBefore(textarea),\n                    editArea = editorWrap.find(\".k-editable-area\");\n\n                editorWrap.css({\n                    \"width\": w,\n                    \"height\": h\n                });\n\n                textarea.attr(\"autocomplete\", \"off\")\n                    .appendTo(editArea).addClass(\"k-content k-raw-content\").css(\"display\", \"none\");\n\n                that.textarea = textarea;\n                that.wrapper = editorWrap;\n            },\n\n            _createContentElement: function(stylesheets) {\n                var editor = this;\n                var iframe, wnd, doc;\n                var textarea = editor.textarea;\n                var specifiedDomain = editor.options.domain;\n                var domain = specifiedDomain || document.domain;\n                var domainScript = \"\";\n                var src = 'javascript:\"\"';\n                var lang = \"\";\n\n                textarea.hide();\n\n                iframe = $(\"<iframe />\", { title: editor.options.messages.editAreaTitle, frameBorder: \"0\" })[0];\n\n                $(iframe)\n                    .css(\"display\", \"\")\n                    .addClass(\"k-content k-iframe\")\n                    .attr(\"tabindex\", textarea[0].tabIndex)\n                    .insertBefore(textarea);\n\n                // automatically relax same-origin policy if document.domain != location.hostname,\n                // or forcefully relax if options.domain is specified (for document.domain = document.domain scenario)\n                if (specifiedDomain || domain != location.hostname) {\n                    // relax same-origin policy\n                    domainScript = \"<script>document.domain=\\\"\" + domain + \"\\\"</script>\";\n                    src = \"javascript:document.write('\" + domainScript + \"')\";\n                    iframe.src = src;\n                }\n\n                if (!iframe.src) {\n                    iframe.src = \"\";\n                }\n\n                wnd = iframe.contentWindow || iframe;\n                doc = wnd.document || iframe.contentDocument;\n\n                $(iframe).one(\"load\", function() {\n                    editor.toolbar.decorateFrom(doc.body);\n                });\n\n                lang = document.getElementsByTagName(\"html\")[0].getAttribute(\"lang\") || DEFAULT_LANGUAGE;\n\n                doc.open();\n                doc.write(\n                    \"<!DOCTYPE html><html lang='\" + lang + \"'><head>\" +\n                    \"<meta charset='utf-8' />\" +\n                    \"<title>Kendo UI Editor content</title>\" +\n                    \"<style>\" +\n                        \"html{padding:0;margin:0;height:100%;min-height:100%;cursor:text;}\" +\n                        \"body{padding:0;margin:0;}\" +\n                        \"body{box-sizing:border-box;font-size:12px;font-family:Verdana,Geneva,sans-serif;margin-top:-1px;padding:5px .4em 0;\" +\n                        \"word-wrap: break-word;-webkit-nbsp-mode: space;-webkit-line-break: after-white-space;\" +\n                        (kendo.support.isRtl(textarea) ? \"direction:rtl;\" : \"\") +\n                        (os.ios ? \"word-break:keep-all;\" : \"\") +\n                        (browser.edge || browser.chrome ? \"height:100%;\" : \"\") +\n                        \"}\" +\n                        \"h1{font-size:2em;margin:.67em 0}h2{font-size:1.5em}h3{font-size:1.16em}h4{font-size:1em}h5{font-size:.83em}h6{font-size:.7em}\" +\n                        \"p{margin:0 0 1em;}.k-marker{display:none;}.k-paste-container,.Apple-style-span{position:absolute;left:-10000px;width:1px;height:1px;overflow:hidden}\" +\n                        \"ul,ol{padding-left:2.5em}\" +\n                        \"span{-ms-high-contrast-adjust:none;}\" +\n                        \"a{color:#00a}\" +\n                        \"code{font-size:1.23em}\" +\n                        \"telerik\\\\3Ascript{display: none;}\" +\n                        \".k-table{width:100%;border-spacing:0;margin: 0 0 1em;}\" +\n                        \".k-table td{min-width:1px;padding:.2em .3em;}\" +\n                        \".k-table,.k-table td{outline:0;border: 1px dotted #ccc;}\" +\n                        \".k-table th{outline:0;border: 1px dotted #999;}\" +\n                        \".k-table p{margin:0;padding:0;}\" +\n                        \".k-column-resize-handle-wrapper {position: absolute; height: 10px; width:10px; cursor: col-resize; z-index: 2;}\" +\n                        \".k-column-resize-handle {width: 100%; height: 100%;}\" +\n                        \".k-column-resize-handle > .k-column-resize-marker {width:2px; height:100%; margin:0 auto; background-color:#00b0ff; display:none; opacity:0.8;}\" +\n                        \".k-row-resize-handle-wrapper {position: absolute; cursor: row-resize; z-index:2; width: 10px; height: 10px;}\" +\n                        \".k-row-resize-handle {display: table; width: 100%; height: 100%;}\" +\n                        \".k-row-resize-marker-wrapper{display: table-cell; height:100%; width:100%; margin:0; padding:0; vertical-align: middle;}\" +\n                        \".k-row-resize-marker{margin: 0; padding:0; width:100%; height:2px; background-color: #00b0ff; opacity:0.8; display:none;}\" +\n                        \".k-element-resize-handle-wrapper {position: absolute; background-color: #fff; border: 1px solid #000; z-index: 100; width: 5px; height: 5px;}\" +\n                        \".k-element-resize-handle {width: 100%; height: 100%;}\" +\n                        \".k-element-resize-handle.k-resize-east{cursor:e-resize;}\" +\n                        \".k-element-resize-handle.k-resize-north{cursor:n-resize;}\" +\n                        \".k-element-resize-handle.k-resize-northeast{cursor:ne-resize;}\" +\n                        \".k-element-resize-handle.k-resize-northwest{cursor:nw-resize;}\" +\n                        \".k-element-resize-handle.k-resize-south{cursor:s-resize;}\" +\n                        \".k-element-resize-handle.k-resize-southeast{cursor:se-resize;}\" +\n                        \".k-element-resize-handle.k-resize-southwest{cursor:sw-resize;}\" +\n                        \".k-element-resize-handle.k-resize-west{cursor:w-resize;}\" +\n                        \".k-table.k-element-resizing{opacity:0.6;}\" +\n                        \".k-placeholder{color:grey}\" +\n                        \"k\\\\:script{display:none;}\" +\n                    \"</style>\" +\n                    domainScript +\n                    $.map(stylesheets, function(href) {\n                        return \"<link rel='stylesheet' href='\" + href + \"'>\";\n                    }).join(\"\") +\n                    \"</head><body autocorrect='off' contenteditable='true'></body></html>\"\n                );\n                doc.close();\n\n                return wnd;\n            },\n\n            _blur: function() {\n                var textarea = this.textarea;\n                var old = textarea ? textarea.val() : this._oldValue;\n                var value = this.options.encoded ? this.encodedValue() : this.value();\n\n                this.update();\n\n                if (textarea) {\n                    textarea.trigger(\"blur\");\n                }\n\n                if (value != old) {\n                    this.trigger(\"change\");\n                    if (textarea) {\n                        textarea.trigger(\"change\");\n                    }\n                }\n            },\n\n            _spellCorrect: function(editor) {\n                var beforeCorrection;\n                var falseTrigger = false;\n\n                this._registerHandler(editor.body, {\n                    \"contextmenu\": function() {\n                        editor.one(\"select\", function() {\n                            beforeCorrection = null;\n                        });\n\n                        editor._spellCorrectTimeout = setTimeout(function() {\n                            beforeCorrection = new kendo.ui.editor.RestorePoint(editor.getRange(), editor.body);\n                            falseTrigger = false;\n                        }, 10);\n                    },\n                    \"input\": function() {\n                        if (!beforeCorrection) {\n                            return;\n                        }\n\n                        if (kendo.support.browser.mozilla && !falseTrigger) {\n                            falseTrigger = true;\n                            return;\n                        }\n\n                        kendo.ui.editor._finishUpdate(editor, beforeCorrection);\n                    }\n                });\n            },\n\n            _registerHandler: function(element, type, handler) {\n                var editor = this;\n                var NS = \".kendoEditor\";\n                var eventNames;\n                var i;\n\n                element = $(element);\n\n                if (!this._handlers) {\n                    this._handlers = [];\n                }\n\n                if (element.length) {\n                    if ($.isPlainObject(type)) {\n                        for (var t in type) {\n                            if (type.hasOwnProperty(t)) {\n                                this._registerHandler(element, t, type[t]);\n                            }\n                        }\n                    } else {\n                        //map the original event to handle interaction on mobile platforms\n                        eventNames = kendo.applyEventMap(type).split(\" \");\n\n                        for (i = 0; i < eventNames.length; i++) {\n                            editor._handlers.push({\n                                element: element,\n                                type: eventNames[i] + NS,\n                                handler: handler\n                            });\n\n                            element.on(eventNames[i] + NS, handler);\n                        }\n                    }\n                }\n            },\n\n            _deregisterHandlers: function() {\n                var handlers = this._handlers;\n\n                for (var i = 0; i < handlers.length; i++) {\n                    var h = handlers[i];\n                    h.element.off(h.type, h.handler);\n                }\n\n                this._handlers = [];\n            },\n\n            _initializeContentElement: function() {\n                var editor = this;\n                var doc;\n                var blurTrigger;\n                var mousedownTrigger;\n\n                if (editor.textarea) {\n                    editor.window = editor._createContentElement(editor.options.stylesheets);\n                    doc = editor.document = editor.window.contentDocument || editor.window.document;\n\n                    // Ensure that body exists as various Firefox plugins can cause a delay of the body creation\n                    // https://github.com/telerik/kendo-ui-core/issues/3515\n                    if (!doc.body) {\n                        var body = doc.createElement(\"body\");\n                        body.setAttribute(\"contenteditable\", \"true\");\n                        body.setAttribute(\"autocorrect\", \"off\");\n                        doc.getElementsByTagName(\"html\")[0].appendChild(body);\n\n                        var interval = setInterval(function() {\n                            if ($(editor.document).find(\"body\").length > 1) {\n                                $(editor.document).find(\"body\").last().remove();\n                                window.clearInterval(interval);\n                            }\n                        },10);\n                    }\n\n                    editor.body = doc.body;\n\n                    blurTrigger = editor.window;\n                    mousedownTrigger = doc;\n\n                    this._registerHandler(doc, \"mouseup\", this._mouseup.bind(this));\n                } else {\n                    editor.window = window;\n                    doc = editor.document = document;\n                    editor.body = editor.element[0];\n\n                    blurTrigger = editor.body;\n                    mousedownTrigger = editor.body;\n\n                    editor.toolbar.decorateFrom(editor.body);\n                }\n\n                this._registerHandler(blurTrigger, \"blur\", this._blur.bind(this));\n                editor._registerHandler(mousedownTrigger, \"down\", editor._mousedown.bind(editor));\n\n                try {\n                    doc.execCommand(\"enableInlineTableEditing\", null, false);\n                } catch (e) { }\n\n                if (kendo.support.touch) {\n                    this._registerHandler(doc, {\n                        \"keydown\": function() {\n                            // necessary in iOS when touch events are bound to the page\n                            if (kendo._activeElement() != doc.body) {\n                                editor.window.focus();\n                            }\n                        }\n                    });\n                }\n\n                this._initializePlaceholder();\n\n                this._spellCorrect(editor);\n\n                this._registerHandler(editor.document, {\n                    \"mouseover dragenter\": function(e) {\n                        var height = $(editor.body).height();\n                        var htmlHeight = $(editor.body.parentElement).height();\n\n                        if (htmlHeight > height && e.target.nodeName.toLowerCase() === \"html\") {\n                            editor._cachedHeight = \"\" + editor.body.style.height;\n                            editor.body.style.height = \"100%\";\n                        }\n                    },\n                    \"mouseout dragleave drop contextmenu\": function(e) {\n                        var restoreHeight = function() {\n                            if (editor._cachedHeight !== undefined$1 && e.target === editor.body) {\n                                editor.body.style.height = editor._cachedHeight;\n                                delete editor._cachedHeight;\n                            }\n                        };\n\n                        if (e.type === \"contextmenu\") {\n                            setTimeout(function() {\n                                restoreHeight();\n                            }, 10);\n                        } else {\n                            restoreHeight();\n                        }\n\n                    }\n                });\n\n                this._registerHandler(editor.body, {\n                    \"keydown\": function(e) {\n                        var range;\n\n                        if ((e.keyCode === keys.BACKSPACE || e.keyCode === keys.DELETE) && editor.body.getAttribute(\"contenteditable\") !== \"true\") {\n                            return false;\n                        }\n\n                        if (e.keyCode === keys.F10) {\n                            // Handling with timeout to avoid the default IE menu\n                            setTimeout(editor.toolbar.focus.bind(editor.toolbar), 100);\n                            editor.toolbar.preventPopupHide = true;\n                            e.preventDefault();\n                            return;\n                        } else if (e.keyCode == keys.LEFT || e.keyCode == keys.RIGHT) {\n                            // skip bom nodes when navigating with arrows\n                            range = editor.getRange();\n                            var left = e.keyCode == keys.LEFT;\n                            var container = range[left ? \"startContainer\" : \"endContainer\"];\n                            var offset = range[left ? \"startOffset\" : \"endOffset\"];\n                            var direction = left ? -1 : 1;\n\n                            var next = offset + direction;\n                            var nextChar = left ? next : offset;\n\n                            if (container.nodeType == 3 && container.nodeValue[nextChar] == \"\\ufeff\") {\n                                range.setStart(container, next);\n                                range.collapse(true);\n                                editor.selectRange(range);\n                            }\n                        }\n\n                        var tools = editor.toolbar.tools;\n                        var toolName = editor.keyboard.toolFromShortcut(tools, e);\n                        var toolOptions = toolName ? tools[toolName].options : {};\n                        if (toolName && !toolOptions.keyPressCommand) {\n                            e.preventDefault();\n\n                            if (!/^(undo|redo)$/.test(toolName)) {\n                                editor.keyboard.endTyping(true);\n                            }\n\n                            editor.trigger(\"keydown\", e);\n                            editor.exec(toolName);\n                            editor._runPostContentKeyCommands(e);\n\n                            return false;\n                        }\n\n                        editor.keyboard.clearTimeout();\n\n                        editor.keyboard.keydown(e);\n                    },\n                    \"keypress\": function(e) {\n                        setTimeout(function() {\n                            editor._runPostContentKeyCommands(e);\n                            editor._showElementResizeHandles();\n                        }, 0);\n                    },\n                    \"keyup\": function(e) {\n                        var selectionCodes = [\n                           keys.BACKSPACE,\n                           keys.TAB,\n                           keys.PAGEUP,\n                           keys.PAGEDOWN,\n                           keys.END,\n                           keys.HOME,\n                           keys.LEFT,\n                           keys.UP,\n                           keys.RIGHT,\n                           keys.DOWN,\n                           keys.INSERT,\n                           keys.DELETE\n                        ];\n\n                        if ($.inArray(e.keyCode, selectionCodes) > -1 || (e.keyCode == 65 && e.ctrlKey && !e.altKey && !e.shiftKey)) {\n                            window.clearTimeout(this._refreshInterval);\n                            this._refreshInterval = window.setTimeout(function() {\n                                editor._selectionChange();\n                            }, REFRESH_INTERVAL);\n                        }\n\n                        editor.keyboard.keyup(e);\n                    },\n                    \"click\": function(e) {\n                        var dom = kendo.ui.editor.Dom, range;\n\n                        if (dom.name(e.target) === \"img\") {\n                            range = editor.createRange();\n                            range.selectNode(e.target);\n                            editor.selectRange(range);\n                        }\n                    },\n                    \"cut copy paste drop dragover\": function(e) {\n                        editor.clipboard[\"on\" + e.type](e);\n                    },\n                    \"focusin\": function() {\n                        if (editor.body.hasAttribute(\"contenteditable\")) {\n                            $(this).addClass(\"k-active\");\n                            editor.toolbar.show();\n                            editor._togglePlaceholder(false);\n                        }\n                    },\n                    \"focusout\": function() {\n                        setTimeout(function() {\n                            var active = kendo._activeElement();\n                            var body = editor.body;\n                            var toolbar = editor.toolbar;\n\n                            if (toolbar.options.popup) {\n                                var toolbarContainerElement = toolbar.window.element.get(0);\n                                if (toolbarContainerElement && !($.contains(toolbarContainerElement, active) || toolbarContainerElement == active)) {\n                                    toolbar.preventPopupHide = false;\n                                }\n                            }\n\n                            if (active != body && !$.contains(body, active) && !toolbar.focused() && !toolbar.preventPopupHide) {\n                                $(body).removeClass(\"k-active\");\n                                toolbar.hide();\n                            }\n\n                            editor._togglePlaceholder(!editor.value().trim());\n                        }, 10);\n                    }\n                });\n\n                editor._initializeColumnResizing();\n                editor._initializeRowResizing();\n                editor._initializeElementResizing();\n            },\n\n            _initializePlaceholder: function() {\n                var that = this,\n                    placeholder = that.options.placeholder,\n                    style, $head;\n\n                if (!that.textarea || !placeholder) {\n                    return;\n                }\n\n                style = \"<style id='\" + PLACEHOLDER_TAG_ID + \"'>.\" +\n                            PLACEHOLDER_CLASS + \":before { content: '\" + placeholder + \"'; }\" +\n                        \"</style>\";\n\n                $head = $(that.document.head);\n                $head.find(\"#\" + PLACEHOLDER_TAG_ID).remove();\n                $head.append(style);\n\n                that._togglePlaceholder(!that.value().trim());\n            },\n\n            _initializeImmutables: function() {\n                var that = this,\n                    editorNS = kendo.ui.editor;\n\n                if (that.options.immutables) {\n                    that.immutables = new editorNS.Immutables(that);\n                }\n            },\n\n            _mousedown: function(e) {\n                var editor = this;\n                editor._selectionStarted = true;\n\n                if ($(editor.body).parents('.k-window').length) {\n                    e.stopPropagation();\n                }\n\n                // handle middle-click and ctrl-click on links\n                if (browser.gecko) {\n                    return;\n                }\n\n                var target = $(e.target).closest(\"a[href]\");\n\n                if ((e.which == 2 || (e.which == 1 && e.ctrlKey)) && target && target.is(\"a[href]\")) {\n                    window.open(target.attr(\"href\"), \"_new\");\n                }\n\n                if (e.target.tagName && e.target.tagName.toLowerCase() === \"html\") {\n                    setTimeout(function() {\n                        editor.body.focus();\n                    }, 0);\n                }\n            },\n\n            _mouseup: function(e) {\n                var that = this;\n\n                if (kendo.support.mobileOS.ios && e && $(e.target).is(SELECT_OVERLAY_SELECTOR)) {\n                    return;\n                }\n\n                if (that._selectionStarted) {\n                    setTimeout(function() {\n                        that._selectionChange();\n                    }, 1);\n                }\n            },\n\n            _runPostContentKeyCommands: function(e) {\n                var range = this.getRange();\n                var tools = this.keyboard.toolsFromShortcut(this.toolbar.tools, e);\n\n                for (var i = 0; i < tools.length; i++) {\n                    var tool = tools[i];\n                    var o = tool.options;\n                    if (!o.keyPressCommand) {\n                        continue;\n                    }\n\n                    var cmd = new o.command({ range: range });\n                    if (cmd.changesContent()) {\n                        this.keyboard.endTyping(true);\n                        this.exec(tool.name);\n                    }\n                }\n            },\n\n            refresh: function() {\n                var that = this;\n\n                if (that.textarea) {\n                    that._destroyResizings();\n                    // preserve updated value before re-initializing\n                    // don't use update() to prevent the editor from encoding the content too early\n                    var value = that.value();\n                    that.textarea.val(value);\n                    that.wrapper.find(\"iframe\").remove();\n                    that._initializeContentElement(that);\n                    that.value(value);\n                }\n            },\n\n            events: [\n                \"select\",\n                \"change\",\n                \"execute\",\n                \"error\",\n                \"paste\",\n                \"keydown\",\n                \"keyup\"\n            ],\n\n            options: {\n                name: \"Editor\",\n                messages: messages,\n                placeholder: \"\",\n                formats: {},\n                encoded: true,\n                domain: null,\n                resizable: false,\n                deserialization: {\n                    custom: null\n                },\n                serialization: {\n                    entities: true,\n                    semantic: true,\n                    scripts: false,\n                    optimizeTags: false,\n                    keepEOL: false\n                },\n                pasteCleanup: {\n                    all: false,\n                    css: false,\n                    custom: null,\n                    keepNewLines: false,\n                    msAllFormatting: false,\n                    msConvertLists: true,\n                    msTags: true,\n                    none: false,\n                    span: false\n                },\n                stylesheets: [],\n                dialogOptions: {\n                    modal: true, resizable: false, draggable: true,\n                    animation: false\n                },\n                imageBrowser: null,\n                fileBrowser: null,\n                fontName: [\n                    { text: \"Arial\", value: \"Arial, Helvetica, sans-serif\" },\n                    { text: \"Courier New\", value: \"\\\"Courier New\\\", Courier, monospace\" },\n                    { text: \"Georgia\", value: \"Georgia, serif\" },\n                    { text: \"Impact\", value: \"Impact, Charcoal, sans-serif\" },\n                    { text: \"Lucida Console\", value: \"\\\"Lucida Console\\\", Monaco, monospace\" },\n                    { text: \"Tahoma\", value: \"Tahoma, Geneva, sans-serif\" },\n                    { text: \"Times New Roman\", value: \"\\\"Times New Roman\\\", Times, serif\" },\n                    { text: \"Trebuchet MS\", value: \"\\\"Trebuchet MS\\\", Helvetica, sans-serif\" },\n                    { text: \"Verdana\", value: \"Verdana, Geneva, sans-serif\" }\n                ],\n                fontSize: [\n                    { text: \"1 (8pt)\", value: \"xx-small\" },\n                    { text: \"2 (10pt)\", value: \"x-small\" },\n                    { text: \"3 (12pt)\", value: \"small\" },\n                    { text: \"4 (14pt)\", value: \"medium\" },\n                    { text: \"5 (18pt)\", value: \"large\" },\n                    { text: \"6 (24pt)\", value: \"x-large\" },\n                    { text: \"7 (36pt)\", value: \"xx-large\" }\n                ],\n                formatBlock: [\n                    { text: \"Paragraph\", value: \"p\" },\n                    { text: \"Quotation\", value: \"blockquote\" },\n                    { text: \"Heading 1\", value: \"h1\" },\n                    { text: \"Heading 2\", value: \"h2\" },\n                    { text: \"Heading 3\", value: \"h3\" },\n                    { text: \"Heading 4\", value: \"h4\" },\n                    { text: \"Heading 5\", value: \"h5\" },\n                    { text: \"Heading 6\", value: \"h6\" }\n                ],\n                tools: [].concat.call(\n                    [\"formatting\"],\n                    toolGroups.basic,\n                    [\"undo\", \"redo\"],\n                    toolGroups.alignment,\n                    toolGroups.formatPainter,\n                    toolGroups.lists,\n                    toolGroups.indenting,\n                    toolGroups.links,\n                    [\"insertImage\"],\n                    toolGroups.tables\n                )\n            },\n\n            destroy: function() {\n                var editor = this;\n\n                Widget.fn.destroy.call(this);\n\n                this._endTyping(true);\n\n                this._deregisterHandlers();\n\n                clearTimeout(this._spellCorrectTimeout);\n\n                this._focusOutside();\n\n                this.toolbar.destroy();\n\n                editor._destroyUploadWidget();\n\n                editor._destroyResizings();\n\n                kendo.destroy(this.wrapper);\n            },\n\n            _destroyResizings: function() {\n                var editor = this;\n\n                editor._destroyElementResizing();\n                kendo.ui.editor.ElementResizingFactory.current.dispose(editor);\n                editor._destroyRowResizing();\n                kendo.ui.editor.RowResizing.dispose(editor);\n                editor._destroyColumnResizing();\n                kendo.ui.editor.ColumnResizing.dispose(editor);\n            },\n\n            _focusOutside: function() {\n                // move focus outside the Editor, see https://github.com/telerik/kendo/issues/3673\n                if (kendo.support.browser.msie && this.textarea) {\n                    var tempInput = $(\"<input style='position:fixed;left:1px;top:1px;width:1px;height:1px;font-size:0;border:0;opacity:0' />\").appendTo(document.body).trigger(\"focus\");\n                    tempInput.trigger(\"blur\").remove();\n                }\n            },\n\n            _destroyUploadWidget: function() {\n                var editor = this;\n                if (editor._uploadWidget) {\n                    editor._uploadWidget.destroy();\n                    editor._uploadWidget = null;\n                }\n            },\n\n            state: function(toolName) {\n                var tool = Editor.defaultTools[toolName];\n                var finder = tool && (tool.options.finder || tool.finder);\n                var RangeUtils = kendo.ui.editor.RangeUtils;\n                var range, textNodes;\n\n                if (finder) {\n                    range = this.getRange();\n\n                    textNodes = RangeUtils.textNodes(range);\n\n                    if (!textNodes.length && range.collapsed) {\n                        textNodes = [range.startContainer];\n                    }\n\n                    return finder.getFormat ? finder.getFormat(textNodes) : finder.isFormatted(textNodes);\n                }\n\n                return false;\n            },\n\n            value: function(html) {\n                var body = this.body,\n                    editorNS = kendo.ui.editor,\n                    options = this.options,\n                    currentHtml = editorNS.Serializer.domToXhtml(body, options.serialization);\n\n                if (html === undefined$1) {\n                    return currentHtml;\n                }\n\n                if (html == currentHtml) {\n                    return;\n                }\n\n                editorNS.Serializer.htmlToDom(html, body, options.deserialization);\n\n                this.selectionRestorePoint = null;\n                this.update();\n\n                this.toolbar.refreshTools();\n            },\n\n            saveSelection: function(range) {\n                range = range || this.getRange();\n                var container = range.commonAncestorContainer,\n                    body = this.body;\n\n                if (container == body || $.contains(body, container)) {\n                    this.selectionRestorePoint = new kendo.ui.editor.RestorePoint(range, body);\n                }\n            },\n\n            _focusBody: function() {\n                var body = this.body;\n                var iframe = this.wrapper && this.wrapper.find(\"iframe\")[0];\n                var documentElement = this.document.documentElement;\n                var activeElement = kendo._activeElement();\n                var scrollTop;\n\n\n                if (!iframe && body.scrollHeight > body.clientHeight) {\n                    scrollTop = body.scrollTop;\n                    body.focus();\n                    body.scrollTop = scrollTop;\n\n                } else if (activeElement != body && activeElement != iframe) {\n                    scrollTop = documentElement.scrollTop;\n                    body.focus();\n                    documentElement.scrollTop = scrollTop;\n                }\n            },\n\n            restoreSelection: function() {\n                this._focusBody();\n\n                if (this.selectionRestorePoint) {\n                    this.selectRange(this.selectionRestorePoint.toRange());\n                }\n            },\n\n            focus: function() {\n                this.restoreSelection();\n            },\n\n            update: function(value) {\n                value = value || this.options.encoded ? this.encodedValue() : this.value();\n\n                if (this.textarea) {\n                    this.textarea.val(value);\n                    this._togglePlaceholder(!value.trim());\n                } else {\n                    this._oldValue = value;\n                }\n            },\n\n            encodedValue: function() {\n                return kendo.ui.editor.Dom.encode(this.value());\n            },\n\n            createRange: function(document) {\n                return kendo.ui.editor.RangeUtils.createRange(document || this.document);\n            },\n\n            getSelection: function() {\n                return kendo.ui.editor.SelectionUtils.selectionFromDocument(this.document);\n            },\n\n            selectRange: function(range) {\n                this._focusBody();\n                var selection = this.getSelection();\n                selection.removeAllRanges();\n                selection.addRange(range);\n                this.saveSelection(range);\n            },\n\n            getRange: function() {\n                var selection = this.getSelection(),\n                    range = selection && selection.rangeCount > 0 ? selection.getRangeAt(0) : this.createRange(),\n                    doc = this.document;\n\n                if (range.startContainer == doc && range.endContainer == doc && !range.startOffset && !range.endOffset) {\n                    range.setStart(this.body, 0);\n                    range.collapse(true);\n                }\n\n                return range;\n            },\n\n            _containsRange: function(range) {\n                var dom = kendo.ui.editor.Dom;\n                var body = this.body;\n                return range && dom.isAncestorOrSelf(body, range.startContainer) &&\n                    dom.isAncestorOrSelf(body, range.endContainer);\n            },\n\n            _deleteSavedRange: function() {\n                if (\"_range\" in this) {\n                    delete this._range;\n                }\n            },\n\n            selectedHtml: function() {\n                return kendo.ui.editor.Serializer.domToXhtml(this.getRange().cloneContents());\n            },\n\n            paste: function(html, options) {\n                this.focus();\n\n                var command = new kendo.ui.editor.InsertHtmlCommand($.extend({\n                    range: this.getRange(),\n                    html: html\n                }, options));\n\n                command.editor = this;\n\n                command.exec();\n            },\n\n            exec: function(name, params) {\n                var that = this;\n                var command = null;\n                var range, tool, prevented;\n\n                if (!name) {\n                    throw new Error(\"kendoEditor.exec(): `name` parameter cannot be empty\");\n                }\n\n                if (that.body.getAttribute(\"contenteditable\") !== \"true\" &&\n                    name !== \"print\" &&\n                    name !== \"pdf\" &&\n                    name !== \"exportAs\") {\n                    return false;\n                }\n\n                name = name.toLowerCase();\n\n                if (!that.keyboard.isTypingInProgress()) {\n                    that._focusBody();\n                    that.selectRange(that._range || that.getRange());\n                }\n\n                tool = that.toolbar.toolById(name);\n\n                if (!tool) {\n                    // execute non-toolbar tool\n                    for (var id in Editor.defaultTools) {\n                        if (id.toLowerCase() == name) {\n                            tool = Editor.defaultTools[id];\n                            break;\n                        }\n                    }\n                }\n\n                if (tool) {\n                    range = that.getRange();\n\n                    if (tool.command) {\n                        command = tool.command(extend({ range: range, body: that.body, immutables: !!that.immutables }, params));\n                    }\n\n                    prevented = that.trigger(\"execute\", { name: name, command: command });\n\n                    if (prevented) {\n                        return;\n                    }\n\n                    if (/^(undo|redo)$/i.test(name)) {\n                        that.undoRedoStack[name]();\n                    } else if (command) {\n                        that.execCommand(command);\n\n                        if (command.async) {\n                            command.change = that._selectionChange.bind(that);\n                            return;\n                        }\n                    }\n\n                    that._selectionChange();\n                }\n            },\n\n            execCommand: function(command) {\n                if (!command.managesUndoRedo) {\n                    this.undoRedoStack.push(command);\n                }\n\n                command.editor = this;\n                command.exec();\n            }\n        });\n\n        Editor.defaultTools = {};\n\n        kendo.ui.plugin(Editor);\n\n        var Tool = Class.extend({\n            init: function(options) {\n                this.options = options;\n            },\n\n            initialize: function(ui, options) {\n                ui.attr({ unselectable: \"on\", title: options.title, \"aria-label\": options.title });\n            },\n\n            command: function(commandArguments) {\n                return new this.options.command(commandArguments);\n            },\n\n            update: $.noop\n        });\n\n        Tool.exec = function(editor, name, value) {\n            editor.exec(name, { value: value });\n        };\n\n        var UndoTool = Tool.extend({\n            command: $.noop,\n            update: function(ui, nodes, undoRedoStack) {\n                var that = this,\n                    name = that.options.name;\n\n                switch (name) {\n                    case \"undo\":\n                        ui.attr(\"disabled\", !undoRedoStack.canUndo());\n                        break;\n                    case \"redo\":\n                        ui.attr(\"disabled\", !undoRedoStack.canRedo());\n                        break;\n                    default:\n                        break;\n                }\n            }\n        });\n\n        EditorUtils.registerTool(\"separator\", new Tool({ template: new ToolTemplate({ template: EditorUtils.separatorTemplate }) }));\n        EditorUtils.registerTool(\"undo\", new UndoTool({ key: \"Z\", ctrl: true, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Undo\" }) }));\n        EditorUtils.registerTool(\"redo\", new UndoTool({ key: \"Y\", ctrl: true, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Redo\" }) }));\n\n        // Exports ================================================================\n\n        var emptyElementContent = '\\ufeff';\n        var emptyTableCellContent = emptyElementContent;\n\n        if (browser.msie || browser.edge) {\n            emptyTableCellContent = emptyElementContent = \"&nbsp;\";\n        }\n\n        extend(kendo.ui, {\n            editor: {\n                ToolTemplate: ToolTemplate,\n                EditorUtils: EditorUtils,\n                Tool: Tool,\n                emptyElementContent: emptyElementContent,\n                emptyTableCellContent: emptyTableCellContent\n            }\n        });\n\n        if (kendo.PDFMixin) {\n            kendo.PDFMixin.extend(Editor.prototype);\n            Editor.prototype._drawPDF = function() {\n                return kendo.drawing.drawDOM(this.body, this.options.pdf);\n            };\n            Editor.prototype.saveAsPDF = function() {\n                var progress = new $.Deferred();\n                var promise = progress.promise();\n                var args = { promise: promise };\n\n                if (this.trigger(\"pdfExport\", args)) {\n                    return;\n                }\n\n                var options = this.options.pdf;\n\n                this._drawPDF(progress)\n                .then(function(root) {\n                    return kendo.drawing.exportPDF(root, options);\n                })\n                .done(function(dataURI) {\n                    kendo.saveAs({\n                        dataURI: dataURI,\n                        fileName: options.fileName,\n                        proxyURL: options.proxyURL,\n                        proxyTarget: options.proxyTarget,\n                        forceProxy: options.forceProxy\n                    });\n                    progress.resolve();\n                })\n                .fail(function(err) {\n                    progress.reject(err);\n                });\n\n                return promise;\n            };\n        }\n\n    })(window.kendo.jQuery);\n\n    (function($) {\n\n    var kendo = window.kendo,\n        map = $.map,\n        extend = $.extend,\n        browser = kendo.support.browser,\n        STYLE = \"style\",\n        FLOAT = \"float\",\n        CSSFLOAT = \"cssFloat\",\n        STYLEFLOAT = \"styleFloat\",\n        CLASS = \"class\",\n        KMARKER = \"k-marker\";\n\n    function makeMap(items) {\n        var obj = {},\n            i, len;\n\n        for (i = 0, len = items.length; i < len; i++) {\n            obj[items[i]] = true;\n        }\n        return obj;\n    }\n\n    var empty = makeMap(\"area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed\".split(\",\")),\n        nonListBlockElements = \"p,div,h1,h2,h3,h4,h5,h6,address,applet,blockquote,button,center,dd,dir,dl,dt,fieldset,form,frameset,hr,iframe,isindex,map,menu,noframes,noscript,object,pre,script,table,tbody,td,tfoot,th,thead,tr,header,article,nav,footer,section,aside,main,figure,figcaption\".split(\",\"),\n        blockElements = nonListBlockElements.concat([\"ul\",\"ol\",\"li\"]),\n        block = makeMap(blockElements),\n        selfClosing = makeMap(\"area,base,br,col,command,embed,hr,img,input,keygen,link,menuitem,meta,param,source,track,wbr\".split(\",\")),\n        inlineElements = \"span,em,a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,strike,strong,sub,sup,textarea,tt,u,var,data,time,mark,ruby\".split(\",\"),\n        inline = makeMap(inlineElements),\n        fillAttrs = makeMap(\"checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected\".split(\",\")),\n        nonEmptyNonTextContentElements = [\"hgroup\",\"ol\",\"ul\",\"dl\",\"object\",\"video\",\"audio\",\"table\",\"colgroup\",\"tbody\",\"thead\",\"tfoot\",\"tr\",\"select\",\"optgroup\"];\n\n    var normalize = function(node) {\n        if (node.nodeType == 1) {\n            node.normalize();\n        }\n    };\n\n    if (browser.msie && browser.version >= 8) {\n        normalize = function(parent) {\n            if (parent.nodeType == 1 && parent.firstChild) {\n                var prev = parent.firstChild,\n                    node = prev;\n\n                normalize(node);\n\n                while (true) {\n                    node = node.nextSibling;\n\n                    if (!node) {\n                        break;\n                    }\n\n                    normalize(node);\n\n                    if (node.nodeType == 3 && prev.nodeType == 3) {\n                        node.nodeValue = prev.nodeValue + node.nodeValue;\n                        Dom.remove(prev);\n                    }\n\n                    prev = node;\n                }\n            }\n        };\n    }\n\n    var whitespace = /^\\s+$/,\n        emptyspace = /^[\\n\\r\\t]+$/,\n        rgb = /rgb\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)/i,\n        bom = /\\ufeff/g,\n        whitespaceOrBom = /^(\\s+|\\ufeff)$/,\n        persistedScrollTop,\n        cssAttributes =\n               (\"color,padding-left,padding-right,padding-top,padding-bottom,\" +\n                \"background-color,background-attachment,background-image,background-position,background-repeat,\" +\n                \"border-top-style,border-top-width,border-top-color,\" +\n                \"border-bottom-style,border-bottom-width,border-bottom-color,\" +\n                \"border-left-style,border-left-width,border-left-color,\" +\n                \"border-right-style,border-right-width,border-right-color,\" +\n                \"font-family,font-size,font-style,font-variant,font-weight,line-height\"\n               ).split(\",\"),\n        htmlRe = /[<>\\&]/g,\n        entityRe = /[\\u00A0-\\u2666<>\\&]/g,\n        entityTable = {\n                34: 'quot', 38: 'amp', 39: 'apos', 60: 'lt', 62: 'gt',\n                160: 'nbsp', 161: 'iexcl', 162: 'cent', 163: 'pound', 164: 'curren',\n                165: 'yen', 166: 'brvbar', 167: 'sect', 168: 'uml', 169: 'copy',\n                170: 'ordf', 171: 'laquo', 172: 'not', 173: 'shy', 174: 'reg',\n                175: 'macr', 176: 'deg', 177: 'plusmn', 178: 'sup2', 179: 'sup3',\n                180: 'acute', 181: 'micro', 182: 'para', 183: 'middot', 184: 'cedil',\n                185: 'sup1', 186: 'ordm', 187: 'raquo', 188: 'frac14', 189: 'frac12',\n                190: 'frac34', 191: 'iquest', 192: 'Agrave', 193: 'Aacute', 194: 'Acirc',\n                195: 'Atilde', 196: 'Auml', 197: 'Aring', 198: 'AElig', 199: 'Ccedil',\n                200: 'Egrave', 201: 'Eacute', 202: 'Ecirc', 203: 'Euml', 204: 'Igrave',\n                205: 'Iacute', 206: 'Icirc', 207: 'Iuml', 208: 'ETH', 209: 'Ntilde',\n                210: 'Ograve', 211: 'Oacute', 212: 'Ocirc', 213: 'Otilde', 214: 'Ouml',\n                215: 'times', 216: 'Oslash', 217: 'Ugrave', 218: 'Uacute', 219: 'Ucirc',\n                220: 'Uuml', 221: 'Yacute', 222: 'THORN', 223: 'szlig', 224: 'agrave',\n                225: 'aacute', 226: 'acirc', 227: 'atilde', 228: 'auml', 229: 'aring',\n                230: 'aelig', 231: 'ccedil', 232: 'egrave', 233: 'eacute', 234: 'ecirc',\n                235: 'euml', 236: 'igrave', 237: 'iacute', 238: 'icirc', 239: 'iuml',\n                240: 'eth', 241: 'ntilde', 242: 'ograve', 243: 'oacute', 244: 'ocirc',\n                245: 'otilde', 246: 'ouml', 247: 'divide', 248: 'oslash', 249: 'ugrave',\n                250: 'uacute', 251: 'ucirc', 252: 'uuml', 253: 'yacute', 254: 'thorn',\n                255: 'yuml', 402: 'fnof', 913: 'Alpha', 914: 'Beta', 915: 'Gamma',\n                916: 'Delta', 917: 'Epsilon', 918: 'Zeta', 919: 'Eta', 920: 'Theta',\n                921: 'Iota', 922: 'Kappa', 923: 'Lambda', 924: 'Mu', 925: 'Nu',\n                926: 'Xi', 927: 'Omicron', 928: 'Pi', 929: 'Rho', 931: 'Sigma',\n                932: 'Tau', 933: 'Upsilon', 934: 'Phi', 935: 'Chi', 936: 'Psi',\n                937: 'Omega', 945: 'alpha', 946: 'beta', 947: 'gamma', 948: 'delta',\n                949: 'epsilon', 950: 'zeta', 951: 'eta', 952: 'theta', 953: 'iota',\n                954: 'kappa', 955: 'lambda', 956: 'mu', 957: 'nu', 958: 'xi',\n                959: 'omicron', 960: 'pi', 961: 'rho', 962: 'sigmaf', 963: 'sigma',\n                964: 'tau', 965: 'upsilon', 966: 'phi', 967: 'chi', 968: 'psi',\n                969: 'omega', 977: 'thetasym', 978: 'upsih', 982: 'piv', 8226: 'bull',\n                8230: 'hellip', 8242: 'prime', 8243: 'Prime', 8254: 'oline', 8260: 'frasl',\n                8472: 'weierp', 8465: 'image', 8476: 'real', 8482: 'trade', 8501: 'alefsym',\n                8592: 'larr', 8593: 'uarr', 8594: 'rarr', 8595: 'darr', 8596: 'harr',\n                8629: 'crarr', 8656: 'lArr', 8657: 'uArr', 8658: 'rArr', 8659: 'dArr',\n                8660: 'hArr', 8704: 'forall', 8706: 'part', 8707: 'exist', 8709: 'empty',\n                8711: 'nabla', 8712: 'isin', 8713: 'notin', 8715: 'ni', 8719: 'prod',\n                8721: 'sum', 8722: 'minus', 8727: 'lowast', 8730: 'radic', 8733: 'prop',\n                8734: 'infin', 8736: 'ang', 8743: 'and', 8744: 'or', 8745: 'cap',\n                8746: 'cup', 8747: 'int', 8756: 'there4', 8764: 'sim', 8773: 'cong',\n                8776: 'asymp', 8800: 'ne', 8801: 'equiv', 8804: 'le', 8805: 'ge',\n                8834: 'sub', 8835: 'sup', 8836: 'nsub', 8838: 'sube', 8839: 'supe',\n                8853: 'oplus', 8855: 'otimes', 8869: 'perp', 8901: 'sdot', 8968: 'lceil',\n                8969: 'rceil', 8970: 'lfloor', 8971: 'rfloor', 9001: 'lang', 9002: 'rang',\n                9674: 'loz', 9824: 'spades', 9827: 'clubs', 9829: 'hearts', 9830: 'diams',\n                338: 'OElig', 339: 'oelig', 352: 'Scaron', 353: 'scaron', 376: 'Yuml',\n                710: 'circ', 732: 'tilde', 8194: 'ensp', 8195: 'emsp', 8201: 'thinsp',\n                8204: 'zwnj', 8205: 'zwj', 8206: 'lrm', 8207: 'rlm', 8211: 'ndash',\n                8212: 'mdash', 8216: 'lsquo', 8217: 'rsquo', 8218: 'sbquo', 8220: 'ldquo',\n                8221: 'rdquo', 8222: 'bdquo', 8224: 'dagger', 8225: 'Dagger', 8240: 'permil',\n                8249: 'lsaquo', 8250: 'rsaquo', 8364: 'euro'\n            };\n\n    var Dom = {\n        block: block,\n        inline: inline,\n\n        findNodeIndex: function(node, skipText) {\n            var i = 0;\n\n            if (!node) {\n                return -1;\n            }\n\n            while (true) {\n                node = node.previousSibling;\n\n                if (!node) {\n                    break;\n                }\n\n                if (!(skipText && node.nodeType == 3)) {\n                    i++;\n                }\n            }\n\n            return i;\n        },\n\n        isDataNode: function(node) {\n            return node && node.nodeValue !== null && node.data !== null;\n        },\n\n        isAncestorOf: function(parent, node) {\n            try {\n                return !Dom.isDataNode(parent) && ($.contains(parent, Dom.isDataNode(node) ? node.parentNode : node) || node.parentNode == parent);\n            } catch (e) {\n                return false;\n            }\n        },\n\n        isAncestorOrSelf: function(root, node) {\n            return Dom.isAncestorOf(root, node) || root == node;\n        },\n\n        findClosestAncestor: function(root, node) {\n            if (Dom.isAncestorOf(root, node)) {\n                while (node && node.parentNode != root) {\n                    node = node.parentNode;\n                }\n            }\n\n            return node;\n        },\n\n        getAllComments: function(rootElem) {\n            var comments = [];\n            // Fourth argument, which is actually obsolete according to the DOM4 standard, is required in IE 11\n            var iterator = document.createNodeIterator(rootElem,\n                NodeFilter.SHOW_COMMENT,\n                function() {\n                    return NodeFilter.FILTER_ACCEPT;\n                }, false);\n\n            var curNode = iterator.nextNode();\n            while (curNode) {\n                comments.push(curNode.nodeValue);\n                curNode = iterator.nextNode();\n            }\n            return comments;\n        },\n\n        getNodeLength: function(node) {\n            return Dom.isDataNode(node) ? node.length : node.childNodes.length;\n        },\n\n        splitDataNode: function(node, offset) {\n            var newNode = node.cloneNode(false);\n            var denormalizedText = \"\";\n            var iterator = node.nextSibling;\n            var temp;\n\n            while (iterator && iterator.nodeType == 3 && iterator.nodeValue) {\n                denormalizedText += iterator.nodeValue;\n                temp = iterator;\n                iterator = iterator.nextSibling;\n                Dom.remove(temp);\n            }\n\n            node.deleteData(offset, node.length);\n            newNode.deleteData(0, offset);\n            newNode.nodeValue += denormalizedText;\n            Dom.insertAfter(newNode, node);\n        },\n\n        attrEquals: function(node, attributes) {\n            for (var key in attributes) {\n                var value = node[key];\n\n                if (key == FLOAT) {\n                    value = node[kendo.support.cssFloat ? CSSFLOAT : STYLEFLOAT];\n                }\n\n                if (typeof value == \"object\") {\n                    if (!Dom.attrEquals(value, attributes[key])) {\n                        return false;\n                    }\n                } else if (value != attributes[key]) {\n                    return false;\n                }\n            }\n\n            return true;\n        },\n\n        blockParentOrBody: function(node) {\n            return Dom.parentOfType(node, blockElements) || node.ownerDocument.body;\n        },\n\n        blockParents: function(nodes) {\n            var blocks = [],\n                i, len;\n\n            for (i = 0, len = nodes.length; i < len; i++) {\n                var block = Dom.parentOfType(nodes[i], Dom.blockElements);\n                if (block && $.inArray(block, blocks) < 0) {\n                    blocks.push(block);\n                }\n            }\n\n            return blocks;\n        },\n\n        windowFromDocument: function(document) {\n            return document.defaultView || document.parentWindow;\n        },\n\n        normalize: normalize,\n        blockElements: blockElements,\n        nonListBlockElements: nonListBlockElements,\n        inlineElements: inlineElements,\n        empty: empty,\n        fillAttrs: fillAttrs,\n        nodeTypes: {\n            ELEMENT_NODE: 1,\n            ATTRIBUTE_NODE: 2,\n            TEXT_NODE: 3,\n            CDATA_SECTION_NODE: 4,\n            ENTITY_REFERENCE_NODE: 5,\n            ENTITY_NODE: 6,\n            PROCESSING_INSTRUCTION_NODE: 7,\n            COMMENT_NODE: 8,\n            DOCUMENT_NODE: 9,\n            DOCUMENT_TYPE_NODE: 10,\n            DOCUMENT_FRAGMENT_NODE: 11,\n            NOTATION_NODE: 12\n        },\n\n        toHex: function(color) {\n            var matches = rgb.exec(color);\n\n            if (!matches) {\n                return color;\n            }\n\n            return \"#\" + map(matches.slice(1), function(x) {\n                x = parseInt(x, 10).toString(16);\n                return x.length > 1 ? x : \"0\" + x;\n            }).join(\"\");\n        },\n\n        encode: function(value, options) {\n            var encodableChars = (!options || options.entities) ? entityRe : htmlRe;\n            return value.replace(encodableChars, function(c) {\n                var charCode = c.charCodeAt(0);\n                var entity = entityTable[charCode];\n                return entity ? '&' + entity + ';' : c;\n            });\n        },\n        isBom: function(node) {\n            return node && node.nodeType === 3 && /^[\\ufeff]+$/.test(node.nodeValue);\n        },\n        stripBom: function(text) {\n            return (text || \"\").replace(bom, \"\");\n        },\n\n        stripBomNode: function(node) {\n            if (Dom.isBom(node)) {\n                node.parentNode.removeChild(node);\n            }\n        },\n\n        insignificant: function(node) {\n            var attr = node.attributes;\n\n            return node.className == \"k-marker\" || (Dom.is(node, 'br') && (node.className == \"k-br\" || attr._moz_dirty || attr._moz_editor_bogus_node)) || (Dom.is(node, 'span') && (node.className == \"k-br\"));\n        },\n        tableCell: function(node) {\n            return Dom.is(node, \"td\") || Dom.is(node, \"th\");\n        },\n        significantNodes: function(nodes) {\n            return $.grep(nodes, function(child) {\n                var name = Dom.name(child);\n\n                if (name == 'br') {\n                    return false;\n                } else if (Dom.insignificant(child)) {\n                    return false;\n                } else if (Dom.emptyTextNode(child)) {\n                    return false;\n                } else if (child.nodeType == 1 && !empty[name] && Dom.emptyNode(child)) {\n                    return false;\n                }\n\n                return true;\n            });\n        },\n\n        emptyTextNode: function(node) {\n            return node && node.nodeType == 3 && whitespaceOrBom.test(node.nodeValue);\n        },\n\n        emptyNode: function(node) {\n            return node.nodeType == 1 && !Dom.significantNodes(node.childNodes).length;\n        },\n\n        name: function(node) {\n            return node.nodeName.toLowerCase();\n        },\n\n        significantChildNodes: function(node) {\n            return $.grep(node.childNodes, function(child) {\n                return child.nodeType != 3 || !Dom.isWhitespace(child);\n            });\n        },\n\n        lastTextNode: function(node) {\n            var result = null;\n\n            if (node.nodeType == 3) {\n                return node;\n            }\n\n            for (var child = node.lastChild; child; child = child.previousSibling) {\n                result = Dom.lastTextNode(child);\n\n                if (result) {\n                    return result;\n                }\n            }\n\n            return result;\n        },\n\n        is: function(node, nodeName) {\n            return node && Dom.name(node) == nodeName;\n        },\n\n        isMarker: function(node) {\n            return node.className == KMARKER;\n        },\n\n        isWhitespace: function(node) {\n            return whitespace.test(node.nodeValue);\n        },\n\n        allowsTextContent: function(node) {\n            var result = true;\n\n            nonEmptyNonTextContentElements.every(function(name) {\n                if (Dom.is(node, name)) {\n                    result = false;\n                    return false;\n                } else {\n                    return true;\n                }\n            });\n\n            return result;\n        },\n\n        allWhitespaceContent: function(node) {\n            var child = node.firstChild;\n            while (child && Dom.isWhitespace(child)) {\n                child = child.nextSibling;\n            }\n\n            return !child;\n        },\n\n        isEmptyspace: function(node) {\n            return emptyspace.test(node.nodeValue);\n        },\n\n        htmlIndentSpace: function(node) {\n            if (!(Dom.isDataNode(node) && Dom.isWhitespace(node))) {\n                return false;\n            }\n\n            if (emptyspace.test(node.nodeValue)) {\n                return true;\n            }\n\n            var sibling = function(el, direction) {\n                while (el[direction]) {\n                    el = el[direction];\n                    if (Dom.significantNodes([el]).length > 0) {\n                        return el;\n                    }\n                }\n            };\n\n            var parent = node.parentNode;\n            var prev = sibling(node, \"previousSibling\");\n            var next = sibling(node, \"nextSibling\");\n\n            if (bom.test(node.nodeValue)) {\n                return !!(prev || next);\n            }\n\n            if ($(parent).is(\"tr,tbody,thead,tfoot,table,ol,ul\")) {\n                return true;\n            }\n\n            if (Dom.isBlock(parent) || Dom.is(parent, \"body\")) {\n                var isPrevBlock = prev && Dom.isBlock(prev);\n                var isNextBlock = next && Dom.isBlock(next);\n                if ((!next && isPrevBlock) || (!prev && isNextBlock) || (isPrevBlock && isNextBlock)) {\n                    return true;\n                }\n            }\n\n            return false;\n        },\n\n        isBlock: function(node) {\n            return block[Dom.name(node)];\n        },\n\n        isSelfClosing: function(node) {\n            return selfClosing[Dom.name(node)];\n        },\n\n        isEmpty: function(node) {\n            return empty[Dom.name(node)];\n        },\n\n        isInline: function(node) {\n            return inline[Dom.name(node)];\n        },\n\n        isBr: function(node) {\n            return Dom.name(node) == \"br\";\n        },\n\n        list: function(node) {\n            var name = node ? Dom.name(node) : \"\";\n            return name == \"ul\" || name == \"ol\" || name == \"dl\";\n        },\n\n        scrollContainer: function(doc) {\n            var wnd = Dom.windowFromDocument(doc),\n                scrollContainer = (wnd.contentWindow || wnd).document || wnd.ownerDocument || wnd;\n\n            if (scrollContainer.compatMode == 'BackCompat') {\n                scrollContainer = scrollContainer.body;\n            } else {\n                scrollContainer = scrollContainer.scrollingElement || scrollContainer.documentElement;\n            }\n\n            return scrollContainer;\n        },\n\n        scrollTo: function(node, toStart) {\n            var doc = node.ownerDocument;\n            var wnd = Dom.windowFromDocument(doc);\n            var windowHeight = wnd.innerHeight;\n            var scrollContainer = Dom.scrollContainer(doc);\n            var element, elementTop, elementHeight, marker;\n\n            if (Dom.isDataNode(node)) {\n                if (toStart) {\n                    marker = Dom.create(doc, \"span\", { \"innerHTML\": \"&#xfeff;\" });\n                    Dom.insertBefore(marker, node);\n                    element = $(marker);\n                } else {\n                    element = $(node.parentNode);\n                }\n            } else {\n                element = $(node);\n            }\n\n            elementTop = element.offset().top;\n            elementHeight = element[0].offsetHeight;\n\n            if (toStart || !elementHeight) {\n                elementHeight = parseInt(element.css(\"line-height\"), 10) ||\n                                Math.ceil(1.2 * parseInt(element.css(\"font-size\"), 10)) ||\n                                15;\n            }\n\n            if (marker) {\n                Dom.remove(marker);\n            }\n\n            if (elementHeight + elementTop > scrollContainer.scrollTop + windowHeight) {\n                scrollContainer.scrollTop = elementHeight + elementTop - windowHeight;\n            }\n        },\n\n        persistScrollTop: function(doc) {\n            persistedScrollTop = Dom.scrollContainer(doc).scrollTop;\n        },\n\n        offset: function(target, offsetParent) {\n            var result = { top: target.offsetTop, left: target.offsetLeft };\n            var parent = target.offsetParent;\n\n            while (parent && (!offsetParent || Dom.isAncestorOf(offsetParent, parent))) {\n                result.top += parent.offsetTop;\n                result.left += parent.offsetLeft;\n                parent = parent.offsetParent;\n            }\n\n            return result;\n        },\n\n        restoreScrollTop: function(doc) {\n            if (typeof persistedScrollTop == \"number\") {\n                Dom.scrollContainer(doc).scrollTop = persistedScrollTop;\n                persistedScrollTop = undefined;\n            }\n        },\n\n        insertAt: function(parent, newElement, position) {\n            parent.insertBefore(newElement, parent.childNodes[position] || null);\n        },\n\n        insertBefore: function(newElement, referenceElement) {\n            if (referenceElement.parentNode) {\n                return referenceElement.parentNode.insertBefore(newElement, referenceElement);\n            } else {\n                return referenceElement;\n            }\n        },\n\n        insertAfter: function(newElement, referenceElement) {\n            return referenceElement.parentNode.insertBefore(newElement, referenceElement.nextSibling);\n        },\n\n        remove: function(node) {\n            if (node.parentNode) {\n                node.parentNode.removeChild(node);\n            }\n        },\n\n        removeChildren: function(node) {\n            while (node.firstChild) {\n                node.removeChild(node.firstChild);\n            }\n        },\n\n        removeTextSiblings: function(node) {\n            var parentNode = node.parentNode;\n\n            while (node.nextSibling && node.nextSibling.nodeType == 3) {\n                parentNode.removeChild(node.nextSibling);\n            }\n\n            while (node.previousSibling && node.previousSibling.nodeType == 3) {\n                parentNode.removeChild(node.previousSibling);\n            }\n        },\n\n        trim: function(parent) {\n            for (var i = parent.childNodes.length - 1; i >= 0; i--) {\n                var node = parent.childNodes[i];\n                if (Dom.isDataNode(node)) {\n                    if (!Dom.stripBom(node.nodeValue).length) {\n                        Dom.remove(node);\n                    }\n                } else if (node.className != KMARKER) {\n                    Dom.trim(node);\n\n                    if ((!Dom.isEmpty(node) && node.childNodes.length === 0) ||\n                        (Dom.isBlock(node) && Dom.allWhitespaceContent(node))) {\n                        Dom.remove(node);\n                    }\n                }\n            }\n\n            return parent;\n        },\n\n        closest: function(node, tags) {\n            if (typeof tags === \"string\") {\n                tags = [tags];\n            }\n\n            while (node && tags.indexOf(Dom.name(node)) < 0) {\n                node = node.parentNode;\n            }\n\n            return node;\n        },\n\n        closestBy: function(node, condition, rootCondition) {\n            while (node && !condition(node)) {\n                if (rootCondition && rootCondition(node)) {\n                    return null;\n                }\n                node = node.parentNode;\n            }\n            return node;\n        },\n\n        sibling: function(node, direction) {\n            do {\n                node = node[direction];\n            } while (node && node.nodeType != 1);\n\n            return node;\n        },\n\n        next: function(node) {\n            return Dom.sibling(node, \"nextSibling\");\n        },\n\n        prev: function(node) {\n            return Dom.sibling(node, \"previousSibling\");\n        },\n\n        parentOfType: function(node, tags) {\n            do {\n                node = node.parentNode;\n            } while (node && !(Dom.ofType(node, tags)));\n\n            return node;\n        },\n\n        ofType: function(node, tags) {\n            return $.inArray(Dom.name(node), tags) >= 0;\n        },\n\n        changeTag: function(referenceElement, tagName, skipAttributes) {\n            var newElement = Dom.create(referenceElement.ownerDocument, tagName),\n                attributes = referenceElement.attributes,\n                i, len, name, value, attribute;\n\n            if (!skipAttributes) {\n                for (i = 0, len = attributes.length; i < len; i++) {\n                    attribute = attributes[i];\n                    if (attribute.specified) {\n                        // IE < 8 cannot set class or style via setAttribute\n                        name = attribute.nodeName;\n                        value = attribute.nodeValue;\n                        if (name == CLASS) {\n                            newElement.className = value;\n                        } else if (name == STYLE) {\n                            newElement.style.cssText = referenceElement.style.cssText;\n                        } else {\n                            newElement.setAttribute(name, value);\n                        }\n                    }\n                }\n            }\n\n            while (referenceElement.firstChild) {\n                newElement.appendChild(referenceElement.firstChild);\n            }\n\n            Dom.insertBefore(newElement, referenceElement);\n            Dom.remove(referenceElement);\n            return newElement;\n        },\n\n        editableParent: function(node) {\n            while (node && (node.nodeType == 3 || node.contentEditable !== 'true')) {\n                node = node.parentNode;\n            }\n\n            return node;\n        },\n\n        wrap: function(node, wrapper) {\n            Dom.insertBefore(wrapper, node);\n            wrapper.appendChild(node);\n            return wrapper;\n        },\n\n        unwrap: function(node) {\n            var parent = node.parentNode;\n            while (node.firstChild) {\n                parent.insertBefore(node.firstChild, node);\n            }\n\n            parent.removeChild(node);\n        },\n\n        wrapper: function(node) {\n            var wrapper = Dom.closestBy(node, function(el) {\n                return el.parentNode && Dom.significantNodes(el.parentNode.childNodes).length > 1;\n            });\n\n            return $(wrapper).is(\"body,.k-editor\") ? undefined : wrapper;\n        },\n\n        create: function(document, tagName, attributes) {\n            return Dom.attr(document.createElement(tagName), attributes);\n        },\n\n        createEmptyNode: function(document, tagName, attributes) {\n            var node = Dom.attr(document.createElement(tagName), attributes);\n            node.innerHTML = \"\\ufeff\";\n            return node;\n        },\n\n        attr: function(element, attributes) {\n            attributes = extend({}, attributes);\n\n            if (attributes && STYLE in attributes) {\n                Dom.style(element, attributes.style);\n                delete attributes.style;\n            }\n\n            for (var attr in attributes) {\n                if (attributes[attr] === null) {\n                    element.removeAttribute(attr);\n                    delete attributes[attr];\n                } else if (attr == \"className\") {\n                    element[attr] = attributes[attr];\n                }\n            }\n\n            return extend(element, attributes);\n        },\n\n        mergeAttributes: function(origin, target, traverseCss) {\n            if (!origin.attributes.length) {\n                return;\n            }\n\n            $.each(origin.attributes, function() {\n                if (this.name !== \"contenteditable\" && (!traverseCss || this.name !== STYLE)) {\n                    $(target).attr(this.name, this.value);\n                }\n\n                if (traverseCss && this.name === STYLE) {\n                    $.each(origin.style, function() {\n                        target.style[this] = origin.style[this];\n                    });\n                }\n            });\n        },\n\n        style: function(node, value) {\n            $(node).css(value || {});\n        },\n\n        unstyle: function(node, value) {\n            for (var key in value) {\n                if (key == FLOAT) {\n                    key = kendo.support.cssFloat ? CSSFLOAT : STYLEFLOAT;\n                }\n\n                node.style[key] = \"\";\n            }\n\n            if (node.style.cssText === \"\") {\n                node.removeAttribute(STYLE);\n            }\n        },\n\n        inlineStyle: function(body, name, attributes) {\n            var span = $(Dom.create(body.ownerDocument, name, attributes)),\n                style;\n\n            body.appendChild(span[0]);\n\n            style = map(cssAttributes, function(value) {\n                if (browser.msie && value == \"line-height\" && span.css(value) == \"1px\") {\n                    return \"line-height:1.5\";\n                } else {\n                    return value + \":\" + span.css(value);\n                }\n            }).join(\";\");\n\n            span.remove();\n\n            return style;\n        },\n\n        getEffectiveBackground: function(element) {\n            var backgroundStyle = element.css(\"background-color\") || \"\";\n\n            if (backgroundStyle.indexOf(\"rgba(0, 0, 0, 0\") < 0 && backgroundStyle !== \"transparent\") {\n                return backgroundStyle;\n            } else if (element[0].tagName.toLowerCase() === \"html\") {\n                return \"Window\";\n            } else {\n                return Dom.getEffectiveBackground(element.parent());\n            }\n        },\n\n        innerText: function(node) {\n            var text = node.innerHTML;\n            text = text.replace(/<!--(.|\\s)*?-->/gi, \"\");\n            text = text.replace(/<\\/?[^>]+?\\/?>/gm, \"\");\n\n            return text;\n        },\n\n        removeClass: function(node, classNames) {\n            var className = \" \" + node.className + \" \",\n                classes = classNames.split(\" \"),\n                i, len;\n\n            for (i = 0, len = classes.length; i < len; i++) {\n                className = className.replace(\" \" + classes[i] + \" \", \" \");\n            }\n\n            className = kendo.trim(className);\n\n            if (className.length) {\n                node.className = className;\n            } else {\n                node.removeAttribute(CLASS);\n            }\n        },\n\n        commonAncestor: function() {\n            var arguments$1 = arguments;\n\n            var count = arguments.length,\n                paths = [],\n                minPathLength = Infinity,\n                output = null,\n                i, ancestors, node, first, j;\n\n            if (!count) {\n                return null;\n            }\n\n            if (count == 1) {\n                return arguments[0];\n            }\n\n            for (i = 0; i < count; i++) {\n                ancestors = [];\n                node = arguments$1[i];\n                while (node) {\n                    ancestors.push(node);\n                    node = node.parentNode;\n                }\n                paths.push(ancestors.reverse());\n                minPathLength = Math.min(minPathLength, ancestors.length);\n            }\n\n            if (count == 1) {\n                return paths[0][0];\n            }\n\n            for (i = 0; i < minPathLength; i++) {\n                first = paths[0][i];\n\n                for (j = 1; j < count; j++) {\n                    if (first != paths[j][i]) {\n                        return output;\n                    }\n                }\n\n                output = first;\n            }\n            return output;\n        },\n\n        closestSplittableParent: function(nodes) {\n            var result;\n\n            if (nodes.length == 1) {\n                result = Dom.parentOfType(nodes[0], [\"ul\",\"ol\"]);\n            } else {\n                result = Dom.commonAncestor.apply(null, nodes);\n            }\n\n            if (!result) {\n                result = Dom.parentOfType(nodes[0], [\"p\", \"td\"]) || nodes[0].ownerDocument.body;\n            }\n\n            if (Dom.isInline(result)) {\n                result = Dom.blockParentOrBody(result);\n            }\n\n            var editableParents = map(nodes, Dom.editableParent);\n            var editableAncestor = Dom.commonAncestor(editableParents)[0];\n\n            if ($.contains(result, editableAncestor)) {\n                result = editableAncestor;\n            }\n\n            return result;\n        },\n\n        closestEditable: function(node, types) {\n            var closest;\n            var editable = Dom.editableParent(node);\n\n            if (Dom.ofType(node, types)) {\n                closest = node;\n            } else {\n                closest = Dom.parentOfType(node, types);\n            }\n\n            if (closest && editable && $.contains(closest, editable)) {\n                closest = editable;\n            } else if (!closest && editable) {\n                closest = editable;\n            }\n\n            return closest;\n        },\n\n        closestEditableOfType: function(node, types) {\n            var editable = Dom.closestEditable(node, types);\n\n            if (editable && Dom.ofType(editable, types) && !$(editable).is(\".k-editor\")) {\n                return editable;\n            }\n        },\n\n        filter: function(tagName, nodes, invert) {\n            var filterFn = function(node) {\n                return Dom.name(node) == tagName;\n            };\n\n            return Dom.filterBy(nodes, filterFn, invert);\n        },\n\n        filterBy: function(nodes, condition, invert) {\n            var i = 0;\n            var len = nodes.length;\n            var result = [];\n            var match;\n\n            for (; i < len; i++) {\n                match = condition(nodes[i]);\n                if ((match && !invert) || (!match && invert)) {\n                    result.push(nodes[i]);\n                }\n            }\n\n            return result;\n        },\n\n        ensureTrailingBreaks: function(node) {\n            var elements = $(node).find(\"p,td,th\");\n            var length = elements.length;\n            var i = 0;\n\n            if (length) {\n                for (; i < length; i++) {\n                    Dom.ensureTrailingBreak(elements[i]);\n                }\n            } else {\n                Dom.ensureTrailingBreak(node);\n            }\n        },\n\n        removeTrailingBreak: function(node) {\n            $(node).find(\"br[type=_moz],.k-br\").remove();\n        },\n\n        ensureTrailingBreak: function(node) {\n            Dom.removeTrailingBreak(node);\n\n            var lastChild = node.lastChild;\n            var name = lastChild && Dom.name(lastChild);\n            var br;\n\n            if (!name ||\n                (name != \"br\" && name != \"img\") ||\n                (name == \"br\" && lastChild.className != \"k-br\")) {\n                br = node.ownerDocument.createElement(\"br\");\n                br.className = \"k-br\";\n                node.appendChild(br);\n            }\n        },\n\n        // Start: Table Utilities\n\n        reMapTableColumns: function(table, colAttr) {\n            Dom._mapColIndices(table, colAttr);\n        },\n\n        clearTableMappings: function(table, colAttr) {\n            $(table).find(\"[\" + colAttr + \"]\").removeAttr(colAttr);\n        },\n\n        _mapColIndices: function(table, colAttr) {\n            var registeredColumns = {};\n\n            for (var rowIndex = 0; rowIndex < table.rows.length; rowIndex++) {\n                var cells = table.rows[rowIndex].cells;\n                var colIndex = 0;\n                for (var cellIndex = 0; cellIndex < cells.length; cellIndex++, colIndex++) {\n                    var cell = cells[cellIndex];\n\n                    if (cell.rowSpan > 1) {\n                        this._mapColspan(cell, rowIndex, colIndex, registeredColumns);\n                    }\n\n                    if (registeredColumns[rowIndex]) {\n                        while (registeredColumns[rowIndex][colIndex]) {\n                            colIndex++;\n                        }\n                    }\n\n                    cell.setAttribute(colAttr, colIndex);\n\n                    if (cell.colSpan > 1) {\n                        colIndex = colIndex + cell.colSpan - 1;\n                    }\n                }\n            }\n        },\n\n        _mapColspan: function(cell, rowIndex, colIndex, registeredColumns) {\n            var rowSpan = cell.rowSpan,\n                colSpan = cell.colSpan,\n                index;\n\n            for (var ci = 0; ci < colSpan; ci++) {\n                index = colIndex + ci;\n\n                for (var ri = rowIndex + 1; ri < rowIndex + rowSpan; ri++) {\n\n                    if (!registeredColumns[ri]) {\n                        registeredColumns[ri] = {};\n                        registeredColumns[ri].length = 0;\n                    }\n\n                    if (registeredColumns[rowIndex]) {\n                        while (registeredColumns[rowIndex][index]) {\n                            index++;\n                        }\n                    }\n\n                    registeredColumns[ri][index] = true;\n                    registeredColumns[ri].length++;\n                }\n            }\n\n        },\n\n        associateWithIds: function(table) {\n            var that = this;\n            var numberOfTheadRows = 0;\n            var tableRows = table.rows;\n            var numberOfTableRows = tableRows.length;\n            var theadMatrix = [];\n            var tbodyMatrix = [];\n            var theadRows, i;\n\n            if (table.tHead) {\n                theadRows = table.tHead.rows;\n                numberOfTheadRows = theadRows.length;\n            } else {\n                numberOfTheadRows = that._getNumberOfHeaderRows(table);\n                theadRows = [];\n                for (i = 0; i < numberOfTheadRows; i++) {\n                    theadRows.push(tableRows[i]);\n                }\n            }\n            for (i = 0; i < numberOfTheadRows; i++) {\n                theadMatrix.push([]);\n            }\n            for (i = 0; i < numberOfTableRows; i++) {\n                tbodyMatrix.push([]);\n            }\n\n            that._generateIdsForColumns(theadMatrix, theadRows);\n            that._generateIdsForRows(theadMatrix, tbodyMatrix, numberOfTheadRows, tableRows);\n            that._assignIds(theadMatrix, tbodyMatrix, numberOfTheadRows, tableRows);\n        },\n\n        _generateIdsForColumns: function(theadMatrix, theadRows) {\n            var timestamp = new Date().getTime();\n            var numberOfTheadRows = theadRows ? theadRows.length : 0;\n            var row, cells, cell, col, id, colspan, rowspan, i, j, k, l;\n\n            for (i = 0; i < numberOfTheadRows; i++) {\n                row = theadRows[i];\n                cells = row.cells;\n                col = 0;\n\n                for (j = 0; j < cells.length; j++) {\n                    cell = cells[j];\n                    id = \"table\" + i + j + (++timestamp);\n                    cell.setAttribute(\"id\", id);\n                    colspan = cell.getAttribute(\"colspan\") || 1;\n                    rowspan = cell.getAttribute(\"rowspan\") || 1;\n\n                    while (theadMatrix[i][j + col]) {\n                        col += 1;\n                    }\n\n                    for (k = 0; k < rowspan; k++) {\n                        for (l = 0; l < colspan; l++) {\n                            theadMatrix[i + k][j + col + l] = id;\n                        }\n                    }\n                }\n            }\n        },\n\n        _generateIdsForRows: function(theadMatrix, tbodyMatrix, numberOfTheadRows, tableRows) {\n            var that = this;\n            var timestamp = new Date().getTime();\n            var numberOfTableRows = tableRows.length;\n            var row, cells, cell, col, id, colspan, rowspan, i, j, k, l, colIndex, headers;\n\n            var pushHeaderId = function(row) {\n                headers.push(row[colIndex]);\n            };\n\n            for (i = numberOfTheadRows; i < numberOfTableRows; i++) {\n                row = tableRows[i];\n                cells = $(row.cells).filter(\"th\");\n                col = 0;\n\n                for (j = 0; j < cells.length; j++) {\n                    cell = cells[j];\n                    id = \"table\" + i + j + (++timestamp);\n                    cell.setAttribute(\"id\", id);\n                    colspan = cell.getAttribute(\"colspan\") || 1;\n                    rowspan = cell.getAttribute(\"rowspan\") || 1;\n\n                    while (tbodyMatrix[i][j + col]) {\n                        col += 1;\n                    }\n\n                    for (k = 0; k < rowspan; k++) {\n                        for (l = 0; l < colspan; l++) {\n                            tbodyMatrix[i + k][j + col + l] = id;\n                        }\n                    }\n\n                    colIndex = cell.getAttribute(\"col-index\");\n                    headers = [];\n                    theadMatrix.forEach(pushHeaderId);\n                    headers = headers.filter(that._onlyUnique);\n                    cell.setAttribute(\"headers\", headers.join(\" \").trim());\n                }\n            }\n        },\n\n        _assignIds: function(theadMatrix, tbodyMatrix, numberOfTheadRows, tableRows) {\n            var that = this;\n            var numberOfTableRows = tableRows.length;\n            var row, cells, cell, i, j, colIndex, headers;\n\n            var pushHeaderId = function(row) {\n                headers.push(row[colIndex]);\n            };\n\n            for (i = numberOfTheadRows; i < numberOfTableRows; i++) {\n                row = tableRows[i];\n                cells = $(row.cells).filter(\"td\");\n\n                for (j = 0; j < cells.length; j++) {\n                    cell = cells[j];\n                    colIndex = cell.getAttribute(\"col-index\");\n                    headers = tbodyMatrix[i].slice();\n\n                    theadMatrix.forEach(pushHeaderId);\n                    headers = headers.filter(that._onlyUnique);\n                    cell.setAttribute(\"headers\", headers.join(\" \").trim());\n                }\n            }\n        },\n\n        _getNumberOfColumns: function(table) {\n            var cells = $(table).find(\"th, td\");\n            var numberOfCols = 0;\n            var cell, i, currentIndex;\n\n            for (i = 0; i < cells.length; i++) {\n                cell = cells[i];\n                currentIndex = Number(cell.getAttribute(\"col-index\")) + 1;\n                if (currentIndex > numberOfCols) {\n                    numberOfCols = currentIndex;\n                }\n            }\n\n            return numberOfCols;\n        },\n\n        _getNumberOfHeaderColumns: function(table, numberOfHeaderRows) {\n            var rows = table.rows;\n            var numberOfCols = 0;\n            var currentIndex, row, i, j, cell;\n\n            for (i = numberOfHeaderRows; i < rows.length; i++) {\n                row = rows[i];\n\n                for (j = 0; j < row.cells.length; j++) {\n                    cell = row.cells[j];\n\n                    if (this.is(cell, \"th\")) {\n                        currentIndex = Number(cell.getAttribute(\"col-index\")) + 1;\n                        if (currentIndex > numberOfCols) {\n                            numberOfCols = currentIndex;\n                        }\n                    }\n                }\n            }\n\n            return numberOfCols;\n        },\n\n        _getNumberOfHeaderRows: function(table) {\n            var rows = table.rows;\n            var thead = table.tHead;\n            var number = thead && table.tHead.rows ? table.tHead.rows.length : 0;\n            var j, row, cell, length;\n\n            if (number === 0) {\n                row = rows[0];\n                length = row.cells && row.cells.length;\n\n                while (row && length && this.is(row.cells[0], \"th\")) {\n                    for (j = 0; j < length; j++) {\n                        cell = row ? row.cells[j] : null;\n\n                        if (!this.is(cell, \"th\")) {\n                            row = null;\n                        }\n                    }\n\n                    if (row) {\n                        number += 1;\n                        row = this.next(row);\n                        length = row && row.cells && row.cells.length;\n                    }\n                }\n            }\n\n            return number;\n        },\n\n        // End: Table Utilities\n\n        _onlyUnique: function(value, index, self) {\n            return self.indexOf(value) === index;\n        }\n    };\n\n    kendo.ui.editor.Dom = Dom;\n\n    })(window.kendo.jQuery);\n\n    (function($, undefined$1) {\n\n    // Imports ================================================================\n    var kendo = window.kendo;\n    var Editor = kendo.ui.editor;\n    var dom = Editor.Dom;\n    var extend = $.extend;\n\n    var fontSizeMappings = 'xx-small,x-small,small,medium,large,x-large,xx-large'.split(',');\n    var quoteRe = /\"/g; //\"\n    var brRe = /<br[^>]*>/i;\n    var pixelRe = /^\\d+(\\.\\d*)?(px)?$/i;\n    var emptyPRe = /<p>(?:&nbsp;)?<\\/p>/i;\n    var cssDeclaration = /(\\*?[-#\\/\\*\\\\\\w]+(?:\\[[0-9a-z_-]+\\])?)\\s*:\\s*((?:'(?:\\\\'|.)*?'|\"(?:\\\\\"|.)*?\"|\\([^\\)]*?\\)|[^};])+)/g;\n    var sizzleAttr = /^sizzle-\\d+/i;\n    var scriptAttr = /^k-script-/i;\n    var onerrorRe = /\\s*onerror\\s*=\\s*(?:'|\")?([^'\">\\s]*)(?:'|\")?/i;\n    var br = '<br class=\"k-br\">';\n    var bomSpan = \"<span class='k-br'>\\ufeff</span>\";\n\n    var div = document.createElement(\"div\");\n    div.innerHTML = \" <hr>\";\n    var supportsLeadingWhitespace = div.firstChild.nodeType === 3;\n    div = null;\n    var isFunction = kendo.isFunction;\n\n    var TD = \"td\";\n\n    var Serializer = {\n        toEditableHtml: function(html) {\n            return (html || \"\")\n                .replace(/<!\\[CDATA\\[(.*)?\\]\\]>/g, \"<!--[CDATA[$1]]-->\")\n                .replace(/<(\\/?)script([^>]*)>/ig, \"<$1k:script$2>\")\n                .replace(/<img([^>]*)>/ig, function(match) {\n                    return match.replace(onerrorRe, \"\");\n                })\n                .replace(/(<\\/?img[^>]*>)[\\r\\n\\v\\f\\t ]+/ig, \"$1\")\n                .replace(/^<(table|blockquote)/i, br + '<$1')\n                .replace(/^[\\s]*(&nbsp;|\\u00a0)/i, '$1')\n                .replace(/<\\/(table|blockquote)>$/i, '</$1>' + br);\n        },\n\n        _toEditableImmutables: function(body) {\n            var immutable = Editor.Immutables.immutable,\n                emptyTextNode = dom.emptyTextNode,\n                first = body.firstChild,\n                last = body.lastChild;\n\n            while (emptyTextNode(first)) {\n                first = first.nextSibling;\n            }\n\n            while (emptyTextNode(last)) {\n                last = last.previousSibling;\n            }\n\n            if (first && immutable(first)) {\n                $(bomSpan).prependTo(body);\n            }\n\n            if (last && immutable(last)) {\n                $(bomSpan).appendTo(body);\n            }\n        },\n\n        _fillEmptyElements: function(body) {\n            // fills empty elements to allow them to be focused\n            $(body).find(\"p,td\").each(function() {\n                var p = $(this);\n                if (/^\\s*$/g.test(p.text()) && !p.find(\"img,input\").length) {\n                    var node = this;\n                    while (node.children[0] && node.children[0].nodeType != 3) {\n                        node = node.children[0];\n                    }\n\n                    if (node.nodeType == 1 && !dom.empty[dom.name(node)]) {\n                        if (dom.is(node, \"td\")) {\n                            node.innerHTML = kendo.ui.editor.emptyTableCellContent;\n                        }\n                        else {\n                            node.innerHTML = kendo.ui.editor.emptyElementContent;\n                        }\n                    }\n                }\n            });\n        },\n\n        _removeSystemElements: function(body) {\n            // removes persisted system elements\n            $(\".k-paste-container\", body).remove();\n        },\n\n        _resetOrderedLists: function(root) {\n            // fix for IE9 OL bug -- https://connect.microsoft.com/IE/feedback/details/657695/ordered-list-numbering-changes-from-correct-to-0-0\n            var ols = root.getElementsByTagName(\"ol\"), i, ol, originalStart;\n\n            for (i = 0; i < ols.length; i++) {\n                ol = ols[i];\n                originalStart = ol.getAttribute(\"start\");\n\n                ol.setAttribute(\"start\", 1);\n\n                if (originalStart) {\n                    ol.setAttribute(\"start\", originalStart);\n                } else {\n                    ol.removeAttribute(originalStart);\n                }\n            }\n        },\n\n        _preventScriptExecution: function(root) {\n            $(root).find(\"*\").each(function() {\n                var attributes = this.attributes;\n                var attribute, i, l, name;\n                var attributesToRemove = [];\n\n                for (i = 0, l = attributes.length; i < l; i++) {\n                    attribute = attributes[i];\n                    name = attribute.nodeName;\n\n                    if (attribute.specified && /^on/i.test(name)) {\n                        this.setAttribute(\"k-script-\" + name, attribute.value);\n                        attributesToRemove.push(name);\n                    }\n                }\n\n                for (i = 0, l = attributesToRemove.length; i < l; i++) {\n                    this.removeAttribute(attributesToRemove[i]);\n                }\n            });\n        },\n\n        htmlToDom: function(html, root, options) {\n            var browser = kendo.support.browser;\n            var msie = browser.msie;\n            var o = options || {};\n            var immutables = o.immutables;\n\n            html = Serializer.toEditableHtml(html);\n\n            if (isFunction(o.custom)) {\n                html = o.custom(html) || html;\n            }\n            root.innerHTML = html;\n\n            if (immutables) {\n                immutables.deserialize(root);\n            }\n\n            if (msie) {\n                // unicode characters denormalize the DOM tree in IE9\n                dom.normalize(root);\n\n                Serializer._resetOrderedLists(root);\n            }\n\n            Serializer._preventScriptExecution(root);\n\n            Serializer._fillEmptyElements(root);\n\n            Serializer._removeSystemElements(root);\n\n            Serializer._toEditableImmutables(root);\n\n            // add k-table class to all tables\n            $(\"table\", root).addClass(\"k-table\");\n\n            return root;\n        },\n\n        domToXhtml: function(root, options) {\n            var result = [];\n            var immutables = options && options.immutables;\n\n            function semanticFilter(attributes) {\n                return $.grep(attributes, function(attr) {\n                    return attr.name != \"style\";\n                });\n            }\n\n            function mapStart(node, tag) {\n                result.push('<' + tag);\n                attr(node);\n                result.push('>');\n            }\n\n            var tagMap = {\n                iframe: {\n                    start: function(node) { mapStart(node, \"iframe\"); },\n                    end: function() { result.push('</iframe>'); }\n                },\n                'k:script': {\n                    start: function(node) { mapStart(node, \"script\"); },\n                    end: function() { result.push('</script>'); },\n                    skipEncoding: true\n                },\n                span: {\n                    canOptimize: true,\n                    semantic: true,\n                    start: function(node) {\n                        var style = node.style;\n\n                        var attributes = specifiedAttributes(node);\n                        var semanticAttributes = semanticFilter(attributes);\n\n                        if (semanticAttributes.length) {\n                            result.push(\"<span\"); attr(node, semanticAttributes); result.push(\">\");\n                        }\n\n                        if (style.textDecoration == \"underline\") {\n                            result.push(\"<u>\");\n                        }\n\n                        var font = [];\n                        if (style.color) {\n                            font.push('color=\"' + dom.toHex(style.color) + '\"');\n                        }\n\n                        if (style.fontFamily) {\n                            font.push('face=\"' + style.fontFamily + '\"');\n                        }\n\n                        if (style.fontSize) {\n                            var size = $.inArray(style.fontSize, fontSizeMappings);\n                            font.push('size=\"' + size + '\"');\n                        }\n\n                        // Apply the rest of the inline styles back\n                        var inlineStyles = [];\n                        var ignoredStylePrefixes = [\"text-decoration\", \"color\", \"font\"];\n\n                        for (var i = 0; i < style.length; i++) {\n                            var inlineStyle = style[i];\n\n                            if (ignoredStylePrefixes.filter(function (prop) { return inlineStyle.startsWith(prop); }).length <= 0) {\n                                inlineStyles.push((inlineStyle + \": \" + (style[inlineStyle])));\n                            }\n                        }\n\n                        if (inlineStyles.length) {\n                            font.push('style=\"' + inlineStyles.join(\";\") + '\"');\n                        }\n\n                        if (font.length) {\n                            result.push(\"<font \" + font.join(\" \") + \">\");\n                        }\n                    },\n                    end: function(node) {\n                        var style = node.style;\n\n                        if (style.color || style.fontFamily || style.fontSize) {\n                            result.push(\"</font>\");\n                        }\n\n                        if (style.textDecoration == \"underline\") {\n                            result.push(\"</u>\");\n                        }\n\n                        if (semanticFilter(specifiedAttributes(node)).length) {\n                            result.push(\"</span>\");\n                        }\n                    }\n                },\n                strong: {\n                    semantic: true,\n                    start: function(node) { mapStart(node, \"b\"); },\n                    end: function() { result.push('</b>'); }\n                },\n                em: {\n                    semantic: true,\n                    start: function(node) { mapStart(node, \"i\"); },\n                    end: function() { result.push('</i>'); }\n                },\n                b: {\n                    semantic: false,\n                    start: function(node) { mapStart(node, \"strong\"); },\n                    end: function() { result.push('</strong>'); }\n                },\n                i: {\n                    semantic: false,\n                    start: function(node) { mapStart(node, \"em\"); },\n                    end: function() { result.push('</em>'); }\n                },\n                u: {\n                    semantic: false,\n                    start: function(node) {\n                        result.push('<span');\n\n                        var attributes = specifiedAttributes(node);\n                        var style = $(attributes).filter(function(i, item) { return item.name == \"style\"; })[0];\n                        var styleObj = { nodeName: \"style\", value: \"text-decoration:underline;\" };\n\n                        if (style) {\n                            styleObj.value = style.value;\n                            if (!/text-decoration/i.test(styleObj.value)) {\n                                styleObj.value = \"text-decoration:underline;\" + styleObj.value;\n                            }\n                            attributes.splice($.inArray(style, attributes), 1);\n                        }\n                        attributes.push(styleObj);\n\n                        attr(node, attributes);\n                        result.push('>');\n                    },\n                    end: function() { result.push('</span>'); }\n                },\n                font: {\n                    canOptimize: true,\n                    semantic: false,\n                    start: function(node) {\n                        result.push('<span style=\"');\n\n                        var color = node.getAttribute('color');\n                        var size = fontSizeMappings[node.getAttribute('size')];\n                        var face = node.getAttribute('face');\n\n                        if (color) {\n                            result.push('color:');\n                            result.push(dom.toHex(color));\n                            result.push(';');\n                        }\n\n                        if (face) {\n                            result.push('font-family:');\n                            result.push(face);\n                            result.push(';');\n                        }\n\n                        if (size) {\n                            result.push('font-size:');\n                            result.push(size);\n                            result.push(';');\n                        }\n\n                        result.push('\">');\n                    },\n                    end: function() {\n                        result.push('</span>');\n                    }\n                }\n            };\n\n            tagMap.script = tagMap[\"k:script\"];\n\n            options = options || {};\n\n            if (typeof options.semantic == \"undefined\") {\n                options.semantic = true;\n            }\n\n            function cssProperties(cssText) {\n                var trim = kendo.trim;\n                var css = trim(cssText);\n                var match;\n                var property, value;\n                var properties = [];\n\n                cssDeclaration.lastIndex = 0;\n\n                while (true) {\n                    match = cssDeclaration.exec(css);\n\n                    if (!match) {\n                        break;\n                    }\n\n                    property = trim(match[1].toLowerCase());\n                    value = trim(match[2]);\n\n                    if (property == \"font-size-adjust\" || property == \"font-stretch\") {\n                        continue;\n                    }\n\n                    if (property.indexOf('color') >= 0) {\n                        value = dom.toHex(value);\n                    } else if (property.indexOf('font') >= 0) {\n                        value = value.replace(quoteRe, \"'\");\n                    } else if (/\\burl\\(/g.test(value)) {\n                        value = value.replace(quoteRe, \"\");\n                    }\n\n                    properties.push({ property: property, value: value });\n                }\n\n                return properties;\n            }\n\n            function styleAttr(cssText) {\n                var properties = cssProperties(cssText);\n                var i;\n\n                for (i = 0; i < properties.length; i++) {\n                    result.push(properties[i].property);\n                    result.push(':');\n                    result.push(properties[i].value);\n                    result.push(';');\n                }\n            }\n\n            function specifiedAttributes(node) {\n                var result = [];\n                var attributes = node.attributes;\n                var attribute, i, l;\n                var name, value, specified;\n\n                for (i = 0, l = attributes.length; i < l; i++) {\n                    attribute = attributes[i];\n\n                    name = attribute.nodeName;\n                    value = attribute.value;\n                    specified = attribute.specified;\n\n                    // In IE < 8 the 'value' attribute is not returned as 'specified'. The same goes for type=\"text\"\n                    if (name == 'value' && 'value' in node && node.value) {\n                        specified = true;\n                    } else if (name == 'type' && value == 'text') {\n                        specified = true;\n                    } else if (name == \"class\" && !value) {\n                        specified = false;\n                    } else if (sizzleAttr.test(name)) {\n                        specified = false;\n                    } else if (name == 'complete') {\n                        specified = false;\n                    } else if (name == 'altHtml') {\n                        specified = false;\n                    } else if (name == 'start' && dom.is(node, \"ul\")) {\n                        specified = false;\n                    } else if (name == 'start' && dom.is(node, \"ol\") && value == \"1\") {\n                        specified = false;\n                    } else if (name.indexOf('_moz') >= 0) {\n                        specified = false;\n                    } else if (scriptAttr.test(name)) {\n                        specified = !!options.scripts;\n                    } else if (name == 'data-role' && value == 'resizable' && (dom.is(node, \"tr\") || dom.is(node, \"td\"))) {\n                        specified = false;\n                    }\n\n                    if (specified) {\n                        result.push(attribute);\n                    }\n                }\n\n                return result;\n            }\n\n            function attr(node, attributes) {\n                var i, l, attribute, name, value;\n\n                attributes = attributes || specifiedAttributes(node);\n\n                if (dom.is(node, 'img')) {\n                    var width = node.style.width,\n                        height = node.style.height,\n                        $node = $(node);\n\n                    if (width && pixelRe.test(width)) {\n                        $node.attr('width', parseInt(width, 10));\n                        dom.unstyle(node, { width: undefined$1 });\n                    }\n\n                    if (height && pixelRe.test(height)) {\n                        $node.attr('height', parseInt(height, 10));\n                        dom.unstyle(node, { height: undefined$1 });\n                    }\n                }\n\n                if (!attributes.length) {\n                    return;\n                }\n\n                // Remove the following if everything seems to be in order.\n                // https://github.com/telerik/kendo-ui-core/issues/3639\n                // attributes.sort(function (a, b) {\n                //     return a.nodeName > b.nodeName ? 1 : a.nodeName < b.nodeName ? -1 : 0;\n                // });\n\n                for (i = 0, l = attributes.length; i < l; i++) {\n                    attribute = attributes[i];\n                    name = attribute.nodeName;\n                    value = attribute.value;\n\n                    if (name == \"class\" && value == \"k-table\") {\n                        continue;\n                    }\n\n                    name = name.replace(scriptAttr, \"\");\n\n                    result.push(' ');\n                    result.push(name);\n                    result.push('=\"');\n\n                    if (name == 'style') {\n                        styleAttr(value || node.style.cssText);\n                    } else if (name == 'src' || name == 'href') {\n                        result.push(kendo.htmlEncode(node.getAttribute(name, 2)));\n                    } else {\n                        result.push(dom.fillAttrs[name] ? name : value);\n                    }\n\n                    result.push('\"');\n                }\n            }\n\n            function children(node, skip, skipEncoding) {\n                for (var childNode = node.firstChild; childNode; childNode = childNode.nextSibling) {\n                    child(childNode, skip, skipEncoding);\n                }\n            }\n\n            function text(node) {\n                return node.nodeValue.replace(/\\ufeff/g, \"\");\n            }\n\n            function isEmptyBomNode(node) {\n                if (dom.isBom(node)) {\n                    do {\n                        node = node.parentNode;\n\n                        if (dom.is(node, TD) && node.childNodes.length === 1) {\n                            return true;\n                        }\n\n                        if (node.childNodes.length !== 1) {\n                            return false;\n                        }\n                    } while (!dom.isBlock(node));\n\n                    return true;\n                }\n\n                return false;\n            }\n\n            function child(node, skip, skipEncoding) {\n                var nodeType = node.nodeType,\n                    tagName, mapper,\n                    parent, value, previous, jqNode;\n\n                if (immutables && Editor.Immutables.immutable(node)) {\n                    result.push(immutables.serialize(node));\n                } else if (nodeType == 1) {\n                    tagName = dom.name(node);\n                    jqNode = $(node);\n\n                    if (jqNode.hasClass(\"k-element-resize-handle-wrapper\") || jqNode.hasClass(\"k-column-resize-handle-wrapper\") || jqNode.hasClass(\"k-row-resize-handle-wrapper\")) {\n                        return;\n                    }\n\n                    if (!tagName || dom.insignificant(node)) {\n                        return;\n                    }\n\n                    if (!options.scripts && (tagName == \"script\" || tagName == \"k:script\")) {\n                        return;\n                    }\n\n                    mapper = tagMap[tagName];\n\n                    if (mapper) {\n                        if (mapper.canOptimize &&\n                            options.optimizeTags &&\n                            shouldOptimize(node)) {\n                                children(node, false, mapper.skipEncoding);\n                            return;\n                        }\n\n                        if (typeof mapper.semantic == \"undefined\" ||\n                            (options.semantic ^ mapper.semantic)) {\n                            mapper.start(node);\n                            children(node, false, mapper.skipEncoding);\n                            mapper.end(node);\n                            return;\n                        }\n                    }\n\n                    result.push('<');\n                    result.push(tagName);\n\n                    attr(node);\n\n                    if (dom.empty[tagName]) {\n                        result.push(' />');\n                    } else {\n                        result.push('>');\n                        children(node, skip || dom.is(node, 'pre'));\n                        result.push('</');\n                        result.push(tagName);\n                        result.push('>');\n                    }\n                } else if (nodeType == 3) {\n                    if (isEmptyBomNode(node)) {\n                        result.push('&nbsp;');\n                        return;\n                    }\n\n                    value = text(node);\n\n                    if (!skip && supportsLeadingWhitespace) {\n                        parent = node.parentNode;\n                        previous = node.previousSibling;\n\n                        if (!previous) {\n                             previous = (dom.isInline(parent) ? parent : node).previousSibling;\n                        }\n\n                        if (!previous || previous.innerHTML === \"\" || dom.isBlock(previous)) {\n                            if (options.keepEOL) {\n                                value = value.replace(/[\\r\\n\\v\\f\\t ]+/, ' ');\n                            } else {\n                                value = value.replace(/^[\\r\\n\\v\\f\\t ]+/, '');\n                            }\n                        }\n\n                        value = value.replace(/ +/, ' ');\n                    }\n\n                    result.push(skipEncoding ? value : dom.encode(value, options));\n\n                } else if (nodeType == 4) {\n                    result.push('<![CDATA[');\n                    result.push(node.data);\n                    result.push(']]>');\n                } else if (nodeType == 8) {\n                    if (node.data.indexOf('[CDATA[') < 0) {\n                        result.push('<!--');\n                        result.push(node.data);\n                        result.push('-->');\n                    } else {\n                        result.push('<!');\n                        result.push(node.data);\n                        result.push('>');\n                    }\n                }\n            }\n\n            function shouldOptimize(node) {\n                return node.attributes.length === 0;\n            }\n\n            function textOnly(root) {\n                var childrenCount = root.childNodes.length;\n                var textChild = childrenCount && root.firstChild.nodeType == 3;\n\n                return textChild && (childrenCount == 1 || (childrenCount == 2 && dom.insignificant(root.lastChild)));\n            }\n\n            function runCustom() {\n                if (kendo.isFunction(options.custom)) {\n                    result = options.custom(result) || result;\n                }\n            }\n\n            if (textOnly(root)) {\n                result = dom.encode(text(root.firstChild).replace(/[\\r\\n\\v\\f\\t ]+/, ' '), options);\n                runCustom();\n\n                return result;\n            }\n\n            children(root);\n            result = result.join('');\n            runCustom();\n\n            // if serialized dom contains only whitespace elements, consider it empty (required field validation)\n            if (result.replace(brRe, \"\").replace(emptyPRe, \"\") === \"\") {\n                return \"\";\n            }\n\n            return result;\n        }\n\n    };\n\n    extend(Editor, {\n        Serializer: Serializer\n    });\n\n    })(window.kendo.jQuery);\n\n    (function($, undefined$1) {\n\n    var kendo = window.kendo,\n        DropDownList = kendo.ui.DropDownList,\n        dom = kendo.ui.editor.Dom;\n\n    var SelectBox = DropDownList.extend({\n        init: function(element, options) {\n            var that = this;\n\n            DropDownList.fn.init.call(that, element, options);\n\n            // overlay drop-down with popout for snappier interaction\n            if (kendo.support.mobileOS.ios) {\n                this._initSelectOverlay();\n                this.bind(\"dataBound\", this._initSelectOverlay.bind(this));\n            }\n\n            that.text(that.options.title);\n\n            that.element.attr(\"title\", that.options.title);\n            that.wrapper.attr(\"title\", that.options.title);\n\n            that.bind(\"open\", function() {\n                if (that.options.autoSize) {\n                    var list = that.list,\n                        listWidth;\n\n                    list.css({\n                            whiteSpace: \"nowrap\",\n                            width: \"auto\"\n                        });\n\n                    listWidth = list.width();\n\n                    if (listWidth > 0) {\n                        listWidth += 20;\n                    } else {\n                        listWidth = that._listWidth;\n                    }\n\n                    list.css(\"width\", listWidth + kendo.support.scrollbar());\n\n                    that._listWidth = listWidth;\n                }\n            });\n        },\n        options: {\n            name: \"SelectBox\",\n            index: -1,\n            size: \"medium\",\n            fillMode: \"solid\",\n            rounded: \"medium\"\n        },\n\n        _initSelectOverlay: function() {\n            var selectBox = this;\n            var value = selectBox.value();\n            var view = this.dataSource.view();\n            var item;\n            var html = \"\";\n            var encode = kendo.htmlEncode;\n\n            for (var i = 0; i < view.length; i++) {\n                item = view[i];\n\n                html += \"<option value='\" + encode(item.value) + \"'\";\n\n                if (item.value == value) {\n                    html += \" selected\";\n                }\n\n                html += \">\" + encode(item.text) + \"</option>\";\n            }\n\n            var select = $(\"<select class='k-select-overlay'>\" + html + \"</select>\");\n            var wrapper = $(this.element).closest(\".k-dropdownlist\");\n\n            wrapper.next(\".k-select-overlay\").remove();\n\n            select.insertAfter(wrapper);\n\n            select.on(\"change\", function() {\n                selectBox.value(this.value);\n                selectBox.trigger(\"change\");\n            });\n        },\n\n        value: function(value) {\n            var that = this,\n                result = DropDownList.fn.value.call(that, value);\n\n            if (value === undefined$1) {\n                return result;\n            }\n\n            if (!DropDownList.fn.value.call(that)) {\n               that.text(that.options.title);\n            }\n        },\n\n        decorate: function(body) {\n            var that = this,\n                dataSource = that.dataSource,\n                items = dataSource.data(),\n                i, tag, className, style;\n\n            if (body) {\n                that.list.css(\"background-color\", dom.getEffectiveBackground($(body)));\n            }\n\n            for (i = 0; i < items.length; i++) {\n                tag = items[i].tag || \"span\";\n                className = items[i].className;\n\n                style = dom.inlineStyle(body, tag, { className: className });\n\n                style = style.replace(/\"/g, \"'\");\n\n                items[i].style = style + \";display:inline-block\";\n            }\n\n            dataSource.trigger(\"change\");\n        }\n    });\n\n\n    kendo.ui.plugin(SelectBox);\n    kendo.ui.editor.SelectBox = SelectBox;\n\n    kendo.cssProperties.registerPrefix(\"SelectBox\", \"k-picker-\");\n\n    kendo.cssProperties.registerValues(\"SelectBox\", [{\n        prop: \"rounded\",\n        values: kendo.cssProperties.roundedValues.concat([['full', 'full']])\n    }]);\n\n    })(window.kendo.jQuery);\n\n    (function($) {\n\n        // Imports ================================================================\n        var kendo = window.kendo,\n            Class = kendo.Class,\n            extend = $.extend,\n            Editor = kendo.ui.editor,\n            browser = kendo.support.browser,\n            dom = Editor.Dom,\n            findNodeIndex = dom.findNodeIndex,\n            isDataNode = dom.isDataNode,\n            findClosestAncestor = dom.findClosestAncestor,\n            getNodeLength = dom.getNodeLength,\n            normalize = dom.normalize;\n\n    var SelectionUtils = {\n        selectionFromWindow: function(window) {\n            if (!window) {\n                return;\n            }\n\n            if (!(\"getSelection\" in window)) {\n                return new W3CSelection(window.document);\n            }\n\n            return window.getSelection();\n        },\n\n        selectionFromRange: function(range) {\n            var rangeDocument = RangeUtils.documentFromRange(range);\n            return SelectionUtils.selectionFromDocument(rangeDocument);\n        },\n\n        selectionFromDocument: function(document) {\n            return SelectionUtils.selectionFromWindow(dom.windowFromDocument(document));\n        }\n    };\n\n    var W3CRange = Class.extend({\n        init: function(doc) {\n            $.extend(this, {\n                ownerDocument: doc, /* not part of the spec; used when cloning ranges, traversing the dom and creating fragments */\n                startContainer: doc,\n                endContainer: doc,\n                commonAncestorContainer: doc,\n                startOffset: 0,\n                endOffset: 0,\n                collapsed: true\n            });\n        },\n\n        // Positioning Methods\n        setStart: function(node, offset) {\n            this.startContainer = node;\n            this.startOffset = offset;\n            updateRangeProperties(this);\n            fixIvalidRange(this, true);\n        },\n\n        setEnd: function(node, offset) {\n            this.endContainer = node;\n            this.endOffset = offset;\n            updateRangeProperties(this);\n            fixIvalidRange(this, false);\n        },\n\n        setStartBefore: function(node) {\n            this.setStart(node.parentNode, findNodeIndex(node));\n        },\n\n        setStartAfter: function(node) {\n            this.setStart(node.parentNode, findNodeIndex(node) + 1);\n        },\n\n        setEndBefore: function(node) {\n            this.setEnd(node.parentNode, findNodeIndex(node));\n        },\n\n        setEndAfter: function(node) {\n            this.setEnd(node.parentNode, findNodeIndex(node) + 1);\n        },\n\n        selectNode: function(node) {\n            this.setStartBefore(node);\n            this.setEndAfter(node);\n        },\n\n        selectNodeContents: function(node) {\n            this.setStart(node, 0);\n            this.setEnd(node, node[node.nodeType === 1 ? 'childNodes' : 'nodeValue'].length);\n        },\n\n        collapse: function(toStart) {\n            var that = this;\n\n            if (toStart) {\n                that.setEnd(that.startContainer, that.startOffset);\n            } else {\n                that.setStart(that.endContainer, that.endOffset);\n            }\n        },\n\n        // Editing Methods\n\n        deleteContents: function() {\n            var that = this,\n                range = that.cloneRange();\n\n            if (that.startContainer != that.commonAncestorContainer) {\n                that.setStartAfter(findClosestAncestor(that.commonAncestorContainer, that.startContainer));\n            }\n\n            that.collapse(true);\n\n            (function deleteSubtree(iterator) {\n                while (iterator.next()) {\n                    if (iterator.hasPartialSubtree()) {\n                        deleteSubtree(iterator.getSubtreeIterator());\n                    } else {\n                        iterator.remove();\n                    }\n                }\n            })(new RangeIterator(range));\n        },\n\n        cloneContents: function() {\n            // clone subtree\n            var document = RangeUtils.documentFromRange(this);\n            return (function cloneSubtree(iterator) {\n                    var node, frag = document.createDocumentFragment();\n\n                    while (node = iterator.next()) {\n                        node = node.cloneNode(!iterator.hasPartialSubtree());\n\n                        if (iterator.hasPartialSubtree()) {\n                            node.appendChild(cloneSubtree(iterator.getSubtreeIterator()));\n                        }\n\n                        frag.appendChild(node);\n                    }\n\n                    return frag;\n            })(new RangeIterator(this));\n        },\n\n        extractContents: function() {\n            var that = this,\n                range = that.cloneRange();\n\n            if (that.startContainer != that.commonAncestorContainer) {\n                that.setStartAfter(findClosestAncestor(that.commonAncestorContainer, that.startContainer));\n            }\n\n            that.collapse(true);\n\n            var document = RangeUtils.documentFromRange(that);\n\n            return (function extractSubtree(iterator) {\n                var node, frag = document.createDocumentFragment();\n\n                while (node = iterator.next()) {\n                    if (iterator.hasPartialSubtree()) {\n                        node = node.cloneNode(false);\n                        node.appendChild(extractSubtree(iterator.getSubtreeIterator()));\n                    } else {\n                        iterator.remove(that.originalRange);\n                    }\n\n                    frag.appendChild(node);\n                }\n\n                return frag;\n            })(new RangeIterator(range));\n        },\n\n        insertNode: function(node) {\n            var that = this;\n\n            if (isDataNode(that.startContainer)) {\n                if (that.startOffset != that.startContainer.nodeValue.length) {\n                    dom.splitDataNode(that.startContainer, that.startOffset);\n                }\n\n                dom.insertAfter(node, that.startContainer);\n            } else {\n                dom.insertAt(that.startContainer, node, that.startOffset);\n            }\n\n            that.setStart(that.startContainer, that.startOffset);\n        },\n\n        cloneRange: function() {\n            // fast copy\n            return $.extend(new W3CRange(this.ownerDocument), {\n                startContainer: this.startContainer,\n                endContainer: this.endContainer,\n                commonAncestorContainer: this.commonAncestorContainer,\n                startOffset: this.startOffset,\n                endOffset: this.endOffset,\n                collapsed: this.collapsed,\n\n                originalRange: this /* not part of the spec; used to update the original range when calling extractContents() on clones */\n            });\n        },\n\n        // used for debug purposes\n        toString: function() {\n            var startNodeName = this.startContainer.nodeName,\n                endNodeName = this.endContainer.nodeName;\n\n            return [startNodeName == \"#text\" ? this.startContainer.nodeValue : startNodeName, '(', this.startOffset, ') : ',\n                    endNodeName == \"#text\" ? this.endContainer.nodeValue : endNodeName, '(', this.endOffset, ')'].join('');\n        }\n    });\n\n    W3CRange.fromNode = function(node) {\n        return new W3CRange(node.ownerDocument);\n    };\n\n    /* can be used in Range.compareBoundaryPoints if we need it one day */\n    function compareBoundaries(start, end, startOffset, endOffset) {\n        if (start == end) {\n            return endOffset - startOffset;\n        }\n\n        // end is child of start\n        var container = end;\n        while (container && container.parentNode != start) {\n            container = container.parentNode;\n        }\n\n        if (container) {\n            return findNodeIndex(container) - startOffset;\n        }\n\n        // start is child of end\n        container = start;\n        while (container && container.parentNode != end) {\n            container = container.parentNode;\n        }\n\n        if (container) {\n            return endOffset - findNodeIndex(container) - 1;\n        }\n\n        // deep traversal\n        var root = dom.commonAncestor(start, end);\n        var startAncestor = start;\n\n        while (startAncestor && startAncestor.parentNode != root) {\n            startAncestor = startAncestor.parentNode;\n        }\n\n        if (!startAncestor) {\n            startAncestor = root;\n        }\n\n        var endAncestor = end;\n        while (endAncestor && endAncestor.parentNode != root) {\n            endAncestor = endAncestor.parentNode;\n        }\n\n        if (!endAncestor) {\n            endAncestor = root;\n        }\n\n        if (startAncestor == endAncestor) {\n            return 0;\n        }\n\n        return findNodeIndex(endAncestor) - findNodeIndex(startAncestor);\n    }\n\n    function fixIvalidRange(range, toStart) {\n        function isInvalidRange(range) {\n            try {\n                return compareBoundaries(range.startContainer, range.endContainer, range.startOffset, range.endOffset) < 0;\n            } catch (ex) {\n                // range was initially invalid (e.g. when cloned from invalid range) - it must be fixed\n                return true;\n            }\n        }\n\n        if (isInvalidRange(range)) {\n            if (toStart) {\n                range.commonAncestorContainer = range.endContainer = range.startContainer;\n                range.endOffset = range.startOffset;\n            } else {\n                range.commonAncestorContainer = range.startContainer = range.endContainer;\n                range.startOffset = range.endOffset;\n            }\n\n            range.collapsed = true;\n        }\n    }\n\n    function updateRangeProperties(range) {\n        range.collapsed = range.startContainer == range.endContainer && range.startOffset == range.endOffset;\n\n        var node = range.startContainer;\n        while (node && node != range.endContainer && !dom.isAncestorOf(node, range.endContainer)) {\n            node = node.parentNode;\n        }\n\n        range.commonAncestorContainer = node;\n    }\n\n    var RangeIterator = Class.extend({\n        init: function(range) {\n            $.extend(this, {\n                range: range,\n                _current: null,\n                _next: null,\n                _end: null\n            });\n\n            if (range.collapsed) {\n                return;\n            }\n\n            var root = range.commonAncestorContainer;\n\n            this._next = range.startContainer == root && !isDataNode(range.startContainer) ?\n            range.startContainer.childNodes[range.startOffset] :\n            findClosestAncestor(root, range.startContainer);\n\n            this._end = range.endContainer == root && !isDataNode(range.endContainer) ?\n            range.endContainer.childNodes[range.endOffset] :\n            findClosestAncestor(root, range.endContainer).nextSibling;\n        },\n\n        hasNext: function() {\n            return !!this._next;\n        },\n\n        next: function() {\n            var that = this,\n                current = that._current = that._next;\n            that._next = that._current && that._current.nextSibling != that._end ?\n            that._current.nextSibling : null;\n\n            if (isDataNode(that._current)) {\n                if (that.range.endContainer == that._current) {\n                    current = current.cloneNode(true);\n                    current.deleteData(that.range.endOffset, current.length - that.range.endOffset);\n                }\n\n                if (that.range.startContainer == that._current) {\n                    current = current.cloneNode(true);\n                    current.deleteData(0, that.range.startOffset);\n                }\n            }\n\n            return current;\n        },\n\n        traverse: function(callback) {\n            var that = this,\n                current;\n\n            function next() {\n                that._current = that._next;\n                that._next = that._current && that._current.nextSibling != that._end ? that._current.nextSibling : null;\n                return that._current;\n            }\n\n            while (current = next()) {\n                if (that.hasPartialSubtree()) {\n                    that.getSubtreeIterator().traverse(callback);\n                } else {\n                    callback(current);\n                }\n            }\n\n            return current;\n        },\n\n        remove: function(originalRange) {\n            var that = this,\n                inStartContainer = that.range.startContainer == that._current,\n                inEndContainer = that.range.endContainer == that._current,\n                start, end, delta;\n\n            if (isDataNode(that._current) && (inStartContainer || inEndContainer)) {\n                start = inStartContainer ? that.range.startOffset : 0;\n                end = inEndContainer ? that.range.endOffset : that._current.length;\n                delta = end - start;\n\n                if (originalRange && (inStartContainer || inEndContainer)) {\n                    if (that._current == originalRange.startContainer && start <= originalRange.startOffset) {\n                        originalRange.startOffset -= delta;\n                    }\n\n                    if (that._current == originalRange.endContainer && end <= originalRange.endOffset) {\n                        originalRange.endOffset -= delta;\n                    }\n                }\n\n                that._current.deleteData(start, delta);\n            } else {\n                var parent = that._current.parentNode;\n\n                if (originalRange && (that.range.startContainer == parent || that.range.endContainer == parent)) {\n                    var nodeIndex = findNodeIndex(that._current);\n\n                    if (parent == originalRange.startContainer && nodeIndex <= originalRange.startOffset) {\n                        originalRange.startOffset -= 1;\n                    }\n\n                    if (parent == originalRange.endContainer && nodeIndex < originalRange.endOffset) {\n                        originalRange.endOffset -= 1;\n                    }\n                }\n\n                dom.remove(that._current);\n            }\n        },\n\n        hasPartialSubtree: function() {\n            return !isDataNode(this._current) &&\n            (dom.isAncestorOrSelf(this._current, this.range.startContainer) ||\n                dom.isAncestorOrSelf(this._current, this.range.endContainer));\n        },\n\n        getSubtreeIterator: function() {\n            return new RangeIterator(this.getSubRange());\n        },\n\n        getSubRange: function() {\n            var that = this,\n                subRange = that.range.cloneRange();\n            subRange.selectNodeContents(that._current);\n            if (dom.isAncestorOrSelf(that._current, that.range.startContainer)) {\n                subRange.setStart(that.range.startContainer, that.range.startOffset);\n            }\n            if (dom.isAncestorOrSelf(that._current, that.range.endContainer)) {\n                subRange.setEnd(that.range.endContainer, that.range.endOffset);\n            }\n\n            return subRange;\n        }\n    });\n\n    var W3CSelection = Class.extend({\n        init: function(doc) {\n            this.ownerDocument = doc;\n            this.rangeCount = 1;\n        },\n\n        addRange: function(range) {\n            var textRange = this.ownerDocument.body.createTextRange();\n\n            // end container should be adopted first in order to prevent selection with negative length\n            adoptContainer(textRange, range, false);\n            adoptContainer(textRange, range, true);\n\n            textRange.select();\n        },\n\n        removeAllRanges: function() {\n            var selection = this.ownerDocument.selection;\n\n            if (selection.type != \"None\") {\n                selection.empty();\n            }\n        },\n\n        getRangeAt: function() {\n            var textRange,\n                range = new W3CRange(this.ownerDocument),\n                selection = this.ownerDocument.selection,\n                element, commonAncestor;\n\n            try {\n                textRange = selection.createRange();\n                element = textRange.item ? textRange.item(0) : textRange.parentElement();\n                if (element.ownerDocument != this.ownerDocument) {\n                    return range;\n                }\n            } catch (ex) {\n                return range;\n            }\n\n            if (selection.type == \"Control\") {\n                range.selectNode(textRange.item(0));\n            } else {\n                commonAncestor = textRangeContainer(textRange);\n                adoptEndPoint(textRange, range, commonAncestor, true);\n                adoptEndPoint(textRange, range, commonAncestor, false);\n\n                if (range.startContainer.nodeType == 9) {\n                    range.setStart(range.endContainer, range.startOffset);\n                }\n\n                if (range.endContainer.nodeType == 9) {\n                    range.setEnd(range.startContainer, range.endOffset);\n                }\n\n                if (textRange.compareEndPoints(\"StartToEnd\", textRange) === 0) {\n                    range.collapse(false);\n                }\n\n                var startContainer = range.startContainer,\n                    endContainer = range.endContainer,\n                    body = this.ownerDocument.body;\n\n                if (!range.collapsed && range.startOffset === 0 && range.endOffset == getNodeLength(range.endContainer) && // check for full body selection\n                    !(startContainer == endContainer && isDataNode(startContainer) && startContainer.parentNode == body)) { // but not when single textnode is selected\n                    var movedStart = false,\n                        movedEnd = false;\n\n                    while (findNodeIndex(startContainer) === 0 && startContainer == startContainer.parentNode.firstChild && startContainer != body) {\n                        startContainer = startContainer.parentNode;\n                        movedStart = true;\n                    }\n\n                    while (findNodeIndex(endContainer) == getNodeLength(endContainer.parentNode) - 1 && endContainer == endContainer.parentNode.lastChild && endContainer != body) {\n                        endContainer = endContainer.parentNode;\n                        movedEnd = true;\n                    }\n\n                    if (startContainer == body && endContainer == body && movedStart && movedEnd) {\n                        range.setStart(startContainer, 0);\n                        range.setEnd(endContainer, getNodeLength(body));\n                    }\n                }\n            }\n\n            return range;\n        }\n    });\n\n    function textRangeContainer(textRange) {\n        var left = textRange.duplicate(),\n            right = textRange.duplicate();\n\n        left.collapse(true);\n        right.collapse(false);\n\n        return dom.commonAncestor(textRange.parentElement(), left.parentElement(), right.parentElement());\n    }\n\n    function adoptContainer(textRange, range, start) {\n        // find anchor node and offset\n        var container = range[start ? \"startContainer\" : \"endContainer\"],\n            offset = range[start ? \"startOffset\" : \"endOffset\"],\n            textOffset = 0,\n            isData = isDataNode(container),\n            anchorNode = isData ? container : container.childNodes[offset] || null,\n            anchorParent = isData ? container.parentNode : container,\n            doc = range.ownerDocument,\n            cursor = doc.body.createTextRange(),\n            cursorNode;\n\n        // visible data nodes need a text offset\n        if (container.nodeType == 3 || container.nodeType == 4) {\n            textOffset = offset;\n        }\n\n        if (!anchorParent) {\n            anchorParent = doc.body;\n        }\n\n        if (anchorParent.nodeName.toLowerCase() == \"img\") {\n            cursor.moveToElementText(anchorParent);\n            cursor.collapse(false);\n            textRange.setEndPoint(start ? \"StartToStart\" : \"EndToStart\", cursor);\n        } else {\n            // create a cursor element node to position range (since we can't select text nodes)\n            cursorNode = anchorParent.insertBefore(dom.create(doc, \"a\"), anchorNode);\n\n            cursor.moveToElementText(cursorNode);\n            dom.remove(cursorNode);\n            cursor[start ? \"moveStart\" : \"moveEnd\"](\"character\", textOffset);\n            cursor.collapse(false);\n            textRange.setEndPoint(start ? \"StartToStart\" : \"EndToStart\", cursor);\n        }\n    }\n\n    function adoptEndPoint(textRange, range, commonAncestor, start) {\n        var cursorNode = dom.create(range.ownerDocument, \"a\"),\n            cursor = textRange.duplicate(),\n            comparison = start ? \"StartToStart\" : \"StartToEnd\",\n            result, parent, target,\n            previous, next,\n            args, index,\n            appended = false;\n\n        cursorNode.innerHTML = \"\\ufeff\";\n        cursor.collapse(start);\n\n        parent = cursor.parentElement();\n\n        if (!dom.isAncestorOrSelf(commonAncestor, parent)) {\n            parent = commonAncestor;\n        }\n\n        // detect range end points\n        // insert cursorNode within the textRange parent and move the cursor until it gets outside of the textRange\n        do {\n            if (appended) {\n                parent.insertBefore(cursorNode, cursorNode.previousSibling);\n            } else {\n                parent.appendChild(cursorNode);\n                appended = true;\n            }\n            cursor.moveToElementText(cursorNode);\n        } while ((result = cursor.compareEndPoints(comparison, textRange)) > 0 && cursorNode.previousSibling);\n\n        target = cursorNode.nextSibling;\n\n        if (result == -1 && isDataNode(target)) {\n            cursor.setEndPoint(start ? \"EndToStart\" : \"EndToEnd\", textRange);\n\n            dom.remove(cursorNode);\n\n            args = [target, cursor.text.length];\n        } else {\n            previous = !start && cursorNode.previousSibling;\n            next = start && cursorNode.nextSibling;\n\n            if (isDataNode(next)) {\n                args = [next, 0];\n            } else if (isDataNode(previous)) {\n                args = [previous, previous.length];\n            } else {\n                index = findNodeIndex(cursorNode);\n\n                if (parent.nextSibling && index == parent.childNodes.length - 1) {\n                    args = [parent.nextSibling, 0];\n                } else {\n                    args = [parent, index];\n                }\n            }\n\n            dom.remove(cursorNode);\n        }\n\n        range[start ? \"setStart\" : \"setEnd\"].apply(range, args);\n    }\n\n    var RangeEnumerator = Class.extend({\n        init: function(range) {\n            this.enumerate = function() {\n                var nodes = [];\n\n                function visit(node) {\n                    if (dom.is(node, \"img\") || (node.nodeType == 3 && (!dom.isEmptyspace(node) || node.nodeValue == \"\\ufeff\"))) {\n                        nodes.push(node);\n                    } else {\n                        node = node.firstChild;\n                        while (node) {\n                            visit(node);\n                            node = node.nextSibling;\n                        }\n                    }\n                }\n\n                new RangeIterator(range).traverse(visit);\n\n                return nodes;\n            };\n        }\n    });\n\n    var ImmutablesRangeIterator = RangeIterator.extend({\n        hasPartialSubtree: function() {\n            var immutable = Editor.Immutables && Editor.Immutables.immutable;\n            return immutable && !immutable(this._current) && RangeIterator.fn.hasPartialSubtree.call(this);\n        },\n\n        getSubtreeIterator: function() {\n            return new ImmutablesRangeIterator(this.getSubRange());\n        }\n    });\n\n    var ImmutablesRangeEnumerator = Class.extend({\n        init: function(range) {\n            this.enumerate = function() {\n                var nodes = [];\n                var immutable = Editor.Immutables && Editor.Immutables.immutable;\n                function visit(node) {\n                    if (immutable && !immutable(node)) {\n                        if (dom.is(node, \"img\") || (node.nodeType == 3 && (!dom.isEmptyspace(node) || node.nodeValue == \"\\ufeff\"))) {\n                            nodes.push(node);\n                        } else {\n                            node = node.firstChild;\n                            while (node) {\n                                visit(node);\n                                node = node.nextSibling;\n                            }\n                        }\n                    }\n                }\n\n                new ImmutablesRangeIterator(range).traverse(visit);\n\n                return nodes;\n            };\n        }\n    });\n\n    var RestorePoint = Class.extend({\n        init: function(range, body, options) {\n            var that = this;\n            that.range = range;\n            that.rootNode = RangeUtils.documentFromRange(range);\n            that.body = body || that.getEditable(range);\n            if (dom.name(that.body) != \"body\") {\n                that.rootNode = that.body;\n            }\n\n            that.startContainer = that.nodeToPath(range.startContainer);\n            that.endContainer = that.nodeToPath(range.endContainer);\n            that.startOffset = that.offset(range.startContainer, range.startOffset);\n            that.endOffset = that.offset(range.endContainer, range.endOffset);\n\n            that.immutables = options && options.immutables;\n\n            if (that.immutables) {\n                that.serializedImmutables = Editor.Immutables.removeImmutables(that.body);\n            }\n\n            that.html = that.body.innerHTML;\n\n            if (that.immutables && !that.serializedImmutables.empty) {\n                Editor.Immutables.restoreImmutables(that.body, that.serializedImmutables);\n            }\n        },\n\n        index: function(node) {\n            var result = 0,\n                lastType = node.nodeType;\n\n            while (node = node.previousSibling) {\n                var nodeType = node.nodeType;\n\n                if (nodeType != 3 || lastType != nodeType) {\n                    result ++;\n                }\n\n                lastType = nodeType;\n            }\n\n            return result;\n        },\n\n        getEditable: function(range) {\n            var root = range.commonAncestorContainer;\n\n            while (root && (root.nodeType == 3 || root.attributes && (!root.attributes.contentEditable || root.attributes.contentEditable.nodeValue.toLowerCase() == \"false\"))) {\n                root = root.parentNode;\n            }\n\n            return root;\n        },\n\n        restoreHtml: function() {\n            var that = this;\n\n            dom.removeChildren(that.body);\n            that.body.innerHTML = that.html;\n            if (that.immutables && !that.serializedImmutables.empty) {\n                Editor.Immutables.restoreImmutables(that.body, that.serializedImmutables);\n            }\n        },\n\n        offset: function(node, value) {\n            if (node.nodeType == 3) {\n                while ((node = node.previousSibling) && node.nodeType == 3) {\n                    value += node.nodeValue.length;\n                }\n            }\n\n            return value;\n        },\n\n        nodeToPath: function(node) {\n            var path = [];\n\n            while (node != this.rootNode) {\n                path.push(this.index(node));\n                node = node.parentNode;\n            }\n\n            return path;\n        },\n\n        toRangePoint: function(range, start, path, denormalizedOffset) {\n            var node = this.rootNode,\n                length = path.length,\n                offset = denormalizedOffset;\n\n            while (length-- && node) {\n                node = node.childNodes[path[length]];\n            }\n\n            while (node && node.nodeType == 3 && node.nodeValue.length < offset) {\n                offset -= node.nodeValue.length;\n                node = node.nextSibling;\n            }\n\n            if (node && offset >= 0) {\n                range[start ? 'setStart' : 'setEnd'](node, offset);\n            }\n        },\n\n        toRange: function() {\n            var that = this,\n                result = that.range.cloneRange();\n\n            that.toRangePoint(result, true, that.startContainer, that.startOffset);\n            that.toRangePoint(result, false, that.endContainer, that.endOffset);\n\n            return result;\n        }\n\n    });\n\n    var Marker = Class.extend({\n        init: function() {\n            this.caret = null;\n        },\n\n        addCaret: function(range) {\n            var that = this;\n            var caret = that.caret = dom.create(RangeUtils.documentFromRange(range), 'span', { className: 'k-marker' });\n            range.insertNode(caret);\n\n            dom.stripBomNode(caret.previousSibling);\n            dom.stripBomNode(caret.nextSibling);\n\n            range.selectNode(caret);\n            return caret;\n        },\n\n        removeCaret: function(range) {\n            var that = this,\n                previous = that.caret.previousSibling,\n                startOffset = 0;\n\n            if (previous) {\n                startOffset = isDataNode(previous) ? previous.nodeValue.length : findNodeIndex(previous);\n            }\n\n            var container = that.caret.parentNode;\n            var containerIndex = previous ? findNodeIndex(previous) : 0;\n\n            dom.remove(that.caret);\n            normalize(container);\n\n            var node = container.childNodes[containerIndex];\n\n            if (isDataNode(node)) {\n                range.setStart(node, startOffset);\n            } else if (node) {\n                var textNode = dom.lastTextNode(node);\n                if (textNode) {\n                    range.setStart(textNode, textNode.nodeValue.length);\n                } else {\n                    range[previous ? 'setStartAfter' : 'setStartBefore'](node);\n                }\n            } else {\n                if (!browser.msie && !container.innerHTML) {\n                    container.innerHTML = '<br _moz_dirty=\"\" />';\n                }\n\n                range.selectNodeContents(container);\n            }\n            range.collapse(true);\n        },\n\n        add: function(range, expand) {\n            var that = this;\n\n            var collapsed = range.collapsed && !RangeUtils.isExpandable(range);\n            var doc = RangeUtils.documentFromRange(range);\n\n            if (expand && range.collapsed) {\n                that.addCaret(range);\n                range = RangeUtils.expand(range);\n            }\n\n            var rangeBoundary = range.cloneRange();\n\n            rangeBoundary.collapse(false);\n            that.end = dom.create(doc, 'span', { className: 'k-marker' });\n            rangeBoundary.insertNode(that.end);\n\n            rangeBoundary = range.cloneRange();\n            rangeBoundary.collapse(true);\n            that.start = that.end.cloneNode(true);\n            rangeBoundary.insertNode(that.start);\n\n            that._removeDeadMarkers(that.start, that.end);\n\n            if (collapsed) {\n                var bom = doc.createTextNode(\"\\ufeff\");\n                dom.insertAfter(bom.cloneNode(), that.start);\n                dom.insertBefore(bom, that.end);\n            }\n\n            normalize(range.commonAncestorContainer);\n\n            range.setStartBefore(that.start);\n            range.setEndAfter(that.end);\n\n            return range;\n        },\n\n        _removeDeadMarkers: function(start, end) {\n            if (start.previousSibling && start.previousSibling.nodeValue == \"\\ufeff\") {\n                dom.remove(start.previousSibling);\n            }\n\n            if (end.nextSibling && end.nextSibling.nodeValue == \"\\ufeff\") {\n                dom.remove(end.nextSibling);\n            }\n        },\n\n        _normalizedIndex: function(node) {\n            var index = findNodeIndex(node);\n            var pointer = node;\n\n            while (pointer.previousSibling) {\n                if (pointer.nodeType == 3 && pointer.previousSibling.nodeType == 3) {\n                    index--;\n                }\n\n                pointer = pointer.previousSibling;\n            }\n\n            return index;\n        },\n\n        remove: function(range) {\n            var that = this,\n                start = that.start,\n                end = that.end,\n                shouldNormalizeStart,\n                shouldNormalizeEnd,\n                shouldNormalize;\n\n            normalize(range.commonAncestorContainer);\n\n            while (!start.nextSibling && start.parentNode) {\n                start = start.parentNode;\n            }\n\n            while (!end.previousSibling && end.parentNode) {\n                end = end.parentNode;\n            }\n\n            // merely accessing the siblings will solve range issues in IE\n            shouldNormalizeStart = (start.previousSibling && start.previousSibling.nodeType == 3) &&\n                                   (start.nextSibling && start.nextSibling.nodeType == 3);\n\n            shouldNormalizeEnd = (end.previousSibling && end.previousSibling.nodeType == 3) &&\n                                 (end.nextSibling && end.nextSibling.nodeType == 3);\n\n            shouldNormalize = shouldNormalizeStart && shouldNormalizeEnd;\n\n            start = start.nextSibling;\n            end = end.previousSibling;\n\n            var isBomSelected = start === end && dom.isBom(start);\n            if (isBomSelected && start.length > 1) {\n                start.nodeValue = start.nodeValue.charAt(0);\n            }\n\n            var collapsed = isBomSelected;\n            var collapsedToStart = false;\n            // collapsed range\n            if (start == that.end) {\n                collapsedToStart = !!that.start.previousSibling;\n                start = end = that.start.previousSibling || that.end.nextSibling;\n                collapsed = true;\n            }\n\n            dom.remove(that.start);\n            dom.remove(that.end);\n\n            if (!start || !end) {\n                range.selectNodeContents(range.commonAncestorContainer);\n                range.collapse(true);\n                return;\n            }\n\n            var startOffset = collapsed ? isDataNode(start) ? start.nodeValue.length : start.childNodes.length : 0;\n            var endOffset = isDataNode(end) ? end.nodeValue.length : end.childNodes.length;\n\n            if (start.nodeType == 3) {\n                while (start.previousSibling && start.previousSibling.nodeType == 3) {\n                    start = start.previousSibling;\n                    startOffset += start.nodeValue.length;\n                }\n            }\n\n            if (end.nodeType == 3) {\n                while (end.previousSibling && end.previousSibling.nodeType == 3) {\n                    end = end.previousSibling;\n                    endOffset += end.nodeValue.length;\n                }\n            }\n\n            var startParent = start.parentNode;\n            var endParent = end.parentNode;\n            var startIndex = this._normalizedIndex(start);\n            var endIndex = this._normalizedIndex(end);\n\n            normalize(startParent);\n            if (start.nodeType == 3) {\n                start = startParent.childNodes[startIndex];\n            }\n\n            normalize(endParent);\n            if (end.nodeType == 3) {\n                end = endParent.childNodes[endIndex];\n            }\n\n            if (collapsed) {\n                if (start.nodeType == 3) {\n                    range.setStart(start, startOffset);\n                } else {\n                    range[collapsedToStart ? 'setStartAfter' : 'setStartBefore'](start);\n                }\n\n                range.collapse(true);\n\n            } else {\n                if (start.nodeType == 3) {\n                    range.setStart(start, startOffset);\n                } else {\n                    range.setStartBefore(start);\n                }\n\n                if (end.nodeType == 3) {\n                    range.setEnd(end, endOffset);\n                } else {\n                    range.setEndAfter(end);\n                }\n            }\n\n            if (that.caret) {\n                that.removeCaret(range);\n            }\n        }\n    });\n\n    var boundary = /[\\u0009-\\u000d]|\\u0020|\\u00a0|\\ufeff|\\.|,|;|:|!|\\(|\\)|\\?/;\n\n    var RangeUtils = {\n        nodes: function(range) {\n            var nodes = RangeUtils.textNodes(range);\n            if (!nodes.length) {\n                range.selectNodeContents(range.commonAncestorContainer);\n                nodes = RangeUtils.textNodes(range);\n                if (!nodes.length) {\n                    nodes = dom.significantChildNodes(range.commonAncestorContainer);\n                }\n            }\n            return nodes;\n        },\n\n        textNodes: function(range) {\n            var allNodes = new RangeEnumerator(range).enumerate(),\n                result = allNodes.filter(function(node) {\n                    return dom.allowsTextContent(node.parentElement);\n                });\n\n            return result;\n        },\n\n        editableTextNodes: function(range) {\n            var nodes = [],\n                immutableParent = Editor.Immutables && Editor.Immutables.immutableParent,\n                result = [];\n\n            if (immutableParent && !immutableParent(range.commonAncestorContainer)) {\n                nodes = new ImmutablesRangeEnumerator(range).enumerate();\n                result = nodes.filter(function(node) {\n                    return dom.allowsTextContent(node.parentElement);\n                });\n            }\n\n            return result;\n        },\n\n        documentFromRange: function(range) {\n            var startContainer = range.startContainer;\n            return startContainer.nodeType == 9 ? startContainer : startContainer.ownerDocument;\n        },\n\n        createRange: function(document) {\n            return document.createRange();\n        },\n\n        selectRange: function(range) {\n            var image = RangeUtils.image(range);\n            if (image) {\n                range.setStartAfter(image);\n                range.setEndAfter(image);\n            }\n            var selection = SelectionUtils.selectionFromRange(range);\n            selection.removeAllRanges();\n            selection.addRange(range);\n        },\n\n        stringify: function(range) {\n            return kendo.format(\n                \"{0}:{1} - {2}:{3}\",\n                dom.name(range.startContainer), range.startOffset,\n                dom.name(range.endContainer), range.endOffset\n            );\n        },\n\n        split: function(range, node, trim) {\n            function partition(start) {\n                var partitionRange = range.cloneRange();\n                partitionRange.collapse(start);\n                partitionRange[start ? 'setStartBefore' : 'setEndAfter'](node);\n                var contents = partitionRange.extractContents();\n                if (trim) {\n                    contents = dom.trim(contents);\n                }\n                dom[start ? 'insertBefore' : 'insertAfter'](contents, node);\n            }\n            partition(true);\n            partition(false);\n        },\n\n        mapAll: function(range, map) {\n            var nodes = [];\n\n            new RangeIterator(range).traverse(function(node) {\n                var mapped = map(node);\n\n                if (mapped && $.inArray(mapped, nodes) < 0) {\n                    nodes.push(mapped);\n                }\n            });\n\n            return nodes;\n        },\n\n        getAll: function(range, predicate) {\n            var selector = predicate;\n\n            if (typeof predicate == \"string\") {\n                predicate = function(node) {\n                    return dom.is(node, selector);\n                };\n            }\n\n            return RangeUtils.mapAll(range, function(node) {\n                if (predicate(node)) {\n                    return node;\n                }\n            });\n        },\n\n        getMarkers: function(range) {\n            return RangeUtils.getAll(range, function(node) {\n                return node.className == 'k-marker';\n            });\n        },\n\n        image: function(range) {\n            var nodes = RangeUtils.getAll(range, \"img\");\n\n            if (nodes.length == 1) {\n                return nodes[0];\n            }\n        },\n\n        isStartOf: function(originalRange, node) {\n            if (originalRange.startOffset !== 0) {\n                return false;\n            }\n\n            var range = originalRange.cloneRange();\n\n            while (range.startOffset === 0 && range.startContainer != node) {\n                var index = dom.findNodeIndex(range.startContainer);\n                var parent = range.startContainer.parentNode;\n\n                while (index > 0 && parent[index - 1] && dom.insignificant(parent[index - 1])) {\n                    index--;\n                }\n\n                range.setStart(parent, index);\n            }\n\n            return range.startOffset === 0 && range.startContainer == node;\n        },\n\n        isEndOf: function(originalRange, node) {\n            var range = originalRange.cloneRange();\n\n            range.collapse(false);\n\n            var start = range.startContainer;\n\n            if (dom.isDataNode(start) && range.startOffset == dom.getNodeLength(start)) {\n                range.setStart(start.parentNode, dom.findNodeIndex(start) + 1);\n                range.collapse(true);\n            }\n\n            range.setEnd(node, dom.getNodeLength(node));\n\n            var nodes = [];\n\n            function visit(node) {\n                if (!dom.insignificant(node) && !(dom.isDataNode(node) && /^[\\ufeff]*$/.test(node.nodeValue))) {\n                    nodes.push(node);\n                }\n            }\n\n            new RangeIterator(range).traverse(visit);\n\n            return !nodes.length;\n        },\n\n        wrapSelectedElements: function(range) {\n            var startEditable = dom.editableParent(range.startContainer);\n            var endEditable = dom.editableParent(range.endContainer);\n\n            while (range.startOffset === 0 && range.startContainer != startEditable) {\n                range.setStart(range.startContainer.parentNode, dom.findNodeIndex(range.startContainer));\n            }\n\n            function isEnd(offset, container) {\n                var length = dom.getNodeLength(container);\n\n                if (offset == length) {\n                    return true;\n                }\n\n                for (var i = offset; i < length; i++) {\n                    if (!dom.insignificant(container.childNodes[i])) {\n                        return false;\n                    }\n                }\n\n                return true;\n            }\n\n            while (isEnd(range.endOffset, range.endContainer) && range.endContainer != endEditable) {\n                range.setEnd(range.endContainer.parentNode, dom.findNodeIndex(range.endContainer) + 1);\n            }\n\n            return range;\n        },\n\n        expand: function(range) {\n            var result = range.cloneRange();\n\n            var startContainer = result.startContainer.childNodes[result.startOffset === 0 ? 0 : result.startOffset - 1];\n            var endContainer = result.endContainer.childNodes[result.endOffset];\n\n            if (!isDataNode(startContainer) || !isDataNode(endContainer)) {\n                return result;\n            }\n\n            var beforeCaret = startContainer.nodeValue;\n            var afterCaret = endContainer.nodeValue;\n\n            if (!beforeCaret || !afterCaret) {\n                return result;\n            }\n\n            var startOffset = beforeCaret.split('').reverse().join('').search(boundary);\n            var endOffset = afterCaret.search(boundary);\n\n            if (!startOffset || !endOffset) {\n                return result;\n            }\n\n            endOffset = endOffset == -1 ? afterCaret.length : endOffset;\n            startOffset = startOffset == -1 ? 0 : beforeCaret.length - startOffset;\n\n            result.setStart(startContainer, startOffset);\n            result.setEnd(endContainer, endOffset);\n\n            return result;\n        },\n\n        isExpandable: function(range) {\n            var node = range.startContainer;\n            var rangeDocument = RangeUtils.documentFromRange(range);\n\n            if (node == rangeDocument || node == rangeDocument.body) {\n                return false;\n            }\n\n            var result = range.cloneRange();\n\n            var value = node.nodeValue;\n            if (!value) {\n                return false;\n            }\n\n            var beforeCaret = value.substring(0, result.startOffset);\n            var afterCaret = value.substring(result.startOffset);\n\n            var startOffset = 0, endOffset = 0;\n\n            if (beforeCaret) {\n                startOffset = beforeCaret.split('').reverse().join('').search(boundary);\n            }\n\n            if (afterCaret) {\n                endOffset = afterCaret.search(boundary);\n            }\n\n            return startOffset && endOffset;\n        }\n    };\n\n    extend(Editor, {\n        SelectionUtils: SelectionUtils,\n        W3CRange: W3CRange,\n        RangeIterator: RangeIterator,\n        W3CSelection: W3CSelection,\n        RangeEnumerator: RangeEnumerator,\n        RestorePoint: RestorePoint,\n        Marker: Marker,\n        RangeUtils: RangeUtils\n    });\n\n    })(window.kendo.jQuery);\n\n    (function($, undefined$1) {\n        var kendo = window.kendo,\n            Class = kendo.Class,\n            Editor = kendo.ui.editor,\n            dom = Editor.Dom,\n            template = kendo.template,\n            RangeUtils = Editor.RangeUtils,\n            complexBlocks = [\"ul\", \"ol\", \"tbody\", \"thead\", \"table\"],\n            toolsToBeUpdated = [\n                \"bold\",\n                \"italic\",\n                \"underline\",\n                \"strikethrough\",\n                \"superscript\",\n                \"subscript\",\n                \"forecolor\",\n                \"backcolor\",\n                \"fontname\",\n                \"fontsize\",\n                \"createlink\",\n                \"unlink\",\n                \"autolink\",\n                \"addcolumnleft\",\n                \"addcolumnright\",\n                \"addrowabove\",\n                \"addrowbelow\",\n                \"deleterow\",\n                \"deletecolumn\",\n                \"mergecells\",\n                \"formatting\",\n                \"cleanformatting\" ],\n            IMMUTABALE = \"k-immutable\",\n            IMMUTABALE_MARKER_SELECTOR = \"[\" + IMMUTABALE + \"]\",\n            IMMUTABLE_SELECTOR = \"[contenteditable='false']\";\n\n        var rootCondition = function(node) {\n            return $(node).is(\"body,.k-editor\");\n        };\n\n        var immutable = function(node) {\n            return node.getAttribute && node.getAttribute(\"contenteditable\") == \"false\";\n        };\n\n        var immutableParent = function(node) {\n            return dom.closestBy(node, immutable, rootCondition);\n        };\n\n        var expandImmutablesIn = function(range) {\n            var startImmutableParent = immutableParent(range.startContainer);\n            var endImmutableParent = immutableParent(range.endContainer);\n\n            if (startImmutableParent || endImmutableParent) {\n                if (startImmutableParent) {\n                    range.setStartBefore(startImmutableParent);\n                }\n                if (endImmutableParent) {\n                    range.setEndAfter(endImmutableParent);\n                }\n            }\n        };\n\n        var immutablesContext = function(range) {\n            if (immutableParent(range.commonAncestorContainer)) {\n                return true;\n            } else if (immutableParent(range.startContainer) || immutableParent(range.endContainer)) {\n                var editableNodes = RangeUtils.editableTextNodes(range);\n                if (editableNodes.length === 0) {\n                    return true;\n                }\n            }\n            return false;\n        };\n\n        var randomId = function(length) {\n            var result = '';\n            var chars = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';\n            for (var i = length || 10; i > 0; --i) {\n                result += chars.charAt(Math.round(Math.random() * (chars.length - 1)));\n            }\n            return result;\n        };\n\n        var removeImmutables = function(root) {\n            var serializedImmutables = { empty: true }, nodeName, id, serialized;\n             $(root).find(IMMUTABLE_SELECTOR).each(function(i, node) {\n                nodeName = dom.name(node);\n                id = randomId();\n                serialized = \"<\" + nodeName + \" \" + IMMUTABALE + \"='\" + id + \"'></\" + nodeName + \">\";\n                serializedImmutables[id] = { node: node, style: $(node).attr(\"style\") };\n                serializedImmutables.empty = false;\n                $(node).replaceWith(serialized);\n            });\n\n            return serializedImmutables;\n        };\n\n        var restoreImmutables = function(root, serializedImmutables) {\n            var id, immutable;\n            $(root).find(IMMUTABALE_MARKER_SELECTOR).each(function(i, node) {\n                id = node.getAttribute(IMMUTABALE);\n                immutable = serializedImmutables[id];\n                $(node).replaceWith(immutable.node);\n                if (immutable.style != $(immutable.node).attr(\"style\")) {\n                    $(immutable.node).removeAttr(\"style\").attr(\"style\", immutable.style);\n                }\n            });\n        };\n\n        var deletingKey = function(keyCode) {\n            var keys = kendo.keys;\n            return keyCode === keys.BACKSPACE || keyCode == keys.DELETE;\n        };\n        var updateToolOptions = function(tool) {\n            var options = tool ? tool.options : undefined$1;\n            if (options && options.finder) {\n                options.finder._initOptions({ immutables: true });\n            }\n        };\n\n        var Immutables = Class.extend({\n            init: function(editor) {\n                this.editor = editor;\n                this.serializedImmutables = {};\n                this.options = $.extend({}, editor && editor.options && editor.options.immutables);\n\n                var tools = editor.toolbar.tools;\n                updateToolOptions(tools.justifyLeft);\n                updateToolOptions(tools.justifyCenter);\n                updateToolOptions(tools.justifyRight);\n                updateToolOptions(tools.justifyFull);\n            },\n\n            serialize: function(node) {\n                var result = this._toHtml(node),\n                    id;\n\n                if (result.indexOf(IMMUTABALE) === -1) {\n                    id = this.randomId();\n                    result = result.replace(/>/, ' ' + IMMUTABALE + '=\"' + id + '\">');\n                } else {\n                    id = result.match(/k-immutable\\s*=\\s*['\"](.*)['\"]/)[1];\n                }\n\n                this.serializedImmutables[id] = node;\n                return result;\n            },\n\n            _toHtml: function(node) {\n                var serialization = this.options.serialization;\n                var serializationType = typeof serialization;\n                var nodeName;\n\n                switch (serializationType) {\n                    case \"string\":\n                        return template(serialization)(node);\n                    case \"function\":\n                        return serialization(node);\n                    default:\n                        nodeName = dom.name(node);\n                        return \"<\" + nodeName + \"></\" + nodeName + \">\";\n                }\n            },\n\n            deserialize: function(node) {\n                var that = this;\n                var deserialization = this.options.deserialization;\n\n                $(IMMUTABALE_MARKER_SELECTOR, node).each(function() {\n                    var id = this.getAttribute(IMMUTABALE);\n                    var immutable = that.serializedImmutables[id];\n                    if (kendo.isFunction(deserialization)) {\n                        deserialization(this, immutable);\n                    }\n                    $(this).replaceWith(immutable);\n                });\n\n                that.serializedImmutables = {};\n            },\n\n            randomId: function(length) {\n                return randomId(length);\n            },\n\n            keydown: function(e, range) {\n                var isDeleting = deletingKey(e.keyCode);\n                var shouldCancelEvent = (isDeleting && this._cancelDeleting(e, range)) ||\n                    (!isDeleting && this._cancelTyping(e, range));\n\n                if (shouldCancelEvent) {\n                    e.preventDefault();\n                    return true;\n                }\n            },\n\n            _cancelTyping: function(e, range) {\n                var editor = this.editor;\n                var keyboard = editor.keyboard;\n\n                return range.collapsed && !keyboard.typingInProgress &&\n                    keyboard.isTypingKey(e) && immutablesContext(range);\n            },\n\n            _cancelDeleting: function(e, range) {\n                var keys = kendo.keys;\n                var backspace = e.keyCode === keys.BACKSPACE;\n                var del = e.keyCode == keys.DELETE;\n\n                if (!backspace && !del) {\n                    return false;\n                }\n                var cancelDeleting = false;\n                if (range.collapsed) {\n                    if (immutablesContext(range)) {\n                        return true;\n                    }\n                    var immutable = this.nextImmutable(range, del);\n                    if (immutable && backspace) {\n                        var closestSelectionLi = dom.closest(range.commonAncestorContainer, \"li\");\n                        if (closestSelectionLi) {\n                            var closestImmutableLi = dom.closest(immutable, \"li\");\n                            if (closestImmutableLi && closestImmutableLi !== closestSelectionLi) {\n                                return cancelDeleting;\n                            }\n                        }\n                    }\n                    if (immutable && !dom.tableCell(immutable)) {\n                        if (dom.parentOfType(immutable, complexBlocks) === dom.parentOfType(range.commonAncestorContainer, complexBlocks)) {\n                            while (immutable && immutable.parentNode.childNodes.length == 1) {\n                                immutable = immutable.parentNode;\n                            }\n                            if (dom.tableCell(immutable)) {\n                                return cancelDeleting;\n                            }\n                            this._removeImmutable(immutable, range);\n                        }\n                        cancelDeleting = true;\n                    }\n                }\n                return cancelDeleting;\n            },\n\n            nextImmutable: function(range, forwards) {\n                var commonContainer = range.commonAncestorContainer;\n                if (dom.isBom(commonContainer) || ((forwards && RangeUtils.isEndOf(range, commonContainer)) || (!forwards && RangeUtils.isStartOf(range, commonContainer)))) {\n                    var next = this._nextNode(commonContainer, forwards);\n                    if (next && dom.isBlock(next) && !immutableParent(next)) {\n                        while (next && next.children && next.children[forwards ? 0 : next.children.length - 1]) {\n                            next = next.children[forwards ? 0 : next.children.length - 1];\n                        }\n                    }\n                    return immutableParent(next);\n                }\n            },\n\n            _removeImmutable: function(immutable, range) {\n                var editor = this.editor;\n                var startRestorePoint = new Editor.RestorePoint(range, editor.body);\n                dom.remove(immutable);\n                Editor._finishUpdate(editor, startRestorePoint);\n            },\n\n            _nextNode: function(node, forwards) {\n                var sibling = forwards ? \"nextSibling\" : \"previousSibling\";\n                var current = node, next;\n                while (current && !next) {\n                    next = current[sibling];\n                    if (next && dom.isDataNode(next) && /^\\s|[\\ufeff]$/.test(next.nodeValue)) {\n                        current = next;\n                        next = current[sibling];\n                    }\n                    if (!next) {\n                        current = current.parentNode;\n                    }\n                }\n                return next;\n            }\n        });\n\n        Immutables.immutable = immutable;\n        Immutables.immutableParent = immutableParent;\n        Immutables.expandImmutablesIn = expandImmutablesIn;\n        Immutables.immutablesContext = immutablesContext;\n        Immutables.toolsToBeUpdated = toolsToBeUpdated;\n        Immutables.removeImmutables = removeImmutables;\n        Immutables.restoreImmutables = restoreImmutables;\n\n        Editor.Immutables = Immutables;\n    })(window.kendo.jQuery);\n\n    (function($) {\n\n        // Imports ================================================================\n        var kendo = window.kendo,\n            Class = kendo.Class,\n            editorNS = kendo.ui.editor,\n            dom = editorNS.Dom,\n            RestorePoint = editorNS.RestorePoint,\n            Marker = editorNS.Marker,\n            extend = $.extend;\n\n    function finishUpdate(editor, startRestorePoint) {\n        var endRestorePoint = editor.selectionRestorePoint = new RestorePoint(editor.getRange(), editor.body);\n        var command = new GenericCommand(startRestorePoint, endRestorePoint);\n        command.editor = editor;\n\n        editor.undoRedoStack.push(command);\n        editor.toolbar.refreshTools();\n\n        return endRestorePoint;\n    }\n\n    var Command = Class.extend({\n        init: function(options) {\n            this.options = options;\n            this.restorePoint = new RestorePoint(options.range, options.body, { immutables: options.immutables });\n            this.marker = new Marker();\n            this.formatter = options.formatter;\n        },\n\n        getRange: function() {\n            return this.restorePoint.toRange();\n        },\n\n        lockRange: function(expand) {\n            return this.marker.add(this.getRange(), expand);\n        },\n\n        releaseRange: function(range) {\n            this.marker.remove(range);\n            this.editor.selectRange(range);\n        },\n\n        undo: function() {\n            var point = this.restorePoint;\n            point.restoreHtml();\n            this.editor.selectRange(point.toRange());\n        },\n\n        redo: function() {\n            this.exec();\n        },\n\n        createDialog: function(content, options) {\n            var editor = this.editor;\n\n            return $(content).appendTo(document.body)\n                .kendoWindow(extend({}, editor.options.dialogOptions, options))\n                .closest(\".k-window\").toggleClass(\"k-rtl\", kendo.support.isRtl(editor.wrapper)).end();\n        },\n\n        exec: function() {\n            var range = this.lockRange(true);\n            this.formatter.editor = this.editor;\n            this.formatter.toggle(range);\n            this.releaseRange(range);\n        },\n\n        immutables: function() {\n            return this.editor && this.editor.options.immutables;\n        },\n\n        expandImmutablesIn: function(range) {\n            if (this.immutables()) {\n                kendo.ui.editor.Immutables.expandImmutablesIn(range);\n                this.restorePoint = new RestorePoint(range, this.editor.body);\n            }\n        }\n    });\n\n    var GenericCommand = Class.extend({\n        init: function(startRestorePoint, endRestorePoint) {\n            this.body = startRestorePoint.body;\n            this.startRestorePoint = startRestorePoint;\n            this.endRestorePoint = endRestorePoint;\n        },\n\n        redo: function() {\n            dom.removeChildren(this.body);\n\n            this.body.innerHTML = this.endRestorePoint.html;\n            this.editor.selectRange(this.endRestorePoint.toRange());\n        },\n\n        undo: function() {\n            dom.removeChildren(this.body);\n\n            this.body.innerHTML = this.startRestorePoint.html;\n            this.editor.selectRange(this.startRestorePoint.toRange());\n        }\n    });\n\n    extend(editorNS, {\n        _finishUpdate: finishUpdate,\n        Command: Command,\n        GenericCommand: GenericCommand\n    });\n\n    })(window.kendo.jQuery);\n\n    (function($,undefined$1) {\n        var kendo = window.kendo;\n        var ui = kendo.ui;\n        var editorNS = ui.editor;\n        var Widget = ui.Widget;\n        var extend = $.extend;\n        var keys = kendo.keys;\n        var NS = \".kendoEditor\";\n        var EditorUtils = editorNS.EditorUtils;\n        var ToolTemplate = editorNS.ToolTemplate;\n        var Tool = editorNS.Tool;\n        var outerWidth = kendo._outerWidth;\n        var outerHeight = kendo._outerHeight;\n        var OVERFLOWANCHOR = \"overflowAnchor\";\n\n        var focusable = \".k-tool-group:visible .k-tool:not(.k-disabled):not([disabled]),\" +\n                        \".k-tool.k-overflow-anchor:visible,\" +\n                        \".k-tool-group:visible .k-colorpicker:not(input),\" +\n                        \".k-tool-group:visible .k-selectbox,\" +\n                        \".k-tool-group:visible .k-dropdownlist,\" +\n                        \".k-tool-group:visible .k-combobox .k-input-inner\";\n\n        var toolNamesByCssClass = {\n            \"k-i-sup-script\": \"superscript\",\n            \"k-i-sub-script\": \"subscript\",\n            \"k-i-align-left\": \"justifyLeft\",\n            \"k-i-align-center\": \"justifyCenter\",\n            \"k-i-align-right\": \"justifyRight\",\n            \"k-i-align-justify\": \"justifyFull\",\n            \"k-i-list-unordered\": \"insertUnorderedList\",\n            \"k-i-list-ordered\": \"insertOrderedList\",\n            \"k-i-list-roman-upper\": \"insertUpperRomanList\",\n            \"k-i-list-roman-lower\": \"insertLowerRomanList\",\n            \"k-i-import\": \"import\",\n            \"k-i-indent-increase\": \"indent\",\n            \"k-i-indent-decrease\": \"outdent\",\n            \"k-i-link-horizontal\": \"createLink\",\n            \"k-i-unlink-horizontal\": \"unlink\",\n            \"k-i-image\": \"insertImage\",\n            \"k-i-file-add\": \"insertFile\",\n            \"k-i-html\": \"viewHtml\",\n            \"k-i-foreground-color\": \"foreColor\",\n            \"k-i-paint\": \"backColor\",\n            \"k-i-table-insert\": \"createTable\",\n            \"k-i-table-column-insert-left\": \"addColumnLeft\",\n            \"k-i-table-column-insert-right\": \"addColumnRight\",\n            \"k-i-table-row-insert-above\": \"addRowAbove\",\n            \"k-i-table-row-insert-below\": \"addRowBelow\",\n            \"k-i-table-row-delete\": \"deleteRow\",\n            \"k-i-table-column-delete\": \"deleteColumn\",\n            \"k-i-table-properties\": \"tableWizard\",\n            \"k-i-table-wizard\": \"tableWizardInsert\",\n            \"k-i-table-position-left\": \"tableAlignLeft\",\n            \"k-i-table-position-center\": \"tableAlignCenter\",\n            \"k-i-table-position-right\": \"tableAlignRight\",\n            \"k-i-clear-css\": \"cleanFormatting\",\n            \"k-i-cells-merge-horizontally\": \"mergeCellsHorizontally\",\n            \"k-i-cells-merge-vertically\": \"mergeCellsVertically\",\n            \"k-i-cell-split-horizontally\": \"splitCellHorizontally\",\n            \"k-i-cell-split-vertically\": \"splitCellVertically\",\n            \"k-i-copy-format\": \"copyFormat\",\n            \"k-i-apply-format\": \"applyFormat\",\n            \".k-i-undo\": \"undo\",\n            \"k-i-redo\": \"redo\",\n\n        };\n\n        var OverflowAnchorTool = Tool.extend({\n            initialize: function(ui, options) {\n                var toolbar = options.editor.toolbar;\n\n                ui.attr(\"aria-controls\", options.editor.element.attr(\"id\"))\n                    .on(\"click\", (function() {\n                        this.overflowPopup.toggle();\n                    }).bind(toolbar));\n            },\n\n            options: {\n                name: OVERFLOWANCHOR\n            },\n\n            command: $.noop,\n            update: $.noop,\n            destroy: $.noop\n\n        });\n\n        EditorUtils.registerTool(OVERFLOWANCHOR, new OverflowAnchorTool({\n            key: \"\",\n            ctrl: true,\n            template: new ToolTemplate({ template: EditorUtils.overflowAnchorTemplate })\n        }));\n\n        var Toolbar = Widget.extend({\n            init: function(element, options) {\n                var that = this;\n\n                options = extend({}, options, { name: \"EditorToolbar\" });\n\n                Widget.fn.init.call(that, element, options);\n\n                if (options.popup) {\n                    that._initPopup();\n                }\n\n                if (options.resizable && options.resizable.toolbar) {\n                    that._resizeHandler = kendo.onResize(function() {\n                        that.resize(true);\n                    });\n\n                    that.element.addClass(\"k-toolbar-resizable\");\n                }\n            },\n\n            events: [\n                \"execute\"\n            ],\n\n            groups: {\n                basic: [\"bold\", \"italic\", \"underline\", \"strikethrough\"],\n                undo: [\"undo\", \"redo\"],\n                scripts: [\"subscript\", \"superscript\" ],\n                alignment: [\"justifyLeft\", \"justifyCenter\", \"justifyRight\", \"justifyFull\" ],\n                links: [\"insertImage\", \"insertFile\", \"createLink\", \"unlink\"],\n                lists: [\"insertUnorderedList\", \"insertOrderedList\", \"insertUpperRomanList\", \"insertLowerRomanList\", \"indent\", \"outdent\"],\n                tablesInsert: [\"createTable\"],\n                tablesAddDelete: [ \"addColumnLeft\", \"addColumnRight\", \"addRowAbove\", \"addRowBelow\", \"deleteRow\", \"deleteColumn\" ],\n                tablesMerge: [ \"mergeCellsHorizontally\", \"mergeCellsVertically\", \"splitCellHorizontally\", \"splitCellVertically\" ],\n                tablesPosition: [ \"tableAlignLeft\", \"tableAlignCenter\", \"tableAlignRight\" ],\n                advanced: [ \"viewHtml\", \"cleanFormatting\", \"print\", \"pdf\", \"exportAs\", \"import\"],\n                fonts: [ \"fontName\", \"fontSize\" ],\n                colors: [ \"foreColor\", \"backColor\" ],\n                formatPainter: [ \"copyFormat\", \"applyFormat\" ]\n            },\n\n            overflowFlaseTools: [ \"formatting\", \"fontName\", \"fontSize\", \"foreColor\", \"backColor\", \"insertHtml\" ],\n\n            _initPopup: function() {\n                var that = this;\n                this.window = $(this.element)\n                    .wrap(\"<div class='editorToolbarWindow' />\")\n                    .parent()\n                    .prepend(\"<span class='k-editortoolbar-dragHandle'><span class='k-icon k-i-handler-drag'></span></span>\")\n                    .kendoWindow({\n                        title: false,\n                        resizable: false,\n                        draggable: {\n                            dragHandle: \".k-editortoolbar-dragHandle\"\n                        },\n                        animation: {\n                            open: { effects: \"fade:in\" },\n                            close: { effects: \"fade:out\" }\n                        },\n                        minHeight: 42,\n                        visible: false,\n                        autoFocus: false,\n                        actions: [],\n                        dragend: function() {\n                            this._moved = true;\n                        }\n                    })\n                    .on(\"mousedown\", function(e) {\n                        if (!$(e.target).is(\".k-icon\")) {\n                            that.preventPopupHide = true;\n                        }\n                    })\n                    .on(\"focusout\", function() {\n                        that.options.editor.element.focusout();\n                    })\n                    .data(\"kendoWindow\");\n            },\n\n            _toggleOverflowStyles: function(element, show) {\n                element\n                    .find(\"> li\").toggleClass(\"k-item\", show)\n                    .find(\".k-tool:not(.k-disabled), .k-overflow-button\").toggleClass(\"k-overflow-button\", show);\n            },\n\n            _initOverflowPopup: function(ui) {\n                var that = this;\n                var popupTemplate = \"<ul class='k-editor-overflow-popup k-overflow-container k-list-container'></ul>\";\n\n                that.overflowPopup = $(popupTemplate).appendTo(\"body\").kendoPopup({\n                    anchor: ui,\n                    origin: kendo.support.isRtl(that.element) ? \"bottom left\" : \"bottom right\",\n                    position: kendo.support.isRtl(that.element) ? \"top left\" : \"top right\",\n                    copyAnchorStyles: false,\n                    open: function(e) {\n                        if (this.element.is(\":empty\")) {\n                            e.preventDefault();\n                        }\n\n                        that._toggleOverflowStyles(this.element, true);\n                        ui.attr(\"aria-expanded\", true);\n                    },\n                    close: function() {\n                        ui.attr(\"aria-expanded\", false);\n                    },\n                    activate: that.focusOverflowPopup.bind(that)\n                }).data(\"kendoPopup\");\n            },\n\n            items: function() {\n                var isResizable = this.options.resizable && this.options.resizable.toolbar,\n                    popup, result;\n\n                result = this.element.children().find(\"> *, select\");\n\n                if (isResizable) {\n                    popup = this.overflowPopup;\n                    result = result.add(popup.element.children().find(\"> *\"));\n                }\n\n                return result;\n            },\n\n            focused: function() {\n                var active = kendo._activeElement(),\n                    popup = this.window,\n                    overflowPopup = this.overflowPopup;\n\n                return (popup && $(active).closest(popup.wrapper).length) ||\n                    (overflowPopup && overflowPopup.visible());\n            },\n\n            toolById: function(name) {\n                var id, tools = this.tools;\n\n                for (id in tools) {\n                    if (id.toLowerCase() == name) {\n                        return tools[id];\n                    }\n                }\n            },\n\n            toolGroupFor: function(toolName) {\n                var i, groups = this.groups;\n\n                if (this.isCustomTool(toolName)) {\n                    return \"custom\";\n                }\n\n                for (i in groups) {\n                    if ($.inArray(toolName, groups[i]) >= 0) {\n                        return i;\n                    }\n                }\n            },\n\n            bindTo: function(editor) {\n                var that = this,\n                    window = that.window;\n\n                // detach from editor that was previously listened to\n                if (that._editor) {\n                    that._editor.unbind(\"select\", that.resize.bind(that));\n                }\n\n                that._editor = editor;\n\n                if (that.options.resizable && that.options.resizable.toolbar) {\n                    editor.options.tools.push(OVERFLOWANCHOR);\n                }\n\n                // re-initialize the tools\n                that.tools = that.expandTools(editor.options.tools);\n                that.render();\n\n                that.element.find(\".k-combobox .k-input-inner\").on(\"keydown\", function(e) {\n                    var combobox = $(this).closest(\".k-combobox\").data(\"kendoComboBox\"),\n                        key = e.keyCode;\n\n                    if (key == keys.RIGHT || key == keys.LEFT) {\n                        combobox.close();\n                    } else if (key == keys.DOWN) {\n                        if (!combobox.dropDown.isOpened()) {\n                            e.stopImmediatePropagation();\n                            combobox.open();\n                        }\n                    }\n                });\n\n                that._attachEvents();\n\n                that.items().each(function initializeTool() {\n\n                    var toolName = that._toolName(this),\n                        tool = toolName !== \"moreVertical\" ? that.tools[toolName] : that.tools.overflowAnchor,\n                        options = tool && tool.options,\n                        messages = editor.options.messages,\n                        description = options && options.tooltip || messages[toolName],\n                        ui = $(this);\n\n                    if (!tool || !tool.initialize) {\n                        return;\n                    }\n\n                    if (toolName == \"fontSize\" || toolName == \"fontName\") {\n                        var inheritText = messages[toolName + \"Inherit\"];\n\n                        ui.find(\"input\").val(inheritText).end()\n                          .find(\"span.k-input-inner\").text(inheritText).end();\n                    }\n\n                    tool.initialize(ui, {\n                        title: that._appendShortcutSequence(description, tool),\n                        editor: that._editor\n                    });\n\n                    ui.closest(\".k-dropdownlist\", that.element).addClass(\"k-editor-widget\");\n                    ui.closest(\".k-combobox\", that.element).addClass(\"k-editor-widget\");\n\n                    ui.closest(\".k-colorpicker\", that.element).next(\".k-colorpicker\").addClass(\"k-editor-widget\");\n                });\n\n                editor.bind(\"select\", that.resize.bind(that));\n\n                that.update();\n\n                if (window) {\n                    window.wrapper.css({ top: \"\", left: \"\", width: \"\" });\n                }\n            },\n\n            show: function() {\n                var that = this,\n                    window = that.window,\n                    editorOptions = that.options.editor,\n                    wrapper, editorElement, editorOffset,\n                    browser = kendo.support.browser;\n\n                if (window) {\n                    wrapper = window.wrapper;\n                    editorElement = editorOptions.element;\n\n                    if (!wrapper.is(\":visible\") || !that.window.options.visible) {\n\n                        if (!wrapper[0].style.width) {\n                            wrapper.width(this._getWindowWidth());\n                        }\n\n                        // track content position when other parts of page change\n                        if (!window._moved) {\n                            editorOffset = editorElement.offset();\n                            wrapper.css({\n                                top: Math.max(0, parseInt(editorOffset.top, 10) - outerHeight(wrapper) - parseInt(that.window.element.css(\"padding-bottom\"), 10)),\n                                left: Math.max(0, parseInt(editorOffset.left, 10))\n                            });\n                        }\n\n                        if ((browser.msie || browser.edge) && that._overlaps(editorElement)) {\n                            setTimeout(function() {\n                                window.open();\n                            }, 0);\n                        } else {\n                            window.open();\n                        }\n                    }\n                }\n            },\n\n            _getWindowWidth: function() {\n                var that = this,\n                    wrapper = that.window.wrapper,\n                    editorElement = that.options.editor.element;\n\n                return outerWidth(editorElement) - parseInt(wrapper.css(\"border-left-width\"), 10) - parseInt(wrapper.css(\"border-right-width\"), 10);\n            },\n\n            _overlaps: function(box) {\n                var toolbarWrapper = this.window.wrapper,\n                    toolbarWrapperOffset = toolbarWrapper.offset(),\n                    toolbarWrapperLeft = toolbarWrapperOffset.left,\n                    toolbarWrapperTop = toolbarWrapperOffset.top,\n                    boxOffset = box.offset(),\n                    boxOffsetLeft = boxOffset.left,\n                    boxOffsetTop = boxOffset.top;\n\n                return !(boxOffsetLeft + box.width() < toolbarWrapperLeft ||\n                        boxOffsetLeft > toolbarWrapperLeft + toolbarWrapper.width() ||\n                        boxOffsetTop + box.height() < toolbarWrapperTop ||\n                        boxOffsetTop > toolbarWrapperTop + toolbarWrapper.height());\n            },\n\n            hide: function() {\n                if (this.window) {\n                    this.window.close();\n                }\n            },\n\n            focus: function() {\n                var TABINDEX = \"tabIndex\";\n                var element = this.element;\n                var tabIndex = this._editor.element.attr(TABINDEX);\n\n                // Chrome can't focus something which has already been focused\n                element.attr(TABINDEX, tabIndex || 0).trigger(\"focus\")\n                    .find(focusable).first().trigger(\"focus\");\n\n                if (!tabIndex && tabIndex !== 0) {\n                    element.removeAttr(TABINDEX);\n                }\n            },\n\n            focusOverflowPopup: function() {\n                var TABINDEX = \"tabIndex\";\n                var element = this.overflowPopup.element;\n                var tabIndex = this._editor.element.attr(TABINDEX);\n\n                element.closest(\".k-animation-container\").addClass(\"k-overflow-wrapper\");\n\n                element.attr(TABINDEX, tabIndex || 0)\n                    .find(focusable).first().trigger(\"focus\");\n\n                if (!tabIndex && tabIndex !== 0) {\n                    element.removeAttr(TABINDEX);\n                }\n            },\n\n            _appendShortcutSequence: function(localizedText, tool) {\n                if (!tool.key) {\n                    return localizedText;\n                }\n\n                var res = localizedText + \" (\";\n\n                if (tool.ctrl) {\n                    res += \"Ctrl + \";\n                }\n\n                if (tool.shift) {\n                    res += \"Shift + \";\n                }\n\n                if (tool.alt) {\n                    res += \"Alt + \";\n                }\n\n                res += tool.key + \")\";\n\n                return res;\n            },\n\n            _nativeTools: [\n                \"insertLineBreak\",\n                \"insertParagraph\",\n                \"redo\",\n                \"undo\",\n                \"autoLink\"\n            ],\n\n            tools: {}, // tools collection is copied from defaultTools during initialization\n\n            isCustomTool: function(toolName) {\n                return !(toolName in kendo.ui.Editor.defaultTools);\n            },\n\n            // expand the tools parameter to contain tool options objects\n            expandTools: function(tools) {\n                var currentTool,\n                    i,\n                    nativeTools = this._nativeTools,\n                    options,\n                    defaultTools = kendo.deepExtend({}, kendo.ui.Editor.defaultTools),\n                    result = {},\n                    name;\n\n                for (i = 0; i < tools.length; i++) {\n                    currentTool = tools[i];\n                    name = currentTool.name;\n\n                    if ($.isPlainObject(currentTool)) {\n                        if (name && defaultTools[name]) {\n                            // configured tool\n                            result[name] = extend({}, defaultTools[name]);\n                            extend(result[name].options, currentTool);\n                        } else {\n                            // custom tool\n                            options = extend({ cssClass: \"k-i-gear\", type: \"button\", title: \"\" }, currentTool);\n                            if (!options.name) {\n                                options.name = \"custom\";\n                            }\n\n                            options.cssClass = \"k-\" + options.name;\n\n                            if (!options.template && options.type == \"button\") {\n                                options.template = editorNS.EditorUtils.buttonTemplate;\n                                options.title = options.title || options.tooltip;\n                            }\n\n                            result[name] = {\n                                options: options\n                            };\n                        }\n                    } else if (defaultTools[currentTool]) {\n                        // tool by name\n                        result[currentTool] = defaultTools[currentTool];\n                    }\n                }\n\n                for (i = 0; i < nativeTools.length; i++) {\n                    if (!result[nativeTools[i]]) {\n                        result[nativeTools[i]] = defaultTools[nativeTools[i]];\n                    }\n                }\n\n                return result;\n            },\n\n            render: function() {\n                var that = this,\n                    tools = that.tools,\n                    options, template, toolElement,\n                    toolName,\n                    editorElement = that._editor.element,\n                    element = that.element.empty(),\n                    groupName, newGroupName,\n                    toolConfig = that._editor.options.tools,\n                    group, i, groupPosition = 0,\n                    resizable = that.options.resizable && that.options.resizable.toolbar,\n                    overflowFlaseTools = this.overflowFlaseTools;\n\n                function stringify(template) {\n                    var result = \"\";\n\n                    if (template.getHtml) {\n                        result = template.getHtml();\n                    } else {\n                        if (!kendo.isFunction(template)) {\n                            template = kendo.template(template);\n                        }\n\n                        result = template(options);\n                    }\n\n                    return kendo.trim(result);\n                }\n\n                function endGroup() {\n                    if (group.children().length) {\n                        if (resizable) {\n                            group.data(\"position\", groupPosition);\n                            groupPosition++;\n                        }\n\n                        group.appendTo(element);\n                    }\n                }\n\n                function startGroup(toolName) {\n                    if (toolName !== OVERFLOWANCHOR) {\n                        group = $(\"<li class='k-tool-group' role='presentation' />\");\n                        group.data(\"overflow\", $.inArray(toolName, overflowFlaseTools) === -1 ? true : false);\n                    } else {\n                        group = $(\"<li class='k-overflow-tools' />\");\n                    }\n                }\n\n                element.empty();\n\n                if (toolConfig.length) {\n                    toolName = toolConfig[0].name || toolConfig[0];\n                }\n                startGroup(toolName, overflowFlaseTools);\n\n                for (i = 0; i < toolConfig.length; i++) {\n                    toolName = toolConfig[i].name || toolConfig[i];\n                    options = tools[toolName] && tools[toolName].options;\n\n                    if (!options && $.isPlainObject(toolName)) {\n                        options = toolName;\n                    }\n\n                    template = options && options.template;\n\n                    if (toolName == \"break\") {\n                        endGroup();\n                        $(\"<li class='k-row-break' role='presentation' />\").appendTo(that.element);\n                        startGroup(toolName, overflowFlaseTools);\n                    }\n\n                    if (!template) {\n                        continue;\n                    }\n\n                    newGroupName = that.toolGroupFor(toolName);\n\n                    if (groupName != newGroupName || toolName == OVERFLOWANCHOR) {\n                        endGroup();\n                        startGroup(toolName, overflowFlaseTools);\n                        groupName = newGroupName;\n                    }\n\n                    if (toolName == OVERFLOWANCHOR) {\n                        template.options.title = that.options.messages.overflowAnchor;\n                    }\n\n                    template = stringify(template);\n\n                    toolElement = $(template).appendTo(group);\n\n                    if (newGroupName == \"custom\") {\n                        endGroup();\n                        startGroup(toolName, overflowFlaseTools);\n                    }\n\n                    if (options.exec && toolElement.hasClass(\"k-tool\")) {\n                        toolElement.on(\"click\", options.exec.bind(editorElement[0]));\n                    }\n                }\n\n                endGroup();\n\n                $(that.element).children(\":has(> .k-tool)\").not(\".k-overflow-tools\").addClass(\"k-button-group\");\n\n                that.updateGroups();\n\n                if (resizable) {\n                    that._initOverflowPopup(that.element.find(\".k-overflow-anchor\"));\n                }\n\n                that.angular(\"compile\", function() {\n                    return { elements: that.element };\n                });\n            },\n\n            updateGroups: function() {\n                $(this.element).children().not(\".k-overflow-tools\").each(function() {\n                    $(this).children()\n                        .removeClass(\"k-group-start k-group-end\")\n                        .first().addClass(\"k-group-start\").end()\n                        .last().addClass(\"k-group-end\").end();\n                });\n            },\n\n            decorateFrom: function(body) {\n                this.items().filter(\".k-decorated\")\n                    .each(function() {\n                        var selectBox = $(this).data(\"kendoSelectBox\");\n\n                        if (selectBox) {\n                            selectBox.decorate(body);\n                        }\n                    });\n            },\n\n            destroy: function() {\n                Widget.fn.destroy.call(this);\n\n                var id, tools = this.tools;\n\n                for (id in tools) {\n                    if (tools[id].destroy) {\n                        tools[id].destroy();\n                    }\n                }\n\n                if (this.window) {\n                    this.window.destroy();\n                }\n\n                if (this._resizeHandler) {\n                    kendo.unbindResize(this._resizeHandler);\n                }\n\n                if (this.overflowPopup) {\n                    this.overflowPopup.destroy();\n                }\n            },\n\n            _attachEvents: function() {\n                var that = this,\n                    popupElement = that.overflowPopup ? that.overflowPopup.element : $([]);\n\n                that.attachToolsEvents(that.element.add(popupElement));\n            },\n\n            attachToolsEvents: function(element) {\n                var that = this,\n                    buttons = \"[role=button].k-tool\",\n                    enabledButtons = buttons + \":not(.k-disabled)\" + \", [role=button].k-i-import:not(.k-disabled)\",\n                    disabledButtons = buttons + \".k-disabled\",\n                    dropdown = \".k-dropdownlist\",\n                    colorpicker = \".k-colorpicker\",\n                    editorTools = [buttons, dropdown, colorpicker].join(\",\");\n\n                element.off(NS)\n                    .on(\"mouseenter\" + NS, enabledButtons, function() { $(this).addClass(\"k-hover\"); })\n                    .on(\"mouseleave\" + NS, enabledButtons, function() { $(this).removeClass(\"k-hover\"); })\n                    .on(\"mousedown\" + NS, editorTools, function(e) {\n                        e.preventDefault();\n                    })\n                    .on(\"keydown\" + NS, focusable, function(e) {\n                        var current = this;\n                        var resizable = that.options.resizable && that.options.resizable.toolbar;\n                        var direction = kendo.support.isRtl(that.element) ? -1 : 1;\n                        var focusableItems;\n                        var focusElement,\n                            currentContainer,\n                            keyCode = e.keyCode;\n\n                        function move(direction, container, constrain) {\n                            var tools = container.find(focusable);\n                            var index = tools.index(current) + direction;\n\n                            if (constrain) {\n                                index = Math.max(0, Math.min(tools.length - 1, index));\n                            }\n\n                            return tools[index];\n                        }\n\n                        if (keyCode == keys.RIGHT || keyCode == keys.LEFT) {\n                            if (!$(current).is(\".k-dropdownlist\")) {\n                                focusElement = move(keyCode == keys.RIGHT ? 1 * direction : -1 * direction, that.element, true);\n                            } else {\n                                focusElement = $(current);\n                            }\n                        } else if (resizable && (keyCode == keys.UP || keyCode == keys.DOWN)) {\n                            focusElement = move(keyCode == keys.DOWN ? 1 : -1, that.overflowPopup.element, true);\n                        } else if (keyCode == keys.HOME) {\n                            focusElement = that.element.find(focusable)[0];\n                            e.preventDefault();\n                        } else if (keyCode == keys.END) {\n                            focusableItems = that.element.find(focusable).filter(function() {\n                                return $(this).css('visibility') !== 'hidden';\n                            });\n                            focusElement = focusableItems[focusableItems.length - 1];\n                            e.preventDefault();\n                        } else if (keyCode == keys.ESC) {\n                            if (that.overflowPopup && that.overflowPopup.visible()) {\n                                that.overflowPopup.close();\n                            }\n\n                            focusElement = that._editor;\n                        } else if (keyCode == keys.TAB && !(e.ctrlKey || e.altKey)) {\n                            if (resizable) {\n                                currentContainer = $(current.parentElement).hasClass(\"k-overflow-tool-group\") ? that.overflowPopup.element : that.element;\n                            } else {\n                                currentContainer = that.element;\n                            }\n\n                            // skip tabbing to disabled tools, and focus the editing area when running out of tools\n                            if (e.shiftKey) {\n                                focusElement = move(-1, currentContainer);\n                            } else {\n                                focusElement = move(1, currentContainer);\n\n                                if (!focusElement || $(focusElement).closest(\".k-overflow-tools\").css(\"visibility\") === \"hidden\") {\n                                    focusElement = that._editor;\n                                }\n                            }\n                        }\n\n                        if (focusElement) {\n                            e.preventDefault();\n                            focusElement.focus();\n                        }\n\n                        if ((keyCode === keys.ENTER || keyCode === keys.SPACEBAR) && ( $(current).is(\"button\") || $(current).is(\"a\") ) && !$(current).attr(\"href\") ) {\n                            //anchors without href attribute do not respond to Enter key\n                            that._executeToolCommand(current, e);\n                        }\n                    })\n                    .on(\"click\" + NS, enabledButtons, function(e) {\n                        that._executeToolCommand(this, e);\n                    })\n                    .on(\"click\" + NS, disabledButtons, function(e) { e.preventDefault(); });\n\n            },\n\n            _executeToolCommand: function(toolElement, e) {\n                var that = this;\n                var button = $(toolElement);\n                e.preventDefault();\n                e.stopPropagation();\n                button.removeClass(\"k-hover\");\n                if (!button.is(\"[data-popup]\")) {\n                    that._editor.exec(that._toolName(toolElement));\n                }\n            },\n\n            _toolName: function(element) {\n                if (!element) {\n                    return;\n                }\n\n                var className = element.className;\n\n                if (/k-tool\\b/i.test(className)) {\n                    className = element.firstChild.className;\n                }\n\n                var tool = $.grep(className.split(\" \"), function(x) {\n                    return !/^k-(widget|tool|tool-icon|icon|state-hover|header|combobox|dropdown|selectbox|colorpicker)$/i.test(x);\n                });\n\n                if (tool[0]) {\n                    var toolname = tool[0];\n                    if (toolNamesByCssClass[toolname]) {\n                        toolname = toolNamesByCssClass[toolname];\n                    }\n                    if (toolname.indexOf(\"k-i-\") >= 0) {\n                        return kendo.toCamelCase(toolname.substring(toolname.indexOf(\"k-i-\") + 4));\n                    }\n                    else {\n                        return toolname.substring(toolname.lastIndexOf(\"-\") + 1);\n                    }\n                }\n                return \"custom\";\n            },\n\n            refreshTools: function() {\n                var that = this,\n                    editor = that._editor,\n                    range = editor.getRange(),\n                    nodes = editorNS.RangeUtils.textNodes(range),\n                    immutables = editor.options.immutables,\n                    immutablesContext = that._immutablesContext(range);\n\n                nodes = editorNS.Dom.filterBy(nodes, editorNS.Dom.htmlIndentSpace, true);\n\n                if (!nodes.length) {\n                    nodes = [range.startContainer];\n                }\n\n                that.items().each(function() {\n                    var tool = that.tools[that._toolName(this)];\n                    if (tool) {\n                        var ui = $(this);\n                        if (tool.update) {\n                            tool.update(ui, nodes, editor.undoRedoStack);\n                        }\n\n                        if (immutables) {\n                            that._updateImmutablesState(tool, ui, immutablesContext);\n                        }\n                    }\n                });\n                this.update();\n            },\n\n            _immutablesContext: function(range) {\n                if (this._editor.options.immutables) {\n                    if (range.collapsed) {\n                        return editorNS.Immutables.immutablesContext(range);\n                    } else {\n                        return editorNS.RangeUtils.editableTextNodes(range).length === 0;\n                    }\n                }\n            },\n\n            _updateImmutablesState: function(tool, ui, immutablesContext) {\n                var name = tool.name;\n                var uiElement = ui;\n\n                var trackImmutables = tool.options.trackImmutables;\n                if (trackImmutables === undefined$1) {\n                    trackImmutables = $.inArray(name, editorNS.Immutables.toolsToBeUpdated) > -1;\n                }\n\n                if (trackImmutables) {\n                    var display = immutablesContext ? \"none\" : \"\";\n                    if (!ui.is(\".k-tool\")) {\n                        var uiData = ui.data();\n                        for (var key in uiData) {\n                            if (key.match(/^kendo[A-Z][a-zA-Z]*/)) {\n                                var widget = uiData[key];\n                                uiElement = widget.wrapper;\n                                break;\n                            }\n                        }\n                    }\n                    uiElement.css(\"display\", display);\n                    var groupUi = uiElement.closest(\"li\");\n                    if (groupUi.children(\":visible\").length === 0) {\n                        groupUi.css(\"display\", display);\n                    }\n                }\n            },\n\n            update: function() {\n                this.updateGroups();\n            },\n\n            _resize: function(e) {\n                var containerWidth = e.width;\n                var resizable = this.options.resizable && this.options.resizable.toolbar;\n                var popup = this.overflowPopup;\n                var editorElement = this.options.editor.element;\n                var toolbarWindow = this.window;\n\n                this.refreshTools();\n\n                if (!resizable) {\n                    return;\n                }\n\n                if (toolbarWindow) {\n                    toolbarWindow.wrapper.width(this._getWindowWidth());\n\n                    if (!toolbarWindow._moved) {\n                        toolbarWindow.wrapper.css({\n                            left: Math.max(0, parseInt(editorElement.offset().left, 10))\n                        });\n                    }\n                }\n\n                if (popup.visible()) {\n                    popup.close(true);\n                }\n\n                this._refreshWidths();\n\n                this._shrink(containerWidth);\n                this._stretch(containerWidth);\n\n                this._toggleOverflowStyles(this.element, false);\n                this._toggleOverflowStyles(this.overflowPopup.element, true);\n\n                this.element\n                    .children(\"li.k-overflow-tools\")\n                    .css(\"visibility\", popup.element.is(\":empty\") ? \"hidden\" : \"visible\");\n            },\n\n            _refreshWidths: function() {\n                this.element.children(\"li\").each(function(idx, element) {\n                    var group = $(element);\n                    group.data(\"outerWidth\", outerWidth(group, true));\n                });\n            },\n\n            _shrink: function(width) {\n                var group, visibleGroups;\n\n                if (width < this._groupsWidth()) {\n                    visibleGroups = this._visibleGroups().filter(\":not(.k-overflow-tools)\");\n\n                    for (var i = visibleGroups.length - 1; i >= 0; i--) {\n                        group = visibleGroups.eq(i);\n                        if (width > this._groupsWidth()) {\n                            break;\n                        } else {\n                            this._hideGroup(group);\n                        }\n                    }\n                }\n            },\n\n            _stretch: function(width) {\n                var group, hiddenGroups;\n\n                if (width > this._groupsWidth()) {\n                    hiddenGroups = this._hiddenGroups();\n\n                    for (var i = 0; i < hiddenGroups.length; i++) {\n                        group = hiddenGroups.eq(i);\n                        if (width < this._groupsWidth() || !this._showGroup(group, width)) {\n                            break;\n                        }\n                    }\n                }\n            },\n\n            _hiddenGroups: function() {\n                var popup = this.overflowPopup;\n\n                var hiddenGroups = this.element.children(\"li.k-tool-group\").filter(\":hidden\");\n\n                hiddenGroups = hiddenGroups.add(popup.element.children(\"li\"));\n\n                hiddenGroups.sort(function(a, b) {\n                    return ($(a).data(\"position\") > $(b).data(\"position\")) ? 1 : -1;\n                });\n\n                return hiddenGroups;\n            },\n\n            _visibleGroups: function() {\n                return this.element.children(\"li.k-tool-group, li.k-overflow-tools\").filter(\":visible\");\n            },\n\n            _groupsWidth: function() {\n                var width = 0;\n\n                this._visibleGroups().each(function() {\n                    width += $(this).data(\"outerWidth\");\n                });\n\n                return Math.ceil(width);\n            },\n\n            _hideGroup: function(group) {\n                if (group.data(\"overflow\")) {\n                    var popup = this.overflowPopup;\n                    group.detach().prependTo(popup.element).addClass(\"k-overflow-tool-group\");\n                } else {\n                    group.addClass(\"k-hidden\");\n                }\n            },\n\n            _showGroup: function(group, width) {\n                var position, previous, groupWidth;\n\n                if (group.hasClass('k-disabled')) {\n                    return true;\n                }\n\n                if (group.hasClass(\"k-overflow-tool-group\")) {\n                    groupWidth = group.data(\"outerWidth\");\n                } else {\n                    group.removeClass(\"k-hidden\");\n                    groupWidth = outerWidth(group, true);\n                    group.addClass(\"k-hidden\");\n                }\n\n                if (group.length && width > this._groupsWidth() + groupWidth) {\n                    if (group.hasClass(\"k-overflow-tool-group\")) {\n                        position = group.data(\"position\");\n\n                        if (position === 0) {\n                            group.detach().prependTo(this.element);\n                        } else {\n                            previous = this.element.children().filter(function(idx, element) {\n                                return $(element).data(\"position\") === position - 1;\n                            });\n\n                            group.detach().insertAfter(previous);\n                        }\n\n                        group.removeClass(\"k-overflow-tool-group\");\n\n                    } else {\n                        group.removeClass(\"k-hidden\");\n                    }\n\n                    return true;\n                }\n\n                return false;\n            }\n\n        });\n\n    $.extend(editorNS, {\n        Toolbar: Toolbar\n    });\n\n    })(window.kendo.jQuery);\n\n    (function($, undefined$1) {\n\n    var kendo = window.kendo,\n        extend = $.extend,\n        Editor = kendo.ui.editor,\n        EditorUtils = Editor.EditorUtils,\n        Command = Editor.Command,\n        Tool = Editor.Tool,\n        ToolTemplate = Editor.ToolTemplate,\n        dom = Editor.Dom;\n\n    var ViewHtmlCommand = Command.extend({\n        init: function(options) {\n            var cmd = this;\n            cmd.options = options;\n            Command.fn.init.call(cmd, options);\n            cmd.attributes = null;\n            cmd.async = true;\n        },\n\n        exec: function() {\n            var that = this,\n                editor = that.editor,\n                options = editor.options,\n                messages = editor.options.messages,\n                dialog = $(kendo.template(ViewHtmlCommand.template)(messages)).appendTo(document.body),\n                textarea = \".k-editor-textarea > textarea\",\n                content, comments;\n\n            options.serialization.immutables = editor.immutables;\n\n            comments = dom.getAllComments(editor.body);\n\n            content = EditorUtils.cacheComments(editor.value(), comments);\n            content = ViewHtmlCommand.indent(content);\n            content = EditorUtils.retrieveComments(content, comments);\n\n            options.serialization.immutables = undefined$1;\n\n            function apply(e) {\n                options.deserialization.immutables = editor.immutables;\n                editor.value(dialog.find(textarea).val());\n                options.deserialization.immutables = undefined$1;\n\n                close(e);\n\n                if (that.change) {\n                    that.change();\n                }\n\n                editor.trigger(\"change\");\n            }\n\n            function close(e) {\n                e.preventDefault();\n\n                dialog.data(\"kendoWindow\").destroy();\n\n                if (editor.immutables) {\n                    editor.immutables.serializedImmutables = {};\n                }\n\n                editor.focus();\n            }\n\n            this.createDialog(dialog, {\n                title: messages.viewHtml,\n                width: 600,\n                height: 400,\n                resizable: true,\n                close: close,\n                visible: false\n            })\n                .find(textarea).val(content).end()\n                .find(\".k-dialog-update\").on(\"click\", apply).end()\n                .find(\".k-dialog-close\").on(\"click\", close).end()\n                .data(\"kendoWindow\").center().open();\n\n            dialog.find(textarea).trigger(\"focus\");\n        }\n    });\n\n    extend(ViewHtmlCommand, {\n        template: function (ref) {\n            var dialogUpdate = ref.dialogUpdate;\n            var dialogCancel = ref.dialogCancel;\n\n            return '<div class=\"k-editor-dialog k-popup-edit-form k-viewhtml-dialog\">' +\n            '<span class=\"k-input k-textarea k-input-solid k-input-md k-rounded-md k-editor-textarea\"><textarea class=\"k-input-inner !k-overflow-auto !k-resize-none\"></textarea></span>' +\n            '<div class=\"k-edit-buttons\">' +\n                \"<button class=\\\"k-dialog-update k-button k-button-md k-rounded-md k-button-solid k-button-solid-primary\\\"><span class=\\\"k-button-text\\\">\" + (kendo.htmlEncode(dialogUpdate)) + \"</span></button>\" +\n                \"<button class=\\\"k-dialog-close k-button k-button-md k-rounded-md k-button-solid k-button-solid-base\\\"><span class=\\\"k-button-text\\\">\" + (kendo.htmlEncode(dialogCancel)) + \"</span></button>\" +\n            '</div>' +\n        '</div>';\n    },\n        indent: function(content) {\n            return content.replace(/<\\/(p|li|ul|ol|h[1-6]|table|tr|td|th)>/ig, \"</$1>\\n\")\n                          .replace(/<(ul|ol)([^>]*)><li/ig, \"<$1$2>\\n<li\")\n                          .replace(/<br \\/>/ig, \"<br />\\n\")\n                          .replace(/\\n$/, \"\");\n        }\n    });\n\n    kendo.ui.editor.ViewHtmlCommand = ViewHtmlCommand;\n\n    Editor.EditorUtils.registerTool(\"viewHtml\", new Tool({ command: ViewHtmlCommand, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"View HTML\" }) }));\n\n    })(window.kendo.jQuery);\n\n    (function($) {\n\n    var kendo = window.kendo,\n        extend = $.extend,\n        Editor = kendo.ui.editor,\n        Tool = Editor.Tool,\n        Command = Editor.Command,\n        EditorUtils = Editor.EditorUtils;\n\n    var FormatCommand = Command.extend({\n        init: function(options) {\n            options.formatter = options.formatter();\n            var finder = options.formatter.finder;\n            if (finder && EditorUtils.formatByName(\"immutable\", finder.format)) {\n                finder._initOptions({ immutables: options.immutables });\n            }\n            Command.fn.init.call(this, options);\n        }\n    });\n\n    var FormatTool = Tool.extend({\n        init: function(options) {\n            Tool.fn.init.call(this, options);\n        },\n\n        command: function(commandArguments) {\n            var that = this;\n            return new FormatCommand(extend(commandArguments, {\n                    formatter: that.options.formatter\n                }));\n        },\n\n        update: function(ui, nodes) {\n            var isFormatted = this.options.finder.isFormatted(nodes);\n\n            ui.toggleClass(\"k-selected\", isFormatted);\n            ui.attr(\"aria-pressed\", isFormatted);\n        }\n    });\n\n    $.extend(Editor, {\n        FormatCommand: FormatCommand,\n        FormatTool: FormatTool\n    });\n\n    })(window.kendo.jQuery);\n\n    (function($) {\n\n    var kendo = window.kendo,\n        Class = kendo.Class,\n        Editor = kendo.ui.editor,\n        formats = kendo.ui.Editor.fn.options.formats,\n        EditorUtils = Editor.EditorUtils,\n        Tool = Editor.Tool,\n        ToolTemplate = Editor.ToolTemplate,\n        FormatTool = Editor.FormatTool,\n        dom = Editor.Dom,\n        RangeUtils = Editor.RangeUtils,\n        extend = $.extend,\n        registerTool = Editor.EditorUtils.registerTool,\n        registerFormat = Editor.EditorUtils.registerFormat,\n        MOUSEDOWN_NS = \"mousedown.kendoEditor\",\n        KEYDOWN_NS = \"keydown.kendoEditor\",\n        KMARKER = \"k-marker\";\n\n    var InlineFormatFinder = Class.extend({\n        init: function(format) {\n            this.format = format;\n        },\n\n        numberOfSiblings: function(referenceNode) {\n            var textNodesCount = 0,\n                elementNodesCount = 0,\n                markerCount = 0,\n                parentNode = referenceNode.parentNode,\n                node;\n\n            for (node = parentNode.firstChild; node; node = node.nextSibling) {\n                if (node != referenceNode) {\n                    if (node.className == KMARKER) {\n                        markerCount++;\n                    } else if (node.nodeType == 3) {\n                        textNodesCount++;\n                    } else {\n                        elementNodesCount++;\n                    }\n                }\n            }\n\n            if (markerCount > 1 && parentNode.firstChild.className == KMARKER && parentNode.lastChild.className == KMARKER) {\n                // full node selection\n                return 0;\n            } else {\n                return elementNodesCount + textNodesCount;\n            }\n        },\n\n        findSuitable: function(sourceNode, skip) {\n            if (!skip && this.numberOfSiblings(sourceNode) > 0) {\n                return null;\n            }\n\n            var node = sourceNode.parentNode;\n            var tags = this.format[0].tags;\n\n            while (!dom.ofType(node, tags)) {\n                if (this.numberOfSiblings(node) > 0) {\n                    return null;\n                }\n\n                node = node.parentNode;\n            }\n\n            return node;\n        },\n\n        findFormat: function(sourceNode) {\n            var format = this.format,\n                attrEquals = dom.attrEquals,\n                i, len, node, tags, attributes;\n\n            for (i = 0, len = format.length; i < len; i++) {\n                node = sourceNode;\n                tags = format[i].tags;\n                attributes = format[i].attr;\n\n                if (node && dom.ofType(node, tags) && attrEquals(node, attributes)) {\n                    return node;\n                }\n\n                while (node) {\n                    node = dom.parentOfType(node, tags);\n                    if (node && attrEquals(node, attributes)) {\n                        return node;\n                    }\n                }\n            }\n\n            return null;\n        },\n\n        isFormatted: function(nodes) {\n            var i, len;\n\n            for (i = 0, len = nodes.length; i < len; i++) {\n                if (this.findFormat(nodes[i])) {\n                    return true;\n                }\n            }\n            return false;\n        }\n    });\n\n    var InlineFormatter = Class.extend({\n        init: function(format, values) {\n            this.finder = new InlineFormatFinder(format);\n            this.attributes = extend({}, format[0].attr, values);\n            this.tag = format[0].tags[0];\n        },\n\n        wrap: function(node) {\n            return dom.wrap(node, dom.create(node.ownerDocument, this.tag, this.attributes));\n        },\n\n        activate: function(range, nodes) {\n            if (this.finder.isFormatted(nodes)) {\n                this.split(range);\n                this.remove(nodes);\n            } else {\n                this.apply(nodes);\n            }\n        },\n\n        toggle: function(range) {\n            var textNodes = this.immutables() ? RangeUtils.editableTextNodes : RangeUtils.textNodes;\n            var nodes = textNodes(range);\n\n            if (nodes.length > 0) {\n                this.activate(range, nodes);\n            }\n        },\n\n        immutables: function() {\n            return this.editor && this.editor.options.immutables;\n        },\n\n        apply: function(nodes) {\n            var formatNodes = [];\n            var i, l, node, formatNode;\n\n            if (nodes.length > 1) {\n                for (i = 0, l = nodes.length; i < l; i++) {\n                    node = nodes[i];\n                    formatNode = this.format(node, true);\n                    formatNodes.push(formatNode);\n\n                }\n            } else {\n                node = nodes[0];\n                formatNode = this.format(node, false);\n            }\n\n            this.consolidate(formatNodes);\n        },\n\n        format: function(node, outerMostInline) {\n            var formatNode = this.finder.findSuitable(node);\n            var attributes = this.attributes;\n            var styleAttr = attributes ? attributes.style || {} : {};\n\n            if (formatNode) {\n                if (dom.is(formatNode, \"font\")) {\n                    if (styleAttr.color) {\n                        formatNode.removeAttribute(\"color\");\n                    }\n                    if (styleAttr.fontName) {\n                        formatNode.removeAttribute(\"face\");\n                    }\n                    if (styleAttr.fontSize) {\n                        formatNode.removeAttribute(\"size\");\n                    }\n                }\n                dom.attr(formatNode, attributes);\n            } else {\n                while (!dom.isBlock(node.parentNode) && node.parentNode.childNodes.length == 1 && node.parentNode.contentEditable !== 'true' && outerMostInline) {\n                    node = node.parentNode;\n                }\n\n                formatNode = this.wrap(node);\n            }\n\n            return formatNode;\n        },\n\n        remove: function(nodes) {\n            var i, l, formatNode;\n\n            for (i = 0, l = nodes.length; i < l; i++) {\n                formatNode = this.finder.findFormat(nodes[i]);\n                if (formatNode) {\n                    if (this.attributes && this.attributes.style) {\n                        dom.unstyle(formatNode, this.attributes.style);\n                        if (!formatNode.style.cssText && !formatNode.attributes[\"class\"]) {\n                            dom.unwrap(formatNode);\n                        }\n                    } else {\n                        dom.unwrap(formatNode);\n                    }\n                }\n            }\n        },\n\n        split: function(range) {\n            var nodes = RangeUtils.textNodes(range);\n            var l = nodes.length;\n            var i, formatNode;\n\n            if (l > 0) {\n                for (i = 0; i < l; i++) {\n                    formatNode = this.finder.findFormat(nodes[i]);\n                    if (formatNode) {\n                        RangeUtils.split(range, formatNode, true);\n                    }\n                }\n            }\n        },\n\n        consolidate: function(nodes) {\n            var node, last;\n\n            while (nodes.length > 1) {\n                node = nodes.pop();\n                last = nodes[nodes.length - 1];\n\n                if (node.previousSibling && node.previousSibling.className == KMARKER) {\n                    last.appendChild(node.previousSibling);\n                }\n\n                if (node.tagName == last.tagName &&\n                    node.previousSibling == last &&\n                    node.style.cssText == last.style.cssText &&\n                    node.className === last.className) {\n\n                    while (node.firstChild) {\n                        last.appendChild(node.firstChild);\n                    }\n\n                    dom.remove(node);\n                }\n            }\n        }\n    });\n\n    var GreedyInlineFormatFinder = InlineFormatFinder.extend({\n        init: function(format, greedyProperty, fontAttr) {\n            this.format = format;\n            this.greedyProperty = greedyProperty;\n            this.fontAttr = fontAttr;\n            InlineFormatFinder.fn.init.call(this, format);\n        },\n\n        getInlineCssValue: function(node) {\n            var attributes = node.attributes;\n            var trim = kendo.trim;\n            var i, l, attribute, name, attributeValue, css, pair, cssIndex, len;\n            var propertyAndValue, property, value;\n\n            if (!attributes) {\n                return;\n            }\n\n            for (i = 0, l = attributes.length; i < l; i++) {\n                attribute = attributes[i];\n                name = attribute.nodeName;\n                attributeValue = attribute.nodeValue;\n\n                if (attribute.specified && name == \"style\") {\n\n                    css = trim(attributeValue || node.style.cssText).split(\";\");\n\n                    for (cssIndex = 0, len = css.length; cssIndex < len; cssIndex++) {\n                        pair = css[cssIndex];\n                        if (pair.length) {\n                            propertyAndValue = pair.split(\":\");\n                            property = trim(propertyAndValue[0].toLowerCase());\n                            value = trim(propertyAndValue[1]);\n\n                            if (property != this.greedyProperty) {\n                                continue;\n                            }\n\n                            return property.indexOf(\"color\") >= 0 ? dom.toHex(value) : value;\n                        }\n                    }\n                }\n\n                if (this.fontAttr && attribute.specified && name == this.fontAttr) {\n                    property = attribute.nodeValue;\n                    value = attribute.nodeValue;\n\n                    return property.indexOf(\"color\") >= 0 ? dom.toHex(value) : value;\n                }\n            }\n        },\n\n        getFormatInner: function(node) {\n            var $node = $(dom.isDataNode(node) ? node.parentNode : node);\n            var parents = $node.parentsUntil(\"[contentEditable]\").addBack().toArray().reverse();\n            var i, len, value;\n\n            for (i = 0, len = parents.length; i < len; i++) {\n                value = this.greedyProperty == \"className\" ? parents[i].className : this.getInlineCssValue(parents[i]);\n\n                if (value) {\n                    return value;\n                }\n            }\n\n            return \"inherit\";\n        },\n\n        getFormat: function(nodes) {\n            var result = this.getFormatInner(nodes[0]), i, len;\n\n            for (i = 1, len = nodes.length; i < len; i++) {\n                if (result != this.getFormatInner(nodes[i])) {\n                    return \"\";\n                }\n            }\n\n            return result;\n        },\n\n        isFormatted: function(nodes) {\n            return this.getFormat(nodes) !== \"\";\n        }\n    });\n\n    var GreedyInlineFormatter = InlineFormatter.extend({\n        init: function(format, values, greedyProperty) {\n            InlineFormatter.fn.init.call(this, format, values);\n\n            this.values = values;\n            this.finder = new GreedyInlineFormatFinder(format, greedyProperty);\n\n            if (greedyProperty) {\n                this.greedyProperty = kendo.toCamelCase(greedyProperty);\n            }\n\n        },\n\n        activate: function(range, nodes) {\n            var greedyProperty = this.greedyProperty;\n            var action = \"apply\";\n\n            this.split(range);\n\n            if (greedyProperty && this.values.style[greedyProperty] == \"inherit\") {\n                action = \"remove\";\n            }\n\n            this[action](nodes);\n        }\n    });\n\n    var InlineFormatTool = FormatTool.extend({\n        init: function(options) {\n            FormatTool.fn.init.call(this, extend(options, {\n                finder: new InlineFormatFinder(options.format),\n                formatter: function() { return new InlineFormatter(options.format); }\n            }));\n        }\n    });\n\n    var DelayedExecutionTool = Tool.extend({\n        update: function(ui, nodes) {\n            var list = ui.data(this.type);\n\n            list.close();\n            list.value(this.finder.getFormat(nodes));\n        }\n    });\n\n    var FontTool = DelayedExecutionTool.extend({\n        init: function(options) {\n            Tool.fn.init.call(this, options);\n\n            // IE has single selection hence we are using select box instead of combobox\n            this.type = (kendo.support.browser.msie || kendo.support.touch) ? \"kendoDropDownList\" : \"kendoComboBox\";\n            this.format = [{ tags: [\"span\", \"font\"] }];\n            this.finder = new GreedyInlineFormatFinder(this.format, options.cssAttr, options.fontAttr);\n        },\n\n        command: function(commandArguments) {\n            var options = this.options,\n                format = this.format,\n                style = {};\n\n            return new Editor.FormatCommand(extend(commandArguments, {\n                formatter: function() {\n                    style[options.domAttr] = commandArguments.value;\n\n                    return new GreedyInlineFormatter(format, { style: style }, options.cssAttr);\n                }\n            }));\n        },\n\n        initialize: function(ui, initOptions) {\n            var editor = initOptions.editor,\n                options = this.options,\n                toolName = options.name,\n                dataSource,\n                range,\n                defaultValue = [];\n\n            if (options.defaultValue) {\n               defaultValue = [{\n                    text: editor.options.messages[options.defaultValue[0].text],\n                    value: options.defaultValue[0].value\n               }];\n            }\n\n            dataSource = defaultValue.concat(options.items ? options.items : (editor.options[toolName] || [] ));\n\n            ui.attr({ title: initOptions.title });\n            ui[this.type]({\n                dataTextField: \"text\",\n                dataValueField: \"value\",\n                dataSource: dataSource,\n                change: function() {\n                    editor._range = range;\n                    Tool.exec(editor, toolName, this.value());\n                },\n                close: function() {\n                    setTimeout(function() {\n                        editor._deleteSavedRange();\n                    },0);\n                },\n                highlightFirst: false\n            });\n\n            ui.closest(\".k-combobox\").removeClass(\"k-\" + toolName).find(\"*\").addBack().attr(\"unselectable\", \"on\");\n\n            var widget = ui.data(this.type);\n            widget.value(\"inherit\");\n\n            widget.wrapper.on(MOUSEDOWN_NS, \".k-select,.k-input-button,.k-input\", function() {\n                var newRange = editor.getRange();\n                range = editor._containsRange(newRange) ? newRange : range;\n            })\n            .on(KEYDOWN_NS, function(e) {\n                if (e.keyCode === kendo.keys.ENTER) {\n                    editor._deleteSavedRange();\n                    e.preventDefault();\n                }\n            });\n        }\n\n    });\n\n    var ColorTool = Tool.extend({\n        init: function(options) {\n            Tool.fn.init.call(this, options);\n\n            this.format = [{ tags: [\"span\",\"font\"] }];\n            this.finder = new GreedyInlineFormatFinder(this.format, options.cssAttr);\n        },\n\n        options: {\n            palette: \"websafe\",\n            columns: 18\n        },\n\n        update: function() {\n            this._widget.close();\n        },\n\n        command: function(commandArguments) {\n            var options = this.options,\n                format = this.format,\n                style = {};\n\n            return new Editor.FormatCommand(extend(commandArguments, {\n                formatter: function() {\n                    style[options.domAttr] = commandArguments.value;\n\n                    return new GreedyInlineFormatter(format, { style: style }, options.cssAttr);\n                }\n            }));\n        },\n\n        initialize: function(ui, initOptions) {\n            var that = this,\n                editor = initOptions.editor,\n                toolName = this.name,\n                options = extend({}, ColorTool.fn.options, this.options),\n                palette = options.palette,\n                columns = options.columns,\n                view = palette !== undefined && !palette ? \"gradient\" : \"palette\";\n\n            ui = this._widget = new kendo.ui.ColorPicker(ui, {\n                closeOnSelect: true,\n                views: [view],\n                preview: view === \"gradient\",\n                input: view === \"gradient\",\n                buttons: view === \"gradient\",\n                toolIcon: \"k-icon k-i-\" + EditorUtils.getToolCssClass(options.name),\n                palette: palette,\n                columns: columns,\n                change: function() {\n                    var color = ui.value();\n\n                    if (kendo.support.browser.msie && that.storedRange && that._inputFocused) {\n                        editor.selectRange(that.storedRange);\n                    }\n\n                    if (color) {\n                        Tool.exec(editor, toolName, color);\n                    }\n\n                    delete that.storedRange;\n                    delete that._inputFocused;\n                    editor.focus();\n                },\n                open: function(e) {\n                    var picker = e.sender;\n                    that.storedRange = editor.getRange();\n\n                    picker._popup.element.on(MOUSEDOWN_NS, function(e) {\n                        if (!$(e.target).is(\"input.k-color-value\")) {\n                            e.preventDefault();\n                        }\n                    });\n\n                    if (!picker._popup.element.is(\"[unselectable='on']\")) {\n                        picker._popup.element\n                            .attr({ unselectable: \"on\" })\n                            .find(\"*:not(input)\").attr(\"unselectable\", \"on\")\n                            .end().find(\"input\").on(\"focus\", function() {\n                                that._inputFocused = true;\n                            });\n                    }\n\n                    setTimeout(function() {\n                        picker._popup.element.find(\".k-colorpalette\").trigger(\"focus\");\n                    });\n                },\n                close: function(e) {\n                    e.sender._popup.element.off(MOUSEDOWN_NS);\n\n                    if (kendo.support.browser.msie && that.storedRange && that._inputFocused) {\n                        editor.selectRange(that.storedRange);\n                    }\n                },\n                activate: function(e) {\n                    e.preventDefault();\n\n                    if (e.sender._value.toCssRgba() === \"rgba(255, 255, 255, 0)\") {\n                        return;\n                    }\n\n                    ui.trigger(\"change\");\n                }\n            });\n            ui.wrapper\n                .attr({ title: initOptions.title, unselectable: \"on\" })\n                .find(\"*:not(input)\").attr(\"unselectable\", \"on\");\n\n            ui.value(\"transparent\");\n        }\n    });\n\n    extend(Editor, {\n        InlineFormatFinder: InlineFormatFinder,\n        InlineFormatter: InlineFormatter,\n        DelayedExecutionTool: DelayedExecutionTool,\n        GreedyInlineFormatFinder: GreedyInlineFormatFinder,\n        GreedyInlineFormatter: GreedyInlineFormatter,\n        InlineFormatTool: InlineFormatTool,\n        FontTool: FontTool,\n        ColorTool: ColorTool\n    });\n\n    registerFormat(\"bold\", [ { tags: [\"strong\", \"b\"] }, { tags: [\"span\"], attr: { style: { fontWeight: \"bold\" } } } ]);\n    registerTool(\"bold\", new InlineFormatTool({ key: \"B\", ctrl: true, format: formats.bold, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Bold\" }) }));\n\n    registerFormat(\"italic\", [ { tags: [\"em\", \"i\"] }, { tags: [\"span\"], attr: { style: { fontStyle: \"italic\" } } } ]);\n    registerTool(\"italic\", new InlineFormatTool({ key: \"I\", ctrl: true, format: formats.italic, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Italic\" }) }));\n\n    registerFormat(\"underline\", [ { tags: [\"span\"], attr: { style: { textDecoration: \"underline\" } } }, { tags: [\"u\"] } ]);\n    registerTool(\"underline\", new InlineFormatTool({ key: \"U\", ctrl: true, format: formats.underline, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Underline\" }) }));\n\n    registerFormat(\"strikethrough\", [ { tags: [\"del\", \"strike\"] }, { tags: [\"span\"], attr: { style: { textDecoration: \"line-through\" } } } ]);\n    registerTool(\"strikethrough\", new InlineFormatTool({ format: formats.strikethrough, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Strikethrough\" }) }));\n\n    registerFormat(\"superscript\", [ { tags: [\"sup\"] } ]);\n    registerTool(\"superscript\", new InlineFormatTool({ format: formats.superscript, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Superscript\" }) }));\n\n    registerFormat(\"subscript\", [ { tags: [\"sub\"] } ]);\n    registerTool(\"subscript\", new InlineFormatTool({ format: formats.subscript, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Subscript\" }) }));\n\n    registerTool(\"foreColor\", new ColorTool({ cssAttr: \"color\", fontAttr: \"color\", domAttr: \"color\", name: \"foreColor\", template: new ToolTemplate({ template: EditorUtils.colorPickerTemplate, title: \"Color\" }) }));\n\n    registerTool(\"backColor\", new ColorTool({ cssAttr: \"background-color\", domAttr: \"backgroundColor\", name: \"backColor\", template: new ToolTemplate({ template: EditorUtils.colorPickerTemplate, title: \"Background Color\" }) }));\n\n    registerTool(\"fontName\", new FontTool({ cssAttr: \"font-family\", fontAttr: \"face\", domAttr: \"fontFamily\", name: \"fontName\", defaultValue: [{ text: \"fontNameInherit\", value: \"inherit\" }], template: new ToolTemplate({ template: EditorUtils.comboBoxTemplate, title: \"Font Name\" }) }));\n\n    registerTool(\"fontSize\", new FontTool({ cssAttr: \"font-size\", fontAttr: \"size\", domAttr: \"fontSize\", name: \"fontSize\", defaultValue: [{ text: \"fontSizeInherit\", value: \"inherit\" }], template: new ToolTemplate({ template: EditorUtils.comboBoxTemplate, title: \"Font Size\" }) }));\n\n    })(window.kendo.jQuery);\n\n    (function($, undefined$1) {\n\n    var kendo = window.kendo,\n        encode = kendo.htmlEncode,\n        Class = kendo.Class,\n        extend = $.extend,\n        Editor = kendo.ui.editor,\n        dom = Editor.Dom,\n        RangeUtils = Editor.RangeUtils,\n        EditorUtils = Editor.EditorUtils,\n        Command = Editor.Command,\n        Tool = Editor.Tool,\n        ToolTemplate = Editor.ToolTemplate,\n        InlineFormatter = Editor.InlineFormatter,\n        InlineFormatFinder = Editor.InlineFormatFinder,\n        textNodes = RangeUtils.textNodes,\n        editableTextNodes = RangeUtils.editableTextNodes,\n        registerTool = Editor.EditorUtils.registerTool,\n        keys = kendo.keys;\n\n    var HTTP_PROTOCOL = \"http://\";\n    var protocolRegExp = /^\\w*:\\/\\//;\n    var endLinkCharsRegExp = /[\\w\\/\\$\\-_\\*\\?]/i;\n\n    var LinkFormatFinder = Class.extend({\n        findSuitable: function(sourceNode) {\n            return dom.parentOfType(sourceNode, [\"a\"]);\n        }\n    });\n\n    var LinkFormatter = Class.extend({\n        init: function() {\n            this.finder = new LinkFormatFinder();\n        },\n\n        apply: function(range, attributes) {\n            var nodes = this.immutables ? editableTextNodes(range) : textNodes(range);\n            var markers, doc, formatter, a, parent;\n\n            if (attributes.innerText) {\n                doc = RangeUtils.documentFromRange(range);\n                markers = RangeUtils.getMarkers(range);\n\n                range.deleteContents();\n                a = dom.create(doc, \"a\", attributes);\n                range.insertNode(a);\n\n                parent = a.parentNode;\n                if (dom.name(parent) == \"a\") {\n                    dom.insertAfter(a, parent);\n                }\n\n                if (dom.emptyNode(parent)) {\n                    dom.remove(parent);\n                }\n\n                // move range and markers after inserted link\n                var ref = a;\n                for (var i = 0; i < markers.length; i++) {\n                    dom.insertAfter(markers[i], ref);\n                    ref = markers[i];\n                }\n\n                if (markers.length) {\n                    dom.insertBefore(doc.createTextNode(\"\\ufeff\"), markers[1] || markers[0]);\n                    dom.insertAfter(doc.createTextNode(\"\\ufeff\"), markers[1] || markers[0]);\n                    range.setStartBefore(markers[0]);\n                    range.setEndAfter(markers[markers.length - 1]);\n                }\n            } else {\n                formatter = new InlineFormatter([{ tags: [\"a\"] }], attributes);\n                formatter.finder = this.finder;\n                formatter.apply(nodes);\n            }\n        }\n    });\n\n    var UnlinkCommand = Command.extend({\n        init: function(options) {\n            var that = this;\n            options.formatter = /** @ignore */ {\n                toggle: function(range) {\n                    var nodes = that.immutables() ? editableTextNodes(range) : textNodes(range);\n                    new InlineFormatter([{ tags: [\"a\"] }]).remove(nodes);\n                }\n            };\n            this.options = options;\n            Command.fn.init.call(this, options);\n        }\n    });\n\n    var LinkCommand = Command.extend({\n        init: function(options) {\n            var that;\n            this.options = options;\n            Command.fn.init.call(this, options);\n            this.formatter = new LinkFormatter();\n\n            if (!options.url) {\n                this.attributes = null;\n                this.async = true;\n            } else {\n                this.exec = function() {\n                    this.formatter.immutables = that && that.immutables();\n                    this.formatter.apply(options.range, {\n                        href: options.url,\n                        innerText: options.text || options.url,\n                        target: options.target\n                    });\n                };\n            }\n        },\n\n        _dialogTemplate: function() {\n            return kendo.template( function (ref) {\n                    var messages = ref.messages;\n\n                    return '<div class=\"k-editor-dialog k-popup-edit-form\">' +\n                    '<div class=\"k-edit-form-container\">' +\n                        \"<div class='k-edit-label'>\" +\n                            \"<label for=\\\"k-editor-link-url\\\">\" + (encode( messages.linkWebAddress )) + \"</label>\" +\n                        \"</div>\" +\n                        \"<div class='k-edit-field'>\" +\n                            \"<span class=\\\"k-textbox k-input k-input-md k-rounded-md k-input-solid\\\"><input type='text' class='k-input-inner' id='k-editor-link-url'></span>\" +\n                        \"</div>\" +\n                        \"<div class='k-edit-label k-editor-link-text-row'>\" +\n                            \"<label for=\\\"k-editor-link-text\\\">\" + (encode( messages.linkText )) + \"</label>\" +\n                        \"</div>\" +\n                        \"<div class='k-edit-field k-editor-link-text-row'>\" +\n                            \"<span class=\\\"k-textbox k-input k-input-md k-rounded-md k-input-solid\\\"><input type='text' class='k-input-inner' id='k-editor-link-text'></span>\" +\n                        \"</div>\" +\n                        \"<div class='k-edit-label'>\" +\n                            \"<label for=\\\"k-editor-link-title\\\">\" + (encode( messages.linkToolTip )) + \"</label>\" +\n                        \"</div>\" +\n                        \"<div class='k-edit-field'>\" +\n                            \"<span class=\\\"k-textbox k-input k-input-md k-rounded-md k-input-solid\\\"><input type='text' class='k-input-inner' id='k-editor-link-title'></span>\" +\n                        \"</div>\" +\n                        \"<div class='k-edit-label'></div>\" +\n                        \"<div class='k-edit-field'>\" +\n                            \"<input type='checkbox' class='k-checkbox k-checkbox-md k-rounded-md' id='k-editor-link-target'>\" +\n                            \"<label for=\\\"k-editor-link-target\\\" class=\\\"k-checkbox-label\\\">\" + (encode( messages.linkOpenInNewWindow )) + \"</label>\" +\n                        \"</div>\" +\n                        \"<div class='k-edit-buttons'>\" +\n                            \"<button class=\\\"k-dialog-insert k-button k-button-md k-rounded-md k-button-solid k-button-solid-primary\\\"><span class=\\\"k-button-text\\\">\" + (encode(messages.dialogInsert)) + \"</span></button>\" +\n                            \"<button class=\\\"k-dialog-close k-button k-button-md k-rounded-md k-button-solid k-button-solid-base\\\"><span class=\\\"k-button-text\\\">\" + (encode(messages.dialogCancel)) + \"</span></button>\" +\n                        \"</div>\" +\n                    \"</div>\" +\n                \"</div>\";\n            }\n            )({\n                messages: this.editor.options.messages\n            });\n        },\n\n        exec: function() {\n            var messages = this.editor.options.messages;\n            this._initialText = \"\";\n            this._range = this.lockRange(true);\n            this.formatter.immutables = this.immutables();\n\n            var nodes = textNodes(this._range);\n            var a = nodes.length ? this.formatter.finder.findSuitable(nodes[0]) : null;\n            var img = nodes.length && dom.name(nodes[0]) == \"img\";\n\n            var dialog = this.createDialog(this._dialogTemplate(), {\n                title: messages.createLink,\n                close: this._close.bind(this),\n                visible: false\n            });\n\n            if (a) {\n                this._range.selectNodeContents(a);\n                nodes = textNodes(this._range);\n            }\n\n            this._initialText = this.linkText(nodes);\n\n            dialog\n                .find(\".k-dialog-insert\").on(\"click\", this._apply.bind(this)).end()\n                .find(\".k-dialog-close\").on(\"click\", this._close.bind(this)).end()\n                .find(\".k-edit-field input\").on(\"keydown\", this._keydown.bind(this)).end()\n                .find(\"#k-editor-link-url\").val(this.linkUrl(a)).end()\n                .find(\"#k-editor-link-text\").val(this._initialText).end()\n                .find(\"#k-editor-link-title\").val(a ? a.title : \"\").end()\n                .find(\"#k-editor-link-target\").attr(\"checked\", a ? a.target == \"_blank\" : false).end()\n                .find(\".k-editor-link-text-row\").toggle(!img);\n\n            this._dialog = dialog.data(\"kendoWindow\").center().open();\n\n            $(\"#k-editor-link-url\", dialog).trigger(\"focus\").select();\n        },\n\n        _keydown: function(e) {\n            var keys = kendo.keys;\n\n            if (e.keyCode == keys.ENTER) {\n                this._apply(e);\n            } else if (e.keyCode == keys.ESC) {\n                this._close(e);\n            }\n        },\n\n        _apply: function(e) {\n            var element = this._dialog.element;\n            var href = $(\"#k-editor-link-url\", element).val();\n            var title, text, target;\n            var textInput = $(\"#k-editor-link-text\", element);\n\n            if (href && href != HTTP_PROTOCOL) {\n\n                if (href.indexOf(\"@\") > 0 && !/^(\\w+:)|(\\/\\/)/i.test(href)) {\n                    href = \"mailto:\" + href;\n                }\n\n                this.attributes = { href: href };\n\n                title = $(\"#k-editor-link-title\", element).val();\n                if (title) {\n                    this.attributes.title = title;\n                }\n\n                if (textInput.is(\":visible\")) {\n                    text = kendo.trim(textInput.val());\n                    if (!text && !this._initialText) {\n                        this.attributes.innerText = href;\n                    } else if (text && (text !== this._initialText)) {\n                        this.attributes.innerText = dom.stripBom(text);\n                    }\n                }\n\n                target = $(\"#k-editor-link-target\", element).is(\":checked\");\n                this.attributes.target = target ? \"_blank\" : null;\n\n                this.formatter.apply(this._range, this.attributes);\n            }\n\n            this._close(e);\n\n            if (this.change) {\n                this.change();\n            }\n        },\n\n        _close: function(e) {\n            e.preventDefault();\n            this._dialog.destroy();\n\n            dom.windowFromDocument(RangeUtils.documentFromRange(this._range)).focus();\n\n            this.releaseRange(this._range);\n        },\n\n        linkUrl: function(anchor) {\n            if (anchor) {\n                // IE < 8 returns absolute url if getAttribute is not used\n                return anchor.getAttribute(\"href\", 2);\n            }\n\n            return HTTP_PROTOCOL;\n        },\n\n        linkText: function(nodes) {\n            var text = \"\";\n            var i;\n\n            for (i = 0; i < nodes.length; i++) {\n                text += nodes[i].nodeValue;\n            }\n\n            return dom.stripBom(text || \"\");\n        },\n\n        redo: function() {\n            var range = this.lockRange(true);\n\n            this.formatter.apply(range, this.attributes);\n            this.releaseRange(range);\n        }\n\n    });\n\n    var AutoLinkCommand = Command.extend({\n        init: function(options) {\n            Command.fn.init.call(this, options);\n\n            this.formatter = new LinkFormatter();\n        },\n\n        exec: function() {\n            var detectedLink = this.detectLink();\n            if (!detectedLink) {\n                return;\n            }\n\n            var range = this.getRange();\n            var linkMarker = new kendo.ui.editor.Marker();\n            var linkRange = range.cloneRange();\n\n            linkRange.setStart(detectedLink.start.node, detectedLink.start.offset);\n            linkRange.setEnd(detectedLink.end.node, detectedLink.end.offset);\n\n            range = this.lockRange();\n            linkMarker.add(linkRange);\n\n            this.formatter.apply(linkRange, {\n                href: this._ensureWebProtocol(detectedLink.text)\n            });\n\n            linkMarker.remove(linkRange);\n            this.releaseRange(range);\n        },\n\n        detectLink: function() {\n            var range = this.getRange();\n            var startNode = range.startContainer;\n            var startOffset = range.startOffset;\n            var prev = startNode.previousSibling;\n            if (!prev && ((dom.isBom(startNode) && !startNode.nextSibling) || (!startOffset && dom.isDataNode(startNode)))) {\n                startNode = startNode.parentNode;\n                startOffset = 0;\n            }\n            var traverser = new LeftDomTextTraverser({\n                node: startNode,\n                offset: startOffset,\n                cancelAtNode: function(node) { return node && dom.name(node) === \"a\"; }\n            });\n\n            var detection = new DomTextLinkDetection(traverser);\n            return detection.detectLink();\n        },\n\n        changesContent: function() {\n            return !!this.detectLink();\n        },\n\n        _ensureWebProtocol: function(linkText) {\n            var hasProtocol = this._hasProtocolPrefix(linkText);\n            return hasProtocol ? linkText : this._prefixWithWebProtocol(linkText);\n        },\n\n        _hasProtocolPrefix: function(linkText) {\n            return protocolRegExp.test(linkText);\n        },\n\n        _prefixWithWebProtocol: function(linkText) {\n            return HTTP_PROTOCOL + linkText;\n        }\n    });\n\n    var UnlinkTool = Tool.extend({\n        init: function(options) {\n            this.options = options;\n            this.finder = new InlineFormatFinder([{ tags: [\"a\"] }]);\n\n            Tool.fn.init.call(this, $.extend(options, { command: UnlinkCommand }));\n        },\n\n        initialize: function(ui, options) {\n            Tool.fn.initialize.call(this, ui, options);\n            ui.addClass(\"k-disabled\");\n        },\n\n        update: function(ui, nodes) {\n            ui.toggleClass(\"k-disabled\", !this.finder.isFormatted(nodes))\n              .removeClass(\"k-hover\");\n        }\n    });\n\n    var DomTextLinkDetection = Class.extend({\n        init: function(traverser) {\n            this.traverser = traverser;\n            this.start = DomPos();\n            this.end = DomPos();\n            this.text = \"\";\n        },\n\n        detectLink: function() {\n            var node = this.traverser.node;\n            var offset = this.traverser.offset;\n            if (dom.isDataNode(node)) {\n                var text = node.data.substring(0, offset);\n                if (/\\s{2}$/.test(dom.stripBom(text))) {\n                    return;\n                }\n            } else if (offset === 0) {//heuristic for new line\n                var p = dom.closestEditableOfType(node, dom.blockElements);\n                if (p && p.previousSibling) {\n                    this.traverser.init({\n                        node: p.previousSibling\n                    });\n                }\n            }\n\n            this.traverser.traverse(this._detectEnd.bind(this));\n            if (!this.end.blank()) {\n                this.traverser = this.traverser.clone(this.end);\n                this.traverser.traverse(this._detectStart.bind(this));\n\n                if (!this._isLinkDetected()) {\n                    var puntuationOptions = this.traverser.extendOptions(this.start);\n                    var puntuationTraverser = new RightDomTextTraverser(puntuationOptions);\n                    puntuationTraverser.traverse(this._skipStartPuntuation.bind(this));\n                    if (!this._isLinkDetected()) {\n                        this.start = DomPos();\n                    }\n                }\n            }\n\n            if (this.start.blank()) {\n                return null;\n            } else {\n                return {\n                    start: this.start,\n                    end: this.end,\n                    text: this.text\n                };\n            }\n        },\n\n        _isLinkDetected: function() {\n            return protocolRegExp.test(this.text) || /^w{3}\\./i.test(this.text);\n        },\n\n        _detectEnd: function(text, node) {\n            var i = lastIndexOfRegExp(text, endLinkCharsRegExp);\n            if (i > -1) {\n                this.end.node = node;\n                this.end.offset = i + 1;\n\n                return false;\n            }\n        },\n\n        _detectStart: function(text, node) {\n            var i = lastIndexOfRegExp(text, /\\s/);\n            var ii = i + 1;\n            this.text = text.substring(ii) + this.text;\n\n            this.start.node = node;\n            this.start.offset = ii;\n\n            if (i > -1) {\n                return false;\n            }\n        },\n\n        _skipStartPuntuation: function(text, node, offset) {\n            var i = indexOfRegExp(text, /\\w/);\n            var ii = i;\n            if (i === -1) {\n                ii = text.length;\n            }\n\n            this.text = this.text.substring(ii);\n            this.start.node = node;\n            this.start.offset = ii + (offset | 0);\n\n            if (i > -1) {\n                return false;\n            }\n        }\n    });\n\n    function lastIndexOfRegExp(str, search) {\n        var i = str.length;\n        while (i-- && !search.test(str[i])) {}\n\n        return i;\n    }\n    function indexOfRegExp(str, search) {\n        var r = search.exec(str);\n\n        return r ? r.index : -1;\n    }\n\n    var DomPos = function() {\n        return {\n            node: null,\n            offset: null,\n            blank: function() {\n                return this.node === null && this.offset === null;\n            }\n        };\n    };\n\n    var DomTextTraverser = Class.extend({\n        init: function(options) {\n            this.node = options.node;\n            this.offset = options.offset === undefined$1 ? (dom.isDataNode(this.node) && this.node.length) || 0 : options.offset;\n            this.cancelAtNode = options.cancelAtNode || this.cancelAtNode || $.noop;\n        },\n\n        traverse: function(callback) {\n            if (!callback) {\n                return;\n            }\n            this.cancel = false;\n            this._traverse(callback, this.node, this.offset);\n        },\n\n        _traverse: function(callback, node, offset) {\n            if (!node || this.cancel) {\n                return;\n            }\n            if (node.nodeType === 3) {\n                var text = node.data;\n                if (offset !== undefined$1) {\n                    text = this.subText(text, offset);\n                }\n                this.cancel = (callback(text, node, offset) === false);\n            }\n            else {\n                var edgeNode = this.edgeNode(node);\n                this.cancel = this.cancel || this.cancelAtNode(edgeNode);\n                return this._traverse(callback, edgeNode);\n            }\n\n            var next = this.next(node);\n            if (!next) {\n                var parent = node.parentNode;\n                while (!next && dom.isInline(parent)) {\n                    next = this.next(parent);\n                    parent = parent.parentNode;\n                }\n            }\n            this.cancel = this.cancel || this.cancelAtNode(next);\n            this._traverse(callback, next);\n        },\n\n        extendOptions: function(o) {\n            return $.extend({\n                node: this.node,\n                offset: this.offset,\n                cancelAtNode: this.cancelAtNode\n            }, o || {});\n        },\n\n        edgeNode: function(node) {},\n        next: function(node) {},\n        subText: function(text, offset) {}\n\n    });\n\n    var LeftDomTextTraverser = DomTextTraverser.extend({\n        subText: function(text, splitIndex) {\n            return text.substring(0, splitIndex);\n        },\n\n        next: function(node) {\n            return node.previousSibling;\n        },\n\n        edgeNode: function(node) {\n            return node.lastChild;\n        },\n\n        clone: function(options) {\n            var o = this.extendOptions(options);\n            return new LeftDomTextTraverser(o);\n        }\n    });\n\n    var RightDomTextTraverser = DomTextTraverser.extend({\n        subText: function(text, splitIndex) {\n            return text.substring(splitIndex);\n        },\n\n        next: function(node) {\n            return node.nextSibling;\n        },\n\n        edgeNode: function(node) {\n            return node.firstChild;\n        },\n\n        clone: function(options) {\n            var o = this.extendOptions(options);\n            return new RightDomTextTraverser(o);\n        }\n    });\n\n    extend(kendo.ui.editor, {\n        LinkFormatFinder: LinkFormatFinder,\n        LinkFormatter: LinkFormatter,\n        UnlinkCommand: UnlinkCommand,\n        LinkCommand: LinkCommand,\n        AutoLinkCommand: AutoLinkCommand,\n        UnlinkTool: UnlinkTool,\n        DomTextLinkDetection: DomTextLinkDetection,\n        LeftDomTextTraverser: LeftDomTextTraverser,\n        RightDomTextTraverser: RightDomTextTraverser\n    });\n\n    registerTool(\"createLink\", new Tool({ key: \"K\", ctrl: true, command: LinkCommand, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Create Link\" }) }));\n    registerTool(\"unlink\", new UnlinkTool({ key: \"K\", ctrl: true, shift: true, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Remove Link\" }) }));\n    registerTool(\"autoLink\", new Tool({ key: [keys.ENTER, keys.SPACEBAR], keyPressCommand: true, command: AutoLinkCommand }));\n\n    })(window.kendo.jQuery);\n\n    (function($) {\n\n    var kendo = window.kendo,\n        Class = kendo.Class,\n        extend = $.extend,\n        Editor = kendo.ui.editor,\n        formats = kendo.ui.Editor.fn.options.formats,\n        dom = Editor.Dom,\n        ToolTemplate = Editor.ToolTemplate,\n        FormatTool = Editor.FormatTool,\n        EditorUtils = Editor.EditorUtils,\n        registerTool = EditorUtils.registerTool,\n        registerFormat = EditorUtils.registerFormat,\n        RangeUtils = Editor.RangeUtils;\n\n    var BlockFormatFinder = Class.extend({\n        init: function(format) {\n            this.format = format;\n        },\n\n        contains: function(node, children) {\n            var i, len, child;\n\n            for (i = 0, len = children.length; i < len; i++) {\n                child = children[i];\n                if (!child || !dom.isAncestorOrSelf(node, child)) {\n                    return false;\n                }\n            }\n\n            return true;\n        },\n\n        findSuitable: function(nodes) {\n            var format = this.format,\n                suitable = [],\n                i, len, candidate;\n\n            for (i = 0, len = nodes.length; i < len; i++) {\n                for (var f = format.length - 1; f >= 0; f--) {\n                    candidate = dom.ofType(nodes[i], format[f].tags) ? nodes[i] : dom.closestEditableOfType(nodes[i], format[f].tags);\n                    if (candidate) {\n                        break;\n                    }\n                }\n\n                if (!candidate || candidate.contentEditable === 'true') {\n                    return [];\n                }\n\n                if ($.inArray(candidate, suitable) < 0) {\n                    suitable.push(candidate);\n                }\n            }\n\n            this._resolveListsItems(suitable);\n\n            for (i = 0, len = suitable.length; i < len; i++) {\n                if (this.contains(suitable[i], suitable)) {\n                    return [suitable[i]];\n                }\n            }\n\n            return suitable;\n        },\n        _resolveListsItems: function(nodes) {\n            var i, node, wrapper;\n            for (i = 0; i < nodes.length; i++) {\n                node = nodes[i];\n                wrapper = dom.is(node, \"li\") ? node : dom.wrapper(node);\n                wrapper = wrapper && dom.list(wrapper) ? wrapper.children[0] : wrapper;\n                if (dom.is(wrapper, \"li\")) {\n                    node = nodes[i] = wrapper;\n                }\n            }\n        },\n\n        findFormat: function(sourceNode, until) {\n            var format = this.format,\n                i, len, node, tags, attributes;\n            var editableParent = dom.editableParent(sourceNode);\n            var immutables = this.options && this.options.immutables;\n            var ImmutablesNS = Editor.Immutables;\n\n            for (i = 0, len = format.length; i < len; i++) {\n                node = sourceNode;\n                tags = format[i].tags;\n                attributes = format[i].attr;\n\n                if (immutables && tags && tags[0] == \"immutable\") {\n                    var immutable = ImmutablesNS.immutableParent(node);\n                    if (immutable && dom.attrEquals(immutable, attributes)) {\n                        return node;\n                    }\n                }\n\n                while (node && dom.isAncestorOf(editableParent, node)) {\n                    if (dom.ofType(node, tags) && dom.attrEquals(node, attributes)) {\n                        return node;\n                    }\n\n                    if (until && until(node)) {\n                        break;\n                    }\n\n                    node = node.parentNode;\n                }\n            }\n            return null;\n        },\n\n        getFormat: function(nodes) {\n            var that = this,\n                findFormat = function(node) {\n                        return that.findFormat(dom.isDataNode(node) ? node.parentNode : node);\n                    },\n                result = findFormat(nodes[0]),\n                i, len;\n\n            if (!result) {\n                return \"\";\n            }\n\n            for (i = 1, len = nodes.length; i < len; i++) {\n                if (result != findFormat(nodes[i])) {\n                    return \"\";\n                }\n            }\n\n            return result.nodeName.toLowerCase();\n        },\n\n        isFormatted: function(nodes, until) {\n            for (var i = 0, len = nodes.length; i < len; i++) {\n                if (!this.findFormat(nodes[i], until)) {\n                    return false;\n                }\n            }\n\n            return true;\n        }\n    });\n\n    var BlockFormatter = Class.extend({\n        init: function(format, values) {\n            this.format = format;\n            this.values = values;\n            this.finder = new BlockFormatFinder(format);\n        },\n\n        wrap: function(tag, attributes, nodes) {\n\n            var commonAncestor = nodes.length == 1 ? dom.blockParentOrBody(nodes[0]) : dom.commonAncestor.apply(null, nodes);\n\n            if (dom.isInline(commonAncestor)) {\n                commonAncestor = dom.blockParentOrBody(commonAncestor);\n            }\n\n            var ancestors = dom.significantChildNodes(commonAncestor),\n                position = dom.findNodeIndex(ancestors[0]),\n                wrapper = dom.create(commonAncestor.ownerDocument, tag, attributes),\n                i, ancestor;\n\n            for (i = 0; i < ancestors.length; i++) {\n                ancestor = ancestors[i];\n                if (dom.isBlock(ancestor)) {\n                    dom.attr(ancestor, attributes);\n\n                    if (wrapper.childNodes.length) {\n                        dom.insertBefore(wrapper, ancestor);\n                        wrapper = wrapper.cloneNode(false);\n                    }\n\n                    position = dom.findNodeIndex(ancestor) + 1;\n\n                    continue;\n                }\n\n                wrapper.appendChild(ancestor);\n            }\n\n            if (wrapper.firstChild) {\n                dom.insertAt(commonAncestor, wrapper, position);\n            }\n        },\n\n        apply: function(nodes) {\n            var format, values = this.values;\n\n            function attributes(format) {\n                return extend({}, format && format.attr, values);\n            }\n\n            this._handleImmutables(nodes, true);\n\n            var images = dom.filter(\"img\", nodes);\n            var imageFormat = EditorUtils.formatByName(\"img\", this.format);\n            var imageAttributes = attributes(imageFormat);\n            $.each(images, function() {\n                dom.attr(this, imageAttributes);\n            });\n\n            // only images were selected, no need to wrap\n            if (images.length == nodes.length) {\n                return;\n            }\n\n            var nonImages = dom.filter(\"img\", nodes, true);\n            var formatNodes = this.finder.findSuitable(nonImages);\n\n            if (formatNodes.length) {\n                for (var i = 0, len = formatNodes.length; i < len; i++) {\n                    format = EditorUtils.formatByName(dom.name(formatNodes[i]), this.format);\n                    dom.attr(formatNodes[i], attributes(format));\n                }\n            } else {\n                format = this.format[0];\n                this.wrap(format.tags[0], attributes(format), nonImages);\n            }\n        },\n\n        _handleImmutables: function(nodes, applyFormatting) {\n            if (!this.immutables()) {\n                return;\n            }\n            var immutableFormat = EditorUtils.formatByName(\"immutable\", this.format);\n            if (!immutableFormat) {\n                return;\n            }\n            var ImmutablesNS = Editor.Immutables;\n            var l = nodes.length - 1;\n            for (var i = l; i >= 0; i--) {\n                var immutableParent = ImmutablesNS.immutableParent(nodes[i]);\n                if (!immutableParent) {\n                    continue;\n                }\n                if (immutableParent !== nodes[i + 1]) {\n                    if (applyFormatting) {\n                        dom.attr(immutableParent, immutableFormat.attr);\n                    } else {\n                        dom.unstyle(immutableParent, immutableFormat.attr.style);\n                    }\n                }\n                nodes.splice(i, 1);\n            }\n        },\n\n        immutables: function() {\n            return this.editor && this.editor.options.immutables;\n        },\n\n        remove: function(nodes) {\n            var i, l, formatNode, namedFormat, name;\n\n            this._handleImmutables(nodes, false);\n\n            for (i = 0, l = nodes.length; i < l; i++) {\n                formatNode = this.finder.findFormat(nodes[i]);\n                if (formatNode) {\n                    name = dom.name(formatNode);\n                    namedFormat = EditorUtils.formatByName(name, this.format);\n                    if (namedFormat.attr.style) {\n                        dom.unstyle(formatNode, namedFormat.attr.style);\n                    }\n                    if (namedFormat.attr.className) {\n                        dom.removeClass(formatNode, namedFormat.attr.className);\n                    }\n                }\n            }\n        },\n\n        toggle: function(range) {\n            var that = this,\n                nodes = dom.filterBy(RangeUtils.nodes(range), dom.htmlIndentSpace, true);\n\n            if (that.finder.isFormatted(nodes)) {\n                that.remove(nodes);\n            } else {\n                that.apply(nodes);\n            }\n        }\n    });\n\n    var GreedyBlockFormatter = Class.extend({\n        init: function(format, values) {\n            var that = this;\n            that.format = format;\n            that.values = values;\n            that.finder = new BlockFormatFinder(format);\n        },\n\n        apply: function(nodes) {\n            var format = this.format;\n            var blocks = dom.blockParents(nodes);\n            var formatTag = format[0].tags[0];\n            var i, len, list, formatter, range;\n            var element;\n            var tagName;\n            var block;\n            var immutalbeParent;\n\n            if (blocks.length) {\n                for (i = 0, len = blocks.length; i < len; i++) {\n                    block = blocks[i];\n                    immutalbeParent = this.immutables() && Editor.Immutables.immutableParent(block);\n\n                    if (!immutalbeParent) {\n                        tagName = dom.name(block);\n\n                        if (tagName == \"li\") {\n                            list = block.parentNode;\n                            formatter = new Editor.ListFormatter(list.nodeName.toLowerCase(), formatTag);\n                            range = this.editor.createRange();\n                            range.selectNode(blocks[i]);\n                            formatter.toggle(range);\n                        } else if (formatTag && (tagName == \"td\" || block.attributes.contentEditable)) {\n                            new BlockFormatter(format, this.values).apply(block.childNodes);\n                        } else {\n                            element = dom.changeTag(block, formatTag);\n                            dom.attr(element, format[0].attr);\n                        }\n                    }\n                }\n            } else {\n                var blockFormatter = new BlockFormatter(format, this.values);\n                blockFormatter.editor = this.editor;\n                blockFormatter.apply(nodes);\n            }\n        },\n\n        toggle: function(range) {\n            var nodes = RangeUtils.textNodes(range);\n            if (!nodes.length) {\n                range.selectNodeContents(range.commonAncestorContainer);\n                nodes = RangeUtils.textNodes(range);\n                if (!nodes.length) {\n                    nodes = dom.significantChildNodes(range.commonAncestorContainer);\n                }\n            }\n\n            this.apply(nodes);\n        },\n\n        immutables: function() {\n            return this.editor && this.editor.options.immutables;\n        }\n    });\n\n    var BlockFormatTool = FormatTool.extend({ init: function(options) {\n            FormatTool.fn.init.call(this, extend(options, {\n                finder: new BlockFormatFinder(options.format),\n                formatter: function() {\n                    return new BlockFormatter(options.format);\n                }\n            }));\n        }\n    });\n\n    extend(Editor, {\n        BlockFormatFinder: BlockFormatFinder,\n        BlockFormatter: BlockFormatter,\n        GreedyBlockFormatter: GreedyBlockFormatter,\n        BlockFormatTool: BlockFormatTool\n    });\n\n    var listElements = [\"ul\",\"ol\",\"li\"];\n\n    registerFormat(\"justifyLeft\", [\n        { tags: dom.nonListBlockElements, attr: { style: { textAlign: \"left\" } } },\n        { tags: [\"img\"], attr: { style: { \"float\": \"left\", display: \"\", marginLeft: \"\", marginRight: \"\" } } },\n        { tags: [\"immutable\"], attr: { style: { \"float\": \"left\", display: \"\", marginLeft: \"\", marginRight: \"\" } } },\n        { tags: listElements, attr: { style: { textAlign: \"left\", listStylePosition: \"\" } } }\n    ]);\n    registerTool(\"justifyLeft\", new BlockFormatTool({\n        format: formats.justifyLeft,\n        template: new ToolTemplate({\n            template: EditorUtils.buttonTemplate,\n            title: \"Justify Left\"\n        })\n    }));\n\n    registerFormat(\"justifyCenter\", [\n        { tags: dom.nonListBlockElements, attr: { style: { textAlign: \"center\" } } },\n        { tags: [\"img\"], attr: { style: { display: \"block\", marginLeft: \"auto\", marginRight: \"auto\", \"float\": \"\" } } },\n        { tags: [\"immutable\"], attr: { style: { display: \"block\", marginLeft: \"auto\", marginRight: \"auto\", \"float\": \"\" } } },\n        { tags: listElements, attr: { style: { textAlign: \"center\", listStylePosition: \"inside\" } } }\n    ]);\n    registerTool(\"justifyCenter\", new BlockFormatTool({\n        format: formats.justifyCenter,\n        template: new ToolTemplate({\n            template: EditorUtils.buttonTemplate,\n            title: \"Justify Center\"\n        })\n    }));\n\n    registerFormat(\"justifyRight\", [\n        { tags: dom.nonListBlockElements, attr: { style: { textAlign: \"right\" } } },\n        { tags: [\"img\"], attr: { style: { \"float\": \"right\", display: \"\", marginLeft: \"\", marginRight: \"\" } } },\n        { tags: [\"immutable\"], attr: { style: { \"float\": \"right\", display: \"\", marginLeft: \"\", marginRight: \"\" } } },\n        { tags: listElements, attr: { style: { textAlign: \"right\", listStylePosition: \"inside\" } } }\n    ]);\n    registerTool(\"justifyRight\", new BlockFormatTool({\n        format: formats.justifyRight,\n        template: new ToolTemplate({\n            template: EditorUtils.buttonTemplate,\n            title: \"Justify Right\"\n        })\n    }));\n\n    registerFormat(\"justifyFull\", [\n        { tags: dom.nonListBlockElements, attr: { style: { textAlign: \"justify\" } } },\n        { tags: [\"img\"], attr: { style: { display: \"block\", marginLeft: \"auto\", marginRight: \"auto\", \"float\": \"\" } } },\n        { tags: [\"immutable\"], attr: { style: { display: \"block\", marginLeft: \"auto\", marginRight: \"auto\", \"float\": \"\" } } },\n        { tags: listElements, attr: { style: { textAlign: \"justify\", listStylePosition: \"\" } } }\n    ]);\n    registerTool(\"justifyFull\", new BlockFormatTool({\n        format: formats.justifyFull,\n        template: new ToolTemplate({\n            template: EditorUtils.buttonTemplate,\n            title: \"Justify Full\"\n        })\n    }));\n\n    })(window.kendo.jQuery);\n\n    (function($) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        Class = kendo.Class,\n        extend = $.extend,\n        Editor = kendo.ui.editor,\n        dom = Editor.Dom,\n        RangeUtils = Editor.RangeUtils,\n        EditorUtils = Editor.EditorUtils,\n        Command = Editor.Command,\n        ToolTemplate = Editor.ToolTemplate,\n        FormatTool = Editor.FormatTool,\n        BlockFormatFinder = Editor.BlockFormatFinder,\n        textNodes = RangeUtils.textNodes,\n        registerTool = Editor.EditorUtils.registerTool;\n\n    var ListFormatFinder = BlockFormatFinder.extend({\n        init: function(options) {\n            this.tag = options.tag;\n            this.attr = options.attr;\n            this.altAttr = options.altAttr;\n\n            var tags = this.tags = [this.tag == 'ul' ? 'ol' : 'ul', this.tag];\n            var format = [{ tags: tags, attr: this.attr }];\n\n            if (this.altAttr) {\n                format.push({\n                    tags: tags,\n                    attr: this.altAttr\n                });\n            }\n\n            BlockFormatFinder.fn.init.call(this, format);\n        },\n\n        matchesType: function(node) {\n            return dom.attrEquals(node, this.attr) || (this.altAttr && dom.attrEquals(node, this.altAttr));\n        },\n\n        isList: function(node) {\n            return dom.list(node);\n        },\n\n        isFormatted: function(nodes) {\n            var formatNodes = [];\n            var formatNode, i;\n\n            for (i = 0; i < nodes.length; i++) {\n                formatNode = this.findFormat(nodes[i], this.isList);\n\n                if (formatNode && dom.name(formatNode) == this.tag && this.matchesType(formatNode)) {\n                    formatNodes.push(formatNode);\n                }\n            }\n\n            if (formatNodes.length < 1) {\n                return false;\n            }\n\n            if (formatNodes.length != nodes.length) {\n                return false;\n            }\n\n            // check if sequential lists are selected\n            for (i = 0; i < formatNodes.length; i++) {\n                if (formatNodes[i].parentNode != formatNode.parentNode) {\n                    break;\n                }\n\n                if (formatNodes[i] != formatNode) {\n                    return false;\n                }\n            }\n\n            return true;\n        },\n\n        findSuitable: function(nodes) {\n            var candidate = this.findFormat(nodes[0], this.isList);\n\n            if (candidate && dom.name(candidate) == this.tag) {\n                return candidate;\n            }\n\n            return null;\n        }\n\n    });\n\n    var ListFormatter = Class.extend({\n        init: function(options, unwrapTag) {\n            var that = this;\n            options = $.isPlainObject(options) ? options : { tag: options, attr: null };\n            that.tag = options.tag;\n            that.attr = options.attr;\n            that.finder = new ListFormatFinder(options);\n            that.unwrapTag = unwrapTag;\n        },\n\n        isList: function(node) {\n            return dom.list(node);\n        },\n\n        immutables: function() {\n            return this.editor && !!this.editor.options.immutables;\n        },\n\n        wrap: function(list, nodes) {\n            var li = dom.create(list.ownerDocument, \"li\"),\n                i, node,\n                isImmutable = this.immutables() ? Editor.Immutables.immutable : $.noop;\n\n            for (i = 0; i < nodes.length; i++) {\n                node = nodes[i];\n\n                if (dom.is(node, 'li')) {\n                    list.appendChild(node);\n                    continue;\n                }\n\n                if (this.isList(node)) {\n                    while (node.firstChild) {\n                        list.appendChild(node.firstChild);\n                    }\n                    continue;\n                }\n\n                if (dom.is(node, \"td\")) {\n                    while (node.firstChild) {\n                        li.appendChild(node.firstChild);\n                    }\n                    list.appendChild(li);\n                    node.appendChild(list);\n                    list = list.cloneNode(false);\n                    li = li.cloneNode(false);\n                    continue;\n                }\n\n                li.appendChild(node);\n\n                if (dom.isBlock(node)) {\n                    list.appendChild(li);\n                    if (!isImmutable(node)) {\n                        dom.unwrap(node);\n                    }\n                    li = li.cloneNode(false);\n                }\n            }\n\n            if (li.firstChild) {\n                list.appendChild(li);\n            }\n        },\n\n        containsAny: function(parent, nodes) {\n            for (var i = 0; i < nodes.length; i++) {\n                if (dom.isAncestorOrSelf(parent, nodes[i])) {\n                    return true;\n                }\n            }\n\n            return false;\n        },\n\n        suitable: function(candidate, nodes) {\n            if (candidate.className == \"k-marker\") {\n                var sibling = candidate.nextSibling;\n\n                if (sibling && dom.isBlock(sibling)) {\n                    return false;\n                }\n\n                sibling = candidate.previousSibling;\n\n                if (sibling && dom.isBlock(sibling)) {\n                    return false;\n                }\n            }\n\n            return this.containsAny(candidate, nodes) || dom.isInline(candidate) || candidate.nodeType == 3;\n        },\n\n        _parentLists: function(node) {\n            var editable = dom.closestEditable(node);\n\n            return $(node).parentsUntil(editable, \"ul,ol\");\n        },\n\n        split: function(range) {\n            var nodes = textNodes(range);\n            var start, end, parents;\n\n            if (nodes.length) {\n                start = dom.parentOfType(nodes[0], ['li']);\n                end = dom.parentOfType(nodes[nodes.length - 1], ['li']);\n                range.setStartBefore(start);\n                range.setEndAfter(end);\n\n                for (var i = 0, l = nodes.length; i < l; i++) {\n                    var formatNode = this.finder.findFormat(nodes[i]);\n                    if (formatNode) {\n                        parents = this._parentLists(formatNode);\n                        if (parents.length) {\n                            RangeUtils.split(range, parents.last()[0], true);\n                        } else {\n                            RangeUtils.split(range, formatNode, true);\n                        }\n                    }\n                }\n            }\n        },\n\n        merge: function(tag, formatNode) {\n            var prev = formatNode.previousSibling, next;\n\n            while (prev && (prev.className == \"k-marker\" || (prev.nodeType == 3 && dom.isWhitespace(prev)))) {\n                prev = prev.previousSibling;\n            }\n\n            // merge with previous list\n            if (prev && dom.name(prev) == tag && this.finder.matchesType(prev)) {\n                while (formatNode.firstChild) {\n                    prev.appendChild(formatNode.firstChild);\n                }\n                dom.remove(formatNode);\n                formatNode = prev;\n            }\n\n            next = formatNode.nextSibling;\n            while (next && (next.className == \"k-marker\" || (next.nodeType == 3 && dom.isWhitespace(next)))) {\n                next = next.nextSibling;\n            }\n\n            // merge with next list\n            if (next && dom.name(next) == tag && this.finder.matchesType(next)) {\n                while (formatNode.lastChild) {\n                    next.insertBefore(formatNode.lastChild, next.firstChild);\n                }\n                dom.remove(formatNode);\n            }\n        },\n\n        breakable: function(node) {\n            return (\n                node != node.ownerDocument.body &&\n                !/table|tbody|thead|tr|td/.test(dom.name(node)) &&\n                !node.attributes.contentEditable\n            );\n        },\n\n        findSuitableNode: function(nodes) {\n            var that = this,\n                finder = that.finder,\n                tag = that.tag,\n                formatNode;\n\n            formatNode = finder.findSuitable(nodes);\n\n            if (!formatNode) {\n                // Find the opposite tag\n                finder = new ListFormatFinder({ tag: tag == \"ul\" ? \"ol\" : \"ul\" });\n                formatNode = finder.findSuitable(nodes);\n            }\n\n            if (!formatNode) {\n                // Find the same tag\n                finder = new ListFormatFinder({ tag: tag });\n                formatNode = finder.findSuitable(nodes);\n                formatNode = formatNode && that.finder.matchesType(formatNode) ? null : formatNode;\n            }\n\n\n            return formatNode;\n        },\n\n        applyOnSection: function(section, nodes) {\n            var tag = this.tag;\n            var attr = this.attr;\n            var commonAncestor = dom.closestSplittableParent(nodes);\n\n            var ancestors = [];\n            var formatNode = this.findSuitableNode(nodes);\n\n            var childNodes;\n\n            if (/table|tbody|thead/.test(dom.name(commonAncestor))) {\n                childNodes = $.map(nodes, function(node) {\n                    return dom.parentOfType(node, [\"td\"]);\n                });\n            } else {\n                childNodes = dom.significantChildNodes(commonAncestor);\n\n                if ($.grep(childNodes, dom.isBlock).length) {\n                    childNodes = $.grep(childNodes, (function(node) {\n                        return this.containsAny(node, nodes);\n                    }).bind(this));\n                }\n\n                if (!childNodes.length) {\n                    childNodes = nodes;\n                }\n            }\n\n            function pushAncestor() {\n                ancestors.push(this);\n            }\n\n            for (var i = 0; i < childNodes.length; i++) {\n                var child = childNodes[i];\n                var suitable = (!formatNode || !dom.isAncestorOrSelf(formatNode, child)) && this.suitable(child, nodes);\n\n                if (!suitable) {\n                    continue;\n                }\n\n                if (formatNode && this.isList(child)) {\n                    // merging lists\n                    $.each(child.children, pushAncestor);\n                    dom.remove(child);\n                } else {\n                    ancestors.push(child);\n                }\n            }\n\n            if (ancestors.length == childNodes.length && this.breakable(commonAncestor)) {\n                ancestors = [commonAncestor];\n            }\n\n            if (!formatNode) {\n                formatNode = dom.create(commonAncestor.ownerDocument, tag, attr);\n                if (dom.isBlock(ancestors[0])) {\n                    dom.mergeAttributes(ancestors[0], formatNode);\n                }\n                dom.insertBefore(formatNode, ancestors[0]);\n            }\n\n            this.wrap(formatNode, ancestors);\n\n            while (dom.isBom(formatNode.nextSibling)) {\n                dom.remove(formatNode.nextSibling);\n            }\n\n            if (!this.finder.matchesType(formatNode)) {\n                formatNode.removeAttribute(\"type\");\n                formatNode.style.listStyleType = \"\";\n                dom.mergeAttributes(dom.create(commonAncestor.ownerDocument, tag, attr), formatNode, true);\n            }\n\n            if (formatNode && formatNode.getAttribute(\"type\") === \"\") {\n                formatNode.removeAttribute(\"type\");\n            }\n\n            if (!dom.is(formatNode, tag)) {\n                dom.changeTag(formatNode, tag);\n            }\n\n            this.merge(tag, formatNode);\n        },\n\n        apply: function(nodes) {\n            var i = 0,\n                sections = [],\n                lastSection,\n                lastNodes,\n                section,\n                node,\n                l = nodes.length,\n                immutableParent = this.immutables() ? Editor.Immutables.immutableParent : $.noop;\n\n            function addLastSection() {\n                if (lastSection) {\n                    sections.push({\n                        section: lastSection,\n                        nodes: lastNodes\n                    });\n                }\n            }\n\n            // split nodes into sections that need to be different lists\n            for (i = 0; i < l; i++) {\n                node = immutableParent(nodes[i]) || nodes[i];\n                section = dom.closestEditable(node, [\"td\",\"th\",\"body\"]);\n                if (!lastSection || section != lastSection) {\n                    addLastSection();\n                    lastNodes = [node];\n                    lastSection = section;\n                } else {\n                    lastNodes.push(node);\n                }\n            }\n\n            addLastSection();\n\n            for (i = 0; i < sections.length; i++) {\n                this.applyOnSection(sections[i].section, sections[i].nodes);\n            }\n        },\n\n        unwrap: function(ul) {\n            var fragment = ul.ownerDocument.createDocumentFragment(),\n                unwrapTag = this.unwrapTag,\n                parents,\n                li,\n                p,\n                child;\n\n            for (li = ul.firstChild; li; li = li.nextSibling) {\n                p = dom.create(ul.ownerDocument, unwrapTag || 'p');\n\n                while (li.firstChild) {\n                    child = li.firstChild;\n\n                    if (dom.isBlock(child)) {\n\n                        if (p.firstChild) {\n                            fragment.appendChild(p);\n                            p = dom.create(ul.ownerDocument, unwrapTag || 'p');\n                        }\n\n                        fragment.appendChild(child);\n                    } else {\n                        p.appendChild(child);\n                    }\n                }\n\n                if (p.firstChild) {\n                    fragment.appendChild(p);\n                }\n            }\n\n            parents = this._parentLists(ul);\n\n            if (parents[0]) {\n                dom.insertAfter(fragment, parents.last()[0]);\n                parents.last().remove();\n            } else {\n                dom.insertAfter(fragment, ul);\n            }\n\n            dom.remove(ul);\n        },\n\n        remove: function(nodes) {\n            var formatNode;\n            for (var i = 0, l = nodes.length; i < l; i++) {\n                formatNode = this.finder.findFormat(nodes[i]);\n\n                if (formatNode) {\n                    this.unwrap(formatNode);\n                }\n            }\n        },\n\n        toggle: function(range) {\n            var that = this,\n                nodes = textNodes(range),\n                ancestor = range.commonAncestorContainer;\n\n            if (!nodes.length) {\n                range.selectNodeContents(ancestor);\n                nodes = textNodes(range);\n                if (!nodes.length) {\n                    var text = ancestor.ownerDocument.createTextNode(\"\");\n                    range.startContainer.appendChild(text);\n                    nodes = [text];\n                    range.selectNode(text.parentNode);\n                }\n            }\n            nodes = dom.filterBy(nodes, dom.htmlIndentSpace, true);\n            if (that.finder.isFormatted(nodes)) {\n                that.split(range);\n                that.remove(nodes);\n            } else {\n                that.apply(nodes);\n            }\n        }\n\n    });\n\n    var ListCommand = Command.extend({\n        init: function(options) {\n            options.formatter = new ListFormatter({ tag: options.tag, attr: options.attr });\n            Command.fn.init.call(this, options);\n        }\n    });\n\n    var ListTool = FormatTool.extend({\n        init: function(options) {\n            this.options = options;\n\n            FormatTool.fn.init.call(this, extend(options, {\n                finder: new ListFormatFinder(options)\n            }));\n        },\n\n        command: function(commandArguments) {\n            return new ListCommand(extend(commandArguments, { tag: this.options.tag, attr: this.options.attr }));\n        }\n    });\n\n    extend(Editor, {\n        ListFormatFinder: ListFormatFinder,\n        ListFormatter: ListFormatter,\n        ListCommand: ListCommand,\n        ListTool: ListTool\n    });\n\n    registerTool(\"insertUnorderedList\", new ListTool({ tag: 'ul', attr: { style: { listStyleType: \"\" }, type: \"\" }, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Insert unordered list\" }) }));\n    registerTool(\"insertOrderedList\", new ListTool({ tag: 'ol', attr: { style: { listStyleType: \"\" }, type: \"\" }, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Insert ordered list\" }) }));\n    registerTool(\"insertUpperRomanList\", new ListTool({ tag: 'ol', attr: { style: { listStyleType: \"upper-roman\" } }, altAttr: { type: \"I\" }, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Insert upper roman list\" }) }));\n    registerTool(\"insertLowerRomanList\", new ListTool({ tag: 'ol', attr: { style: { listStyleType: \"lower-roman\" } }, altAttr: { type: \"i\" }, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Insert lower roman list\" }) }));\n\n    })(window.kendo.jQuery);\n\n    (function($) {\n\n    var kendo = window.kendo,\n        Editor = kendo.ui.editor,\n        Tool = Editor.Tool,\n        ToolTemplate = Editor.ToolTemplate,\n        DelayedExecutionTool = Editor.DelayedExecutionTool,\n        Command = Editor.Command,\n        dom = Editor.Dom,\n        EditorUtils = Editor.EditorUtils,\n        RangeUtils = Editor.RangeUtils,\n        registerTool = EditorUtils.registerTool;\n\n\n    var FormattingTool = DelayedExecutionTool.extend({\n        init: function(options) {\n            var that = this;\n            Tool.fn.init.call(that, kendo.deepExtend({}, that.options, options));\n\n            that.type = \"kendoSelectBox\";\n\n            that.finder = {\n                getFormat: function() { return \"\"; }\n            };\n        },\n\n        options: {\n            items: [\n                { text: \"Paragraph\", value: \"p\" },\n                { text: \"Quotation\", value: \"blockquote\" },\n                { text: \"Heading 1\", value: \"h1\" },\n                { text: \"Heading 2\", value: \"h2\" },\n                { text: \"Heading 3\", value: \"h3\" },\n                { text: \"Heading 4\", value: \"h4\" },\n                { text: \"Heading 5\", value: \"h5\" },\n                { text: \"Heading 6\", value: \"h6\" }\n            ],\n            width: 110\n        },\n\n        toFormattingItem: function(item) {\n            var value = item.value;\n\n            if (!value) {\n                return item;\n            }\n\n            if (item.tag || item.className) {\n                return item;\n            }\n\n            var dot = value.indexOf(\".\");\n\n            if (dot === 0) {\n                item.className = value.substring(1);\n            } else if (dot == -1) {\n                item.tag = value;\n            } else {\n                item.tag = value.substring(0, dot);\n                item.className = value.substring(dot + 1);\n            }\n\n            return item;\n        },\n\n        command: function(args) {\n            var that = this;\n            var item = args.value;\n\n            item = this.toFormattingItem(item);\n\n            return new Editor.FormatCommand({\n                range: args.range,\n                formatter: function() {\n                    var formatter,\n                        tags = (item.tag || item.context || \"span\").split(\",\"),\n                        format = [{\n                            tags: tags,\n                            attr: { className: item.className || \"\" }\n                        }];\n\n                    if ($.inArray(tags[0], dom.inlineElements) >= 0) {\n                        formatter = new Editor.GreedyInlineFormatter(format);\n                    } else {\n                        formatter = new Editor.GreedyBlockFormatter(format);\n                    }\n\n                    formatter.editor = that.editor;\n                    return formatter;\n                }\n            });\n        },\n\n        initialize: function(ui, initOptions) {\n            var editor = initOptions.editor;\n            var options = this.options;\n            var toolName = options.name;\n            var that = this;\n            var selectBox;\n\n            that.editor = editor;\n\n            ui.width(options.width);\n\n            selectBox = ui.kendoSelectBox({\n                autoWidth: true,\n                dataTextField: \"text\",\n                dataValueField: \"value\",\n                dataSource: options.items || editor.options[toolName],\n                title: editor.options.messages[toolName],\n                autoSize: true,\n                change: function() {\n                    var dataItem = this.dataItem();\n\n                    if (dataItem) {\n                        Tool.exec(editor, toolName, dataItem.toJSON());\n                    }\n                },\n                dataBound: function() {\n                    var i, items = this.dataSource.data();\n\n                    for (i = 0; i < items.length; i++) {\n                        items[i] = that.toFormattingItem(items[i]);\n                    }\n                },\n                highlightFirst: false,\n                template: kendo.template(\n                    function (data) { return (\"<span unselectable=\\\"on\\\" style=\\\"display:block;\" + (data.style || \"\") + \"#\\\">\" + (kendo.htmlEncode(data.text)) + \"</span>\"); }\n                )\n            }).data(\"kendoSelectBox\");\n\n            ui.attr(\"title\", initOptions.title);\n            selectBox.wrapper.attr(\"title\", initOptions.title);\n\n            ui.addClass(\"k-decorated\")\n                .closest(\".k-dropdownlist, .k-combobox\")\n                    .removeClass(\"k-\" + toolName)\n                    .find(\"*\").addBack()\n                        .attr(\"unselectable\", \"on\");\n        },\n\n        getFormattingValue: function(items, nodes) {\n            for (var i = 0; i < items.length; i++) {\n                var item = items[i];\n                var tag = item.tag || item.context || \"\";\n                var className = item.className ? \".\" + item.className : \"\";\n                var selector = tag + className;\n\n                var element = $(nodes[0]).closest(selector)[0];\n\n                if (!element) {\n                    continue;\n                }\n\n                if (nodes.length == 1) {\n                    return item.value;\n                }\n\n                for (var n = 1; n < nodes.length; n++) {\n                    if (!$(nodes[n]).closest(selector)[0]) {\n                        break;\n                    } else if (n == nodes.length - 1) {\n                        return item.value;\n                    }\n                }\n            }\n\n            return \"\";\n        },\n\n        update: function(ui, nodes) {\n            var selectBox = $(ui).data(this.type);\n\n            // necessary until formatBlock is deleted\n            if (!selectBox) {\n                return;\n            }\n\n            var dataSource = selectBox.dataSource,\n                items = dataSource.data(),\n                i, context,\n                ancestor = dom.commonAncestor.apply(null, nodes);\n\n            if (ancestor != dom.closestEditable(ancestor) && this._ancestor == ancestor) {\n                return;\n            } else {\n                this._ancestor = ancestor;\n            }\n\n            for (i = 0; i < items.length; i++) {\n                context = items[i].context;\n\n                items[i].visible = !context || !!$(ancestor).closest(context).length;\n            }\n\n            dataSource.filter([{ field: \"visible\", operator: \"eq\", value: true }]);\n\n            DelayedExecutionTool.fn.update.call(this, ui, nodes);\n\n            selectBox.value(this.getFormattingValue(dataSource.view(), nodes));\n\n            selectBox.wrapper.toggleClass(\"k-disabled\", !dataSource.view().length);\n        },\n\n        destroy: function() {\n            this._ancestor = null;\n        }\n    });\n\n    var CleanFormatCommand = Command.extend({\n        exec: function() {\n            var range = this.lockRange(true);\n            this.tagsToClean = this.options.remove || \"strong,em,span,sup,sub,del,b,i,u,font\".split(\",\");\n\n            RangeUtils.wrapSelectedElements(range);\n\n            var nodes = RangeUtils.mapAll(range, function(node) {\n                return node;\n            });\n\n\n            for (var c = nodes.length - 1; c >= 0; c--) {\n                var node = nodes[c];\n                if (!this.immutableParent(node)) {\n                    this.clean(node);\n                }\n            }\n\n            this.releaseRange(range);\n        },\n\n        clean: function(node) {\n            if (!node || dom.isMarker(node)) {\n                return;\n            }\n\n            var name = dom.name(node);\n\n            if (name == \"ul\" || name == \"ol\") {\n                var listFormatter = new Editor.ListFormatter(name);\n                var prev = node.previousSibling;\n                var next = node.nextSibling;\n\n                listFormatter.unwrap(node);\n\n                // clean contents\n                for (; prev && prev != next; prev = prev.nextSibling) {\n                    this.clean(prev);\n                }\n            } else if (name == \"blockquote\") {\n                dom.changeTag(node, \"p\");\n            } else if (node.nodeType == 1 && !dom.insignificant(node)) {\n                for (var i = node.childNodes.length - 1; i >= 0; i--) {\n                    this.clean(node.childNodes[i]);\n                }\n\n                node.removeAttribute(\"style\");\n                node.removeAttribute(\"class\");\n            } else {\n                unwrapListItem(node);\n            }\n\n            if ($.inArray(name, this.tagsToClean) > -1) {\n                dom.unwrap(node);\n            }\n        },\n\n        immutableParent: function(node) {\n            return this.immutables() && Editor.Immutables.immutableParent(node);\n        }\n    });\n\n\n    function unwrapListItem(node) {\n        var li = dom.closestEditableOfType(node, [\"li\"]);\n        if (li) {\n            var listFormatter = new Editor.ListFormatter(dom.name(li.parentNode));\n            var range = kendo.ui.editor.W3CRange.fromNode(node);\n            range.selectNode(li);\n            listFormatter.toggle(range);\n        }\n    }\n\n    $.extend(Editor, {\n        FormattingTool: FormattingTool,\n        CleanFormatCommand: CleanFormatCommand\n    });\n\n    registerTool(\"formatting\", new FormattingTool({ template: new ToolTemplate({ template: EditorUtils.dropDownListTemplate, title: \"Format\" }) }));\n    registerTool(\"cleanFormatting\", new Tool({ command: CleanFormatCommand, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Clean formatting\" }) }));\n\n    })(window.kendo.jQuery);\n\n    (function($, undefined$1) {\n\n    var kendo = window.kendo,\n        extend = $.extend,\n        encode = kendo.htmlEncode,\n        Editor = kendo.ui.editor,\n        EditorUtils = Editor.EditorUtils,\n        dom = Editor.Dom,\n        registerTool = EditorUtils.registerTool,\n        ToolTemplate = Editor.ToolTemplate,\n        RangeUtils = Editor.RangeUtils,\n        Command = Editor.Command,\n        keys = kendo.keys,\n        KEDITORIMAGEURL = \"#k-editor-image-url\",\n        KEDITORIMAGETITLE = \"#k-editor-image-title\",\n        KEDITORIMAGEWIDTH = \"#k-editor-image-width\",\n        KEDITORIMAGEHEIGHT = \"#k-editor-image-height\";\n\n    var ImageCommand = Command.extend({\n        init: function(options) {\n            var that = this;\n            Command.fn.init.call(that, options);\n\n            that.async = true;\n            that.attributes = {};\n        },\n\n        insertImage: function(img, range) {\n            var attributes = this.attributes;\n            var doc = RangeUtils.documentFromRange(range);\n\n            if (attributes.src && attributes.src != \"http://\") {\n\n                var removeIEAttributes = function() {\n                    setTimeout(function() {\n                        if (!attributes.width) {\n                            img.removeAttribute(\"width\");\n                        }\n\n                        if (!attributes.height) {\n                            img.removeAttribute(\"height\");\n                        }\n\n                        img.removeAttribute(\"complete\");\n                    });\n                };\n\n                if (!img) {\n                    img = dom.create(doc, \"img\", attributes);\n                    img.onload = img.onerror = removeIEAttributes;\n\n                    range.deleteContents();\n                    range.insertNode(img);\n\n                    if (!img.nextSibling) {\n                        dom.insertAfter(doc.createTextNode(\"\\ufeff\"), img);\n                    }\n\n                    removeIEAttributes();\n\n                    range.setStartAfter(img);\n                    range.setEndAfter(img);\n                    RangeUtils.selectRange(range);\n                    return true;\n                } else {\n                    img.onload = img.onerror = removeIEAttributes;\n                    dom.attr(img, attributes);\n                    removeIEAttributes();\n                }\n            }\n\n            return false;\n        },\n\n        _dialogTemplate: function(showBrowser) {\n            return kendo.template(function (ref) {\n                    var messages = ref.messages;\n\n                    return '<div class=\"k-editor-dialog k-popup-edit-form\">' +\n                    '<div class=\"k-edit-form-container\">' +\n                        '<div class=\"k-edit-form-content\">' +\n                            \"\" + (showBrowser ? '<div class=\"k-filebrowser k-imagebrowser\"></div>' : '') +\n                            '<div class=\"k-edit-label\">' +\n                                \"<label for=\\\"k-editor-image-url\\\">\" + (encode( messages.imageWebAddress )) + \"</label>\" +\n                            '</div>' +\n                            '<div class=\"k-edit-field\">' +\n                                '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input type=\"text\" class=\"k-input-inner\" id=\"k-editor-image-url\"></span>' +\n                            '</div>' +\n                            '<div class=\"k-edit-label\">' +\n                                \"<label for=\\\"k-editor-image-title\\\">\" + (encode( messages.imageAltText )) + \"</label>\" +\n                            '</div>' +\n                            '<div class=\"k-edit-field\">' +\n                                '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input type=\"text\" class=\"k-input-inner\" id=\"k-editor-image-title\"></span>' +\n                            '</div>' +\n                            '<div class=\"k-edit-label\">' +\n                                \"<label for=\\\"k-editor-image-width\\\">\" + (encode( messages.imageWidth )) + \"</label>\" +\n                            '</div>' +\n                            '<div class=\"k-edit-field\">' +\n                                '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input type=\"text\" class=\"k-input-inner\" id=\"k-editor-image-width\"></span>' +\n                            '</div>' +\n                            '<div class=\"k-edit-label\">' +\n                                \"<label for=\\\"k-editor-image-height\\\">\" + (encode( messages.imageHeight )) + \"</label>\" +\n                            '</div>' +\n                            '<div class=\"k-edit-field\">' +\n                                '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input type=\"text\" class=\"k-input-inner\" id=\"k-editor-image-height\"></span>' +\n                            '</div>' +\n                        '</div>' +\n                        '<div class=\"k-edit-buttons\">' +\n                            \"<button class=\\\"k-dialog-insert k-button k-button-md k-rounded-md k-button-solid k-button-solid-primary\\\"><span class=\\\"k-button-text\\\">\" + (encode(messages.dialogInsert)) + \"</span></button>\" +\n                            \"<button class=\\\"k-dialog-close k-button k-button-md k-rounded-md k-button-solid k-button-solid-base\\\"><span class=\\\"k-button-text\\\">\" + (encode(messages.dialogCancel)) + \"</span></button>\" +\n                        '</div>' +\n                    '</div>' +\n                '</div>';\n            }\n            )({\n                messages: this.editor.options.messages,\n                showBrowser: showBrowser\n            });\n        },\n\n        redo: function() {\n            var that = this,\n                range = that.lockRange();\n\n            if (!that.insertImage(RangeUtils.image(range), range)) {\n                that.releaseRange(range);\n            }\n        },\n\n        exec: function() {\n            var that = this,\n                range = that.lockRange(),\n                applied = false,\n                img = RangeUtils.image(range),\n                imageWidth = img && img.getAttribute(\"width\") || \"\",\n                imageHeight = img && img.getAttribute(\"height\") || \"\",\n                dialog,\n                isIE = kendo.support.browser.msie,\n                options = that.editor.options,\n                messages = options.messages,\n                imageBrowser = options.imageBrowser,\n                showBrowser = !!(kendo.ui.ImageBrowser && imageBrowser && imageBrowser.transport && imageBrowser.transport.read !== undefined$1),\n                dialogOptions = {\n                    title: messages.insertImage,\n                    visible: false,\n                    resizable: showBrowser\n                };\n\n            this.expandImmutablesIn(range);\n\n            function apply(e) {\n                var element = dialog.element,\n                    w = parseInt(element.find(KEDITORIMAGEWIDTH).val(), 10),\n                    h = parseInt(element.find(KEDITORIMAGEHEIGHT).val(), 10);\n\n                that.attributes = {\n                    src: element.find(KEDITORIMAGEURL).val().replace(/ /g, \"%20\"),\n                    alt: element.find(KEDITORIMAGETITLE).val()\n                };\n\n                that.attributes.width = null;\n                that.attributes.height = null;\n\n                if (!isNaN(w) && w > 0) {\n                    that.attributes.width = w;\n                }\n\n                if (!isNaN(h) && h > 0) {\n                    that.attributes.height = h;\n                }\n\n                applied = that.insertImage(img, range);\n\n                close(e);\n\n                if (that.change) {\n                    that.change();\n                }\n            }\n\n            function close(e) {\n                e.preventDefault();\n                dialog.destroy();\n\n                dom.windowFromDocument(RangeUtils.documentFromRange(range)).focus();\n                if (!applied) {\n                    that.releaseRange(range);\n                }\n            }\n\n            function keyDown(e) {\n                if (e.keyCode == keys.ENTER) {\n                    apply(e);\n                } else if (e.keyCode == keys.ESC) {\n                    close(e);\n                }\n            }\n\n            dialogOptions.close = close;\n\n            if (showBrowser) {\n                dialogOptions.width = 750;\n            }\n\n            dialog = this.createDialog(that._dialogTemplate(showBrowser), dialogOptions)\n                .toggleClass(\"k-filebrowser-dialog\", showBrowser)\n                .find(\".k-dialog-insert\").on(\"click\", apply).end()\n                .find(\".k-dialog-close\").on(\"click\", close).end()\n                .find(\".k-edit-field input\").on(\"keydown\", keyDown).end()\n                // IE < 8 returns absolute url if getAttribute is not used\n                .find(KEDITORIMAGEURL).val(img ? img.getAttribute(\"src\", 2) : \"http://\").end()\n                .find(KEDITORIMAGETITLE).val(img ? img.alt : \"\").end()\n                .find(KEDITORIMAGEWIDTH).val(imageWidth).end()\n                .find(KEDITORIMAGEHEIGHT).val(imageHeight).end()\n                .data(\"kendoWindow\");\n\n            var element = dialog.element;\n            if (showBrowser) {\n                this._imageBrowser = new kendo.ui.ImageBrowser(\n                    element.find(\".k-imagebrowser\"),\n                    extend({}, imageBrowser)\n                );\n\n                this._imageBrowser.bind(\"change\", function(ev) {\n                    if (ev.selected.get(\"type\") === \"f\") {\n                        element.find(KEDITORIMAGEURL).val(this.value());\n                    }\n                });\n\n                this._imageBrowser.bind(\"apply\", apply);\n            }\n\n            if (isIE) {\n                var dialogHeight = element.closest(\".k-window\").height();\n                element.css(\"max-height\", dialogHeight);\n            }\n            dialog.center().open();\n            element.find(KEDITORIMAGEURL).trigger(\"focus\").select();\n        }\n\n    });\n\n    kendo.ui.editor.ImageCommand = ImageCommand;\n\n    registerTool(\"insertImage\", new Editor.Tool({ command: ImageCommand, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Insert Image\" }) }));\n\n    })(window.kendo.jQuery);\n\n    (function($, undefined$1) {\n\n    var kendo = window.kendo,\n        extend = $.extend,\n        Editor = kendo.ui.editor,\n        EditorUtils = Editor.EditorUtils,\n        Command = Editor.Command,\n        Tool = Editor.Tool,\n        registerTool = EditorUtils.registerTool,\n        ToolTemplate = Editor.ToolTemplate,\n        loadingOverlay = '<div contenteditable=\"false\" class=\"k-loading-mask\" style=\"width: 100%; height: 100%; position: absolute; top: 0px; left: 0px;\"><div class=\"k-loading-image\"></div><div class=\"k-loading-color\"></div></div>';\n\n    var ImportCommand = Command.extend({\n        exec: function() {\n            (this.editor._uploadWidget || this._initializeUploadWidget()).element.click();\n        },\n\n        _initializeUploadWidget: function() {\n            var cmd = this;\n            var editor = cmd.editor;\n            var importOptions = editor.options[\"import\"];\n            var upload = $('<input id=\"editorImport\" name=\"files\" type=\"file\" />').kendoUpload({\n                success: cmd._onUploadSuccess.bind(cmd),\n                progress: cmd._onUploadProgress.bind(cmd),\n                select: cmd._onUploadSelect.bind(cmd),\n                error: cmd._onUploadError.bind(cmd),\n                complete: cmd._onUploadComplete.bind(cmd),\n                showFileList: false,\n                multiple: false,\n                async: {\n                    saveUrl: importOptions.proxyURL,\n                    autoUpload: true,\n                    saveField: \"file\"\n                },\n                validation: {\n                    allowedExtensions: importOptions.allowedExtensions,\n                    maxFileSize: importOptions.maxFileSize\n                }\n            }).getKendoUpload();\n\n            editor._uploadWidget = upload;\n\n            return upload;\n        },\n        _onUploadComplete: function(ev) {\n            this._trigger(\"complete\", ev);\n            ev.sender.clearAllFiles();\n\n            this._removeLoadingOverlay();\n        },\n        _onUploadSuccess: function(ev) {\n            this.editor.value(ev.response.html.replace(/<\\/?body>/ig, \"\"));\n            this._trigger(\"success\", ev);\n        },\n        _onUploadProgress: function(ev) {\n            this._trigger(\"progress\", ev);\n        },\n        _onUploadSelect: function(ev) {\n            this._trigger(\"select\", ev);\n            if (!ev.files[0].validationErrors) {\n                this._initLoadingOverlay();\n            }\n        },\n        _onUploadError: function(ev) {\n            this._trigger(\"error\", ev);\n        },\n\n        _trigger: function(eventType, uploadEvent) {\n            var editor = this.editor;\n            var importOptions = editor.options[\"import\"];\n            if (typeof importOptions[eventType] === \"function\") {\n                importOptions[eventType].call(editor, uploadEvent);\n            }\n        },\n\n        _initLoadingOverlay: function() {\n            var editable = this.editor.body;\n            if (Editor.Dom.is(editable, \"body\")) {\n                this._iframeWrapper = this._container =\n                    this.editor.wrapper.find(\"iframe\").parent()\n                    .css({ position: \"relative\" }).append(loadingOverlay);\n            } else {\n                this._container = $(editable).append(loadingOverlay);\n            }\n\n            kendo.ui.progress(this._container, true);\n        },\n\n        _removeLoadingOverlay: function() {\n            kendo.ui.progress(this._container, false);\n            $(this._iframeWrapper).css({\n                position: \"\"\n            });\n\n            delete this._container;\n            delete this._iframeWrapper;\n        }\n    });\n\n    extend(Editor, {\n        ImportCommand: ImportCommand\n    });\n\n    registerTool(\"import\", new Tool({\n        command: ImportCommand,\n        template: new ToolTemplate({ template: EditorUtils.iconTextButtonTemplate, title: \"Import\" })\n    }));\n\n    }(window.kendo.jQuery));\n\n    (function($) {\n\n        // Imports ================================================================\n        var kendo = window.kendo,\n            editorNS = kendo.ui.editor,\n            Command = editorNS.Command,\n            GenericCommand = editorNS.GenericCommand,\n            EditorUtils = editorNS.EditorUtils,\n            registerTool = EditorUtils.registerTool,\n            Tool = editorNS.Tool,\n            ToolTemplate = editorNS.ToolTemplate,\n            RestorePoint = editorNS.RestorePoint,\n            extend = $.extend;\n\n    var InsertHtmlCommand = Command.extend({\n        init: function(options) {\n            Command.fn.init.call(this, options);\n\n            this.managesUndoRedo = true;\n        },\n\n        exec: function() {\n            var editor = this.editor;\n            var options = this.options;\n            var range = options.range;\n            var body = editor.body;\n            var startRestorePoint = new RestorePoint(range, body);\n            var html = options.html || options.value || '';\n\n            editor.selectRange(range);\n\n            editor.clipboard.paste(html, options);\n\n            if (options.postProcess) {\n                options.postProcess(editor, editor.getRange());\n            }\n\n            var genericCommand = new GenericCommand(startRestorePoint, new RestorePoint(editor.getRange(), body));\n            genericCommand.editor = editor;\n            editor.undoRedoStack.push(genericCommand);\n\n            editor.focus();\n        }\n    });\n\n    var InsertHtmlTool = Tool.extend({\n        initialize: function(ui, initOptions) {\n            var editor = initOptions.editor,\n                options = this.options,\n                dataSource = options.items ? options.items : editor.options.insertHtml;\n\n            this._selectBox = new editorNS.SelectBox(ui, {\n                dataSource: dataSource,\n                dataTextField: \"text\",\n                dataValueField: \"value\",\n                change: function() {\n                    Tool.exec(editor, 'insertHtml', this.value());\n                },\n                title: editor.options.messages.insertHtml,\n                highlightFirst: false\n            });\n\n            ui.attr(\"title\", initOptions.title);\n            this._selectBox.wrapper.attr(\"title\", initOptions.title);\n        },\n\n        command: function(commandArguments) {\n            return new InsertHtmlCommand(commandArguments);\n        },\n\n        update: function(ui) {\n            var selectbox = ui.data(\"kendoSelectBox\") || ui.find(\"select\").data(\"kendoSelectBox\");\n            selectbox.close();\n            selectbox.value(selectbox.options.title);\n        }\n    });\n\n    extend(editorNS, {\n        InsertHtmlCommand: InsertHtmlCommand,\n        InsertHtmlTool: InsertHtmlTool\n    });\n\n    registerTool(\"insertHtml\", new InsertHtmlTool({ template: new ToolTemplate({ template: EditorUtils.dropDownListTemplate, title: \"Insert HTML\", initialValue: \"Insert HTML\" }) }));\n\n    })(window.kendo.jQuery);\n\n    (function($, undefined$1) {\n\n    var kendo = window.kendo,\n        extend = $.extend,\n        Editor = kendo.ui.editor,\n        EditorUtils = Editor.EditorUtils,\n        Command = Editor.Command,\n        Tool = Editor.Tool,\n        registerTool = EditorUtils.registerTool,\n        ToolTemplate = Editor.ToolTemplate,\n        defaultExportAsItems = [\n            { text: 'Docx', value: 'docx' },\n            { text: 'Rtf', value: 'rtf' },\n            { text: 'Pdf', value: 'pdf' },\n            { text: 'Html', value: 'html' },\n            { text: 'Plain Text', value: 'txt' }\n        ];\n\n    var ExportAsCommand = Command.extend({\n        init: function(options) {\n            var cmd = this;\n            cmd.options = options;\n            Command.fn.init.call(cmd, options);\n            cmd.attributes = null;\n            cmd.exportType = options.exportType;\n        },\n\n        exec: function() {\n            var cmd = this;\n            var range = this.lockRange(true);\n            cmd.postToProxy();\n            cmd.releaseRange(range);\n        },\n\n        postToProxy: function() {\n            this.generateForm().appendTo('body').submit().remove();\n        },\n\n        generateForm: function() {\n            var cmd = this;\n            var exportAsOptions = cmd.editor.options.exportAs;\n            var form = $('<form>').attr({\n                action: exportAsOptions && exportAsOptions.proxyURL || \"\",\n                method: 'POST'\n            });\n\n            form.append([\n                cmd.valueInput(),\n                cmd.exportTypeInput(),\n                cmd.fileNameInput(),\n                cmd.antiForgeryInput()\n            ]);\n\n            return form;\n        },\n\n        valueInput: function() {\n            var editor = this.editor;\n            return $('<input>').attr({\n                value: editor.encodedValue(),\n                name: 'value',\n                type: 'hidden'\n            });\n        },\n\n        exportTypeInput: function() {\n            var cmd = this;\n            return $('<input>').attr({\n                value: cmd.exportType,\n                name: 'exportType',\n                type: 'hidden'\n            });\n\n        },\n\n        fileNameInput: function() {\n            var editor = this.editor;\n            var exportAsOptions = editor.options.exportAs;\n            var fileName = exportAsOptions && exportAsOptions.fileName || editor.element.attr(\"id\") || \"editor\";\n            return $('<input>').attr({\n                value: fileName,\n                name: 'fileName',\n                type: 'hidden'\n            });\n        },\n\n        antiForgeryInput: function() {\n            var csrf_param = $(\"meta[name=csrf-param],meta[name=_csrf_header]\").attr(\"content\");\n\n            return $(\"input[name^='__RequestVerificationToken']\").clone()\n                        .add($(\"input[name^='\" + csrf_param + \"']\").clone());\n        }\n    });\n\n    var ExportAsTool = Tool.extend({\n        init: function(options) {\n            var tool = this;\n            Tool.fn.init.call(tool, kendo.deepExtend({}, tool.options, options));\n            tool.type = 'kendoSelectBox';\n        },\n\n        options: {\n            items: defaultExportAsItems,\n            width: 140\n        },\n\n        command: function(args) {\n            var value = args.value;\n            return new Editor.ExportAsCommand({\n                range: args.range,\n                exportType: value.exportType\n            });\n        },\n\n        initialize: function(ui, initOptions) {\n            var tool = this;\n            var editor = initOptions.editor;\n            var options = tool.options;\n            var toolName = options.name;\n            var changeHandler = tool.changeHandler.bind(tool);\n            var dataSource = options.items || editor.options[toolName];\n            var displayName = editor.options.messages[toolName];\n            var selectBox;\n\n            dataSource.unshift({\n                text: displayName,\n                value: \"\"\n            });\n            tool.editor = editor;\n            ui.width(options.width);\n            selectBox = ui.kendoSelectBox({\n                dataTextField: 'text',\n                dataValueField: 'value',\n                dataSource: dataSource,\n                autoSize: true,\n                change: changeHandler,\n                open: function(e) {\n                    var sender = e.sender;\n                    sender.items()[0].style.display = \"none\";\n                    sender.unbind(\"open\");\n                },\n                highlightFirst: false,\n                template: kendo.template(function (data) { return (\"<span unselectable=\\\"on\\\" style=\\\"display:block;\" + (data.style || '') + \"\\\">\" + (kendo.htmlEncode(data.text)) + \"</span>\"); }),\n                valueTemplate: function () { return (\"<span class=\\\"k-editor-export\\\"><span class=\\\"k-icon k-i-export\\\"></span><span class=\\\"k-export-tool-text\\\">\" + displayName + \"</span></span>\"); }\n            }).data(\"kendoSelectBox\");\n\n            ui.attr(\"title\", initOptions.title);\n            selectBox.wrapper.attr(\"title\", initOptions.title);\n\n            ui.addClass('k-decorated').closest('.k-dropdownlist').removeClass('k-' + toolName).find('*').addBack().attr('unselectable', 'on');\n        },\n\n        changeHandler: function(e) {\n            var sender = e.sender;\n            var dataItem = sender.dataItem();\n            var value = dataItem && dataItem.value;\n\n            this._exec(value);\n            sender.value(\"\");\n        },\n\n        _exec: function(value) {\n            if (value) {\n                Tool.exec(this.editor, this.options.name, { exportType: value } );\n            }\n        },\n\n        destroy: function() {\n            this._ancestor = null;\n        }\n    });\n\n    extend(Editor, {\n        ExportAsTool: ExportAsTool,\n        ExportAsCommand: ExportAsCommand\n    });\n\n    registerTool('exportAs', new ExportAsTool({\n        template: new ToolTemplate({\n            template: EditorUtils.dropDownListTemplate,\n            title: 'Export As'\n        })\n    }));\n\n    }(window.kendo.jQuery));\n\n    (function($, undefined$1) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        Class = kendo.Class,\n        extend = $.extend,\n        Editor = kendo.ui.editor,\n        dom = Editor.Dom,\n        EditorUtils = Editor.EditorUtils,\n        registerTool = EditorUtils.registerTool,\n        Command = Editor.Command,\n        Tool = Editor.Tool,\n        ToolTemplate = Editor.ToolTemplate,\n        RangeUtils = Editor.RangeUtils,\n        blockElements = dom.blockElements,\n        BlockFormatFinder = Editor.BlockFormatFinder,\n        BlockFormatter = Editor.BlockFormatter;\n\n    function indent(node, value) {\n        var isRtl = $(node).css(\"direction\") == \"rtl\",\n            indentDirection = isRtl ? \"Right\" : \"Left\",\n            property = dom.name(node) != \"td\" ? \"margin\" + indentDirection : \"padding\" + indentDirection;\n        if (value === undefined$1) {\n            return node.style[property] || 0;\n        } else {\n            if (value > 0) {\n                node.style[property] = value + \"px\";\n            } else {\n                node.style[property] = \"\";\n\n                if (!node.style.cssText) {\n                    node.removeAttribute(\"style\");\n                }\n            }\n        }\n    }\n\n    var IndentFormatter = Class.extend({\n        init: function() {\n            this.finder = new BlockFormatFinder([{ tags: dom.blockElements }]);\n        },\n\n        apply: function(nodes) {\n            nodes = dom.filterBy(nodes, dom.htmlIndentSpace, true);\n            var formatNodes = this.finder.findSuitable(nodes),\n                targets = [],\n                i, len, formatNode, parentList, sibling;\n\n            formatNodes = this.mapImmutables(formatNodes);\n\n            if (formatNodes.length) {\n                for (i = 0, len = formatNodes.length; i < len; i++) {\n                    if (dom.is(formatNodes[i], \"li\")) {\n                        if (!$(formatNodes[i]).index()) {\n                            targets.push(formatNodes[i].parentNode);\n                        } else if ($.inArray(formatNodes[i].parentNode, targets) < 0) {\n                            targets.push(formatNodes[i]);\n                        }\n                    } else {\n                        targets.push(formatNodes[i]);\n                    }\n                }\n\n                while (targets.length) {\n                    formatNode = targets.shift();\n                    if (dom.is(formatNode, \"li\")) {\n                        parentList = formatNode.parentNode;\n                        sibling = $(formatNode).prev(\"li\");\n                        var siblingList = sibling.find(\"ul,ol\").last();\n\n                        var nestedList = $(formatNode).children(\"ul,ol\")[0];\n\n                        if (nestedList && sibling[0]) {\n                            if (siblingList[0]) {\n                               siblingList.append(formatNode);\n                               siblingList.append($(nestedList).children());\n                               dom.remove(nestedList);\n                            } else {\n                                sibling.append(nestedList);\n                                nestedList.insertBefore(formatNode, nestedList.firstChild);\n                            }\n                        } else {\n                            nestedList = sibling.children(\"ul,ol\")[0];\n                            if (!nestedList) {\n                                nestedList = dom.create(formatNode.ownerDocument, dom.name(parentList), this.getListTypeAttr(parentList));\n                                sibling.append(nestedList);\n                            }\n\n                            while (formatNode && formatNode.parentNode == parentList) {\n                                nestedList.appendChild(formatNode);\n                                formatNode = targets.shift();\n                            }\n                        }\n                    } else {\n                        var marginLeft = parseInt(indent(formatNode), 10) + 30;\n                        indent(formatNode, marginLeft);\n\n                        for (var targetIndex = 0; targetIndex < targets.length; targetIndex++) {\n                            if ($.contains(formatNode, targets[targetIndex])) {\n                                targets.splice(targetIndex, 1);\n                            }\n                        }\n                    }\n                }\n            } else {\n                var formatter = new BlockFormatter([{ tags: [\"p\"] }], { style: { marginLeft: 30 } });\n\n                formatter.apply(nodes);\n            }\n        },\n\n        getListTypeAttr: function(list) {\n            var type = list.getAttribute(\"type\");\n            var styleType = list.style.listStyleType;\n\n            return type ? { type: type } : { style: { listStyleType: styleType } };\n        },\n\n        mapImmutables: function(nodes) {\n            if (!this.immutables) {\n                return nodes;\n            } else {\n                var immutables = [];\n                return $.map(nodes, function(node) {\n                    var immutable = Editor.Immutables.immutableParent(node);\n                    if (immutable) {\n                        if ($.inArray(immutable, immutables) === -1) {\n                            immutables.push(immutable);\n                        } else {\n                            return null;\n                        }\n                    }\n                    return immutable || node;\n                });\n            }\n        },\n\n        remove: function(nodes) {\n            nodes = dom.filterBy(nodes, dom.htmlIndentSpace, true);\n            var formatNodes = this.finder.findSuitable(nodes),\n                targetNode, i, len, list, listParent, siblings,\n                formatNode, marginLeft;\n\n            formatNodes = this.mapImmutables(formatNodes);\n\n            for (i = 0, len = formatNodes.length; i < len; i++) {\n                formatNode = $(formatNodes[i]);\n\n                if (formatNode.is(\"li\")) {\n                    list = formatNode.parent();\n                    listParent = list.parent();\n                    // listParent will be ul or ol in case of invalid dom - <ul><li></li><ul><li></li></ul></ul>\n                    if (listParent.is(\"li,ul,ol\") && !indent(list[0])) {\n                        // skip already processed nodes\n                        if (targetNode && $.contains(targetNode, listParent[0])) {\n                            continue;\n                        }\n\n                        siblings = formatNode.nextAll(\"li\");\n                        if (siblings.length) {\n                            $(list[0].cloneNode(false)).appendTo(formatNode).append(siblings);\n                        }\n\n                        if (listParent.is(\"li\")) {\n                            formatNode.insertAfter(listParent);\n                        } else {\n                            formatNode.appendTo(listParent);\n                        }\n\n                        if (!list.children(\"li\").length) {\n                            list.remove();\n                        }\n\n                        continue;\n                    } else {\n                        if (targetNode == list[0]) {\n                            // removing format on sibling LI elements\n                            continue;\n                        }\n                        targetNode = list[0];\n                    }\n                } else {\n                    targetNode = formatNodes[i];\n                }\n\n                marginLeft = parseInt(indent(targetNode), 10) - 30;\n                indent(targetNode, marginLeft);\n            }\n        }\n\n    });\n\n    var IndentCommand = Command.extend({\n        init: function(options) {\n            var that = this;\n            options.formatter = /** @ignore */ {\n                toggle: (function(range) {\n                    var indentFormatter = new IndentFormatter();\n                    indentFormatter.immutables = this.editor && this.editor.options.immutables;\n                    indentFormatter.apply(RangeUtils.nodes(range));\n                }).bind(that)\n            };\n            Command.fn.init.call(this, options);\n        }\n    });\n\n    var OutdentCommand = Command.extend({\n        init: function(options) {\n            var that = this;\n            options.formatter = {\n                toggle: (function(range) {\n                    var indentFormatter = new IndentFormatter();\n                    indentFormatter.immutables = this.editor && this.editor.options.immutables;\n                    indentFormatter.remove(RangeUtils.nodes(range));\n                }).bind(that)\n            };\n            Command.fn.init.call(this, options);\n        }\n    });\n\n    var OutdentTool = Tool.extend({\n        init: function(options) {\n            Tool.fn.init.call(this, options);\n\n            this.finder = new BlockFormatFinder([{ tags: blockElements }]);\n        },\n\n        initialize: function(ui, options) {\n            Tool.fn.initialize.call(this, ui, options);\n\n            $.extend(this.options, {\n                immutables: options.editor && options.editor.options.immutables\n            });\n\n            ui.addClass(\"k-disabled\");\n        },\n\n        update: function(ui, nodes) {\n            var suitableNodes = this.finder.findSuitable(nodes),\n                isOutdentable, listParentsCount, i, len, suitable, immutableParent;\n            for (i = 0, len = suitableNodes.length; i < len; i++) {\n                suitable = suitableNodes[i];\n\n                if (this.options.immutables) {\n                    immutableParent = Editor.Immutables.immutableParent(suitable);\n                    if (immutableParent) {\n                        suitable = immutableParent;\n                    }\n                }\n\n                isOutdentable = indent(suitable);\n\n                if (!isOutdentable) {\n                    listParentsCount = $(suitable).parents(\"ul,ol\").length;\n                    isOutdentable = (dom.is(suitable, \"li\") && (listParentsCount > 1 || indent(suitable.parentNode))) ||\n                                    (dom.ofType(suitable, [\"ul\",\"ol\"]) && listParentsCount > 0);\n                }\n\n                if (isOutdentable) {\n                    ui.removeClass(\"k-disabled\");\n                    return;\n                }\n            }\n\n            ui.addClass(\"k-disabled\").removeClass(\"k-hover\");\n        }\n    });\n\n    extend(Editor, {\n        IndentFormatter: IndentFormatter,\n        IndentCommand: IndentCommand,\n        OutdentCommand: OutdentCommand,\n        OutdentTool: OutdentTool\n    });\n\n    registerTool(\"indent\", new Tool({ command: IndentCommand, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Indent\" }) }));\n    registerTool(\"outdent\", new OutdentTool({ command: OutdentCommand, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Outdent\" }) }));\n\n    })(window.kendo.jQuery);\n\n    (function($) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        extend = $.extend,\n        editorNS = kendo.ui.editor,\n        dom = editorNS.Dom,\n        Command = editorNS.Command,\n        Tool = editorNS.Tool,\n        BlockFormatter = editorNS.BlockFormatter,\n        normalize = dom.normalize,\n        RangeUtils = editorNS.RangeUtils,\n        registerTool = editorNS.EditorUtils.registerTool;\n\n    var ParagraphCommand = Command.extend({\n        init: function(options) {\n            this.options = options;\n            Command.fn.init.call(this, options);\n        },\n\n        _insertMarker: function(doc, range) {\n            var marker = dom.create(doc, 'a'), container;\n            marker.className = \"k-marker\";\n\n            range.insertNode(marker);\n\n            if (!marker.parentNode) {\n                // inserting paragraph in Firefox full body range\n                container = range.commonAncestorContainer;\n                container.innerHTML = \"\";\n                container.appendChild(marker);\n            }\n\n            normalize(marker.parentNode);\n\n            return marker;\n        },\n\n        _moveFocus: function(range, candidate) {\n            if (dom.isEmpty(candidate)) {\n                range.setStartBefore(candidate);\n            } else {\n                range.selectNodeContents(candidate);\n\n                var focusNode = RangeUtils.textNodes(range)[0];\n\n                if (!focusNode) {\n                    while (candidate.childNodes.length && !dom.is(candidate.firstChild, \"br\")) {\n                        candidate = candidate.firstChild;\n                    }\n\n                    focusNode = candidate;\n                }\n\n                if (dom.isEmpty(focusNode)) {\n                    range.setStartBefore(focusNode);\n                } else {\n                    if (dom.emptyNode(focusNode)) {\n                        focusNode.innerHTML = \"\\ufeff\";\n                    }\n                    var startNode = focusNode.firstChild || focusNode;\n                    if (dom.isDataNode(startNode)) {\n                        range.setStart(startNode, 0);\n                    } else {\n                        range.setStartBefore(startNode);\n                    }\n                }\n            }\n        },\n\n        shouldTrim: function(range) {\n            var blocks = 'p,h1,h2,h3,h4,h5,h6'.split(','),\n                startInBlock = dom.parentOfType(range.startContainer, blocks),\n                endInBlock = dom.parentOfType(range.endContainer, blocks);\n            return (startInBlock && !endInBlock) || (!startInBlock && endInBlock);\n        },\n\n        _blankAfter: function(node) {\n            while (node && (dom.isMarker(node) || dom.stripBom(node.nodeValue) === \"\")) {\n                node = node.nextSibling;\n            }\n\n            return !node;\n        },\n\n        exec: function() {\n            var range = this.getRange(),\n                doc = RangeUtils.documentFromRange(range),\n                parent, previous, next,\n                emptyParagraphContent = editorNS.emptyElementContent,\n                paragraph, marker, li, heading, tableNode, rng,\n                shouldTrim;\n\n            this.expandImmutablesIn(range);\n\n            shouldTrim = this.shouldTrim(range);\n\n            range.deleteContents();\n            marker = this._insertMarker(doc, range);\n\n            dom.stripBomNode(marker.previousSibling);\n            dom.stripBomNode(marker.nextSibling);\n\n            li = dom.closestEditableOfType(marker, ['li']);\n            heading = dom.closestEditableOfType(marker, 'h1,h2,h3,h4,h5,h6'.split(','));\n            tableNode = dom.is(marker.parentNode, 'table') && marker.parentNode;\n\n            if (li) {\n                // hitting 'enter' in empty li\n                if (dom.emptyNode(li)) {\n                    paragraph = dom.create(doc, 'p');\n\n                    if (dom.next(li)) {\n                        rng = range.cloneRange();\n                        rng.selectNode(li);\n\n                        RangeUtils.split(rng, li.parentNode);\n                    }\n\n                    var br = $(\"br\", li);\n                    if (br.length == 1) {\n                        br.remove();\n                    }\n\n                    var parentNode = li.parentNode;\n                    var parentChildrenLength = li.parentNode.children.length;\n                    var firstChild = parentChildrenLength > 1 && li.childNodes.length == 1 && li.children[0];\n\n                    dom.insertAfter(paragraph, parentNode);\n                    dom.remove(parentChildrenLength == 1 ? li.parentNode : li);\n\n                    if (firstChild && firstChild !== marker) {\n                        paragraph.appendChild(firstChild);\n                        paragraph.appendChild(marker);\n                    } else {\n                        paragraph.innerHTML = emptyParagraphContent;\n                    }\n                    next = paragraph;\n                }\n            } else if (heading && this._blankAfter(marker)) {\n                paragraph = this._insertParagraphAfter(heading);\n                dom.remove(marker);\n                next = paragraph;\n            } else if (tableNode) {\n                paragraph = this._insertParagraphAfter(tableNode);\n                dom.remove(marker);\n                next = paragraph;\n            }\n\n            if (!next) {\n                if (!(li || heading)) {\n                    new BlockFormatter([{ tags: ['p'] }]).apply([marker]);\n                }\n\n                range.selectNode(marker);\n\n                parent = dom.parentOfType(marker, [li ? 'li' : heading ? dom.name(heading) : 'p']);\n\n                RangeUtils.split(range, parent, shouldTrim);\n\n                previous = parent.previousSibling;\n\n                if (dom.is(previous, 'li') && previous.firstChild && !dom.is(previous.firstChild, 'br')) {\n                    previous = previous.firstChild;\n                }\n\n                next = parent.nextSibling;\n\n                this.clean(previous, { links: true });\n                this.clean(next, { links: true });\n\n                if (dom.is(next, 'li') && next.firstChild && !dom.is(next.firstChild, 'br')) {\n                    next = next.firstChild;\n                }\n\n                dom.remove(parent);\n\n                // normalize updates the caret display in Gecko\n                normalize(previous);\n            }\n\n            normalize(next);\n\n            this._moveFocus(range, next);\n\n            range.collapse(true);\n\n            dom.scrollTo(next, true);\n\n            RangeUtils.selectRange(range);\n        },\n\n        _insertParagraphAfter: function(node) {\n            var range = this.getRange();\n            var doc = RangeUtils.documentFromRange(range);\n            var emptyElementContent = editorNS.emptyElementContent;\n            var paragraph = dom.create(doc, 'p');\n\n            dom.insertAfter(paragraph, node);\n            paragraph.innerHTML = emptyElementContent;\n\n            return paragraph;\n        },\n\n        clean: function(node, options) {\n            var root = node;\n\n            if (node.firstChild && dom.is(node.firstChild, 'br')) {\n                dom.remove(node.firstChild);\n            }\n\n            if (dom.isDataNode(node) && !node.nodeValue) {\n                node = node.parentNode;\n            }\n\n            if (node) {\n                var siblings = false;\n                while (node.firstChild && node.firstChild.nodeType == 1) {\n                    siblings = siblings || (dom.significantNodes(node.childNodes).length > 1);\n                    node = node.firstChild;\n                }\n\n                if (!dom.isEmpty(node) && node.className != \"k-br\" && /^\\s*$/.test(node.innerHTML) && !siblings) {\n                    $(root).find(\".k-br\").remove();\n                    node.innerHTML = editorNS.emptyElementContent;\n                }\n\n                if (options && options.links) {\n                    while (node != root) {\n                        if (dom.is(node, \"a\") && dom.emptyNode(node)) {\n                            dom.unwrap(node);\n                            break;\n                        }\n                        node = node.parentNode;\n                    }\n                }\n            }\n        }\n    });\n\n    var NewLineCommand = Command.extend({\n        init: function(options) {\n            this.options = options;\n            Command.fn.init.call(this, options);\n        },\n\n        exec: function() {\n            var range = this.getRange();\n            this.expandImmutablesIn(range);\n\n            var br = dom.create(RangeUtils.documentFromRange(range), 'br');\n            var node = range.startContainer;\n            var filler;\n            var browser = kendo.support.browser;\n            var oldIE = browser.msie && browser.version < 11;\n            var tableNode = dom.is(node, 'table') && node;\n            var kbrParent;\n\n            range.deleteContents();\n            if (tableNode) {\n                dom.insertAfter(br, tableNode);\n            } else {\n                kbrParent = $(node).closest('.k-br');\n                range.insertNode(br);\n\n                if (kbrParent.length) {\n                    // pressing enter in an k-br node\n                    dom.unwrap(kbrParent[0]);\n                }\n            }\n\n            normalize(br.parentNode);\n\n            if (!oldIE && (!br.nextSibling || dom.isWhitespace(br.nextSibling))) {\n                // Gecko and WebKit cannot put the caret after only one br.\n                if (!!br.nextSibling && dom.isWhitespace(br.nextSibling)) {\n                    $(br.nextSibling).remove();\n                }\n                filler = br.cloneNode(true);\n                filler.className = 'k-br';\n                dom.insertAfter(filler, br);\n            }\n\n            range.setStartAfter(br);\n            range.collapse(true);\n\n            dom.scrollTo(br.nextSibling || br, true);\n\n            RangeUtils.selectRange(range);\n        }\n    });\n\n    extend(editorNS, {\n        ParagraphCommand: ParagraphCommand,\n        NewLineCommand: NewLineCommand\n    });\n\n    registerTool(\"insertLineBreak\", new Tool({ key: 13, shift: true, command: NewLineCommand }));\n    registerTool(\"insertParagraph\", new Tool({ key: 13, command: ParagraphCommand }));\n\n    })(window.kendo.jQuery);\n\n    (function($, undefined$1) {\n\n    var kendo = window.kendo,\n        extend = $.extend,\n        encode = kendo.htmlEncode,\n        Editor = kendo.ui.editor,\n        EditorUtils = Editor.EditorUtils,\n        dom = Editor.Dom,\n        registerTool = EditorUtils.registerTool,\n        ToolTemplate = Editor.ToolTemplate,\n        RangeUtils = Editor.RangeUtils,\n        Command = Editor.Command,\n        LinkFormatter = Editor.LinkFormatter,\n        textNodes = RangeUtils.textNodes,\n        keys = kendo.keys,\n        KEDITORFILEURL = \"#k-editor-file-url\",\n        KEDITORFILETEXT = \"#k-editor-file-text\",\n        KEDITORFILETITLE = \"#k-editor-file-title\";\n\n    var FileCommand = Command.extend({\n        init: function(options) {\n            var that = this;\n            Command.fn.init.call(that, options);\n\n            that.formatter = new LinkFormatter();\n\n            that.async = true;\n            that.attributes = {};\n        },\n\n        insertFile: function(file, range) {\n            var attributes = this.attributes;\n            var doc = RangeUtils.documentFromRange(range);\n\n            if (attributes.href && attributes.href != \"http://\") {\n\n                if (!file) {\n                    file = dom.create(doc, \"a\", { href: attributes.href });\n                    file.innerHTML = attributes.innerHTML;\n                    file.title = attributes.title;\n\n                    range.deleteContents();\n                    range.insertNode(file);\n\n                    if (!file.nextSibling) {\n                        dom.insertAfter(doc.createTextNode(\"\\ufeff\"), file);\n                    }\n\n                    range.setStartAfter(file);\n                    range.setEndAfter(file);\n                    RangeUtils.selectRange(range);\n                    return true;\n                } else {\n                    dom.attr(file, attributes);\n                }\n            }\n\n            return false;\n        },\n\n        _dialogTemplate: function(showBrowser) {\n            return kendo.template(function (ref) {\n                    var messages = ref.messages;\n\n                    return '<div class=\"k-editor-dialog k-popup-edit-form\">' +\n                    '<div class=\"k-edit-form-container\">' +\n                        '<div class=\"k-edit-form-content\">' +\n                            \"\" + (showBrowser ? '<div class=\"k-filebrowser\"></div>' : '') +\n                            '<div class=\"k-edit-label\">' +\n                                \"<label for=\\\"k-editor-file-url\\\">\" + (encode(messages.fileWebAddress)) + \"</label>\" +\n                            '</div>' +\n                            '<div class=\"k-edit-field\">' +\n                                '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input type=\"text\" class=\"k-input-inner\" id=\"k-editor-file-url\"></span>' +\n                            '</div>' +\n                            \"<div class='k-edit-label'>\" +\n                                \"<label for=\\\"k-editor-file-text\\\">\" + (encode(messages.fileText)) + \"</label>\" +\n                            '</div>' +\n                            \"<div class='k-edit-field'>\" +\n                                '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input type=\"text\" class=\"k-input-inner\" id=\"k-editor-file-text\"></span>' +\n                            '</div>' +\n                            \"<div class='k-edit-label'>\" +\n                                \"<label for=\\\"k-editor-file-title\\\">\" + (encode(messages.fileTitle)) + \"</label>\" +\n                            '</div>' +\n                            \"<div class='k-edit-field'>\" +\n                                '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input type=\"text\" class=\"k-input-inner\" id=\"k-editor-file-title\"></span>' +\n                            '</div>' +\n                        '</div>' +\n                        '<div class=\"k-edit-buttons\">' +\n                            \"<button class=\\\"k-dialog-insert k-button k-button-md k-rounded-md k-button-solid k-button-solid-primary\\\"><span class=\\\"k-button-text\\\">\" + (messages.dialogInsert) + \"</span></button>\" +\n                            \"<button class=\\\"k-dialog-close k-button k-button-md k-rounded-md k-button-solid k-button-solid-base\\\"><span class=\\\"k-button-text\\\">\" + (messages.dialogCancel) + \"</span></button>\" +\n                        '</div>' +\n                    '</div>' +\n                '</div>';\n            }\n            )({\n                messages: this.editor.options.messages,\n                showBrowser: showBrowser\n            });\n        },\n\n        redo: function() {\n            var that = this,\n                range = that.lockRange();\n\n            this.formatter.apply(range, this.attributes);\n            that.releaseRange(range);\n        },\n\n        exec: function() {\n            var that = this,\n                range = that.lockRange(),\n                nodes = textNodes(range),\n                applied = false,\n                file = nodes.length ? this.formatter.finder.findSuitable(nodes[0]) : null,\n                dialog,\n                isIE = kendo.support.browser.msie,\n                options = that.editor.options,\n                messages = options.messages,\n                fileBrowser = options.fileBrowser,\n                showBrowser = !!(kendo.ui.FileBrowser && fileBrowser && fileBrowser.transport && fileBrowser.transport.read !== undefined$1),\n                dialogOptions = {\n                    title: messages.insertFile,\n                    visible: false,\n                    resizable: showBrowser\n                };\n\n            this.expandImmutablesIn(range);\n\n            function apply(e) {\n                var element = dialog.element,\n                    href = element.find(KEDITORFILEURL).val().replace(/ /g, \"%20\"),\n                    innerHTML = element.find(KEDITORFILETEXT).val(),\n                    title = element.find(KEDITORFILETITLE).val();\n\n                that.attributes = {\n                    href: href,\n                    innerHTML: innerHTML !== \"\" ? innerHTML : href,\n                    title: title\n                };\n\n                applied = that.insertFile(file, range);\n\n                close(e);\n\n                if (that.change) {\n                    that.change();\n                }\n            }\n\n            function close(e) {\n                e.preventDefault();\n                dialog.destroy();\n\n                dom.windowFromDocument(RangeUtils.documentFromRange(range)).focus();\n                if (!applied) {\n                    that.releaseRange(range);\n                }\n            }\n\n            function keyDown(e) {\n                if (e.keyCode == keys.ENTER) {\n                    apply(e);\n                } else if (e.keyCode == keys.ESC) {\n                    close(e);\n                }\n            }\n\n            dialogOptions.close = close;\n\n            if (showBrowser) {\n                dialogOptions.width = 750;\n            }\n\n            dialog = this.createDialog(that._dialogTemplate(showBrowser), dialogOptions)\n                .toggleClass(\"k-filebrowser-dialog\", showBrowser)\n                .find(\".k-dialog-insert\").on(\"click\", apply).end()\n                .find(\".k-dialog-close\").on(\"click\", close).end()\n                .find(\".k-edit-field input\").on(\"keydown\", keyDown).end()\n                // IE < 8 returns absolute url if getAttribute is not used\n                .find(KEDITORFILEURL).val(file ? file.getAttribute(\"href\", 2) : \"http://\").end()\n                .find(KEDITORFILETEXT).val(file ? file.innerText : \"\").end()\n                .find(KEDITORFILETITLE).val(file ? file.title : \"\").end()\n                .data(\"kendoWindow\");\n\n            var element = dialog.element;\n            if (showBrowser) {\n                that._fileBrowser = new kendo.ui.FileBrowser(\n                    element.find(\".k-filebrowser\"),\n                    extend({}, fileBrowser)\n                );\n\n                that._fileBrowser.bind(\"change\", function(ev) {\n                    if (ev.selected.get(\"type\") === \"f\") {\n                        element.find(KEDITORFILEURL).val(this.value());\n                    }\n                } );\n\n                that._fileBrowser.bind(\"apply\", apply);\n            }\n\n            if (isIE) {\n                var dialogHeight = element.closest(\".k-window\").height();\n                element.css(\"max-height\", dialogHeight);\n            }\n            dialog.center().open();\n            element.find(KEDITORFILEURL).trigger(\"focus\").select();\n        }\n\n    });\n\n    kendo.ui.editor.FileCommand = FileCommand;\n\n    registerTool(\"insertFile\", new Editor.Tool({ command: FileCommand, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Insert File\" }) }));\n\n    })(window.kendo.jQuery);\n\n    (function($, undefined$1) {\n\n    var kendo = window.kendo,\n        extend = $.extend,\n        Editor = kendo.ui.editor,\n        dom = Editor.Dom,\n        EditorUtils = Editor.EditorUtils,\n        RangeUtils = Editor.RangeUtils,\n        Command = Editor.Command,\n\n        NS = \"kendoEditor\",\n        ACTIVESTATE = \"k-active\",\n        SELECTEDSTATE = \"k-selected\",\n        SCOPE = \"scope\",\n        ROW = \"row\",\n        COL = \"col\",\n        ROWGROUP = \"rowgroup\",\n        COLGROUP = \"colgroup\",\n        COLSPAN = \"colspan\",\n        ROWSPAN = \"rowspan\",\n        TABLE = \"table\",\n        THEAD = \"thead\",\n        TBODY = \"tbody\",\n        TR = \"tr\",\n        TD = \"td\",\n        TH = \"th\",\n\n        Tool = Editor.Tool,\n        ToolTemplate = Editor.ToolTemplate,\n        InsertHtmlCommand = Editor.InsertHtmlCommand,\n        BlockFormatFinder = Editor.BlockFormatFinder,\n        BlockFormatTool = Editor.BlockFormatTool,\n        FormatCommand = Editor.FormatCommand,\n        registerTool = Editor.EditorUtils.registerTool,\n        registerFormat = Editor.EditorUtils.registerFormat,\n        formats = kendo.ui.Editor.fn.options.formats,\n        getTouches = kendo.getTouches;\n    var template = kendo.template;\n\n    var columnTemplate = function (ref) {\n        var width = ref.width;\n        var content = ref.content;\n\n        return (\"<td style=\\\"width:\" + width + \"%;\\\">\" + content + \"</td>\");\n    };\n\n    var tableFormatFinder = new BlockFormatFinder([{ tags: [TABLE] }]);\n\n    var TableCommand = InsertHtmlCommand.extend({\n        init: function(options) {\n            var o = $.extend({\n                postProcess: this.postProcess,\n                skipCleaners: true\n            }, options || {});\n\n            InsertHtmlCommand.fn.init.call(this, o);\n        },\n        _tableHtml: function(rows, columns) {\n            rows = rows || 1;\n            columns = columns || 1;\n            var columnHtml = template(columnTemplate)({ width: 100 / columns, content: Editor.emptyTableCellContent });\n            var rowHeight = 100 / rows;\n\n            return \"<table class='k-table' data-last>\" +\n                        new Array(rows + 1).join(\n                        \"<tr style='height:\" + rowHeight + \"%;'>\" +\n                            new Array(columns + 1).join(columnHtml) +\n                        \"</tr>\") +\n                   \"</table>\";\n        },\n\n        postProcess: function(editor, range) {\n            var insertedTable = $(\"table[data-last]\", editor.document).removeAttr(\"data-last\");\n\n            range.setStart(insertedTable.find(TD)[0], 0);\n            range.collapse(true);\n\n            editor.selectRange(range);\n        },\n\n        exec: function() {\n            var options = this.options;\n            options.html = this._tableHtml(options.rows, options.columns);\n\n            InsertHtmlCommand.fn.exec.call(this);\n        }\n    });\n\n    var PopupTool = Tool.extend({\n        initialize: function(ui, options) {\n            Tool.fn.initialize.call(this, ui, options);\n\n            var popup = $(this.options.popupTemplate).appendTo(\"body\").kendoPopup({\n                anchor: ui,\n                copyAnchorStyles: false,\n                open: this._open.bind(this),\n                activate: this._activate.bind(this),\n                close: this._close.bind(this)\n            }).data(\"kendoPopup\");\n\n            ui.on(\"click\", this._toggle.bind(this))\n              .on(\"keydown\", this._keydown.bind(this));\n\n            var editor = this._editor = options.editor;\n            this._popup = popup;\n\n            var tableWizard = new Editor.TableWizardTool({\n                template: new ToolTemplate({ template: EditorUtils.tableWizardButtonTemplate, title: editor.options.messages.tableWizard }),\n                command: Editor.TableWizardCommand,\n                insertNewTable: true\n            });\n\n            registerTool(\"tableWizardInsert\", tableWizard);\n\n            var twTool = $(\"<div>\" + tableWizard.options.template.getHtml() + \"</div>\");\n            twTool.appendTo(popup.element);\n\n            if (editor.toolbar) {\n                editor.toolbar.attachToolsEvents(twTool);\n            }\n        },\n\n        popup: function() {\n            return this._popup;\n        },\n\n        _activate: $.noop,\n\n        _open: function() {\n            this._popup.options.anchor.addClass(ACTIVESTATE);\n        },\n\n        _close: function() {\n            this._popup.options.anchor.removeClass(ACTIVESTATE);\n        },\n\n        _keydown: function(e) {\n            var that = this,\n                keys = kendo.keys,\n                key = e.keyCode,\n                shouldContinue = true;\n\n            if ((key == keys.DOWN && e.altKey) || key == keys.ENTER || key == keys.SPACEBAR ) {\n                that._popup.open();\n                shouldContinue = false;\n            } else if (key == keys.ESC) {\n                that._popup.close();\n            }\n        },\n\n        _toggle: function(e) {\n            var button = $(e.target).closest(\".k-tool\");\n\n            if (!button.hasClass(\"k-disabled\")) {\n                this.popup().toggle();\n            }\n        },\n\n        update: function(ui) {\n            var popup = this.popup();\n\n            if (popup.wrapper && popup.wrapper.css(\"display\") == \"block\") {\n                popup.close();\n            }\n\n            ui.removeClass(\"k-hover\");\n        },\n\n        destroy: function() {\n            this._popup.destroy();\n        }\n    });\n\n    var InsertTableTool = PopupTool.extend({\n        init: function(options) {\n            this.cols = 8;\n            this.rows = 6;\n\n            PopupTool.fn.init.call(this, $.extend(options, {\n                command: TableCommand,\n                popupTemplate:\n                    \"<div class='k-ct-popup'>\" +\n                        \"<div>\" +\n                            new Array(this.cols * this.rows + 1).join(\"<span class='k-ct-cell k-disabled'></span>\") +\n                        \"</div>\" +\n                        \"<div class='k-status'></div>\" +\n                    \"</div>\"\n            }));\n        },\n\n        _activate: function() {\n            var that = this,\n                element = that._popup.element,\n                cells = element.find(\".k-ct-cell\"),\n                firstCell = cells.eq(0),\n                lastCell = cells.eq(cells.length - 1),\n                start = kendo.getOffset(firstCell),\n                end = kendo.getOffset(lastCell),\n                cols = that.cols,\n                rows = that.rows,\n                cellWidth, cellHeight;\n\n            element.find(\"*\").addBack().attr(\"unselectable\", \"on\");\n\n            end.left += lastCell[0].offsetWidth;\n            end.top += lastCell[0].offsetHeight;\n\n            cellWidth = (end.left - start.left) / cols;\n            cellHeight = (end.top - start.top) / rows;\n\n            function tableFromLocation(e) {\n                var w = $(window);\n                return {\n                    row: Math.floor((e.clientY + w.scrollTop() - start.top) / cellHeight) + 1,\n                    col: Math.floor((e.clientX + w.scrollLeft() - start.left) / cellWidth) + 1\n                };\n            }\n\n            element.autoApplyNS(NS)\n                .on(\"mousemove\", \".k-ct-cell\", function(e) {\n                    that._setTableSize(tableFromLocation(e));\n                })\n                .on(\"mouseleave\", \".k-ct-cell\", function() {\n                    that._setTableSize();\n                })\n                .on(\"down\", \".k-ct-cell\", function(e) {\n                    e.preventDefault();\n                    var touch = getTouches(e)[0];\n                    that._exec(tableFromLocation(touch.location));\n                });\n        },\n\n        _valid: function(size) {\n            return size && size.row > 0 && size.col > 0 && size.row <= this.rows && size.col <= this.cols;\n        },\n\n        _exec: function(size) {\n            if (this._valid(size)) {\n                this._editor.exec(\"createTable\", {\n                    rows: size.row,\n                    columns: size.col\n                });\n                this._popup.close();\n            }\n        },\n\n        _setTableSize: function(size) {\n            var element = this._popup.element;\n            var status = element.find(\".k-status\");\n            var cells = element.find(\".k-ct-cell\");\n            var cols = this.cols;\n            var messages = this._editor.options.messages;\n\n            if (this._valid(size)) {\n                status.text(kendo.format(messages.createTableHint, size.row, size.col));\n\n                cells.each(function(i) {\n                    $(this).toggleClass(\n                        SELECTEDSTATE,\n                        i % cols < size.col && i / cols < size.row\n                    );\n                });\n            } else {\n                status.text(messages.createTable);\n                cells.removeClass(SELECTEDSTATE);\n            }\n        },\n\n        _keydown: function(e) {\n            var initiallyVisible = this._popup.visible();\n\n            PopupTool.fn._keydown.call(this, e);\n\n            if (!this._popup.visible()) {\n                return;\n            }\n\n            var keys = kendo.keys;\n            var key = e.keyCode;\n            var cells = this._popup.element.find(\".k-ct-cell\");\n            var focus = Math.max(cells.filter(\".k-selected\").last().index(), 0);\n            var selectedRows = Math.floor(focus / this.cols);\n            var selectedColumns = focus % this.cols;\n\n            var changed = false,\n                button;\n\n            if (key == keys.DOWN && !e.altKey) {\n                changed = true;\n                selectedRows++;\n            } else if (key == keys.UP) {\n                changed = true;\n                selectedRows--;\n            } else if (key == keys.RIGHT) {\n                changed = true;\n                selectedColumns++;\n            } else if (key == keys.LEFT) {\n                changed = true;\n                selectedColumns--;\n            } else if (key == keys.TAB) {\n                button = this._popup.element.find(\".k-button\");\n\n                if (button.length > 0) {\n                    changed = true;\n                    button.trigger(\"focus\");\n                }\n            }\n\n            var tableSize = {\n                row: Math.max(1, Math.min(this.rows, selectedRows + 1)),\n                col: Math.max(1, Math.min(this.cols, selectedColumns + 1))\n            };\n\n            if (key == keys.ENTER && initiallyVisible) {\n                this._exec(tableSize);\n            } else {\n                this._setTableSize(tableSize);\n            }\n\n            if (changed) {\n                e.preventDefault();\n                e.stopImmediatePropagation();\n            }\n        },\n\n        _open: function() {\n            var messages = this._editor.options.messages;\n\n            PopupTool.fn._open.call(this);\n\n            this.popup().element\n                .find(\".k-status\").text(messages.createTable).end()\n                .find(\".k-ct-cell\").removeClass(SELECTEDSTATE);\n        },\n\n        _close: function() {\n            PopupTool.fn._close.call(this);\n            this.popup().element.off(\".\" + NS);\n        }\n    });\n\n    var TableModificationCommand = Command.extend({\n        undo: function() {\n            var point = this.restorePoint;\n            point.restoreHtml();\n\n            $(this.editor.body).find(\".k-element-resize-handle-wrapper\")\n                .each(function(index,el) {\n                    el.remove();\n                });\n\n            this.editor.selectRange(point.toRange());\n        },\n        _clearColIndexAttr: function(table) {\n            dom.clearTableMappings(table, \"col-index\");\n        },\n        _mapColIndices: function(table) {\n            dom.reMapTableColumns(table, \"col-index\");\n        },\n        _findRowSpanCell: function(parent, rowIndex, colIndex) {\n            var row, cell;\n\n            for (var i = rowIndex; i >= 0; i--) {\n                row = parent.rows[i];\n                cell = $(row).find(\"[col-index=\" + colIndex + \"]\");\n\n                if (cell.length) {\n                    return cell;\n                }\n            }\n        },\n        _resetElementResizing: function(editor) {\n            editor._destroyResizings();\n            editor._initializeColumnResizing();\n            editor._initializeRowResizing();\n            editor._initializeElementResizing();\n        },\n        _findNextTdInRow: function(row, colIndex) {\n            var lastTd = row.find(\"td:last-child\"),\n                lastIndex = parseInt(lastTd.attr(\"col-index\"), 10) + lastTd.prop(\"colSpan\") - 1,\n                td;\n\n            for (var i = colIndex; i <= lastIndex; i++) {\n                td = row.find(\"[col-index=\" + i + \"]\");\n                if (td.length) {\n                    return td;\n                }\n            }\n        },\n        _adjustColgroups: function(row, table) {\n            var colElements = table.getElementsByTagName(COL),\n                colgroupElements = table.getElementsByTagName(COLGROUP),\n                cells = row.cells,\n                numberOfCells = cells.length,\n                i, colgroup, cell;\n\n            while (colElements.length > 0) {\n                colElements[0].remove();\n            }\n            while (colgroupElements.length > 0) {\n                colgroupElements[0].remove();\n            }\n\n            for (i = numberOfCells - 1; i >= 0; i--) {\n                cell = cells[i];\n                if (cell.getAttribute(SCOPE) === COLGROUP) {\n                    colgroup = dom.createEmptyNode(this.editor.document, COLGROUP);\n                    colgroup.setAttribute(\"span\", cell.getAttribute(COLSPAN));\n                    table.prepend(colgroup);\n                } else {\n                    table.prepend(dom.createEmptyNode(this.editor.document, COL));\n                }\n            }\n        },\n        _associateHeaderIds: function(table) {\n            dom.clearTableMappings(table, \"col-index\");\n            dom.reMapTableColumns(table, \"col-index\");\n            $(table).find(\"th, td\").removeAttr(\"id headers\");\n            dom.associateWithIds(table);\n        },\n        _getNumberOfColumns: function(table) {\n            return dom._getNumberOfColumns(table, \"td, th\");\n        }\n    });\n\n    var InsertRowCommand = TableModificationCommand.extend({\n        exec: function() {\n            var range = this.lockRange(true),\n                td = dom.closest(range.endContainer, [TD, TH]),\n                table = dom.closest(td, TABLE),\n                position = this.options.position || \"after\",\n                cellCount, row, cell,\n                newRow, rowIndex, rowSpanIndex, createdCell;\n\n            if (!table || (this.immutables() && Editor.Immutables.immutableParent(td))) {\n                this.releaseRange(range);\n                return;\n            }\n\n            this._mapColIndices(table);\n\n            row = td.parentNode;\n            rowIndex = dom.findNodeIndex(row, true);\n\n            if (td.rowSpan > 1 && position === \"after\") {\n                row = table.rows[rowIndex + td.rowSpan - 1];\n            }\n\n            cellCount = this._getNumberOfColumns(table);\n            newRow = row.cloneNode(true);\n            $(newRow).empty();\n\n            for (var i = 0; i < cellCount; i = i + cell.prop(\"colSpan\")) {\n                cell = $(row).find(\"[col-index=\" + i + \"]\");\n\n                if (cell.length) {\n                    if (cell.prop(\"rowSpan\") > 1 && position === \"after\" && cell) {\n                        cell.attr(ROWSPAN, cell.prop(\"rowSpan\") + 1);\n                    } else {\n                        this._appendCell(newRow, cell);\n                    }\n                } else {\n                    rowIndex = dom.findNodeIndex(row, true);\n                    cell = this._findRowSpanCell(row.parentElement, rowIndex, i);\n                    rowSpanIndex = cell.closest(TR).index();\n\n                    if (rowSpanIndex + cell.prop(\"rowSpan\") - 1 === rowIndex && position === \"after\") {\n                        this._appendCell(newRow, cell);\n                    } else {\n                        cell.attr(ROWSPAN, cell.prop(\"rowSpan\") + 1);\n                    }\n                }\n\n                createdCell = $(newRow).find(\"[col-index=\" + i + \"]\");\n                if (createdCell.attr(SCOPE) === ROWGROUP && !createdCell.attr(ROWSPAN)) {\n                    createdCell.attr(SCOPE, ROW);\n                }\n            }\n\n            if (position == \"before\") {\n                dom.insertBefore(newRow, row);\n            } else {\n                dom.insertAfter(newRow, row);\n            }\n\n            if ($(table).find(\"[headers]\").length > 0) {\n                this._associateHeaderIds(table);\n            }\n\n            this._clearColIndexAttr(table);\n            this.releaseRange(range);\n\n            this._resetElementResizing(this.editor);\n        },\n        _appendCell: function(row, cell) {\n            var newCell;\n\n            newCell = cell.clone();\n            newCell.html(Editor.emptyTableCellContent);\n            newCell.removeAttr(ROWSPAN);\n            newCell.appendTo(row);\n        }\n    });\n\n    var InsertColumnCommand = TableModificationCommand.extend({\n        exec: function() {\n            var range = this.lockRange(true),\n                td = dom.closest(range.endContainer, [TD, TH]),\n                table = dom.closest(td, TABLE),\n                colElements = table.getElementsByTagName(COL),\n                colgroupElements = table.getElementsByTagName(COLGROUP),\n                columnIndex,\n                i,\n                rows = table && table.rows,\n                cell,\n                newCell,\n                position = this.options.position || \"after\";\n\n\n            if (!td || (this.immutables() && Editor.Immutables.immutableParent(td))) {\n                this.releaseRange(range);\n                return;\n            }\n\n            this._mapColIndices(table);\n\n            columnIndex = parseInt(td.getAttribute(\"col-index\"),10);\n\n            if (td.colSpan > 1 && position === \"after\") {\n                td.setAttribute(\"col-index\", columnIndex + td.colSpan - 1);\n                columnIndex = columnIndex + td.colSpan - 1;\n            }\n\n            for (i = 0; i < rows.length; i++) {\n                cell = this._processForColSpan(rows[i], columnIndex, position, td);\n\n                if (!cell) {\n                    continue;\n                }\n\n                newCell = cell.cloneNode();\n                newCell.innerHTML = Editor.emptyTableCellContent;\n                newCell.removeAttribute(COLSPAN);\n\n                if (newCell.getAttribute(SCOPE) && newCell.getAttribute(SCOPE) === COLGROUP) {\n                    newCell.setAttribute(SCOPE, COL);\n                }\n\n                if (position == \"before\") {\n                    dom.insertBefore(newCell, cell);\n                } else {\n                    dom.insertAfter(newCell, cell);\n                }\n\n                this._resizeCells(newCell, cell);\n            }\n\n            if (colElements.length > 0 || colgroupElements.length > 0) {\n                this._adjustColgroups(rows[0], table);\n            }\n\n            if ($(table).find(\"[headers]\").length > 0) {\n                this._associateHeaderIds(table);\n            }\n\n            this._clearColIndexAttr(table);\n            this.releaseRange(range);\n\n            this._resetElementResizing(this.editor);\n        },\n        _processForColSpan: function(row, columnIndex, position, selectedCell) {\n            var cell,\n                colSpanEffect,\n                index = columnIndex - 1;\n\n            cell = $(row).find(\"[col-index=\" + columnIndex + \"]\")[0];\n\n            if (cell && cell.colSpan > 1 && position === \"after\" && cell !== selectedCell) {\n                cell.colSpan += 1;\n                return;\n            }\n\n            if (cell) {\n                return cell;\n            }\n\n            for (index; index >= 0; index--) {\n                cell = $(row).find(\"[col-index=\" + index + \"]\")[0];\n\n                if (cell && cell.colSpan > 1) {\n                    break;\n                }\n            }\n\n            if (!cell) {\n                return;\n            }\n\n            colSpanEffect = parseInt(cell.getAttribute(\"col-index\"),10) + cell.colSpan - 1;\n\n            if (colSpanEffect === columnIndex && position === \"after\") {\n                return cell;\n            } else if (columnIndex <= colSpanEffect) {\n                cell.setAttribute(COLSPAN, cell.colSpan + 1);\n            }\n        },\n        _resizeCells: function(newCell, cell) {\n            var width = newCell.style.width,\n            parsedWidth, unit, calculatedWidth;\n\n            if (!width) {\n                return;\n            }\n\n            parsedWidth = parseFloat(width);\n            unit = width.slice(parsedWidth.toString().length);\n            calculatedWidth = (parsedWidth / 2) + unit;\n\n            newCell.style.width = calculatedWidth;\n            cell.style.width = calculatedWidth;\n        }\n    });\n\n    var DeleteRowCommand = TableModificationCommand.extend({\n        exec: function() {\n            var range = this.lockRange();\n            var rows = RangeUtils.mapAll(range, function(node) {\n                return $(node).closest(TR)[0];\n            });\n            var td = dom.closest(range.endContainer, [TD, TH]);\n            var row = rows[0];\n            var rowSpan = td ? td.rowSpan : 1;\n            var rowIndex = $(rows[0]).index();\n            var table = dom.closest(row, TABLE);\n            var rowParent = row.parentElement;\n            var focusElement;\n\n            if (!table || (this.immutables() && Editor.Immutables.immutableParent(row))) {\n                this.releaseRange(range);\n                return;\n            }\n\n            for (var x = 0; x < rowSpan; x++) {\n                if (rows.indexOf(rowParent.rows[rowIndex + x]) < 0) {\n                    rows.push(rowParent.rows[rowIndex + x]);\n                }\n            }\n\n            if (table.rows.length <= rows.length) {\n                focusElement = dom.next(table);\n                if (!focusElement || dom.insignificant(focusElement)) {\n                    focusElement = dom.prev(table);\n                }\n\n                if (focusElement && focusElement.rows) {\n                    focusElement = focusElement.rows[0].cells[0];\n                }\n\n                dom.remove(table);\n                this._resetElementResizing(this.editor);\n            } else if (rowParent.rows.length <= rows.length) {\n                focusElement = rowParent.nextSibling;\n\n                if (!focusElement) {\n                    focusElement = rowParent.previousSibling;\n                }\n\n                dom.remove(rowParent);\n            } else {\n                this._mapColIndices(table);\n\n                for (var i = 0; i < rows.length; i++) {\n                    row = rows[i];\n                    dom.removeTextSiblings(row);\n                    focusElement = dom.next(row) || dom.prev(row);\n                    focusElement = focusElement.cells[0];\n\n                    // IE needs to focus the new row before removing the old one\n                    this._focusElement(range, focusElement);\n                    focusElement = null;\n\n                    this._handleRowSpanCells(table, row);\n\n                    dom.remove(row);\n                }\n\n                this._clearColIndexAttr(table);\n            }\n\n            if ($(table).find(\"[headers]\").length > 0) {\n                this._associateHeaderIds(table);\n            } else if (dom.is(rowParent, THEAD) && $(table).find(\"[scope]\").length > 0) {\n                this._adjustColgroups(rowParent.rows[0], table);\n            }\n\n            if (focusElement) {\n                this._focusElement(range, focusElement);\n            }\n\n            this._resetElementResizing(this.editor);\n        },\n        _focusElement: function(range, node) {\n            range.setStart(node, 0);\n            range.collapse(true);\n            this.editor.selectRange(range);\n        },\n        _handleRowSpanCells: function(table, row) {\n            var index, cell, adjacentCell, nextRow, rowIndex = dom.findNodeIndex(row, true),\n                firstRow = table.rows[0],\n                lastCell = firstRow.cells[firstRow.cells.length - 1],\n                lastIndex = parseInt(lastCell.getAttribute(\"col-index\"),10) + lastCell.colSpan - 1;\n\n            for (index = 0; index <= lastIndex; index = index + cell.prop(\"colSpan\")) {\n                cell = $(row).find(\"[col-index=\" + index + \"]\");\n\n                if (cell.length && cell.prop(\"rowSpan\") > 1) {\n                    nextRow = table.rows[rowIndex + 1];\n                    adjacentCell = $(nextRow).find(\"[col-index=\" + (index + 1) + \"]\");\n\n                    if (adjacentCell.length) {\n                        adjacentCell.before(cell);\n                    } else {\n                        $(nextRow).append(cell);\n                    }\n                    this._reduceRowSpan(cell);\n                }\n\n                if (!cell.length) {\n                    cell = this._findRowSpanCell(row.parentElement, rowIndex, index);\n                    this._reduceRowSpan(cell);\n                }\n            }\n        },\n        _reduceRowSpan: function(td) {\n            var rowSpanValue = td.prop(\"rowSpan\") - 1;\n\n            if (rowSpanValue <= 1) {\n                td.removeAttr(ROWSPAN);\n                if (td.attr(SCOPE) === ROWGROUP) {\n                    td.attr(SCOPE, ROW);\n                }\n            } else {\n                td.attr(ROWSPAN, rowSpanValue);\n            }\n        }\n    });\n\n    var DeleteColumnCommand = TableModificationCommand.extend({\n        exec: function() {\n            var range = this.lockRange(),\n                td = dom.closest(range.endContainer, [TD, TH]),\n                table = dom.closest(td, TABLE),\n                rows = table && table.rows,\n                columnIndex = dom.findNodeIndex(td, true),\n                columnCount = rows && rows[0].cells.length,\n                colElements = table.getElementsByTagName(COL),\n                colgroupElements = table.getElementsByTagName(COLGROUP),\n                focusElement, i, cell, x;\n\n            if (!td || (this.immutables() && Editor.Immutables.immutableParent(td))) {\n                this.releaseRange(range);\n                return;\n            }\n\n            if (columnCount == 1 || td.colSpan == columnCount) {\n                focusElement = dom.next(table);\n                if (!focusElement || dom.insignificant(focusElement)) {\n                    focusElement = dom.prev(table);\n                }\n\n                if (focusElement && focusElement.rows) {\n                    focusElement = focusElement.rows[0].cells[0];\n                }\n\n                dom.remove(table);\n                this._resetElementResizing(this.editor);\n            } else {\n                dom.removeTextSiblings(td);\n\n                focusElement = dom.next(td) || dom.prev(td);\n\n                this._mapColIndices(table);\n\n                columnIndex = parseInt(td.getAttribute(\"col-index\"), 10);\n\n                for (x = 0; x < td.colSpan; x++) {\n                    for (i = 0; i < rows.length; i = i + (cell.prop(\"rowSpan\") || 1)) {\n                        cell = $(rows[i]).find(\"[col-index=\" + (columnIndex + x) + \"]\");\n\n                        if (cell.length && cell.prop(\"colSpan\") <= 1) {\n                            cell.remove();\n                        } else {\n                            this._handleColSpanCells(rows[i], columnIndex + x);\n                        }\n                    }\n                }\n\n                this._clearColIndexAttr(table);\n            }\n\n            if (colElements.length > 0 || colgroupElements.length > 0) {\n                this._adjustColgroups(rows[0], table);\n            }\n\n            if ($(table).find(\"[headers]\").length > 0) {\n                this._associateHeaderIds(table);\n            }\n\n            if (focusElement) {\n                range.setStart(focusElement, 0);\n                range.collapse(true);\n                this.editor.selectRange(range);\n            }\n\n            this._resetElementResizing(this.editor);\n        },\n        _handleColSpanCells: function(row, colIndex) {\n            var cell = $(row).find(\"[col-index=\" + colIndex + \"]\");\n\n            if (cell.length && cell.prop(\"colSpan\") > 1) {\n                var clone = cell.clone(true);\n                cell.after(clone);\n                this._reduceColSpan(clone);\n                clone.attr(\"col-index\", parseInt(cell.attr(\"col-index\"),10) + 1);\n                cell.remove();\n                return;\n            }\n\n            for (var i = colIndex; i >= 0; i--) {\n                cell = $(row).find(\"[col-index=\" + i + \"]\");\n\n                if (cell.length) {\n                    this._reduceColSpan(cell);\n                    cell.attr(\"col-index\", parseInt(cell.attr(\"col-index\"),10) + 1);\n                    return;\n                }\n            }\n        },\n        _reduceColSpan: function(td) {\n            var colSpanValue = td.prop(\"colSpan\") - 1;\n\n            if (colSpanValue <= 1) {\n                td.removeAttr(COLSPAN);\n                if (td.attr(SCOPE) === COLGROUP) {\n                    td.attr(SCOPE, COL);\n                }\n            } else {\n                td.attr(COLSPAN, colSpanValue);\n            }\n        }\n    });\n\n    var MergeCellsHorizontallyCommand = TableModificationCommand.extend({\n        exec: function() {\n            var range = this.lockRange(),\n                td = dom.closest(range.endContainer, [TD, TH]),\n                table, row, columnIndex, nextTd, colspan;\n\n                if (!td) {\n                    this.releaseRange(range);\n                    return;\n                }\n\n                table = dom.closest(td, TABLE);\n                row = td.parentNode;\n                columnIndex = dom.findNodeIndex(td, true);\n                nextTd = row.children[columnIndex + 1];\n\n                if (this.immutables() && Editor.Immutables.immutableParent(td)) {\n                    this.releaseRange(range);\n                    return;\n                }\n\n                this._mapColIndices(table);\n\n                columnIndex = parseInt($(td).attr(\"col-index\"), 10);\n                nextTd = $(row).find(\"[col-index=\" + (columnIndex + 1 + this._getColspan(td) - 1) + \"]\").get(0);\n\n                if (!nextTd || nextTd.rowSpan !== td.rowSpan || td.tagName !== nextTd.tagName) {\n                    this._clearColIndexAttr(table);\n                    this.releaseRange(range);\n                    return;\n                }\n\n                colspan = this._getColspan(td) + this._getColspan(nextTd);\n\n                $(td).prop(COLSPAN, colspan)\n                     .append(dom.emptyNode(nextTd) ? \"\" : \"<br/>\" + nextTd.innerHTML);\n\n                $(td).width(td.offsetWidth);\n                $(nextTd).remove();\n\n                if (td.getAttribute(SCOPE) === COL) {\n                    td.setAttribute(SCOPE, COLGROUP);\n                }\n                if (td.getAttribute(SCOPE) === COLGROUP) {\n                    this._adjustColgroups(row, table);\n                }\n\n                if ($(table).find(\"[headers]\").length > 0) {\n                    this._associateHeaderIds(table);\n                }\n\n                this._clearColIndexAttr(table);\n                this.releaseRange(range);\n                this._resetElementResizing(this.editor);\n        },\n        _getColspan: function(td) {\n            return parseInt(td.getAttribute(COLSPAN), 10) || 1;\n        }\n    });\n\n    var MergeCellsVerticallyCommand = TableModificationCommand.extend({\n        exec: function() {\n            var range = this.lockRange(),\n                td = dom.closest(range.endContainer, [TD, TH]),\n                tr, parent, table, columnIndex, rowIndex, targetRow, bottomTd;\n\n                if (!td) {\n                    this.releaseRange(range);\n                    return;\n                }\n\n                tr = dom.closest(td, TR);\n                parent = dom.closest(td, [THEAD, TBODY]);\n                table = dom.closest(td, TABLE);\n                columnIndex = dom.findNodeIndex(td, true);\n                rowIndex = dom.findNodeIndex(tr, true);\n\n                if (rowIndex + 1 === parent.rows.length) {\n                    this.releaseRange(range);\n                    return;\n                }\n\n                targetRow = parent.rows[rowIndex + this._getRowspan(td)];\n                bottomTd = targetRow && targetRow.children[columnIndex];\n\n                if (this.immutables() && Editor.Immutables.immutableParent(td)) {\n                    this.releaseRange(range);\n                    return;\n                }\n\n                this._mapColIndices(table);\n\n                columnIndex = $(td).attr(\"col-index\");\n                bottomTd = $(targetRow).find(\"[col-index=\" + columnIndex + \"]\").get(0);\n\n                if (!bottomTd || bottomTd.colSpan !== td.colSpan || td.tagName !== bottomTd.tagName) {\n                    this._clearColIndexAttr(table);\n                    this.releaseRange(range);\n                    return;\n                }\n\n                $(td).prop(ROWSPAN, this._getRowspan(td) + this._getRowspan(bottomTd))\n                     .append(dom.emptyNode(bottomTd) ? \"\" : \"<br/>\" + bottomTd.innerHTML);\n\n                if (td.getAttribute(SCOPE) === ROW) {\n                    td.setAttribute(SCOPE, ROWGROUP);\n                }\n\n                $(bottomTd).remove();\n\n                if ($(table).find(\"[headers]\").length > 0) {\n                    this._associateHeaderIds(table);\n                }\n\n                this._clearColIndexAttr(table);\n                this.releaseRange(range);\n        },\n        _getRowspan: function(td) {\n            return parseInt(td.getAttribute(ROWSPAN), 10) || 1;\n        }\n    });\n\n    var SplitCellCommand = TableModificationCommand.extend({\n        exec: function() {\n            var range = this.lockRange(),\n                type = this.options.type,\n                attr = type === \"row\" ? COLSPAN : ROWSPAN,\n                td = dom.closest(range.endContainer, [TD, TH]),\n                parent = dom.closest(td, [THEAD, TBODY]),\n                table = dom.closest(td, TABLE),\n                emptyTd = dom.createEmptyNode(this.editor.document, td.nodeName.toLowerCase());\n\n            if (!td || (this.immutables() && Editor.Immutables.immutableParent(td))) {\n                this.releaseRange(range);\n                return;\n            }\n\n            this._mapColIndices(table);\n\n            if (type === \"row\" && $(td).is(\"[\" + attr + \"]\")) {\n                this._splitCellHorizontally(td, parent, attr, emptyTd);\n            } else if (type === \"column\" && $(td).is(\"[\" + attr + \"]\")) {\n                this._splitCellVertically(td, parent, attr, emptyTd);\n            }\n\n            if ($(td).prop(attr.toLowerCase()) <= 1) {\n                $(td).removeAttr(attr);\n            }\n\n            if ($(table).find(\"[headers]\").length > 0) {\n                this._associateHeaderIds(table);\n            }\n\n            this._clearColIndexAttr(table);\n            this.releaseRange(range);\n        },\n        _getRowspanValue: function(td) {\n            return parseInt(td.getAttribute(ROWSPAN), 10);\n        },\n        _getColspanValue: function(td) {\n            return parseInt(td.getAttribute(COLSPAN), 10);\n        },\n        _splitCellHorizontally: function(td, parent, attr, emptyTd) {\n            var rowSpan = td.rowSpan,\n                colSpan = td.colSpan,\n                tdToAdd = $(emptyTd),\n                colSpanResult = Math.floor(colSpan / 2);\n\n                if (colSpanResult > 1) {\n                    tdToAdd.attr(COLSPAN, colSpanResult);\n                }\n\n                if (rowSpan > 1) {\n                    tdToAdd.attr(ROWSPAN, rowSpan);\n                }\n\n                $(td).prop(attr, colSpan - colSpanResult)\n                    .after(tdToAdd);\n\n                $(td).width(td.offsetWidth);\n                tdToAdd.width(tdToAdd[0].offsetWidth);\n\n                if (td.hasAttribute(SCOPE)) {\n                    if (td.getAttribute(SCOPE) === COLGROUP) {\n                        tdToAdd.attr(SCOPE, COL);\n                        if (!td.getAttribute(COLSPAN) || td.getAttribute(COLSPAN) === \"1\") {\n                            td.setAttribute(SCOPE, COL);\n                        }\n\n                        this._adjustColgroups(td.parentNode, parent.parentNode);\n                    } else {\n                        tdToAdd.attr(SCOPE, td.getAttribute(SCOPE));\n                    }\n                }\n        },\n        _splitCellVertically: function(td, parent, attr, emptyTd) {\n            var tr = dom.closest(td,TR),\n                columnIndex = parseInt($(td).attr(\"col-index\"), 10),\n                rowIndex = dom.findNodeIndex(tr, true),\n                rowSpan = td.rowSpan,\n                colSpan = td.colSpan,\n                rowSpanResult = Math.floor(rowSpan / 2),\n                targetRow = $(parent).find(TR).eq(rowIndex + rowSpan - rowSpanResult),\n                nextTd = this._findNextTdInRow(targetRow, columnIndex + colSpan),\n                tdToAdd = $(emptyTd);\n\n                if (rowSpanResult > 1) {\n                    tdToAdd.attr(ROWSPAN, rowSpanResult);\n                }\n                if (colSpan > 1) {\n                    tdToAdd.attr(COLSPAN, colSpan);\n                }\n\n                if (nextTd && nextTd.length) {\n                    nextTd.before(tdToAdd);\n                } else {\n                    targetRow.append(tdToAdd);\n                }\n\n                $(td).prop(attr, rowSpan - rowSpanResult);\n\n                if (td.hasAttribute(SCOPE)) {\n                    if (td.getAttribute(SCOPE) === ROWGROUP) {\n                        tdToAdd.attr(SCOPE, ROW);\n                        if (!td.getAttribute(ROWSPAN) || td.getAttribute(ROWSPAN) === \"1\") {\n                            td.setAttribute(SCOPE, ROW);\n                        }\n                    } else {\n                        tdToAdd.attr(SCOPE, td.getAttribute(SCOPE));\n                    }\n                }\n        }\n    });\n\n    var TableModificationTool = Tool.extend({\n        command: function(options) {\n            var commandsMap = {\n                row: {\n                    insert: InsertRowCommand,\n                    \"delete\": DeleteRowCommand,\n                    merge: MergeCellsHorizontallyCommand,\n                    split: SplitCellCommand\n                },\n                column: {\n                    insert: InsertColumnCommand,\n                    \"delete\": DeleteColumnCommand,\n                    merge: MergeCellsVerticallyCommand,\n                    split: SplitCellCommand\n                }\n            };\n\n            options = extend(options, this.options);\n            options.action = options.action || \"insert\";\n\n            return new commandsMap[options.type][options.action](options);\n        },\n        initialize: function(ui, options) {\n            Tool.fn.initialize.call(this, ui, options);\n            ui.addClass(\"k-disabled\");\n            ui.attr(\"disabled\", \"disabled\");\n        },\n\n        update: function(ui, nodes) {\n            var isFormatted = !tableFormatFinder.isFormatted(nodes);\n\n            if (isFormatted === true) {\n                ui.parent().addClass(\"k-hidden k-disabled\");\n                ui.attr(\"disabled\", \"disabled\");\n                ui.addClass(\"k-disabled\");\n            } else {\n                ui.parent().removeClass(\"k-hidden k-disabled\");\n                ui.prop(\"disabled\", false);\n                ui.removeClass(\"k-disabled\");\n            }\n        }\n    });\n\n    var TableFormatCommand = FormatCommand.extend({\n        exec: function() {\n            var that = this;\n            var editor = that.editor;\n\n            FormatCommand.fn.exec.call(this);\n\n            if (editor.elementResizing) {\n                editor.elementResizing._showResizeHandles();\n            }\n        }\n    });\n\n    // var tableAlignFormatFinder = BlockFormatFinder.extend({\n\n    // });\n\n    var TableFormatTool = BlockFormatTool.extend({\n        initialize: function(ui, options) {\n            BlockFormatTool.fn.initialize.call(this, ui, options);\n            ui.addClass(\"k-disabled\");\n            ui.attr(\"disabled\", \"disabled\");\n        },\n        update: function(ui, nodes) {\n            var isTable = !tableFormatFinder.isFormatted(nodes);\n            var isFormatted = this.options.finder.isFormatted(nodes, this.isTable);\n\n            if (isTable === true) {\n                ui.parent().addClass(\"k-hidden k-disabled\");\n                ui.attr(\"disabled\", \"disabled\");\n                ui.addClass(\"k-disabled\");\n            } else {\n                ui.parent().removeClass(\"k-hidden k-disabled\");\n                ui.prop(\"disabled\", false);\n                ui.removeClass(\"k-disabled\");\n            }\n\n            ui.toggleClass(\"k-selected\", isFormatted);\n            ui.attr(\"aria-pressed\", isFormatted);\n        },\n        command: function(commandArguments) {\n            var that = this;\n\n            return new TableFormatCommand(extend(commandArguments, {\n                formatter: that.options.formatter\n            }));\n        },\n        isTable: function(node) {\n            return dom.is(node, \"table\");\n        }\n    });\n\n    extend(kendo.ui.editor, {\n        PopupTool: PopupTool,\n        TableCommand: TableCommand,\n        InsertTableTool: InsertTableTool,\n        TableFormatTool: TableFormatTool,\n        TableFormatCommand: TableFormatCommand,\n        TableModificationTool: TableModificationTool,\n        InsertRowCommand: InsertRowCommand,\n        InsertColumnCommand: InsertColumnCommand,\n        DeleteRowCommand: DeleteRowCommand,\n        DeleteColumnCommand: DeleteColumnCommand,\n        MergeCellsHorizontallyCommand: MergeCellsHorizontallyCommand,\n        MergeCellsVerticallyCommand: MergeCellsVerticallyCommand,\n        SplitCellCommand: SplitCellCommand\n    });\n\n    registerTool(\"createTable\", new InsertTableTool({ template: new ToolTemplate({ template: EditorUtils.buttonTemplate, popup: true, title: \"Create table\" }) }));\n\n    registerTool(\"addColumnLeft\", new TableModificationTool({ type: \"column\", position: \"before\", template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Add column on the left\" }) }));\n    registerTool(\"addColumnRight\", new TableModificationTool({ type: \"column\", template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Add column on the right\" }) }));\n    registerTool(\"addRowAbove\", new TableModificationTool({ type: \"row\", position: \"before\", template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Add row above\" }) }));\n    registerTool(\"addRowBelow\", new TableModificationTool({ type: \"row\", template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Add row below\" }) }));\n    registerTool(\"deleteRow\", new TableModificationTool({ type: \"row\", action: \"delete\", template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Delete row\" }) }));\n    registerTool(\"deleteColumn\", new TableModificationTool({ type: \"column\", action: \"delete\", template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Delete column\" }) }));\n    registerTool(\"mergeCellsHorizontally\", new TableModificationTool({ type: \"row\", action: \"merge\", template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Merge Cell Right\" }) }));\n    registerTool(\"mergeCellsVertically\", new TableModificationTool({ type: \"column\", action: \"merge\", template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Merge Cell Down\" }) }));\n    registerTool(\"splitCellHorizontally\", new TableModificationTool({ type: \"row\", action: \"split\", template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Split Cell\" }) }));\n    registerTool(\"splitCellVertically\", new TableModificationTool({ type: \"column\", action: \"split\", template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Split Cell\" }) }));\n\n    registerFormat(\"tableAlignLeft\", [\n        { tags: [\"table\"], attr: { style: { marginLeft: \"\", marginRight: \"auto\" } } },\n        { tags: [\"table\"], attr: { align: \"left\" } }\n    ]);\n    registerTool(\"tableAlignLeft\", new TableFormatTool({\n        format: formats.tableAlignLeft,\n        template: new ToolTemplate({\n            template: EditorUtils.buttonTemplate,\n            title: \"Table Align Left\"\n        })\n    }));\n\n    registerFormat(\"tableAlignCenter\", [\n        { tags: [\"table\"], attr: { style: { marginLeft: \"auto\", marginRight: \"auto\" } } },\n        { tags: [\"table\"], attr: { align: \"center\" } }\n    ]);\n    registerTool(\"tableAlignCenter\", new TableFormatTool({\n        format: formats.tableAlignCenter,\n        template: new ToolTemplate({\n            template: EditorUtils.buttonTemplate,\n            title: \"Table Align Center\"\n        })\n    }));\n\n    registerFormat(\"tableAlignRight\", [\n        { tags: [\"table\"], attr: { style: { marginLeft: \"auto\", marginRight: \"\" } } },\n        { tags: [\"table\"], attr: { align: \"right\" } }\n    ]);\n    registerTool(\"tableAlignRight\", new TableFormatTool({\n        format: formats.tableAlignRight,\n        template: new ToolTemplate({\n            template: EditorUtils.buttonTemplate,\n            title: \"Table Align Left\"\n        })\n    }));\n\n    })(window.kendo.jQuery);\n\n    (function($) {\n\n        // Imports ================================================================\n        var kendo = window.kendo,\n            Class = kendo.Class,\n            editorNS = kendo.ui.editor,\n            RangeUtils = editorNS.RangeUtils,\n            dom = editorNS.Dom,\n            RestorePoint = editorNS.RestorePoint,\n            Marker = editorNS.Marker,\n            browser = kendo.support.browser,\n            extend = $.extend;\n\n    var Clipboard = Class.extend({\n        init: function(editor) {\n            this.editor = editor;\n            var pasteCleanup = editor.options.pasteCleanup;\n            this.cleaners = [\n                new ScriptCleaner(pasteCleanup),\n                new TabCleaner(pasteCleanup),\n                new MSWordFormatCleaner(pasteCleanup),\n                new WebkitFormatCleaner(pasteCleanup),\n                new HtmlTagsCleaner(pasteCleanup),\n                new HtmlAttrCleaner(pasteCleanup),\n                new HtmlContentCleaner(pasteCleanup),\n                new CustomCleaner(pasteCleanup) //always keep at end\n            ];\n        },\n\n        htmlToFragment: function(html) {\n            var editor = this.editor,\n                doc = editor.document,\n                container = dom.create(doc, 'div'),\n                fragment = doc.createDocumentFragment();\n\n            container.innerHTML = html;\n\n            while (container.firstChild) {\n                fragment.appendChild(container.firstChild);\n            }\n\n            return fragment;\n        },\n\n        isBlock: function(html) {\n            return (/<(div|p|ul|ol|table|h[1-6])/i).test(html);\n        },\n\n        _startModification: function() {\n            var range;\n            var restorePoint;\n            var editor = this.editor;\n\n            if (this._inProgress) {\n                return;\n            }\n\n            this._inProgress = true;\n\n            range = editor.getRange();\n            restorePoint = new RestorePoint(range, editor.body);\n\n            dom.persistScrollTop(editor.document);\n\n            return { range: range, restorePoint: restorePoint };\n        },\n\n        _endModification: function(modificationInfo) {\n            editorNS._finishUpdate(this.editor, modificationInfo.restorePoint);\n\n            this.editor._selectionChange();\n\n            this._inProgress = false;\n        },\n\n        _contentModification: function(before, after) {\n            var that = this;\n            var editor = that.editor;\n            var modificationInfo = that._startModification();\n\n            if (!modificationInfo) {\n                return;\n            }\n\n            before.call(that, editor, modificationInfo.range);\n\n            setTimeout(function() {\n                after.call(that, editor, modificationInfo.range);\n\n                that._endModification(modificationInfo);\n            });\n        },\n\n        _removeBomNodes: function(range) {\n            var nodes = RangeUtils.textNodes(range);\n\n            for (var i = 0; i < nodes.length; i++) {\n                nodes[i].nodeValue = dom.stripBom(nodes[i].nodeValue) || nodes[i].nodeValue;\n            }\n        },\n\n        _onBeforeCopy: function(range) {\n            var marker = new Marker();\n            marker.add(range);\n\n            this._removeBomNodes(range);\n\n            marker.remove(range);\n\n            this.editor.selectRange(range);\n        },\n\n        oncopy: function() {\n            this._onBeforeCopy(this.editor.getRange());\n        },\n\n        oncut: function() {\n            this._onBeforeCopy(this.editor.getRange());\n            this._contentModification($.noop, $.noop);\n        },\n\n        _fileToDataURL: function(blob) {\n            var deferred = $.Deferred();\n\n            var reader = new FileReader();\n\n            if (!(blob instanceof window.File) && blob.getAsFile) {\n                blob = blob.getAsFile();\n            }\n\n            reader.onload = deferred.resolve.bind(deferred);\n\n            reader.readAsDataURL(blob);\n\n            return deferred.promise();\n        },\n\n        _triggerPaste: function(html, options) {\n            var args = { html: html || \"\" };\n\n            args.html = args.html.replace(/\\ufeff/g, \"\");\n\n            this.editor.trigger(\"paste\", args);\n\n            this.paste(args.html, options || {});\n        },\n\n        _handleImagePaste: function(e) {\n            if (!('FileReader' in window) || (browser.msie && browser.version > 10)) {\n                return;\n            }\n\n            var clipboardData = e.clipboardData || e.originalEvent.clipboardData ||\n                        window.clipboardData || {};\n\n            var items = clipboardData.items || clipboardData.files;\n\n            return this._insertImages(items);\n        },\n\n        _insertImages: function(items) {\n            if (!items) {\n                return;\n            }\n\n            var images = $.grep(items, function(item) { return (/^image\\//i).test(item.type); });\n            var html = $.grep(items, function(item) { return (/^text\\/html/i).test(item.type); });\n\n            if (html.length || !images.length) {\n                return;\n            }\n\n            var modificationInfo = this._startModification();\n\n            if (!modificationInfo) {\n                return;\n            }\n\n            $.when.apply($, $.map(images, this._fileToDataURL))\n                .done((function() {\n                    var results = Array.prototype.slice.call(arguments);\n                    var html = $.map(results, function(e) {\n                        return '<img src=\"' + e.target.result + '\" />';\n                    }).join(\"\");\n\n                    this._triggerPaste(html);\n\n                    this._endModification(modificationInfo);\n                }).bind(this));\n\n            return true;\n        },\n\n        onpaste: function(e) {\n            if (this.editor.body.contentEditable === \"false\") {\n                return;\n            }\n\n            if (this._handleImagePaste(e)) {\n                e.preventDefault();\n                return;\n            }\n\n            this.expandImmutablesIn();\n\n            this._contentModification(\n                function beforePaste(editor, range) {\n                    var clipboardNode = dom.create(editor.document, 'div', {\n                            className: 'k-paste-container',\n                            innerHTML: \"\\ufeff\"\n                        });\n                    var browser = kendo.support.browser;\n                    var body = editor.body;\n\n                    this._decoreateClipboardNode(clipboardNode, body);\n\n                    body.appendChild(clipboardNode);\n\n                    //Browser scrolls to clipboardNode\n                    if (browser.webkit) {\n                        this._moveToCaretPosition(clipboardNode, range);\n                    }\n\n                    // text ranges are slow in IE10-, DOM ranges are buggy in IE9-10\n                    if (browser.msie && browser.version < 11) {\n                        e.preventDefault();\n                        var r = editor.createRange();\n                        r.selectNodeContents(clipboardNode);\n                        editor.selectRange(r);\n                        var textRange = editor.document.body.createTextRange();\n                        textRange.moveToElementText(clipboardNode);\n                        $(body).off('paste');\n                        textRange.execCommand('Paste');\n                        $(body).on('paste', this.onpaste.bind(this));\n                    } else {\n                        var clipboardRange = editor.createRange();\n                        clipboardRange.selectNodeContents(clipboardNode);\n                        editor.selectRange(clipboardRange);\n                    }\n\n                    range.deleteContents();\n                },\n                function afterPaste(editor, range) {\n                    var html = \"\", containers;\n\n                    editor.selectRange(range);\n\n                    containers = $(editor.body).children(\".k-paste-container\");\n\n                    containers.each(function() {\n                        var lastChild = this.lastChild;\n\n                        if (lastChild && dom.is(lastChild, 'br')) {\n                            dom.remove(lastChild);\n                        }\n\n                        html += this.innerHTML;\n                    });\n\n                    containers.remove();\n\n                    this._triggerPaste(html, { clean: true });\n                }\n            );\n        },\n        ondragover: function(e) {\n            if (browser.msie || browser.edge) {\n                e.stopPropagation();\n                e.preventDefault();\n            }\n        },\n        ondrop: function(e) {\n            if (!('FileReader' in window)) {\n                return;\n            }\n\n            var dataTransfer = (e.originalEvent || e).dataTransfer || {};\n            var items = dataTransfer.items || dataTransfer.files;\n\n            if (this._insertImages(items)) {\n                e.preventDefault();\n            }\n        },\n        _decoreateClipboardNode: function(node, body) {\n            if (!browser.msie && !browser.webkit) {\n                return;\n            }\n\n            node = $(node);\n            node.css({\n                borderWidth: \"0px\",\n                width: \"0px\",\n                height: \"0px\",\n                overflow: \"hidden\",\n                margin: \"0\",\n                padding: \"0\"\n            });\n\n            if (browser.msie) {\n                //node inherits BODY styles and this causes the browser to add additional\n                var documentElement = $(body.ownerDocument.documentElement);\n\n                node.css({\n                    fontVariant: \"normal\",\n                    fontWeight: \"normal\",\n                    lineSpacing: \"normal\",\n                    lineHeight: \"normal\",\n                    textDecoration: \"none\"\n                });\n                var color = documentElement.css(\"color\");\n                if (color) {\n                    node.css(\"color\", color);\n                }\n                var fontFamily = documentElement.css(\"fontFamily\");\n                if (fontFamily) {\n                    node.css(\"fontFamily\", fontFamily);\n                }\n                var fontSize = documentElement.css(\"fontSize\");\n                if (fontSize) {\n                    node.css(\"fontSize\", fontSize);\n                }\n            }\n        },\n        _moveToCaretPosition: function(node, range) {\n            var that = this;\n            var body = that.editor.body;\n            var nodeOffset = dom.offset(node, body);\n            var caretOffset = that._caretOffset(range, body);\n            var translateX = caretOffset.left - nodeOffset.left;\n            var translateY = caretOffset.top - nodeOffset.top;\n            var translate = \"translate(\" + translateX + \"px,\" + translateY + \"px)\";\n\n            $(node).css({\n                \"-webkit-transform\": translate,\n                \"transform\": translate\n            });\n        },\n        _caretOffset: function(range, body) {\n            var editor = this.editor;\n            var caret = dom.create(editor.document, 'span', { innerHTML: \"\\ufeff\" });\n            var startContainer = range.startContainer;\n            var rangeChanged;\n\n            if (range.collapsed) {\n                var isStartTextNode = dom.isDataNode(startContainer);\n                if (isStartTextNode && (dom.isBom(startContainer) || range.startOffset === 0)) {\n                    dom.insertBefore(caret, startContainer);\n                } else if (isStartTextNode && range.startOffset === startContainer.length) {\n                    dom.insertAfter(caret, startContainer);\n                } else {\n                    range.insertNode(caret);\n                    rangeChanged = true;\n                }\n            } else {\n                startContainer = startContainer === body ?\n                    startContainer.childNodes[range.startOffset] : startContainer;\n                dom.insertBefore(caret, startContainer);\n            }\n\n            var offset = dom.offset(caret, body);\n            var prev = caret.previousSibling;\n            var next = caret.nextSibling;\n\n            dom.remove(caret);\n\n            if (rangeChanged && dom.isDataNode(prev) && dom.isDataNode(next) && !dom.isBom(prev) && !dom.isBom(next)) {\n                var prevLength = prev.length;\n                next.data = prev.data + next.data;\n                range.setStart(next, prevLength);\n                dom.remove(prev);\n\n                range.collapse(true);\n                editor.selectRange(range);\n            }\n\n            return offset;\n        },\n\n        expandImmutablesIn: function(range) {\n            var editor = this.editor;\n            if (editor && editor.options.immutables) {\n                var body = editor.body;\n                range = range || editor.getRange();\n                kendo.ui.editor.Immutables.expandImmutablesIn(range);\n                if (range.startContainer === body && range.startOffset === 0) {\n                    var doc = body.ownerDocument;\n                    var bomNode = doc.createTextNode(\"\\ufeff\");\n                    body.insertBefore(bomNode, body.childNodes[0]);\n                    range.setStartBefore(bomNode);\n                }\n                editor.selectRange(range);\n            }\n        },\n\n        splittableParent: function(block, node) {\n            var parentNode, body;\n\n            if (block) {\n                return dom.closestEditableOfType(node, ['p', 'ul', 'ol']) || node.parentNode;\n            }\n\n            parentNode = node.parentNode;\n            body = node.ownerDocument.body;\n\n            if (dom.isInline(parentNode)) {\n                while (parentNode.parentNode != body && !dom.isBlock(parentNode.parentNode)) {\n                    parentNode = parentNode.parentNode;\n                }\n            }\n\n            return parentNode;\n        },\n\n        paste: function(html, options) {\n            var editor = this.editor,\n                i, l, childNodes;\n\n            this.expandImmutablesIn();\n\n            options = extend({ clean: false, split: true }, options);\n\n            if (!options.skipCleaners) {\n                for (i = 0, l = this.cleaners.length; i < l; i++) {\n                    if (this.cleaners[i].applicable(html)) {\n                        html = this.cleaners[i].clean(html);\n                    }\n                }\n            }\n\n            if (options.clean) {\n                // remove br elements which immediately precede block elements\n                html = html.replace(/(<br>(\\s|&nbsp;)*)+(<\\/?(div|p|li|col|t))/ig, \"$3\");\n                // remove empty inline elements\n                html = html.replace(/<(a|span)[^>]*><\\/\\1>/ig, \"\");\n            }\n\n            html = html.replace(/<(a|span|font)([^>]*)> <\\/\\1>/ig, \"<$1$2>&nbsp;</$1>\");\n\n            // It is possible in IE to copy just <li> tags\n            html = html.replace(/^<li/i, '<ul><li').replace(/li>$/g, 'li></ul>');\n\n            var block = this.isBlock(html);\n\n            editor.focus();\n            var range = editor.getRange();\n            range.deleteContents();\n\n            if (range.startContainer == editor.document) {\n                range.selectNodeContents(editor.body);\n            }\n\n            var marker = new Marker();\n            var caret = marker.addCaret(range);\n\n            var parent = this.splittableParent(block, caret);\n            var unwrap = false;\n            var splittable = parent != editor.body && !dom.is(parent, \"td\");\n\n            if (options.split && splittable && (block || dom.isInline(parent))) {\n                range.selectNode(caret);\n                RangeUtils.split(range, parent, true);\n                unwrap = true;\n            }\n\n            var fragment = this.htmlToFragment(html);\n\n            if (fragment.firstChild && fragment.firstChild.className === \"k-paste-container\") {\n                var fragmentsHtml = [];\n                for (i = 0, l = fragment.childNodes.length; i < l; i++) {\n                    fragmentsHtml.push(fragment.childNodes[i].innerHTML);\n                }\n\n                fragment = this.htmlToFragment(fragmentsHtml.join('<br />'));\n            }\n\n            childNodes = fragment.childNodes;\n\n            $(childNodes)\n                .filter(\"table\").addClass(\"k-table\").end()\n                .find(\"table\").addClass(\"k-table\");\n\n            $(childNodes).each(function(index, elm) {\n               if (dom.isBlock(elm) && !dom.isSelfClosing(elm) && elm.innerHTML === \"\") {\n                    elm.appendChild(editor.document.createTextNode(\"\\ufeff\"));\n               }\n            });\n\n            range.insertNode(fragment);\n\n            parent = this.splittableParent(block, caret);\n            if (unwrap) {\n                while (caret.parentNode != parent) {\n                    dom.unwrap(caret.parentNode);\n                }\n\n                dom.unwrap(caret.parentNode);\n            }\n\n            dom.normalize(range.commonAncestorContainer);\n            caret.style.display = 'inline';\n            dom.restoreScrollTop(editor.document);\n            dom.scrollTo(caret);\n            marker.removeCaret(range);\n\n            var rangeEnd = range.commonAncestorContainer.parentNode;\n            if (range.collapsed && dom.name(rangeEnd) == \"tbody\" || range.collapsed && dom.name(rangeEnd) == \"thead\") {\n                range.setStartAfter($(rangeEnd).closest(\"table\")[0]);\n                range.collapse(true);\n            }\n\n            var focusedTable = $(range.commonAncestorContainer.parentNode).closest(\"table\");\n\n            if (focusedTable.get(0)) {\n                var siblingNodes = focusedTable.parent().contents();\n                var lastSiblingIndex = siblingNodes.length - 1;\n                var lastSibling = siblingNodes.get(lastSiblingIndex);\n\n                while (lastSibling.nodeValue !== null && (lastSibling.nodeValue === \" \" || lastSibling.nodeValue === \"\")) {\n                    lastSiblingIndex -= 1;\n                    lastSibling = siblingNodes.get(lastSiblingIndex);\n                }\n\n                if (lastSibling === focusedTable.get(0) && !focusedTable.parents(\"table\").length) {\n                    dom.insertAfter(dom.createEmptyNode(editor.document, \"p\"), focusedTable[0]);\n                }\n            }\n\n            editor.selectRange(range);\n        }\n    });\n\n    var Cleaner = Class.extend({\n        init: function(options) {\n            this.options = options || {};\n            this.replacements = [];\n        },\n\n        clean: function(html, customReplacements) {\n            var that = this,\n                replacements = customReplacements || that.replacements,\n                i, l;\n\n            for (i = 0, l = replacements.length; i < l; i += 2) {\n                html = html.replace(replacements[i], replacements[i + 1]);\n            }\n\n            return html;\n        }\n    });\n\n    var ScriptCleaner = Cleaner.extend({\n        init: function(options) {\n            Cleaner.fn.init.call(this, options);\n\n            this.replacements = [\n                /<(\\/?)script([^>]*)>/i, \"<$1telerik:script$2>\"\n            ];\n        },\n\n        applicable: function(html) {\n            return !this.options.none && (/<script[^>]*>/i).test(html);\n        }\n    });\n\n    var TabCleaner = Cleaner.extend({\n        init: function(options) {\n            Cleaner.fn.init.call(this, options);\n\n            var replacement = ' ';\n            this.replacements = [\n                /<span\\s+class=\"Apple-tab-span\"[^>]*>\\s*<\\/span>/gi, replacement,\n                /\\t/gi, replacement,\n                /&nbsp;&nbsp; &nbsp;/gi, replacement\n            ];\n        },\n\n        applicable: function(html) {\n            return (/&nbsp;&nbsp; &nbsp;|class=\"?Apple-tab-span/i).test(html);\n        }\n    });\n\n    var MSWordFormatCleaner = Cleaner.extend({\n        init: function(options) {\n            Cleaner.fn.init.call(this, options);\n\n            this.junkReplacements = [\n                /<\\?xml[^>]*>/gi, '',\n                /<!--(.|\\n)*?-->/g, '', /* comments */\n                /&quot;/g, \"'\", /* encoded quotes (in attributes) */\n                /<o:p>&nbsp;<\\/o:p>/ig, '&nbsp;',\n                /<\\/?(meta|link|style|o:|v:|x:)[^>]*>((?:.|\\n)*?<\\/(meta|link|style|o:|v:|x:)[^>]*>)?/ig, '', /* external references and namespaced tags */\n                /<\\/o>/g, ''\n            ];\n            this.replacements = this.junkReplacements.concat([\n                /(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?(h[1-6]|hr|p|div|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|caption|address|pre|form|blockquote|dl|dt|dd|dir|fieldset)[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*/g, '$1',\n                /<br><br>/g, '<BR><BR>',\n                /<br>\\n/g, '<br/>',\n                /<br>(?!\\n)/g, ' ',\n                /<table([^>]*)>(\\s|&nbsp;)+<t/gi, '<table$1><t',\n                /<tr[^>]*>(\\s|&nbsp;)*<\\/tr>/gi, '',\n                /<tbody[^>]*>(\\s|&nbsp;)*<\\/tbody>/gi, '',\n                /<table[^>]*>(\\s|&nbsp;)*<\\/table>/gi, '',\n                /<BR><BR>/g, '<br>',\n                /^\\s*(&nbsp;)+/gi, '',\n                /(&nbsp;|<br[^>]*>)+\\s*$/gi, '',\n                /mso-[^;\"]*;?/ig, '', /* office-related CSS attributes */\n                /<(\\/?)b(\\s[^>]*)?>/ig, '<$1strong$2>',\n                /<(\\/?)font(\\s[^>]*)?>/ig, this.convertFontMatch,\n                /<(\\/?)i(\\s[^>]*)?>/ig, '<$1em$2>',\n                /style=([\"|'])\\s*\\1/g, '', /* empty style attributes */\n                /(<br[^>]*>)?\\n/g, function($0, $1) { return $1 ? $0 : ' '; } /* phantom extra line feeds */\n            ]);\n        },\n\n        convertFontMatch: function(match, closing, args) {\n            var faceRe = /face=['\"]([^'\"]+)['\"]/i;\n            var face = faceRe.exec(args);\n            var family = args && face && face[1];\n\n            if (closing) {\n                return '</span>';\n            } else if (family) {\n                return '<span style=\"font-family:' + family + '\">';\n            } else {\n                return '<span>';\n            }\n        },\n\n        applicable: function(html) {\n            return (/class=\"?Mso/i).test(html) ||\n                   (/style=\"[^\"]*mso-/i).test(html) ||\n                   (/urn:schemas-microsoft-com:office/).test(html);\n        },\n\n        stripEmptyAnchors: function(html) {\n            return html.replace(/<a([^>]*)>\\s*<\\/a>/ig, function(a, attributes) {\n                if (!attributes || attributes.indexOf(\"href\") < 0) {\n                    return \"\";\n                }\n\n                return a;\n            });\n        },\n\n        listType: function(p, listData) {\n            var html = p.innerHTML;\n            var text = dom.innerText(p);\n\n            var startingSymbol;\n            var matchSymbol = html.match(/^(?:<span [^>]*texhtml[^>]*>)?<span [^>]*(?:Symbol|Wingdings)[^>]*>([^<]+)/i);\n            var symbol = matchSymbol && matchSymbol[1];\n            var isNumber = /^[a-z\\d]/i.test(symbol);//including alpha-numeric and roman numerals\n\n            var trimStartText = function(text) {\n                return text.replace(/^(?:&nbsp;|[\\u00a0\\n\\r\\s])+/, '');\n            };\n\n            if (matchSymbol) {\n                startingSymbol = true;\n            }\n\n            html = html.replace(/<\\/?\\w+[^>]*>/g, '').replace(/&nbsp;/g, '\\u00a0');\n\n            if ((!startingSymbol && /^[\\u2022\\u00b7\\u00a7\\u00d8o]\\u00a0+/.test(html)) ||\n                (startingSymbol && /^.\\u00a0+/.test(html)) ||\n                (symbol && !isNumber && listData)) {\n                return {\n                    tag: 'ul',\n                    style: this._guessUnorderedListStyle(trimStartText(text))\n                };\n            }\n\n            if (/^\\s*\\w+[\\.\\)][\\u00a0 ]{2,}/.test(html)) {\n                return {\n                    tag: 'ol',\n                    style: this._guessOrderedListStyle(trimStartText(text))\n                };\n            }\n        },\n\n        _convertToLi: function(p) {\n            var content;\n\n            if (p.childNodes.length == 1) {\n                content = p.firstChild.nodeType === dom.nodeTypes.TEXT_NODE ? dom.innerText(p) : p.firstChild.innerHTML.replace(/^\\w+[\\.\\)](&nbsp;)+ /, \"\");\n                content = this._checkForBullet(content);\n            } else {\n                content = this._getHtmlNoBullet(p);\n            }\n\n            dom.remove(p);\n\n            return dom.create(document, 'li', { innerHTML: content });\n        },\n\n        _checkForBullet: function(html) {\n            var p = dom.create(document, 'p', { innerHTML: html });\n            var bulletRgx = /^\\s*\\w+[\\.\\)]\\s+/;\n\n            if (bulletRgx.test(p.innerText)) {\n                return this._getHtmlNoBullet(p);\n            }\n\n            return html;\n        },\n\n        _getHtmlNoBullet: function(element) {\n            var content,\n                name = dom.name(element);\n\n            dom.remove(element.firstChild);\n\n            // check for roman numerals\n            if (element.firstChild.nodeType == 3) {\n                if (/^[ivxlcdm]+\\.$/i.test(element.firstChild.nodeValue)) {\n                    dom.remove(element.firstChild);\n                }\n            }\n\n            if (/^(&nbsp;|\\s)+$/i.test(element.firstChild.innerHTML)) {\n                dom.remove(element.firstChild);\n            }\n\n            if (name != \"p\") {\n                content = \"<\" + name + \">\" + element.innerHTML + \"</\" + name + \">\";\n            } else {\n                content = element.innerHTML;\n            }\n\n            return content;\n        },\n\n        _guessUnorderedListStyle: function(symbol) {\n            if (/^[\\u2022\\u00b7\\u00FC\\u00D8\\u002dv-]/.test(symbol)) {\n                return null;//return \"disc\"; //default CSS value\n            } else if (/^o/.test(symbol)) {\n                return \"circle\";\n            } else {\n                return \"square\";\n            }\n        },\n        _guessOrderedListStyle: function(symbol) {\n            var listType = null;\n            if (!/^\\d/.test(symbol)) {\n                listType = (/^[a-z]/.test(symbol) ? 'lower-' : 'upper-') +\n                           (/^[ivxlcdm]/i.test(symbol) ? 'roman' : 'alpha');\n            }\n\n            return listType;\n        },\n\n        extractListLevels: function(html) {\n            var msoListRegExp = /style=['\"]?[^'\"]*?mso-list:\\s?[a-zA-Z]+(\\d+)\\s[a-zA-Z]+(\\d+)\\s(\\w+)/gi;\n\n            html = html.replace(msoListRegExp, function(match, list, level) {\n                return kendo.format('data-list=\"{0}\" data-level=\"{1}\" {2}', list, level, match);\n            });\n\n            return html;\n        },\n\n        _createList: function(type, styleType) {\n            return dom.create(document, type, {\n                style: { listStyleType: styleType }\n            });\n        },\n\n        lists: function(placeholder) {\n            var blockChildren = $(placeholder).find(dom.blockElements.join(',')),\n                lastMargin = -1,\n                name,\n                levels = {},\n                li,\n                rootMargin,\n                rootIndex,\n                lastRootLi,\n                isLastRootLi,\n                rootList,\n                i, p, type, margin, list, listData,\n                acceptedNameTags = [\"p\", \"h1\", \"h2\", \"h3\", \"h4\", \"h5\", \"h6\"],\n                isParentTable = false;\n\n            for (i = 0; i < blockChildren.length; i++) {\n                p = blockChildren[i];\n                listData = $(p).data();\n                var listIndex = listData.list;\n                name = dom.name(p);\n                isParentTable = !!$(p).parents(\"table\").length;\n\n                if (isParentTable) {\n                    continue;\n                }\n\n                var listType = this.listType(p, listData);\n                type = listType && listType.tag;\n\n                if (!type || acceptedNameTags.indexOf(name) < 0) {\n                    if (!p.innerHTML) {\n                        dom.remove(p);\n                    } else if (li && !isLastRootLi) {\n                        li.appendChild(p);\n                    }\n                    continue;\n                }\n\n                // not supported list levels in ie\n                if (browser.msie) {\n                    continue;\n                }\n\n                margin = listData.level || parseFloat(p.style.marginLeft || 0);\n\n                var levelType = type + listIndex;\n                if (!levels[margin]) {\n                    levels[margin] = {};\n                }\n\n                if (!rootMargin || rootMargin < 0) {\n                    rootMargin = margin;\n                    rootIndex = listIndex;\n                    lastRootLi = $(placeholder).find(\"[data-list='\" + rootIndex + \"']\").last()[0];\n                    rootList = this._createList(type, listType.style);\n                    dom.insertBefore(rootList, p);\n                    lastMargin = margin;\n                    levels[margin][levelType] = rootList;\n                }\n\n                isLastRootLi = lastRootLi === p;\n\n                list = levels[margin][levelType];\n\n                if (margin > lastMargin || !list) {\n                    list = this._createList(type, listType.style);\n                    levels[margin][levelType] = list;\n                    li.appendChild(list);\n                }\n\n                li = this._convertToLi(p);\n                list.appendChild(li);\n\n                if (isLastRootLi) {\n                    rootMargin = lastMargin = -1;\n                } else {\n                    lastMargin = margin;\n                }\n            }\n        },\n\n        removeAttributes: function(element) {\n            var attributes = element.attributes,\n                i = attributes.length,\n                significantStyles = [],\n                isSignificantCss = function(val) {\n                    var significantCss = [\"border\", \"background\", \"padding\"];\n\n                    return significantCss.filter(function(cssAttr) {\n                        return val.trim().indexOf(cssAttr) === 0;\n                    }).length > 0;\n                },\n                addSignificantStyles = function(val) {\n                    if (isSignificantCss(val)) {\n                        significantStyles.push(val.trim());\n                    }\n                },\n                attr, attributeName, attributeValues;\n\n            while (i--) {\n                if (dom.name(attributes[i]) != \"colspan\") {\n                    attr = attributes[i];\n                    attributeName = attr.name;\n\n                    if (attributeName === \"style\" && (element.nodeName === \"TD\" || element.nodeName === \"TH\")) {\n                        attributeValues = attr.value.split(\";\");\n                        attributeValues.forEach(addSignificantStyles);\n                    }\n\n                    element.removeAttributeNode(attributes[i]);\n                }\n            }\n\n            if (significantStyles.length > 0) {\n                element.setAttribute(\"style\", significantStyles.join(\";\"));\n            }\n        },\n\n        createColGroup: function(row) {\n            var cells = row.cells;\n            var table = $(row).closest(\"table\");\n            var colgroup = table.children(\"colgroup\");\n\n            if (cells.length < 2) {\n                return;\n            } else if (colgroup.length) {\n                cells = colgroup.children();\n                colgroup[0].parentNode.removeChild(colgroup[0]);\n            }\n\n            colgroup = $($.map(cells, function(cell) {\n                    var width = cell.width;\n                    if (width && parseInt(width, 10) !== 0) {\n                        return kendo.format('<col style=\"width:{0}px;\"/>', width);\n                    }\n\n                    return \"<col />\";\n                }).join(\"\"));\n\n            // jquery 1.9/2.0 discrepancy\n            if (!colgroup.is(\"colgroup\")) {\n                colgroup = $(\"<colgroup/>\").append(colgroup);\n            }\n\n            colgroup.prependTo(table);\n        },\n\n        convertHeaders: function(row) {\n            var cells = row.cells,\n                i,\n                boldedCells = $.map(cells, function(cell) {\n                    var child = $(cell).children(\"p\").children(\"strong\")[0];\n\n                    if (child && dom.name(child) == \"strong\") {\n                        return child;\n                    }\n                });\n\n            if (boldedCells.length == cells.length) {\n                for (i = 0; i < boldedCells.length; i++) {\n                    dom.unwrap(boldedCells[i]);\n                }\n\n                $(row).closest(\"table\")\n                    .find(\"colgroup\").after(\"<thead></thead>\").end()\n                    .find(\"thead\").append(row);\n\n                for (i = 0; i < cells.length; i++) {\n                    dom.changeTag(cells[i], \"th\");\n                }\n            }\n        },\n\n        removeParagraphs: function(cells) {\n            var i, j, len, cell, paragraphs;\n\n            for (i = 0; i < cells.length; i++) {\n                this.removeAttributes(cells[i]);\n\n                // remove paragraphs and insert line breaks between them\n                cell = $(cells[i]);\n                paragraphs = cell.children(\"p\");\n\n                for (j = 0, len = paragraphs.length; j < len; j++) {\n                    if (j < len - 1) {\n                        dom.insertAfter(dom.create(document, \"br\"), paragraphs[j]);\n                    }\n\n                    dom.unwrap(paragraphs[j]);\n                }\n            }\n        },\n\n        removeTextNodes: function(trs) {\n            var i, j, childNodes, currentNode, row;\n\n            for (i = 0; i < trs.length; i++) {\n                row = trs[i];\n                childNodes = row.childNodes;\n\n                for (j = 0; j < childNodes.length; j++) {\n                    currentNode = childNodes[j];\n\n                    if (currentNode.nodeType === dom.nodeTypes.TEXT_NODE) {\n                        row.removeChild(currentNode);\n                    }\n                }\n            }\n        },\n\n        tables: function(placeholder) {\n            var tables = $(placeholder).find(\"table\"),\n                that = this,\n                rows,\n                firstRow, longestRow, i, j;\n\n            for (i = 0; i < tables.length; i++) {\n                rows = tables[i].rows;\n                longestRow = firstRow = rows[0];\n\n                for (j = 1; j < rows.length; j++) {\n                    if (rows[j].cells.length > longestRow.cells.length) {\n                        longestRow = rows[j];\n                    }\n                }\n\n                that.createColGroup(longestRow);\n                that.convertHeaders(firstRow);\n\n                that.removeAttributes(tables[i]);\n\n                that.removeParagraphs(tables.eq(i).find(\"td,th\"));\n\n                that.removeTextNodes(tables.eq(i).find(\"tr\"));\n            }\n        },\n\n        headers: function(placeholder) {\n            var titles = $(placeholder).find(\"p.MsoTitle\");\n\n            for (var i = 0; i < titles.length; i++) {\n                dom.changeTag(titles[i], \"h1\");\n            }\n        },\n\n        removeFormatting: function(placeholder) {\n            $(placeholder).find(\"*\").each(function() {\n                $(this).css({\n                    fontSize: \"\",\n                    fontFamily: \"\"\n                });\n\n                if (!this.getAttribute(\"style\") && !this.style.cssText) {\n                    this.removeAttribute(\"style\");\n                }\n            });\n        },\n\n        clean: function(html) {\n            var that = this, placeholder;\n            var filters = this.options;\n\n            if (filters.none) {\n                html = Cleaner.fn.clean.call(that, html, this.junkReplacements);\n                html = that.stripEmptyAnchors(html);\n            } else {\n\n                html = filters.msConvertLists ? this.extractListLevels(html) : html;\n                html = Cleaner.fn.clean.call(that, html);\n                html = that.stripEmptyAnchors(html);\n\n                placeholder = dom.create(document, 'div', { innerHTML: html });\n                that.headers(placeholder);\n\n                if (filters.msConvertLists) {\n                    that.lists(placeholder);\n                }\n                that.tables(placeholder);\n\n                if (filters.msAllFormatting) {\n                    that.removeFormatting(placeholder);\n                }\n\n                html = placeholder.innerHTML.replace(/(<[^>]*)\\s+class=\"?[^\"\\s>]*\"?/ig, '$1');\n            }\n\n            return html;\n        }\n    });\n\n    var WebkitFormatCleaner = Cleaner.extend({\n        init: function(options) {\n            Cleaner.fn.init.call(this, options);\n\n            this.replacements = [\n                /\\s+class=\"Apple-style-span[^\"]*\"/gi, '',\n                /<(div|p|h[1-6])\\s+style=\"[^\"]*\"/gi, '<$1',\n                /^<div>(.*)<\\/div>$/, '$1'\n            ];\n        },\n\n        applicable: function(html) {\n            return (/class=\"?Apple-style-span|style=\"[^\"]*-webkit-nbsp-mode/i).test(html);\n        }\n    });\n\n    var DomCleaner = Cleaner.extend({\n        clean: function(html) {\n            var container = dom.create(document, 'div', { innerHTML: html });\n            container = this.cleanDom(container);\n            return container.innerHTML;\n        },\n\n        cleanDom: function(container) {\n            return container;\n        }\n    });\n\n    var HtmlTagsCleaner = DomCleaner.extend({\n        cleanDom: function(container) {\n            var tags = this.collectTags();\n\n            $(container).find(tags).each(function() {\n                dom.unwrap(this);\n            });\n\n            return container;\n        },\n\n        collectTags: function() {\n            if (this.options.span) {\n                return \"span\";\n            }\n        },\n\n        applicable: function() {\n            return this.options.span;\n        }\n    });\n\n    var HtmlAttrCleaner = DomCleaner.extend({\n        cleanDom: function(container) {\n            var attributes = this.collectAttr();\n            var nodes = $(container).find(\"[\" + attributes.join(\"],[\") + \"]\");\n            nodes.removeAttr(attributes.join(\" \"));\n\n            return container;\n        },\n\n        collectAttr: function() {\n            if (this.options.css) {\n                return [\"class\", \"style\"];\n            }\n\n            return [];\n        },\n\n        applicable: function() {\n            return this.options.css;\n        }\n    });\n\n    var TextContainer = function() {\n        this.text = \"\";\n        this.add = function(text) {\n            this.text += text;\n        };\n    };\n\n    var HtmlTextLines = Class.extend({\n        init: function(separators) {\n            this.separators = separators || {\n                    text: \" \",\n                    line: \"<br/>\"\n                };\n            this.lines = [];\n            this.inlineBlockText = [];\n            this.resetLine();\n        },\n\n        appendText: function(text) {\n            if (text.nodeType === 3) {\n                text = text.nodeValue;\n            }\n\n            this.textContainer.add(text);\n        },\n\n        appendInlineBlockText: function(text) {\n            this.inlineBlockText.push(text);\n        },\n\n        flashInlineBlockText: function() {\n            if (this.inlineBlockText.length) {\n                this.appendText(this.inlineBlockText.join(\" \"));\n                this.inlineBlockText = [];\n            }\n        },\n\n        endLine: function() {\n            this.flashInlineBlockText();\n            this.resetLine();\n        },\n\n        html: function() {\n            var separators = this.separators;\n            var result = \"\";\n            var lines = this.lines;\n\n            this.flashInlineBlockText();\n\n            for (var i = 0, il = lines.length, il1 = il - 1; i < il; i++) {\n                var line = lines[i];\n                for (var j = 0, jl = line.length, jl1 = jl - 1; j < jl; j++) {\n                    var text = line[j].text;\n                    result += text;\n                    if (j !== jl1) {\n                        result += separators.text;\n                    }\n                }\n                if (i !== il1) {\n                    result += separators.line;\n                }\n            }\n\n            return result;\n        },\n\n        resetLine: function() {\n            this.textContainer = new TextContainer();\n            this.line = [];\n            this.line.push(this.textContainer);\n            this.lines.push(this.line);\n        }\n    });\n\n    var DomEnumerator = Class.extend({\n        init: function(callback) {\n            this.callback = callback;\n        },\n        enumerate: function(node) {\n            if (!node) {\n                return;\n            }\n\n            var preventDown = this.callback(node);\n\n            var child = node.firstChild;\n            if (!preventDown && child) {\n                this.enumerate(child);\n            }\n\n            this.enumerate(node.nextSibling);\n        }\n    });\n\n    var HtmlContentCleaner = Cleaner.extend({\n        init: function(options) {\n            Cleaner.fn.init.call(this, options);\n            this.hasText = false; //unpleasant flag to prevent an empty line at the beginning of the generated content.\n            this.enumerator = new DomEnumerator(this.buildText.bind(this));\n        },\n\n        clean: function(html) {\n            var container = dom.create(document, 'div', { innerHTML: html });\n\n            return this.cleanDom(container);\n        },\n\n        cleanDom: function(container) {\n            this.separators = this.getDefaultSeparators();\n            this.htmlLines = new HtmlTextLines(this.separators);\n            this.enumerator.enumerate(container.firstChild);\n            this.hasText = false;\n\n            return this.htmlLines.html();\n        },\n\n        buildText: function(node) {\n            if (dom.isDataNode(node)) {\n                if (dom.isEmptyspace(node)) {\n                    return;\n                }\n                this.htmlLines.appendText(node.nodeValue.replace('\\n', this.separators.line));\n                this.hasText = true;\n            } else if (dom.isBlock(node) && this.hasText) {\n                var action = this.actions[dom.name(node)] || this.actions.block;\n                return action(this, node);\n            } else if (dom.isBr(node)) {\n                this.htmlLines.appendText(this.separators.line);\n            }\n        },\n\n        applicable: function() {\n            var o = this.options;\n            return o.all || o.keepNewLines;\n        },\n\n        getDefaultSeparators: function() {\n            if (this.options.all) {\n                return { text: \" \", line: \" \" };\n            } else {\n                return { text: \" \", line: \"<br/>\" };\n            }\n        },\n\n        actions: {\n            ul: $.noop,\n            ol: $.noop,\n            table: $.noop,\n            thead: $.noop,\n            tbody: $.noop,\n            td: function(cleaner, node) {\n                var tdCleaner = new HtmlContentCleaner({ all: true });\n\n                var cellText = tdCleaner.cleanDom(node);\n                cleaner.htmlLines.appendInlineBlockText(cellText);\n\n                return true;\n            },\n\n            block: function(cleaner) {\n                cleaner.htmlLines.endLine();\n            }\n        }\n    });\n\n    var CustomCleaner = Cleaner.extend({\n        clean: function(html) {\n            return this.options.custom(html);\n        },\n\n        applicable: function() {\n            return typeof(this.options.custom) === \"function\";\n        }\n    });\n\n    extend(editorNS, {\n        Clipboard: Clipboard,\n        Cleaner: Cleaner,\n        ScriptCleaner: ScriptCleaner,\n        TabCleaner: TabCleaner,\n        MSWordFormatCleaner: MSWordFormatCleaner,\n        WebkitFormatCleaner: WebkitFormatCleaner,\n        HtmlTagsCleaner: HtmlTagsCleaner,\n        HtmlAttrCleaner: HtmlAttrCleaner,\n        HtmlContentCleaner: HtmlContentCleaner,\n        HtmlTextLines: HtmlTextLines,\n        CustomCleaner: CustomCleaner\n    });\n\n    })(window.kendo.jQuery);\n\n    (function($) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        Class = kendo.Class,\n        editorNS = kendo.ui.editor,\n        RangeUtils = editorNS.RangeUtils,\n        dom = editorNS.Dom,\n        RestorePoint = editorNS.RestorePoint,\n        Marker = editorNS.Marker,\n        browser = kendo.support.browser,\n        bomSpan = \"<span  class='k-br'>\\ufeff</span>\",\n        extend = $.extend;\n    var nodeTypes = dom.nodeTypes;\n    var PREVIOUS_SIBLING = \"previousSibling\";\n\n    function selected(node, range) {\n        return range.startContainer === node && range.endContainer === node &&\n            range.startOffset === 0 && range.endOffset == node.childNodes.length;\n    }\n\n    function getSibling(node, direction, condition) {\n        var sibling = node ? node[direction] : null;\n\n        while (sibling && !condition(sibling)) {\n            sibling = sibling[direction];\n        }\n\n        return sibling;\n    }\n\n    var tableCells = \"td,th,caption\";\n    var tableCellsWrappers = \"table,tbody,thead,tfoot,tr\";\n    var tableElements = tableCellsWrappers + \",\" + tableCells;\n    var inTable = function(range) { return !range.collapsed && $(range.commonAncestorContainer).is(tableCellsWrappers); };\n\n    var RemoveTableContent = Class.extend({\n        remove: function(range) {\n            var that = this;\n            var marker = new Marker();\n            marker.add(range, false);\n\n            var nodes = RangeUtils.getAll(range, function(node) { return $(node).is(tableElements); });\n            var doc = RangeUtils.documentFromRange(range);\n            var start = marker.start;\n            var end = marker.end;\n            var cellsTypes = tableCells.split(\",\");\n            var startCell = dom.parentOfType(start, cellsTypes);\n            var endCell = dom.parentOfType(end, cellsTypes);\n            that._removeContent(start, startCell, true);\n            that._removeContent(end, endCell, false);\n            $(nodes).each(function(i, node) {\n                node = $(node);\n                (node.is(tableCells) ? node : node.find(tableCells)).each(function(j, cell) {\n                    cell.innerHTML = \"&#65279;\";\n                });\n            });\n            if (startCell && !start.previousSibling) {\n                dom.insertBefore(doc.createTextNode(\"\\ufeff\"), start);\n            }\n            if (endCell && !end.nextSibling) {\n                dom.insertAfter(doc.createTextNode(\"\\ufeff\"), end);\n            }\n            if (startCell) {\n                range.setStartBefore(start);\n            } else if (nodes[0]) {\n                startCell = $(nodes[0]);\n                startCell = startCell.is(tableCells) ? startCell : startCell.find(tableCells).first();\n                if (startCell.length) {\n                    range.setStart(startCell.get(0), 0);\n                }\n            }\n\n            range.collapse(true);\n\n            dom.remove(start);\n            dom.remove(end);\n        },\n        _removeContent: function(start, top, forwards) {\n            if (top) {\n                var sibling = forwards ? \"nextSibling\" : \"previousSibling\",\n                    next,\n                    getNext = function(node) {\n                        while (node && !node[sibling]) {\n                            node = node.parentNode;\n                        }\n                        return node && $.contains(top, node) ? node[sibling] : null;\n                    };\n                start = getNext(start);\n                while (start) {\n                    next = getNext(start);\n                    dom.remove(start);\n                    start = next;\n                }\n            }\n        }\n    });\n\n    var TypingHandler = Class.extend({\n        init: function(editor) {\n            this.editor = editor;\n        },\n\n        keydown: function(e) {\n            var that = this,\n                editor = that.editor,\n                keyboard = editor.keyboard,\n                isTypingKey = keyboard.isTypingKey(e),\n                evt = extend($.Event(), e);\n\n            that.editor.trigger(\"keydown\", evt);\n\n            if (evt.isDefaultPrevented()) {\n                e.preventDefault();\n                return true;\n            }\n\n            if (!evt.isDefaultPrevented() && isTypingKey && !keyboard.isTypingInProgress()) {\n                var range = editor.getRange();\n                var body = editor.body;\n                that.startRestorePoint = new RestorePoint(range, body);\n\n                if (inTable(range)) {\n                    var removeTableContent = new RemoveTableContent(editor);\n                    removeTableContent.remove(range);\n                    editor.selectRange(range);\n                }\n\n                if (browser.webkit && !range.collapsed && selected(body, range)) {\n                    body.innerHTML = \"\";\n                }\n\n                if (editor.immutables && editorNS.Immutables.immutablesContext(range)) {\n                    var backspaceHandler = new editorNS.BackspaceHandler(editor);\n                    backspaceHandler.deleteSelection(range);\n                }\n\n                keyboard.startTyping(function() {\n                    that._removeBomSpan();\n                    that.endRestorePoint = editorNS._finishUpdate(editor, that.startRestorePoint);\n                });\n\n                return true;\n            }\n\n            return false;\n        },\n\n        keyup: function(e) {\n            var keyboard = this.editor.keyboard;\n\n            this.editor.trigger(\"keyup\", e);\n\n            if (keyboard.isTypingInProgress()) {\n                keyboard.endTyping();\n                return true;\n            }\n\n            return false;\n        },\n\n        _removeBomSpan: function() {\n            var node = this.editor.getRange().commonAncestorContainer;\n\n            if (!dom.emptyNode(node)) {\n                if (node.nodeType === 3) {\n                    node = node.parentNode;\n                }\n\n                if (dom.insignificant(node)) {\n                    // typing in an insignificant node\n                    // make it significant\n                    node.textContent = dom.stripBom(node.textContent);\n                    dom.unwrap(node);\n                }\n            }\n        }\n    });\n\n    var BackspaceHandler = Class.extend({\n        init: function(editor) {\n            this.editor = editor;\n        },\n        _addCaret: function(container) {\n            var caret = dom.create(this.editor.document, \"a\");\n\n            // Only if not Chrome: Make sure to include cared in the formatted inline node\n            if (!kendo.support.browser.chrome && container.firstChild &&\n                container.firstChild.nodeType === nodeTypes.ELEMENT_NODE) {\n\n                container = container.firstChild;\n            }\n\n            dom.insertAt(container, caret, 0);\n            dom.stripBomNode(caret.previousSibling);\n            dom.stripBomNode(caret.nextSibling);\n            return caret;\n        },\n        _restoreCaret: function(caret) {\n            var range = this.editor.createRange();\n\n            if (!caret.nextSibling && dom.isDataNode(caret.previousSibling)) {\n                range.setStart(caret.previousSibling, caret.previousSibling.length);\n            } else {\n                range.setStartAfter(caret);\n            }\n\n            range.collapse(true);\n            this.editor.selectRange(range);\n            dom.remove(caret);\n        },\n        _handleDelete: function(range) {\n            var node = range.endContainer;\n            var block = dom.closestEditableOfType(node, dom.blockElements);\n\n            if (block && editorNS.RangeUtils.isEndOf(range, block)) {\n                // join with next sibling\n                var next = dom.next(block);\n                if (!next || dom.name(next) != \"p\") {\n                    return false;\n                }\n\n                var caretPlaceholder = dom.significantChildNodes(next)[0];\n                caretPlaceholder = (caretPlaceholder && dom.isInline(caretPlaceholder)) ? caretPlaceholder : next;\n                var caret = this._addCaret(caretPlaceholder);\n\n                this._merge(block, next);\n\n                this._restoreCaret(caret);\n\n                return true;\n            }\n\n            return false;\n        },\n        _cleanBomBefore: function(range) {\n            var offset = range.startOffset;\n            var node = range.startContainer;\n            var text = node.nodeValue;\n            var count = 0;\n            while (offset - count >= 0 && text[offset - count - 1] == \"\\ufeff\") {\n                count++;\n            }\n\n            if (count > 0) {\n                node.deleteData(offset - count, count);\n\n                range.setStart(node, Math.max(0, offset - count));\n                range.collapse(true);\n\n                this.editor.selectRange(range);\n            }\n        },\n        _handleBackspace: function(range) {\n            var node = range.startContainer;\n            var li = dom.closestEditableOfType(node, ['li']);\n            var block = dom.closestEditableOfType(node, 'p,h1,h2,h3,h4,h5,h6'.split(','));\n            var editor = this.editor;\n            var previousSibling;\n\n            if (dom.isDataNode(node)) {\n                if (range.collapsed && /^\\s[\\ufeff]+$/.test(node.nodeValue)) {\n                    range.setStart(node, 0);\n                    range.setEnd(node, node.length);\n                    editor.selectRange(range);\n                    return false;\n                }\n                this._cleanBomBefore(range);\n            }\n\n            previousSibling = getSibling(block, PREVIOUS_SIBLING, function(sibling) {\n                return !dom.htmlIndentSpace(sibling);\n            });\n\n            //deleting the first list item with empty content in IE results in invalid range\n            if (range.collapsed && range.startOffset !== range.endOffset && range.startOffset < 0) {\n                range.startOffset = 0;\n                range.endOffset = 0;\n                editor.selectRange(range);\n            }\n\n            var startAtLi = li && editorNS.RangeUtils.isStartOf(range, li);\n            var liIndex = li && $(li).index();\n            var startAtNonFirstLi = startAtLi && liIndex > 0;\n            if (startAtNonFirstLi) {\n                block = li;\n                previousSibling = dom.prev(li);\n            }\n\n            if (block && previousSibling && dom.is(previousSibling, 'table') && editorNS.RangeUtils.isStartOf(range, block)) {\n                if (block.innerText === '') {\n                    block.innerHTML = '\\ufeff';\n                }\n                return true;\n            }\n\n            // outdent\n            if (editorNS.RangeUtils.isStartOf(range, block) && parseInt(block.style.marginLeft,10) > 0) {\n                editor.exec(\"outdent\");\n                return true;\n            }\n\n            // unwrap block\n            if ((block && previousSibling && editorNS.RangeUtils.isStartOf(range, block)) || startAtNonFirstLi) {\n                var caretPlaceholder = dom.significantChildNodes(block)[0];\n                caretPlaceholder = (caretPlaceholder && dom.isInline(caretPlaceholder)) ? caretPlaceholder : block;\n                var caret = this._addCaret(caretPlaceholder);\n                this._merge(previousSibling, block);\n                this._restoreCaret(caret);\n\n                return true;\n            }\n\n            // unwrap li element\n            if (startAtLi && liIndex === 0) {\n                var child = li.firstChild;\n                if (!child) {\n                    li.innerHTML = editorNS.emptyElementContent;\n                    child = li.firstChild;\n                }\n\n                var formatter = new editorNS.ListFormatter(dom.name(li.parentNode), \"p\");\n                range.selectNodeContents(li);\n                formatter.toggle(range);\n\n                if (dom.insignificant(child)) {\n                    range.setStartBefore(child);\n                } else {\n                    range.setStart(child, 0);\n                }\n\n                editor.selectRange(range);\n\n                return true;\n            }\n\n            var rangeStartNode = node.childNodes[range.startOffset - 1];\n            var linkRange = range;\n            var anchor = rangeStartNode && dom.closestEditableOfType(rangeStartNode, ['a']);\n            var previousNode = getSibling(rangeStartNode || node, PREVIOUS_SIBLING, function(sibling) {\n                return !dom.isDataNode(sibling) || (!dom.isBom(sibling) && sibling.length > 0);\n            });\n            if (anchor || ((range.startOffset === 0 || rangeStartNode) && dom.is(previousNode, \"a\"))) {\n                anchor = anchor || previousNode;\n                linkRange = editor.createRange();\n                linkRange.setStart(anchor, anchor.childNodes.length);\n                linkRange.collapse(true);\n            }\n\n            anchor = anchor || dom.closestEditableOfType(rangeStartNode || linkRange.startContainer, ['a']);\n            var isEndOfLink = anchor && editorNS.RangeUtils.isEndOf(linkRange, anchor);\n            if (isEndOfLink) {\n                var command = new editorNS.UnlinkCommand({ range: linkRange, body: editor.body, immutables: !!editor.immutables });\n                editor.execCommand(command);\n                editor._selectionChange();\n            }\n            return false;\n        },\n        _handleSelection: function(range) {\n            var ancestor = range.commonAncestorContainer;\n            var table = dom.closest(ancestor, \"table\");\n            var emptyParagraphContent = editorNS.emptyElementContent;\n            var editor = this.editor;\n            var parentElementOrNode;\n\n            if (inTable(range)) {\n                var removeTableContent = new RemoveTableContent(editor);\n                removeTableContent.remove(range);\n                editor.selectRange(range);\n                return true;\n            }\n\n            var marker = new Marker();\n            marker.add(range, false);\n\n            if (range.commonAncestorContainer === editor.body) {\n                this._surroundFullyContent(marker, range);\n            }\n\n            if (editor.immutables) {\n                this._handleImmutables(marker);\n            }\n\n            this._surroundFullySelectedAnchor(marker, range);\n\n            range.setStartAfter(marker.start);\n            range.setEndBefore(marker.end);\n\n            var start = range.startContainer;\n            var end = range.endContainer;\n\n            range.deleteContents();\n\n            if (end.tagName.toLocaleLowerCase() === \"li\" && dom.emptyNode(end)) {\n                range.selectNode(end);\n                range.deleteContents();\n            }\n\n            if (table && $(table).text() === \"\") {\n                range.selectNode(table);\n                range.deleteContents();\n            }\n\n            ancestor = range.commonAncestorContainer;\n\n            if (dom.name(ancestor) === \"p\" && ancestor.innerHTML === \"\") {\n                ancestor.innerHTML = emptyParagraphContent;\n                range.setStart(ancestor, 0);\n            }\n\n            this._join(start, end);\n\n            dom.insertAfter(editor.document.createTextNode(\"\\ufeff\"), marker.start);\n            marker.remove(range);\n\n            start = range.startContainer;\n            if (dom.name(start) == \"tr\") {\n                start = start.childNodes[Math.max(0, range.startOffset - 1)];\n                range.setStart(start, dom.getNodeLength(start));\n            }\n\n            range.collapse(true);\n\n            editor.selectRange(range);\n\n            parentElementOrNode = start.parentElement || start.parentNode;\n\n            if (dom.isDataNode(start) && !dom.emptyNode(parentElementOrNode)) {\n                this._cleanBomBefore(range);\n            }\n\n            return true;\n        },\n        _handleImmutables: function(marker) {\n            var immutableParent = editorNS.Immutables.immutableParent;\n            var startImmutable = immutableParent(marker.start);\n            var endImmutable = immutableParent(marker.start);\n            if (startImmutable) {\n                dom.insertBefore(marker.start, startImmutable);\n            }\n            if (endImmutable) {\n                dom.insertAfter(marker.end, endImmutable);\n            }\n            if (startImmutable) {\n                dom.remove(startImmutable);\n            }\n            if (endImmutable && endImmutable.parentNode) {\n                dom.remove(endImmutable);\n            }\n        },\n        _surroundFullyContent: function(marker, range) {\n            var children = range.commonAncestorContainer.children,\n                startParent = children[0],\n                endParent = children[children.length - 1];\n\n            this._moveMarker(marker, range, startParent, endParent);\n        },\n        _surroundFullySelectedAnchor: function(marker, range) {\n            var start = marker.start,\n                startParent = $(start).closest(\"a\").get(0),\n                end = marker.end,\n                endParent = $(end).closest(\"a\").get(0);\n\n            this._moveMarker(marker, range, startParent, endParent);\n        },\n        _moveMarker: function(marker, range, startParent, endParent) {\n            var start = marker.start,\n                end = marker.end;\n\n            if (startParent && RangeUtils.isStartOf(range, startParent)) {\n                dom.insertBefore(start, startParent);\n            }\n\n            if (endParent && RangeUtils.isEndOf(range, endParent)) {\n                dom.insertAfter(end, endParent);\n            }\n        },\n        _root: function(node) {\n            while (node && dom.name(node) != \"body\" && node.parentNode && dom.name(node.parentNode) != \"body\") {\n                node = node.parentNode;\n            }\n\n            return node;\n        },\n        _join: function(start, end) {\n            start = this._root(start);\n            end = this._root(end);\n\n            if (start != end && dom.is(end, \"p\")) {\n                this._merge(start, end);\n            }\n        },\n        _merge: function(dest, src) {\n            dom.removeTrailingBreak(dest);\n\n            while (dest && src.firstChild) {\n                if (dest.nodeType == 1) {\n                    dest = dom.list(dest) ? dest.children[dest.children.length - 1] : dest;\n\n                    if (dest) {\n                        dest.appendChild(src.firstChild);\n                    }\n                } else if (dest.nodeType === nodeTypes.TEXT_NODE) {\n                    this._mergeWithTextNode(dest, src.firstChild);\n                } else {\n                    dest.parentNode.appendChild(src.firstChild);\n                }\n            }\n\n            dom.remove(src);\n        },\n\n        _mergeWithTextNode: function(textNode, appendedNode) {\n            if (textNode && textNode.nodeType === nodeTypes.TEXT_NODE) {\n                if (textNode.nextSibling && this._isCaret(textNode.nextSibling)) {\n                    dom.insertAfter(appendedNode, textNode.nextSibling);\n                }\n                else {\n                    dom.insertAfter(appendedNode, textNode);\n                }\n            }\n        },\n\n        _isCaret: function(element) {\n            return $(element).is(\"a\");\n        },\n\n        keydown: function(e) {\n            var method, startRestorePoint;\n            var editor = this.editor;\n            var range = editor.getRange();\n            var keyCode = e.keyCode;\n            var keys = kendo.keys;\n            var backspace = keyCode === keys.BACKSPACE;\n            var del = keyCode == keys.DELETE;\n\n            if (editor.immutables && editor.immutables.keydown(e, range)) {\n                return;\n            }\n\n            if ((backspace || del) && !range.collapsed) {\n                method = \"_handleSelection\";\n            } else if (backspace) {\n                method = \"_handleBackspace\";\n            } else if (del) {\n                method = \"_handleDelete\";\n            }\n\n            if (!method) {\n                return;\n            }\n\n            startRestorePoint = new RestorePoint(range, editor.body);\n\n            if (this[method](range)) {\n                e.preventDefault();\n\n                editorNS._finishUpdate(editor, startRestorePoint);\n            }\n        },\n        deleteSelection: function(range) {\n            this._handleSelection(range);\n        },\n        keyup: $.noop\n    });\n\n    var SystemHandler = Class.extend({\n        init: function(editor) {\n            this.editor = editor;\n            this.systemCommandIsInProgress = false;\n        },\n\n        createUndoCommand: function() {\n            this.startRestorePoint = this.endRestorePoint = editorNS._finishUpdate(this.editor, this.startRestorePoint);\n        },\n\n        changed: function() {\n            if (this.startRestorePoint) {\n                return this.startRestorePoint.html != this.editor.body.innerHTML;\n            }\n\n            return false;\n        },\n\n        keydown: function(e) {\n            var that = this,\n                editor = that.editor,\n                keyboard = editor.keyboard;\n\n            if (keyboard.isModifierKey(e)) {\n\n                if (keyboard.isTypingInProgress()) {\n                    keyboard.endTyping(true);\n                }\n\n                that.startRestorePoint = new RestorePoint(editor.getRange(), editor.body);\n                return true;\n            }\n\n            if (keyboard.isSystem(e)) {\n                that.systemCommandIsInProgress = true;\n\n                if (that.changed()) {\n                    that.systemCommandIsInProgress = false;\n                    that.createUndoCommand();\n                }\n\n                return true;\n            }\n\n            return false;\n        },\n\n        keyup: function() {\n            var that = this;\n\n            if (that.systemCommandIsInProgress && that.changed()) {\n                that.systemCommandIsInProgress = false;\n                that.createUndoCommand();\n                return true;\n            }\n\n            return false;\n        }\n    });\n\n    var SelectAllHandler = Class.extend({\n        init: function(editor) {\n            this.editor = editor;\n        },\n\n        keydown: function(e) {\n            if (!browser.webkit || e.isDefaultPrevented() ||\n                !(e.ctrlKey && e.keyCode == 65 && !e.altKey && !e.shiftKey)) {\n                return;\n            }\n            if (this.editor.options.immutables) {\n                this._toSelectableImmutables();\n            }\n            this._selectEditorBody();\n        },\n\n        _selectEditorBody: function() {\n            var editor = this.editor;\n            var range = editor.getRange();\n            range.selectNodeContents(editor.body);\n\n            setTimeout(function() {\n                editor.selectRange(range);\n            });\n        },\n\n        _toSelectableImmutables: function() {\n            var editor = this.editor,\n                body = editor.body,\n                immutable = editorNS.Immutables.immutable,\n                emptyTextNode = dom.emptyTextNode,\n                first = body.firstChild,\n                last = body.lastChild;\n\n            while (emptyTextNode(first)) {\n                first = first.nextSibling;\n            }\n\n            while (emptyTextNode(last)) {\n                last = last.previousSibling;\n            }\n\n            if (first && immutable(first)) {\n                $(bomSpan).prependTo(body);\n            }\n\n            if (last && immutable(last)) {\n                $(bomSpan).appendTo(body);\n            }\n        },\n\n        keyup: $.noop\n    });\n\n    var Keyboard = Class.extend({\n        init: function(handlers) {\n            this.handlers = handlers;\n            this.typingInProgress = false;\n        },\n\n        isCharacter: function(keyCode) {\n            return (keyCode >= 48 && keyCode <= 90) || (keyCode >= 96 && keyCode <= 111) ||\n                   (keyCode >= 186 && keyCode <= 192) || (keyCode >= 219 && keyCode <= 222) ||\n                   keyCode == 229;\n        },\n\n        toolFromShortcut: function(tools, e) {\n            var key = String.fromCharCode(e.keyCode),\n                toolName,\n                toolOptions,\n                modifier = this._getShortcutModifier(e, navigator.platform);\n\n            for (toolName in tools) {\n                toolOptions = $.extend({ ctrl: false, alt: false, shift: false }, tools[toolName].options);\n\n                if ((toolOptions.key == key || toolOptions.key == e.keyCode) &&\n                    toolOptions.ctrl == modifier &&\n                    toolOptions.alt == e.altKey &&\n                    toolOptions.shift == e.shiftKey) {\n                    return toolName;\n                }\n            }\n        },\n\n        _getShortcutModifier: function(e, platform) {\n            var mac = platform.toUpperCase().indexOf('MAC') >= 0;\n            return mac ? e.metaKey : e.ctrlKey;\n        },\n\n        toolsFromShortcut: function(tools, e) {\n            var key = String.fromCharCode(e.keyCode),\n                toolName,\n                o,\n                matchesKey,\n                found = [];\n            var matchKey = function(toolKey) { return toolKey == key || toolKey == e.keyCode || toolKey == e.charCode; };\n\n            for (toolName in tools) {\n                o = $.extend({ ctrl: false, alt: false, shift: false }, tools[toolName].options);\n\n                matchesKey = Array.isArray(o.key) ? $.grep(o.key, matchKey).length > 0 : matchKey(o.key);\n                if (matchesKey &&\n                    o.ctrl == e.ctrlKey &&\n                    o.alt == e.altKey &&\n                    o.shift == e.shiftKey) {\n                    found.push(tools[toolName]);\n                }\n            }\n\n            return found;\n        },\n\n        isTypingKey: function(e) {\n            var keyCode = e.keyCode;\n            return (this.isCharacter(keyCode) && !e.ctrlKey && !e.altKey) ||\n                   keyCode == 32 || keyCode == 13 || keyCode == 8 ||\n                   (keyCode == 46 && !e.shiftKey && !e.ctrlKey && !e.altKey);\n        },\n\n        isModifierKey: function(e) {\n            var keyCode = e.keyCode;\n            return (keyCode == 17 && !e.shiftKey && !e.altKey) ||\n                   (keyCode == 16 && !e.ctrlKey && !e.altKey) ||\n                   (keyCode == 18 && !e.ctrlKey && !e.shiftKey);\n        },\n\n        isSystem: function(e) {\n            return e.keyCode == 46 && e.ctrlKey && !e.altKey && !e.shiftKey;\n        },\n\n        startTyping: function(callback) {\n            this.onEndTyping = callback;\n            this.typingInProgress = true;\n        },\n\n        stopTyping: function() {\n            if (this.typingInProgress && this.onEndTyping) {\n                this.onEndTyping();\n            }\n            this.typingInProgress = false;\n        },\n\n        endTyping: function(force) {\n            var that = this;\n            that.clearTimeout();\n            if (force) {\n                that.stopTyping();\n            } else {\n                that.timeout = window.setTimeout(that.stopTyping.bind(that), 1000);\n            }\n        },\n\n        isTypingInProgress: function() {\n            return this.typingInProgress;\n        },\n\n        clearTimeout: function() {\n            window.clearTimeout(this.timeout);\n        },\n\n        notify: function(e, what) {\n            var i, handlers = this.handlers;\n\n            for (i = 0; i < handlers.length; i++) {\n                if (handlers[i][what](e)) {\n                    break;\n                }\n            }\n        },\n\n        keydown: function(e) {\n            this.notify(e, 'keydown');\n        },\n\n        keyup: function(e) {\n            this.notify(e, 'keyup');\n        }\n    });\n\n    extend(editorNS, {\n        TypingHandler: TypingHandler,\n        SystemHandler: SystemHandler,\n        BackspaceHandler: BackspaceHandler,\n        SelectAllHandler: SelectAllHandler,\n        Keyboard: Keyboard\n    });\n\n    })(window.kendo.jQuery);\n\n    (function($) {\n\n        // Imports ================================================================\n        var kendo = window.kendo,\n            editorNS = kendo.ui.editor,\n            Command = editorNS.Command,\n            EditorUtils = editorNS.EditorUtils,\n            registerTool = EditorUtils.registerTool,\n            Tool = editorNS.Tool,\n            ToolTemplate = editorNS.ToolTemplate,\n            extend = $.extend;\n\n    var ExportPdfCommand = Command.extend({\n        init: function(options) {\n            this.async = true;\n            Command.fn.init.call(this, options);\n        },\n\n        exec: function() {\n            var that = this;\n            var range = that.lockRange(true);\n            var editor = that.editor;\n\n            editor._destroyResizings();\n\n            editor.saveAsPDF().then(function() {\n                that.releaseRange(range);\n                editor._initializeColumnResizing();\n                editor._initializeRowResizing();\n                editor._initializeElementResizing();\n            });\n        }\n    });\n\n    extend(editorNS, {\n        ExportPdfCommand: ExportPdfCommand\n    });\n\n    registerTool(\"pdf\", new Tool({ command: ExportPdfCommand, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Export PDF\" }) }));\n\n    })(window.kendo.jQuery);\n\n    (function($) {\n\n        // Imports ================================================================\n        var kendo = window.kendo,\n            editorNS = kendo.ui.editor,\n            Command = editorNS.Command,\n            EditorUtils = editorNS.EditorUtils,\n            registerTool = EditorUtils.registerTool,\n            Tool = editorNS.Tool,\n            ToolTemplate = editorNS.ToolTemplate,\n            extend = $.extend;\n\n    var PrintCommand = Command.extend({\n        init: function(options) {\n            Command.fn.init.call(this, options);\n\n            this.managesUndoRedo = true;\n        },\n\n        exec: function() {\n            var editor = this.editor;\n\n            if (kendo.support.browser.msie) {\n                editor.document.execCommand(\"print\", false, null);\n            } else if (editor.window.print) {\n                editor.window.print();\n            }\n        }\n    });\n\n    extend(editorNS, {\n        PrintCommand: PrintCommand\n    });\n\n    registerTool(\"print\", new Tool({ command: PrintCommand, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Print\" }) }));\n\n    })(window.kendo.jQuery);\n\n    (function($) {\n\n    var kendo = window.kendo,\n        Editor = kendo.ui.editor,\n        Tool = Editor.Tool,\n        Command = Editor.Command,\n        ToolTemplate = Editor.ToolTemplate,\n        EditorUtils = Editor.EditorUtils,\n        dom = Editor.Dom,\n        RangeUtils = Editor.RangeUtils,\n        registerTool = EditorUtils.registerTool;\n\n    var CopyFormatCommand = Command.extend({\n        init: function(options) {\n            Command.fn.init.call(this, options);\n        },\n\n        exec: function() {\n            var range = this.lockRange(true);\n            this.inlineStyles = [];\n            this.blockStyles = [];\n            this.collectStyles(range);\n            this.editor.inlineStyles = this.inlineStyles;\n            this.editor.blockStyles = this.blockStyles;\n            this.releaseRange(range);\n        },\n\n        collectStyles: function(range) {\n            var rangeNodes = RangeUtils.nodes(range);\n            var node;\n\n            if (rangeNodes.length === 1) {\n                node = rangeNodes[0].parentNode;\n            } else {\n                node = range.startContainer;\n            }\n\n            while (node && !dom.is(node, \"body\") && node.getAttribute(\"data-role\") !== \"editor\") {\n                if (dom.isBlock(node)) {\n                    this.populateStyles(node, \"blockStyles\");\n                    if (dom.is(node, \"li\")) {\n                        node = node.parentNode;\n                    } else {\n                        node = null;\n                    }\n                } else {\n                    this.populateStyles(node, \"inlineStyles\");\n                    node = node.parentNode;\n                }\n            }\n        },\n\n        populateStyles: function(node, destination) {\n            var styles = node.style;\n            var attributes = node.attributes;\n            var nodeStyles = {\n                tags: [ node.tagName ],\n                attr: {\n                    style: {}\n                }\n            };\n            var styleValue, styleKey, attributeKey, attributeValue, i;\n\n            for (i = 0; styles && i < styles.length; i++) {\n                styleKey = styles[i];\n                styleValue = styles[styleKey];\n                nodeStyles.attr.style[styleKey] = styleValue;\n            }\n\n            for (i = 0; attributes && i < attributes.length; i++) {\n                attributeKey = attributes[i].nodeName;\n                attributeValue = attributes[i].nodeValue;\n                if (attributeKey === \"style\") {\n                    continue;\n                } else if (attributeKey === \"class\") {\n                    nodeStyles.attr.className = attributeValue;\n                } else {\n                    nodeStyles.attr[attributeKey] = attributeValue;\n                }\n            }\n\n            this[destination].push(nodeStyles);\n        }\n    });\n\n    var ApplyFormatCommand = Command.extend({\n        init: function(options) {\n            Command.fn.init.call(this, options);\n        },\n\n        exec: function() {\n            var range = this.lockRange(true);\n            var markers = RangeUtils.getMarkers(range);\n            var editor = this.editor;\n            var inlineStyles = editor.inlineStyles;\n            var blockStyles = editor.blockStyles;\n            var nodes;\n\n            if ((!inlineStyles || inlineStyles.length === 0) && (!blockStyles || blockStyles.length === 0)) {\n                return;\n            }\n\n            if (markers.length === 3) {\n                this.marker.removeCaret(range);\n                this.marker.caret = null;\n            }\n\n            this.removeEmptyElementsFromRange(range);\n            nodes = RangeUtils.nodes(range);\n            this.cleanInlineParents(nodes);\n            dom.normalize(range.commonAncestorContainer);\n\n            if (markers.length === 2) {\n                range.setStartAfter(markers[0]);\n                range.setEndBefore(markers[1]);\n            } else {\n                range.setStartBefore(nodes[0]);\n                range.setEndAfter(nodes[0]);\n            }\n\n            nodes = RangeUtils.nodes(range);\n\n            if (nodes && blockStyles && blockStyles.length) {\n                this.applyBlockStyles(nodes, blockStyles);\n            }\n\n            if (nodes && inlineStyles && inlineStyles.length) {\n                this.applyInlineStyles(nodes, inlineStyles);\n            }\n\n            this.releaseRange(range);\n        },\n\n        removeEmptyElementsFromRange: function(range) {\n            var isEmptyInline = function(node) {\n                return dom.isInline(node) && !node.firstChild && !dom.isMarker(node);\n            };\n            var emptyElements, i;\n\n            emptyElements = RangeUtils.getAll(range, isEmptyInline);\n\n            if (emptyElements && emptyElements.length > 0) {\n                for (i = 0; i < emptyElements.length; i++) {\n                    emptyElements[i].parentNode.removeChild(emptyElements[i]);\n                }\n            }\n        },\n\n        cleanInlineParents: function(nodes) {\n            var i, node, parent, children, j, child, newNode;\n\n            for (i = 0; i < nodes.length; i++) {\n                node = nodes[i];\n                parent = node.parentNode;\n\n                if (this.immutableParent(node)) {\n                    continue;\n                }\n\n                while (parent && dom.isInline(parent)) {\n                    children = parent.childNodes;\n\n                    for (j = 0; j < children.length; j++) {\n                        child = children[j];\n\n                        if (!dom.isMarker(child) && child !== node) {\n                            newNode = parent.cloneNode(true);\n                            newNode.innerHTML = \"\";\n                            dom.wrap(child, newNode);\n                        }\n                    }\n\n                    dom.unwrap(parent);\n                    parent = node.parentNode;\n                }\n            }\n        },\n\n        applyBlockStyles: function(nodes, blockStyles) {\n            var formatTag = blockStyles[0].tags[0];\n            var attr = blockStyles[0].attr;\n            var document = this.editor.document;\n            var i, len, node, wrapper, blockParent, outerWrapper;\n            var previousNodes, nextNodes, previous, next, prevWrapper, nextWrapper, child, j, listItems;\n\n            for (i = 0, len = nodes.length; i < len; i++) {\n                node = nodes[i];\n\n                if (dom.isWhitespace(node) || this.immutableParent(node)) {\n                    continue;\n                }\n\n                blockParent = dom.blockParentOrBody(node);\n\n                if (blockParent.tagName !== \"BODY\" && blockParent.tagName !== formatTag) {\n                    if (blockParent.tagName !== \"LI\" && blockParent.tagName !== \"TD\" && blockParent.tagName !== \"TH\") {\n                        previousNodes = [];\n                        nextNodes = [];\n                        previous = node.previousSibling;\n                        next = node.nextSibling;\n\n                        while (previous) {\n                            if (!dom.isMarker(previous)) {\n                                previousNodes.push(previous);\n                            }\n\n                            previous = previous.previousSibling;\n                        }\n\n                        if (previousNodes.length) {\n                            prevWrapper = blockParent.cloneNode(true);\n                            prevWrapper.innerHTML = \"\";\n                            dom.insertBefore(prevWrapper, previousNodes[0]);\n\n                            for (j = 0; j < previousNodes.length; j++) {\n                                child = previousNodes[j];\n                                dom.insertAt(prevWrapper, child, 0);\n                            }\n                        }\n\n                        while (next) {\n                            if (!dom.isMarker(next)) {\n                                nextNodes.push(next);\n                            }\n\n                            next = next.nextSibling;\n                        }\n\n                        if (nextNodes.length) {\n                            nextWrapper = blockParent.cloneNode(true);\n                            nextWrapper.innerHTML = \"\";\n                            dom.insertBefore(nextWrapper, nextNodes[0]);\n\n                            for (j = 0; j < nextNodes.length; j++) {\n                                child = nextNodes[j];\n                                nextWrapper.appendChild(child);\n                            }\n                        }\n\n                        dom.unwrap(blockParent);\n                    }\n\n                    wrapper = dom.create(document, formatTag, attr);\n                    dom.wrap(node, wrapper);\n                } else if (blockParent.tagName === formatTag) {\n                    dom.attr(blockParent, attr);\n                }\n            }\n\n            if (blockParent && blockStyles.length === 2 && blockParent.tagName !== \"LI\" && formatTag === \"LI\") {\n                listItems = [];\n\n                while (dom.is(wrapper, \"li\")) {\n                    listItems.push(wrapper);\n                    wrapper = dom.prev(wrapper);\n                }\n\n                outerWrapper = dom.create(document, blockStyles[1].tags[0], blockStyles[1].attr);\n                dom.insertBefore(outerWrapper, listItems[listItems.length - 1]);\n                outerWrapper.appendChild(listItems[0]);\n\n                for (i = 1, len = listItems.length; i < len; i++) {\n                    dom.insertBefore(listItems[i], outerWrapper.firstChild);\n                }\n            } else if (blockParent && blockStyles.length === 2 && blockParent.tagName !== \"LI\") {\n                outerWrapper = dom.create(document, blockStyles[1].tags[0], blockStyles[1].attr);\n                dom.wrap(wrapper, outerWrapper);\n            }\n        },\n\n        applyInlineStyles: function(nodes, inlineStyles) {\n            var document = this.editor.document;\n            var currentStyle, createdNode, topNode, i, newNode, node;\n\n            for (i = 0; i < inlineStyles.length; i++) {\n                currentStyle = inlineStyles[i];\n                createdNode = dom.create(document, currentStyle.tags[0], currentStyle.attr);\n\n                if (topNode) {\n                    createdNode.appendChild(topNode);\n                }\n\n                topNode = createdNode;\n            }\n\n            if (topNode) {\n                for (i = 0; i < nodes.length; i++) {\n                    node = nodes[i];\n                    if (dom.isWhitespace(node) || this.immutableParent(node)) {\n                        continue;\n                    }\n                    newNode = topNode.cloneNode(true);\n                    dom.insertBefore(newNode, node);\n\n                    while (newNode.children && newNode.children.length) {\n                        newNode = newNode.children[0];\n                    }\n\n                    newNode.appendChild(node);\n                }\n            }\n        },\n\n        immutables: function() {\n            return this.editor && this.editor.options.immutables;\n        },\n\n        immutableParent: function(node) {\n            return this.immutables() && Editor.Immutables.immutableParent(node);\n        }\n    });\n\n    var CopyFormatTool = Tool.extend({\n        init: function(options) {\n            Tool.fn.init.call(this, options);\n        },\n\n        command: function(commandArguments) {\n            return new CopyFormatCommand(commandArguments);\n        }\n    });\n\n    var ApplyFormatTool = Tool.extend({\n        init: function(options) {\n            Tool.fn.init.call(this, options);\n        },\n\n        command: function(commandArguments) {\n            return new ApplyFormatCommand(commandArguments);\n        }\n    });\n\n    $.extend(Editor, {\n        CopyFormatCommand: CopyFormatCommand,\n        ApplyFormatCommand: ApplyFormatCommand,\n        CopyFormatTool: CopyFormatTool,\n        ApplyFormatTool: ApplyFormatTool\n    });\n\n    registerTool(\"copyFormat\", new CopyFormatTool({ template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Copy format\" }) }));\n    registerTool(\"applyFormat\", new ApplyFormatTool({ template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Apply format\" }) }));\n\n    })(window.kendo.jQuery);\n\n    (function(kendo, undefined$1) {\n        var global = window;\n        var math = global.Math;\n        var min = math.min;\n        var max = math.max;\n        var parseFloat = global.parseFloat;\n\n        var $ = kendo.jQuery;\n        var extend = $.extend;\n\n        var Editor = kendo.ui.editor;\n\n        var PERCENTAGE = \"%\";\n        var PIXEL = \"px\";\n        var REGEX_NUMBER_IN_PERCENTAGES = /(\\d+)(\\.?)(\\d*)%/;\n        var REGEX_NUMBER_IN_PIXELS = /(\\d+)(\\.?)(\\d*)px/;\n        var STRING = \"string\";\n\n        function constrain(options) {\n            var value = options.value;\n            var lowerBound = options.min;\n            var upperBound = options.max;\n\n            return max(min(parseFloat(value), parseFloat(upperBound)), parseFloat(lowerBound));\n        }\n\n        function getScrollBarWidth(element) {\n            if (element && !$(element).is(\"body\") && element.scrollHeight > element.clientHeight) {\n                return kendo.support.scrollbar();\n            }\n\n            return 0;\n        }\n\n        function calculatePercentageRatio(value, total) {\n            if (inPercentages(value)) {\n                return parseFloat(value);\n            }\n            else {\n                return ((parseFloat(value) / total) * 100);\n            }\n        }\n\n        function inPercentages(value) {\n            return (typeof(value) === STRING && REGEX_NUMBER_IN_PERCENTAGES.test(value));\n        }\n\n        function inPixels(value) {\n            return (typeof(value) === STRING && REGEX_NUMBER_IN_PIXELS.test(value));\n        }\n\n        function toPercentages(value) {\n            return (parseFloat(value) + PERCENTAGE);\n        }\n\n        function toPixels(value) {\n            return (parseFloat(value) + PIXEL);\n        }\n\n        var ResizingUtils = {\n            constrain: constrain,\n            getScrollBarWidth: getScrollBarWidth,\n            calculatePercentageRatio: calculatePercentageRatio,\n            inPercentages: inPercentages,\n            inPixels: inPixels,\n            toPercentages: toPercentages,\n            toPixels: toPixels\n        };\n\n        extend(Editor, {\n            ResizingUtils: ResizingUtils\n        });\n    })(window.kendo);\n\n    (function(kendo, undefined$1) {\n        var $ = kendo.jQuery;\n        var extend = $.extend;\n        var noop = $.noop;\n\n        var Editor = kendo.ui.editor;\n        var Class = kendo.Class;\n\n        var KEY_DOWN = \"keydown\";\n        var MOUSE_DOWN = \"mousedown\";\n        var MOUSE_ENTER = \"mouseenter\";\n        var MOUSE_LEAVE = \"mouseleave\";\n        var MOUSE_MOVE = \"mousemove\";\n        var MOUSE_UP = \"mouseup\";\n\n        var COMMA = \",\";\n        var DOT = \".\";\n        var LAST_CHILD = \":last-child\";\n\n        var TABLE = \"table\";\n\n        var TableElementResizing = Class.extend({\n            init: function(element, options) {\n                var that = this;\n\n                that.options = extend({}, that.options, options);\n\n                that.options.tags = Array.isArray(that.options.tags) ? that.options.tags : [that.options.tags];\n\n                if ($(element).is(TABLE)) {\n                    that.element = element;\n                    that._attachEventHandlers();\n                }\n            },\n\n            destroy: function() {\n                var that = this;\n                var eventNamespace = that.options.eventNamespace;\n\n                if (that.element) {\n                    $(that.element).off(eventNamespace);\n                    that.element = null;\n                }\n\n                $(that.options.rootElement).off(KEY_DOWN + eventNamespace);\n\n                that._destroyResizeHandle();\n            },\n\n            options: {\n                tags: [],\n                min: 0,\n                rootElement: null,\n                eventNamespace: \"\",\n                rtl: false,\n                handle: {\n                    dataAttribute: \"\",\n                    height: 0,\n                    width: 0,\n                    classNames: {},\n                    template: \"\"\n                }\n            },\n\n            _attachEventHandlers: function() {\n                var that = this;\n                var options = that.options;\n\n                $(that.element).on(MOUSE_MOVE + options.eventNamespace, options.tags.join(COMMA), that.detectElementBorderHovering.bind(that));\n            },\n\n            resizingInProgress: function() {\n                var that = this;\n                var resizable = that._resizable;\n\n                if (resizable) {\n                    return !!resizable.resizing;\n                }\n\n                return false;\n            },\n\n            resize: noop,\n\n            detectElementBorderHovering: function(e) {\n                var that = this;\n                var options = that.options;\n                var handleOptions = options.handle;\n                var tableElement = $(e.currentTarget);\n                var resizeHandle = that.resizeHandle;\n                var dataAttribute = handleOptions.dataAttribute;\n\n                if (!that.resizingInProgress()) {\n                    if (!tableElement.is(LAST_CHILD) && that.elementBorderHovered(tableElement, e)) {\n                        if (resizeHandle) {\n                            if (resizeHandle.data(dataAttribute) && resizeHandle.data(dataAttribute) !== tableElement[0]) {\n                                that.showResizeHandle(tableElement, e);\n                            }\n                        }\n                        else {\n                            that.showResizeHandle(tableElement, e);\n                        }\n                    }\n                    else {\n                        if (resizeHandle) {\n                            that._destroyResizeHandle();\n                        }\n                    }\n                }\n            },\n\n            elementBorderHovered: noop,\n\n            showResizeHandle: function(tableElement, e) {\n                var that = this;\n\n                if (e.buttons !== 0) {\n                    //prevent showing when a mouse button is still being pressed\n                    return;\n                }\n\n                that._initResizeHandle();\n                that.setResizeHandlePosition(tableElement);\n                that.setResizeHandleDimensions();\n                that.setResizeHandleDataAttributes(tableElement[0]);\n                that._attachResizeHandleEventHandlers();\n\n                that._initResizable(tableElement);\n\n                that._hideResizeMarker();\n                that.resizeHandle.show();\n            },\n\n            _initResizeHandle: function() {\n                var that = this;\n                var options = that.options;\n\n                that._destroyResizeHandle();\n\n                that.resizeHandle = $(options.handle.template).appendTo(options.rootElement);\n            },\n\n            setResizeHandlePosition: noop,\n\n            setResizeHandleDimensions: noop,\n\n            setResizeHandleDataAttributes: function(tableElement) {\n                var that = this;\n\n                that.resizeHandle.data(that.options.handle.dataAttribute, tableElement);\n            },\n\n            _attachResizeHandleEventHandlers: function() {\n                var that = this;\n                var options = that.options;\n                var eventNamespace = options.eventNamespace;\n                var markerClass = options.handle.classNames.marker;\n                var resizeHandle = that.resizeHandle;\n\n                that.resizeHandle\n                    .on(MOUSE_DOWN + eventNamespace, function() {\n                        resizeHandle.find(DOT + markerClass).show();\n                    })\n                    .on(MOUSE_UP + eventNamespace, function() {\n                        resizeHandle.find(DOT + markerClass).hide();\n                    });\n            },\n\n            _hideResizeMarker: function() {\n                var that = this;\n\n                that.resizeHandle.find(DOT + that.options.handle.classNames.marker).hide();\n            },\n\n            _destroyResizeHandle: function() {\n                var that = this;\n\n                if (that.resizeHandle) {\n                    that._destroyResizable();\n                    that.resizeHandle.off(that.options.eventNamespace).remove();\n                    that.resizeHandle = null;\n                }\n            },\n\n            _initResizable: function(tableElement) {\n                var that = this;\n\n                if (!that.resizeHandle) {\n                    return;\n                }\n\n                that._destroyResizable();\n\n                that._resizable = new kendo.ui.Resizable(tableElement, {\n                    draggableElement: that.resizeHandle[0],\n                    start: that.onResizeStart.bind(that),\n                    resize: that.onResize.bind(that),\n                    resizeend: that.onResizeEnd.bind(that)\n                });\n            },\n\n            _destroyResizable: function() {\n                var that = this;\n\n                if (that._resizable) {\n                    that._resizable.destroy();\n                    that._resizable = null;\n                }\n            },\n\n            onResizeStart: function() {\n                this._disableKeyboard();\n            },\n\n            onResize: function(e) {\n                this.setResizeHandleDragPosition(e);\n            },\n\n            setResizeHandleDragPosition: noop,\n\n            onResizeEnd: function(e) {\n                var that = this;\n\n                that.resize(e);\n                that._destroyResizeHandle();\n                that._enableKeyboard();\n            },\n\n            _enableKeyboard: function() {\n                var options = this.options;\n\n                $(options.rootElement).off(KEY_DOWN + options.eventNamespace);\n            },\n\n            _disableKeyboard: function() {\n                var options = this.options;\n\n                $(options.rootElement).on(KEY_DOWN + options.eventNamespace, function(e) {\n                    e.preventDefault();\n                });\n            },\n\n            _forceResizing: function(e) {\n                var resizable = this._resizable;\n\n                if (resizable && resizable.userEvents) {\n                    resizable.userEvents._end(e);\n                }\n            }\n        });\n\n        var ResizingFactory = Class.extend({\n            create: function(editor, options) {\n                var that = this;\n                var resizingName = options.name;\n                var NS = options.eventNamespace;\n\n                $(editor.body)\n                    .on(MOUSE_ENTER + NS, TABLE, function(e) {\n                        var table = e.currentTarget;\n                        var resizing = editor[resizingName];\n\n                        e.stopPropagation();\n\n                        if (resizing) {\n                            if (resizing.element !== table && !resizing.resizingInProgress()) {\n                                that._destroyResizing(editor, options);\n                                that._initResizing(editor, table, options);\n                            }\n                        }\n                        else {\n                            that._initResizing(editor, table, options);\n                        }\n                    })\n                    .on(MOUSE_LEAVE + NS, TABLE, function(e) {\n                        var parentTable;\n                        var resizing = editor[resizingName];\n\n                        e.stopPropagation();\n\n                        if (resizing && !resizing.resizingInProgress() && !resizing.resizeHandle) {\n                            parentTable = $(resizing.element).parents(TABLE)[0];\n\n                            if (parentTable) {\n                                that._destroyResizing(editor, options);\n                                that._initResizing(editor, parentTable, options);\n                            }\n                        }\n                    })\n                    .on(MOUSE_LEAVE + NS, function() {\n                        var resizing = editor[resizingName];\n\n                        if (resizing && !resizing.resizingInProgress()) {\n                            that._destroyResizing(editor, options);\n                        }\n                    })\n                    .on(MOUSE_UP + NS, function(e) {\n                        var resizing = editor[resizingName];\n                        var parentTable;\n\n                        if (resizing && resizing.resizingInProgress()) {\n                            parentTable = $(e.target).parents(TABLE)[0];\n\n                            if (parentTable) {\n                                resizing._forceResizing(e);\n                                that._destroyResizing(editor, options);\n                                that._initResizing(editor, parentTable, options);\n                            }\n                        }\n                    });\n            },\n\n            dispose: function(editor, options) {\n                $(editor.body).off(options.eventNamespace);\n            },\n\n            _initResizing: function(editor, tableElement, options) {\n                var resizingName = options.name;\n                var resizingType = options.type;\n\n                editor[resizingName] = new resizingType(tableElement, {\n                    rtl: kendo.support.isRtl(editor.element),\n                    rootElement: editor.body\n                });\n            },\n\n            _destroyResizing: function(editor, options) {\n                var resizingName = options.name;\n\n                if (editor[resizingName]) {\n                    editor[resizingName].destroy();\n                    editor[resizingName] = null;\n                }\n            }\n        });\n        ResizingFactory.current = new ResizingFactory();\n\n        TableElementResizing.create = function(editor, options) {\n            ResizingFactory.current.create(editor, options);\n        };\n\n        TableElementResizing.dispose = function(editor, options) {\n            ResizingFactory.current.dispose(editor, options);\n        };\n\n        extend(Editor, {\n            TableElementResizing: TableElementResizing\n        });\n\n    })(window.kendo);\n\n    (function(kendo, undefined$1) {\n        var global = window;\n        var math = global.Math;\n        var abs = math.abs;\n\n        var $ = kendo.jQuery;\n        var extend = $.extend;\n\n        var Editor = kendo.ui.editor;\n        var dom = Editor.Dom;\n        var TableElementResizing = Editor.TableElementResizing;\n        var ResizingUtils = Editor.ResizingUtils;\n        var constrain = ResizingUtils.constrain;\n        var calculatePercentageRatio = ResizingUtils.calculatePercentageRatio;\n        var getScrollBarWidth = ResizingUtils.getScrollBarWidth;\n        var inPercentages = ResizingUtils.inPercentages;\n        var toPercentages = ResizingUtils.toPercentages;\n        var toPixels = ResizingUtils.toPixels;\n        var outerWidth = kendo._outerWidth;\n\n        var NS = \".kendoEditorColumnResizing\";\n        var RESIZE_HANDLE_CLASS = \"k-column-resize-handle\";\n        var RESIZE_MARKER_CLASS = \"k-column-resize-marker\";\n\n        var BODY = \"body\";\n        var TBODY = \"tbody\";\n        var THEAD = \"thead\";\n        var TD = \"td\";\n        var TH = \"th\";\n        var TR = \"tr\";\n\n        var COLATTR = \"col-index\";\n\n        var COMMA = \",\";\n        var WIDTH = \"width\";\n\n        var ColumnResizing = TableElementResizing.extend({\n            options: {\n                tags: [TD, TH],\n                min: 20,\n                rootElement: null,\n                eventNamespace: NS,\n                rtl: false,\n                handle: {\n                    dataAttribute: \"column\",\n                    width: 10,\n                    height: 0,\n                    classNames: {\n                        handle: RESIZE_HANDLE_CLASS,\n                        marker: RESIZE_MARKER_CLASS\n                    },\n                    template:\n                        '<div class=\"k-column-resize-handle-wrapper\" unselectable=\"on\" contenteditable=\"false\">' +\n                            '<div class=\"' + RESIZE_HANDLE_CLASS + '\">' +\n                                '<div class=\"' + RESIZE_MARKER_CLASS + '\"></div>' +\n                            '</div>' +\n                        '</div>'\n                }\n            },\n\n            elementBorderHovered: function(column, e) {\n                var that = this;\n                var options = that.options;\n                var handleWidth = options.handle.width;\n                var borderOffset = column.offset().left + (options.rtl ? 0 : outerWidth(column));\n\n\n                var mousePosition = e.clientX + $(column[0].ownerDocument).scrollLeft();\n\n                if ((mousePosition > (borderOffset - handleWidth)) && (mousePosition < (borderOffset + handleWidth))) {\n                    return true;\n                }\n                else {\n                    return false;\n                }\n            },\n\n            setResizeHandlePosition: function(column) {\n                var that = this;\n                var tableInnerElement = $(that.element.tHead || that.element.tBodies[0]);\n                var options = that.options;\n                var rtl = options.rtl;\n                var handleWidth = options.handle.width;\n                var rootElement = $(options.rootElement);\n                var scrollTopOffset = rootElement.is(BODY) ? 0 : rootElement.scrollTop();\n                var scrollLeftOffset = rootElement.is(BODY) ? 0 : kendo.scrollLeft(rootElement);\n                var columnWidthOffset = rtl ? 0 : outerWidth(column);\n                var scrollBarWidth = rtl ? getScrollBarWidth(rootElement[0]) : 0;\n                var columnOffsetLeft = column.offset().left -\n                                        (rootElement.offset().left + parseFloat(rootElement.css(\"borderLeftWidth\"))) -\n                                        parseFloat(column.css(\"marginLeft\"));\n                var innerElementOffsetTop = tableInnerElement.offset().top -\n                                        (rootElement.offset().top + parseFloat(rootElement.css(\"borderTopWidth\"))) -\n                                        parseFloat(tableInnerElement.css(\"marginTop\"));\n                var browser = kendo.support.browser;\n\n                if (rtl && (browser.mozilla || (browser.webkit && browser.version >= 85))) {\n                    scrollLeftOffset = scrollLeftOffset * -1;\n                }\n\n                that.resizeHandle.css({\n                    top: innerElementOffsetTop + scrollTopOffset,\n                    left: columnOffsetLeft + columnWidthOffset + (scrollLeftOffset - scrollBarWidth) - (handleWidth / 2),\n                    position: \"absolute\"\n                });\n            },\n\n            setResizeHandleDimensions: function() {\n                var that = this;\n                var tableHead = $(that.element).children(THEAD);\n                var tableBody = $(that.element).children(TBODY);\n                var fullHeight = tableHead.length > 0 ? tableHead.height() + tableBody.height() : tableBody.height();\n\n                that.resizeHandle.css({\n                    width: that.options.handle.width,\n                    height: fullHeight\n                });\n            },\n\n            setResizeHandleDragPosition: function(e) {\n                var that = this;\n                var column = $($(e.currentTarget).data(that.options.handle.dataAttribute));\n                var options = that.options;\n                var rootElement = $(options.rootElement);\n                var handleWidth = options.handle ? options.handle.width : 0;\n                var min = options.min;\n                var rtl = options.rtl;\n                var columnWidth = outerWidth(column);\n                var columnLeftOffset = column.offset().left -\n                                        (rootElement.offset().left + parseFloat(rootElement.css(\"borderLeftWidth\"))) -\n                                        parseFloat(column.css(\"marginLeft\"));\n                var adjacentColumnWidth = outerWidth(column.next());\n                var resizeHandle = $(that.resizeHandle);\n                var scrollLeftOffset = rootElement.is(BODY) ? 0 : kendo.scrollLeft(rootElement);\n                var scrollBarWidth = rtl ? getScrollBarWidth(rootElement[0]) : 0;\n                var resizeHandleOffsetLeft = resizeHandle.offset().left -\n                                                (rootElement.offset().left + parseFloat(rootElement.css(\"borderLeftWidth\"))) -\n                                                parseFloat(resizeHandle.css(\"marginLeft\"));\n                var browser = kendo.support.browser;\n\n                if (rtl && (browser.mozilla || (browser.webkit && browser.version >= 85))) {\n                    scrollLeftOffset = scrollLeftOffset * -1;\n                }\n\n                var handleOffset = constrain({\n                    value: resizeHandleOffsetLeft + (scrollLeftOffset - scrollBarWidth) + e.x.delta,\n                    min: columnLeftOffset + (scrollLeftOffset - scrollBarWidth) - (rtl ? adjacentColumnWidth : 0) + min,\n                    max: columnLeftOffset + columnWidth + (scrollLeftOffset - scrollBarWidth) + (rtl ? 0 : adjacentColumnWidth) - handleWidth - min\n                });\n\n                resizeHandle.css({ left: handleOffset });\n            },\n\n            resize: function(e) {\n                var that = this;\n                var column = $($(e.currentTarget).data(that.options.handle.dataAttribute));\n                var options = that.options;\n                var rtlModifier = options.rtl ? (-1) : 1;\n                var min = options.min;\n                var initialDeltaX = rtlModifier * e.x.initialDelta;\n                var newWidth;\n                var initialAdjacentColumnWidth;\n                var initialColumnWidth;\n                var colIndex;\n                var nextColumn;\n\n                dom.reMapTableColumns(that.element, COLATTR);\n\n                colIndex = parseInt(column.attr(COLATTR), 10);\n\n                if (column.prop(\"colSpan\") > 1) {\n                    column = $(that.element).find(\"[\" + COLATTR + \"=\" + (colIndex + column.prop(\"colSpan\") - 1) + \"]\").eq(0);\n                    colIndex = parseInt(column.attr(COLATTR), 10);\n                }\n\n                nextColumn = $(that.element).find(\"[\" + COLATTR + \"=\" + (colIndex + 1) + \"]:not([colspan])\");\n\n                that._setTableComputedWidth();\n                that._setColumnsComputedWidth();\n\n                initialColumnWidth = outerWidth(column);\n                initialAdjacentColumnWidth = outerWidth(nextColumn);\n\n                newWidth = constrain({\n                    value: initialColumnWidth + initialDeltaX,\n                    min: min,\n                    max: initialColumnWidth + initialAdjacentColumnWidth - min\n                });\n\n                that._resizeColumn(column[0], newWidth);\n                that._resizeTopAndBottomColumns(column[0], newWidth);\n                that._resizeAdjacentColumns(parseInt(column.attr(COLATTR),10), initialAdjacentColumnWidth, initialColumnWidth, (initialColumnWidth - newWidth));\n\n                dom.clearTableMappings(that.element, COLATTR);\n            },\n\n            _setTableComputedWidth: function() {\n                var element = this.element;\n\n                if (element.style[WIDTH] === \"\") {\n                    element.style[WIDTH] = toPixels(outerWidth($(element)));\n                }\n            },\n\n            _setColumnsComputedWidth: function() {\n                var that = this;\n                var tableInnerElement = $(that.element.tHead || that.element.tBodies[0]);\n                var innerElementWidth = outerWidth(tableInnerElement);\n                var columns = tableInnerElement.children(TR).children(TD);\n                var length = columns.length;\n                var currentColumnsWidths = columns.map(function() {\n                    return outerWidth($(this));\n                });\n                var i;\n\n                for (i = 0; i < length; i++) {\n                    if (inPercentages(columns[i].style[WIDTH])) {\n                        columns[i].style[WIDTH] = toPercentages(calculatePercentageRatio(currentColumnsWidths[i], innerElementWidth));\n                    }\n                    else {\n                        columns[i].style[WIDTH] = toPixels(currentColumnsWidths[i]);\n                    }\n                }\n            },\n\n            _resizeTopAndBottomColumns: function(column, newWidth) {\n                var that = this;\n                var columnIndex = $(column).attr(COLATTR);\n                var topAndBottomColumns = $(that.element).children(TBODY + COMMA + THEAD).children(TR).children(that.options.tags.join(COMMA))\n                    .filter(function() {\n                        var cell = this;\n                        return ($(cell).attr(COLATTR) === columnIndex && cell !== column);\n                    });\n                var length = topAndBottomColumns.length;\n                var i;\n\n                for (i = 0; i < length; i++) {\n                    that._resizeColumn(topAndBottomColumns[i], newWidth);\n                }\n            },\n\n            _resizeColumn: function(column, newWidth) {\n                var innerTableElement = $(this.element.tHead || this.element.tBodies[0]);\n                if (inPercentages(column.style[WIDTH])) {\n                    column.style[WIDTH] = toPercentages(calculatePercentageRatio(newWidth, outerWidth(innerTableElement)));\n                }\n                else {\n                    column.style[WIDTH] = toPixels(newWidth);\n                }\n            },\n\n            _resizeAdjacentColumns: function(columnIndex, initialAdjacentColumnWidth, initialColumnWidth, deltaWidth) {\n                var that = this;\n                var adjacentColumns = $(that.element).children(TBODY + COMMA + THEAD).children(TR).children(that.options.tags.join(COMMA))\n                    .filter(function() {\n                        return (parseInt($(this).attr(COLATTR),10) === (columnIndex + 1));\n                    });\n                var length = adjacentColumns.length;\n                var i;\n\n                for (i = 0; i < length; i++) {\n                    that._resizeAdjacentColumn(adjacentColumns[i], initialAdjacentColumnWidth, initialColumnWidth, deltaWidth);\n                }\n            },\n\n            _resizeAdjacentColumn: function(adjacentColumn, initialAdjacentColumnWidth, initialColumnWidth, deltaWidth) {\n                var that = this;\n                var min = that.options.min;\n                var newWidth;\n\n                newWidth = constrain({\n                    value: initialAdjacentColumnWidth + deltaWidth,\n                    min: min,\n                    max: abs(initialColumnWidth + initialAdjacentColumnWidth - min)\n                });\n\n                that._resizeColumn(adjacentColumn, newWidth);\n            }\n        });\n\n        ColumnResizing.create = function(editor) {\n            TableElementResizing.create(editor, {\n                name: \"columnResizing\",\n                type: ColumnResizing,\n                eventNamespace: NS\n            });\n        };\n\n        ColumnResizing.dispose = function(editor) {\n            TableElementResizing.dispose(editor, {\n                eventNamespace: NS\n            });\n        };\n\n        extend(Editor, {\n            ColumnResizing: ColumnResizing\n        });\n\n    })(window.kendo);\n\n    (function(kendo, undefined$1) {\n        var math = window.Math;\n        var abs = math.abs;\n\n        var $ = kendo.jQuery;\n        var extend = $.extend;\n\n        var Editor = kendo.ui.editor;\n        var TableElementResizing = Editor.TableElementResizing;\n        var ResizingUtils = Editor.ResizingUtils;\n        var getScrollBarWidth = ResizingUtils.getScrollBarWidth;\n        var constrain = ResizingUtils.constrain;\n        var calculatePercentageRatio = ResizingUtils.calculatePercentageRatio;\n        var inPercentages = ResizingUtils.inPercentages;\n        var toPercentages = ResizingUtils.toPercentages;\n        var toPixels = ResizingUtils.toPixels;\n        var outerHeight = kendo._outerHeight;\n\n        var NS = \".kendoEditorRowResizing\";\n        var RESIZE_HANDLE_CLASS = \"k-row-resize-handle\";\n        var RESIZE_HANDLE_MARKER_WRAPPER_CLASS = \"k-row-resize-marker-wrapper\";\n        var RESIZE_MARKER_CLASS = \"k-row-resize-marker\";\n\n        var BODY = \"body\";\n        var TR = \"tr\";\n        var TBODY = \"tbody\";\n        var THEAD = \"thead\";\n\n        var COMMA = \",\";\n        var HEIGHT = \"height\";\n\n        var RowResizing = TableElementResizing.extend({\n            options: {\n                tags: [TR],\n                min: 20,\n                rootElement: null,\n                eventNamespace: NS,\n                rtl: false,\n                handle: {\n                    dataAttribute: \"row\",\n                    width: 0,\n                    height: 10,\n                    classNames: {\n                        handle: RESIZE_HANDLE_CLASS,\n                        marker: RESIZE_MARKER_CLASS\n                    },\n                    template:\n                        '<div class=\"k-row-resize-handle-wrapper\" unselectable=\"on\" contenteditable=\"false\">' +\n                            '<div class=\"' + RESIZE_HANDLE_CLASS + '\">' +\n                                '<div class=\"' + RESIZE_HANDLE_MARKER_WRAPPER_CLASS + '\">' +\n                                    '<div class=\"' + RESIZE_MARKER_CLASS + '\"></div>' +\n                                '</div>' +\n                            '</div>' +\n                        '</div>'\n                }\n            },\n\n            elementBorderHovered: function(tableElement, e) {\n                var that = this;\n                var handleHeight = that.options.handle[HEIGHT];\n                var borderOffset = tableElement.offset().top + outerHeight(tableElement);\n                var mousePosition = e.clientY + $(tableElement[0].ownerDocument).scrollTop();\n\n                if ((mousePosition > (borderOffset - handleHeight)) && (mousePosition < (borderOffset + handleHeight))) {\n                    return true;\n                }\n                else {\n                    return false;\n                }\n            },\n\n            setResizeHandlePosition: function(row) {\n                var that = this;\n                var options = that.options;\n                var handleHeight = options.handle[HEIGHT];\n                var rootElement = $(options.rootElement);\n                var scrollTopOffset = rootElement.is(BODY) ? 0 : rootElement.scrollTop();\n                var scrollLeftOffset = rootElement.is(BODY) ? 0 : kendo.scrollLeft(rootElement);\n                var scrollBarWidth = options.rtl ? getScrollBarWidth(rootElement[0]) : 0;\n\n                var rowOffsetLeft = row.offset().left -\n                                        (rootElement.offset().left + parseFloat(rootElement.css(\"borderLeftWidth\"))) -\n                                        parseFloat(row.css(\"marginLeft\"));\n                var rowOffsetTop = row.offset().top -\n                                        (rootElement.offset().top + parseFloat(rootElement.css(\"borderTopWidth\"))) -\n                                        parseFloat(row.css(\"marginTop\"));\n                var browser = kendo.support.browser;\n\n                if (options.rtl && (browser.mozilla || (browser.webkit && browser.version >= 85))) {\n                    scrollLeftOffset = scrollLeftOffset * -1;\n                }\n\n                that.resizeHandle.css({\n                    top: rowOffsetTop + outerHeight(row) + scrollTopOffset - (handleHeight / 2),\n                    left: rowOffsetLeft + (scrollLeftOffset - scrollBarWidth),\n                    position: \"absolute\"\n                });\n            },\n\n            setResizeHandleDimensions: function() {\n                var that = this;\n                var innerTableElement = $(that.element.tHead || that.element.tBodies[0]);\n\n                that.resizeHandle.css({\n                    width: innerTableElement.width(),\n                    height: that.options.handle[HEIGHT]\n                });\n            },\n\n            setResizeHandleDragPosition: function(e) {\n                var that = this;\n                var options = that.options;\n                var min = options.min;\n                var tableHead = $(that.element).children(THEAD);\n                var tableBody = $(that.element).children(TBODY);\n                var topInnerTableElement = tableHead.length > 0 ? tableHead : tableBody;\n                var resizeHandle = $(that.resizeHandle);\n                var row = $(e.currentTarget).data(options.handle.dataAttribute);\n                var $row = $(row);\n                var rootElement = $(options.rootElement);\n                var scrollTopOffset = rootElement.is(BODY) ? 0 : rootElement.scrollTop();\n                var tableTopOffset = topInnerTableElement.offset().top -\n                                        (rootElement.offset().top + parseFloat(rootElement.css(\"borderTopWidth\"))) -\n                                        parseFloat(topInnerTableElement.css(\"marginTop\"));\n\n                var rowOffsetTop = $row.offset().top -\n                                    (rootElement.offset().top + parseFloat(rootElement.css(\"borderTopWidth\"))) -\n                                    parseFloat($row.css(\"marginTop\"));\n\n                var resizeHandleOffsetTop = resizeHandle.offset().top -\n                                    (Math.max(0 , rootElement.offset().top) + parseFloat(rootElement.css(\"borderTopWidth\"))) -\n                                    parseFloat(resizeHandle.css(\"marginTop\"));\n\n                var handleOffset = constrain({\n                    value: resizeHandleOffsetTop + scrollTopOffset + e.y.delta,\n                    min: rowOffsetTop + scrollTopOffset + min,\n                    max: tableTopOffset + outerHeight(tableHead) + outerHeight(tableBody) + scrollTopOffset - options.handle[HEIGHT] - min\n                });\n\n                resizeHandle.css({ top: handleOffset });\n            },\n\n            resize: function(e) {\n                var that = this;\n                var options = that.options;\n                var row = $(e.currentTarget).data(options.handle.dataAttribute);\n                var currentRowHeight = outerHeight($(row));\n                var element = $(that.element);\n                var initialTableHeight = outerHeight(element);\n                var tableHead = element.children(THEAD);\n                var tableHeadHeight = tableHead.length > 0 ? tableHead.height() : 0;\n                var tableBody = element.children(TBODY);\n                var tableBodyHeight = tableBody.height();\n                var initialStyleHeight = row.style[HEIGHT];\n                var newRowHeight = constrain({\n                    value: currentRowHeight + e.y.initialDelta,\n                    min: options.min,\n                    max: abs(tableHeadHeight + tableBodyHeight - options.min)\n                });\n\n                that._setRowsHeightInPixels();\n                row.style[HEIGHT] = toPixels(newRowHeight);\n                that._setTableHeight(initialTableHeight + (newRowHeight - currentRowHeight));\n\n                if (inPercentages(initialStyleHeight)) {\n                    //resize rows in percentages as late as possible to prevent incorrect precision calculations\n                    that._setRowsHeightInPercentages();\n                }\n            },\n\n            _setRowsHeightInPixels: function() {\n                var that = this;\n                var rows = $(that.element).children(TBODY + COMMA + THEAD).children(TR);\n                var length = rows.length;\n                var currentRowsHeights = rows.map(function() {\n                    return outerHeight($(this));\n                });\n                var i;\n\n                for (i = 0; i < length; i++) {\n                    rows[i].style[HEIGHT] = toPixels(currentRowsHeights[i]);\n                }\n            },\n\n            _setRowsHeightInPercentages: function() {\n                var that = this;\n                var tableHead = $(that.element).children(THEAD);\n                var tableHeadHeight = tableHead.length > 0 ? tableHead.height() : 0;\n                var tableBody = $(that.element).children(TBODY);\n                var tableBodyHeight = tableBody.height();\n                var rows = $(that.element).children(THEAD + COMMA + TBODY).children(TR);\n                var length = rows.length;\n                var currentRowsHeights = rows.map(function() {\n                    return outerHeight($(this));\n                });\n                var i;\n\n                for (i = 0; i < length; i++) {\n                    rows[i].style[HEIGHT] = toPercentages(calculatePercentageRatio(currentRowsHeights[i], tableHeadHeight + tableBodyHeight));\n                }\n            },\n\n            _setTableHeight: function(newHeight) {\n                var element = this.element;\n\n                if (inPercentages(element.style[HEIGHT])) {\n                    element.style[HEIGHT] = toPercentages(calculatePercentageRatio(newHeight, $(element).parent().height()));\n                }\n                else {\n                    element.style[HEIGHT] = toPixels(newHeight);\n                }\n            }\n        });\n\n        RowResizing.create = function(editor) {\n            TableElementResizing.create(editor, {\n                name: \"rowResizing\",\n                type: RowResizing,\n                eventNamespace: NS\n            });\n        };\n\n        RowResizing.dispose = function(editor) {\n            TableElementResizing.dispose(editor, {\n                eventNamespace: NS\n            });\n        };\n\n        extend(Editor, {\n            RowResizing: RowResizing\n        });\n\n    })(window.kendo);\n\n    (function(kendo, undefined$1) {\n        var $ = kendo.jQuery;\n        var extend = $.extend;\n        var noop = $.noop;\n\n        var Editor = kendo.ui.editor;\n        var Class = kendo.Class;\n        var Draggable = kendo.ui.Draggable;\n        var Observable = kendo.Observable;\n        var getScrollBarWidth = Editor.ResizingUtils.getScrollBarWidth;\n        var outerWidth = kendo._outerWidth;\n        var outerHeight = kendo._outerHeight;\n\n        var NS = \".kendoEditorElementResizeHandle\";\n        var RESIZE_HANDLE_CLASS = \"k-element-resize-handle\";\n\n        var DRAG_START = \"dragStart\";\n        var DRAG = \"drag\";\n        var DRAG_END = \"dragEnd\";\n        var HALF_INSIDE = \"halfInside\";\n        var MOUSE_OVER = \"mouseover\";\n        var MOUSE_OUT = \"mouseout\";\n\n        var BODY = \"body\";\n        var TABLE = \"table\";\n\n        var EAST = \"east\";\n        var NORTH = \"north\";\n        var NORTHEAST = \"northeast\";\n        var NORTHWEST = \"northwest\";\n        var SOUTH = \"south\";\n        var SOUTHEAST = \"southeast\";\n        var SOUTHWEST = \"southwest\";\n        var WEST = \"west\";\n\n        var DOT = \".\";\n\n        var ElementResizeHandle = Observable.extend({\n            init: function(options) {\n                var that = this;\n\n                Observable.fn.init.call(that);\n\n                that.options = extend({}, that.options, options);\n                that.element = $(that.options.template).appendTo(that.options.appendTo)[0];\n\n                that._attachEventHandlers();\n                that._addStyles();\n                that._initDraggable();\n                that._initPositioningStrategy();\n                that._initDraggingStrategy();\n\n                $(that.element).data(TABLE, that.options.resizableElement);\n            },\n\n            destroy: function() {\n                var that = this;\n\n                $(that.element).off(NS).remove();\n                that.element = null;\n\n                that._destroyDraggable();\n\n                that.unbind();\n            },\n\n            options: {\n                appendTo: null,\n                direction: SOUTHEAST,\n                resizableElement: null,\n                rtl: false,\n                template:\n                    \"<div class='k-element-resize-handle-wrapper' unselectable='on' contenteditable='false'>\" +\n                        \"<div class='\" + RESIZE_HANDLE_CLASS + \"'></div>\" +\n                    \"</div>\"\n            },\n\n            events: [\n                DRAG_START,\n                DRAG,\n                DRAG_END,\n                MOUSE_OVER,\n                MOUSE_OUT\n            ],\n\n            show: function() {\n                this._setPosition();\n            },\n\n            _setPosition: function() {\n                var that = this;\n                var position = that._positioningStrategy.getPosition();\n\n                $(that.element).css({\n                    top: position.top,\n                    left: position.left,\n                    position: \"absolute\"\n                });\n            },\n\n            _attachEventHandlers: function() {\n                var that = this;\n\n                $(that.element)\n                    .on(MOUSE_OVER + NS, that._onMouseOver.bind(that))\n                    .on(MOUSE_OUT + NS, that._onMouseOut.bind(that));\n            },\n\n            _onMouseOver: function() {\n                this.trigger(MOUSE_OVER);\n            },\n\n            _onMouseOut: function() {\n                this.trigger(MOUSE_OUT);\n            },\n\n            _addStyles: function() {\n                var that = this;\n                $(that.element).children(DOT + RESIZE_HANDLE_CLASS).addClass(\"k-resize-\" + that.options.direction);\n            },\n\n            _initPositioningStrategy: function() {\n                var that = this;\n                var options = that.options;\n\n                that._positioningStrategy = HandlePositioningStrategy.create({\n                    name: options.direction,\n                    handle: that.element,\n                    resizableElement: options.resizableElement,\n                    rootElement: options.rootElement,\n                    rtl: options.rtl\n                });\n            },\n\n            _initDraggable: function() {\n                var that = this;\n                var element = that.element;\n\n                if (that._draggable || !element) {\n                    return;\n                }\n\n                that._draggable = new Draggable(element, {\n                    dragstart: that._onDragStart.bind(that),\n                    drag: that._onDrag.bind(that),\n                    dragend: that._onDragEnd.bind(that)\n                });\n            },\n\n            _onDragStart: function() {\n                this.trigger(DRAG_START);\n            },\n\n            _onDrag: function(e) {\n                var that = this;\n\n                that.trigger(DRAG, that._draggingStrategy.adjustDragDelta({\n                    deltaX: e.x.delta,\n                    deltaY: e.y.delta,\n                    initialDeltaX: e.x.initialDelta,\n                    initialDeltaY: e.y.initialDelta\n                }));\n            },\n\n            _onDragEnd: function() {\n                this.trigger(DRAG_END);\n            },\n\n            _destroyDraggable: function() {\n                var that = this;\n\n                if (that._draggable) {\n                    that._draggable.destroy();\n                    that._draggable = null;\n                }\n            },\n\n            _initDraggingStrategy: function() {\n                var that = this;\n\n                that._draggingStrategy = HandleDraggingStrategy.create({\n                    name: that.options.direction\n                });\n            }\n        });\n\n        var StrategyFactory = Class.extend({\n            init: function() {\n                this._items = [];\n            },\n\n            register: function(name, type) {\n                this._items.push({\n                    name: name,\n                    type: type\n                });\n            },\n\n            create: function(options) {\n                var items = this._items;\n                var itemsLength = items.length;\n                var name = options.name ? options.name.toLowerCase() : \"\";\n                var match;\n                var item;\n                var i;\n\n                for (i = 0; i < itemsLength; i++) {\n                    item = items[i];\n\n                    if (item.name.toLowerCase() === name) {\n                        match = item;\n                        break;\n                    }\n                }\n\n                if (match) {\n                    return new match.type(options);\n                }\n            }\n        });\n\n        var PositioningStrategyFactory = StrategyFactory.extend({});\n        PositioningStrategyFactory.current = new PositioningStrategyFactory();\n\n        var HandlePositioningStrategy = Class.extend({\n            init: function(options) {\n                var that = this;\n                that.options = extend({}, that.options, options);\n            },\n\n            options: {\n                handle: null,\n                offset: HALF_INSIDE,\n                resizableElement: null,\n                rootElement: null,\n                rtl: false\n            },\n\n            getPosition: function() {\n                var that = this;\n\n                var position = that.calculatePosition();\n                var handleOffsetPosition = that.applyHandleOffset(position);\n                var scrollOffsetPosition = that.applyScrollOffset(handleOffsetPosition);\n\n                return scrollOffsetPosition;\n            },\n\n            calculatePosition: noop,\n\n            applyHandleOffset: function(position) {\n                var options = this.options;\n                var handle = $(options.handle);\n\n                if (options.offset === HALF_INSIDE) {\n                    return {\n                        top: position.top - (outerHeight(handle) / 2),\n                        left: position.left - (outerWidth(handle) / 2)\n                    };\n                }\n\n                return position;\n            },\n\n            applyScrollOffset: function(position) {\n                var options = this.options;\n                var rootElement = $(options.rootElement);\n                var scrollBarWidth = options.rtl ? getScrollBarWidth(rootElement[0]) : 0;\n                var browser = kendo.support.browser;\n                var rootLeft;\n\n                if (!rootElement.is(BODY)) {\n                    rootLeft = kendo.scrollLeft(rootElement) || 0;\n\n                    if (options.rtl && (browser.mozilla || (browser.webkit && browser.version >= 85))) {\n                        rootLeft = rootLeft * -1;\n                    }\n\n                    return {\n                        top: position.top + (rootElement.scrollTop() || 0),\n                        left: position.left + rootLeft - scrollBarWidth\n                    };\n                }\n\n                return position;\n            }\n        });\n\n        HandlePositioningStrategy.create = function(options) {\n            return PositioningStrategyFactory.current.create(options);\n        };\n\n        var EastPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function() {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n                return {\n                    top: offset.top + (outerHeight(resizableElement) / 2),\n                    left: offset.left + outerWidth(resizableElement) + marginLeft\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(EAST, EastPositioningStrategy);\n\n        var NorthPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function() {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n                return {\n                    top: offset.top,\n                    left: offset.left + (outerWidth(resizableElement) / 2) + marginLeft\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(NORTH, NorthPositioningStrategy);\n\n        var NortheastPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function() {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n                return {\n                    top: offset.top,\n                    left: offset.left + outerWidth(resizableElement) + marginLeft\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(NORTHEAST, NortheastPositioningStrategy);\n\n        var NorthwestPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function() {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n                return {\n                    top: offset.top,\n                    left: offset.left + marginLeft\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(NORTHWEST, NorthwestPositioningStrategy);\n\n        var SouthPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function() {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n                return {\n                    top: offset.top + outerHeight(resizableElement),\n                    left: offset.left + (outerWidth(resizableElement) / 2) + marginLeft\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(SOUTH, SouthPositioningStrategy);\n\n        var SoutheastPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function() {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n                return {\n                    top: offset.top + outerHeight(resizableElement),\n                    left: offset.left + outerWidth(resizableElement) + marginLeft\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(SOUTHEAST, SoutheastPositioningStrategy);\n\n        var SouthwestPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function() {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n                return {\n                    top: offset.top + outerHeight(resizableElement),\n                    left: offset.left + marginLeft\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(SOUTHWEST, SouthwestPositioningStrategy);\n\n        var WestPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function() {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n                return {\n                    top: offset.top + (outerHeight(resizableElement) / 2),\n                    left: offset.left + marginLeft\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(WEST, WestPositioningStrategy);\n\n        var DraggingStrategyFactory = StrategyFactory.extend({});\n        DraggingStrategyFactory.current = new DraggingStrategyFactory();\n\n        var HandleDraggingStrategy = Class.extend({\n            init: function(options) {\n                var that = this;\n                that.options = extend({}, that.options, options);\n            },\n\n            options: {\n                deltaX: {\n                    adjustment: null,\n                    modifier: null\n                },\n                deltaY: {\n                    adjustment: null,\n                    modifier: null\n                }\n            },\n\n            adjustDragDelta: function(deltas) {\n                var options = this.options;\n                var xAxisAdjustment = options.deltaX.adjustment * options.deltaX.modifier;\n                var yAxisAdjustment = options.deltaY.adjustment * options.deltaY.modifier;\n\n                return {\n                    deltaX: deltas.deltaX * xAxisAdjustment,\n                    deltaY: deltas.deltaY * yAxisAdjustment,\n                    initialDeltaX: deltas.initialDeltaX * xAxisAdjustment,\n                    initialDeltaY: deltas.initialDeltaY * yAxisAdjustment\n                };\n            }\n        });\n\n        HandleDraggingStrategy.create = function(options) {\n            return DraggingStrategyFactory.current.create(options);\n        };\n\n        var HorizontalDraggingStrategy = HandleDraggingStrategy.extend({\n            options: {\n                deltaX: {\n                    adjustment: 1,\n                    modifier: 1\n                },\n                deltaY: {\n                    adjustment: 0,\n                    modifier: 0\n                }\n            }\n        });\n\n        var EastDraggingStrategy = HorizontalDraggingStrategy.extend({\n            options: {\n                deltaX: {\n                    modifier: 1\n                }\n            }\n        });\n        DraggingStrategyFactory.current.register(EAST, EastDraggingStrategy);\n\n        var WestDraggingStrategy = HorizontalDraggingStrategy.extend({\n            options: {\n                deltaX: {\n                    modifier: (-1)\n                }\n            }\n        });\n        DraggingStrategyFactory.current.register(WEST, WestDraggingStrategy);\n\n        var VerticalDraggingStrategy = HandleDraggingStrategy.extend({\n            options: {\n                deltaX: {\n                    adjustment: 0,\n                    modifier: 0\n                },\n                deltaY: {\n                    adjustment: 1,\n                    modifier: 1\n                }\n            }\n        });\n\n        var NorthDraggingStrategy = VerticalDraggingStrategy.extend({\n            options: {\n                deltaY: {\n                    modifier: (-1)\n                }\n            }\n        });\n        DraggingStrategyFactory.current.register(NORTH, NorthDraggingStrategy);\n\n        var SouthDraggingStrategy = VerticalDraggingStrategy.extend({\n            options: {\n                deltaY: {\n                    modifier: 1\n                }\n            }\n        });\n        DraggingStrategyFactory.current.register(SOUTH, SouthDraggingStrategy);\n\n        var HorizontalAndVerticalDraggingStrategy = HandleDraggingStrategy.extend({\n            options: {\n                deltaX: {\n                    adjustment: 1,\n                    modifier: 1\n                },\n                deltaY: {\n                    adjustment: 1,\n                    modifier: 1\n                }\n            }\n        });\n\n        var NorthEastDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n            options: {\n                deltaX: {\n                    modifier: 1\n                },\n                deltaY: {\n                    modifier: (-1)\n                }\n            }\n        });\n        DraggingStrategyFactory.current.register(NORTHEAST, NorthEastDraggingStrategy);\n\n        var NorthWestDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n            options: {\n                deltaX: {\n                    modifier: (-1)\n                },\n                deltaY: {\n                    modifier: (-1)\n                }\n            }\n        });\n        DraggingStrategyFactory.current.register(NORTHWEST, NorthWestDraggingStrategy);\n\n        var SouthEastDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n            options: {\n                deltaX: {\n                    modifier: 1\n                },\n                deltaY: {\n                    modifier: 1\n                }\n            }\n        });\n        DraggingStrategyFactory.current.register(SOUTHEAST, SouthEastDraggingStrategy);\n\n        var SouthWestDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n            options: {\n                deltaX: {\n                    modifier: (-1)\n                },\n                deltaY: {\n                    modifier: 1\n                }\n            }\n        });\n        DraggingStrategyFactory.current.register(SOUTHWEST, SouthWestDraggingStrategy);\n\n        extend(Editor, {\n            ElementResizeHandle: ElementResizeHandle\n        });\n    })(window.kendo);\n\n    (function(kendo, undefined$1) {\n        var global = window;\n        var math = global.Math;\n        var min = math.min;\n        var max = math.max;\n\n        var $ = kendo.jQuery;\n        var contains = $.contains;\n        var extend = $.extend;\n\n        var browser = kendo.support.browser;\n        var Editor = kendo.ui.editor;\n        var Class = kendo.Class;\n        var ElementResizeHandle = Editor.ElementResizeHandle;\n        var ResizingUtils = Editor.ResizingUtils;\n        var calculatePercentageRatio = ResizingUtils.calculatePercentageRatio;\n        var constrain = ResizingUtils.constrain;\n        var inPercentages = ResizingUtils.inPercentages;\n        var inPixels = ResizingUtils.inPixels;\n        var toPercentages = ResizingUtils.toPercentages;\n        var toPixels = ResizingUtils.toPixels;\n        var outerWidth = kendo._outerWidth;\n        var outerHeight = kendo._outerHeight;\n        var RangeUtils = Editor.RangeUtils;\n\n        var NS = \".kendoEditorElementResizing\";\n        var RESIZE_HANDLE_WRAPPER_CLASS = \"k-element-resize-handle-wrapper\";\n        var TABLE_CLASS = \"k-table\";\n        var ELEMENT_RESIZING_CLASS = \"k-element-resizing\";\n\n        var DRAG_START = \"dragStart\";\n        var DRAG = \"drag\";\n        var DRAG_END = \"dragEnd\";\n        var KEY_DOWN = \"keydown\";\n        var MOUSE_DOWN = \"mousedown\";\n        var SELECT = \"select\";\n        var DROP = \"drop\";\n\n        var COLUMN = \"td\";\n        var ROW = \"tr\";\n        var TBODY = \"tbody\";\n        var THEAD = \"thead\";\n        var TABLE = \"table\";\n        var IMG = \"img\";\n        var ELEMENT_TYPES = [\"TABLE\", \"IMG\"];\n\n        var COMMA = \",\";\n        var WIDTH = \"width\";\n        var HEIGHT = \"height\";\n\n        var EAST = \"east\";\n        var NORTH = \"north\";\n        var NORTHEAST = \"northeast\";\n        var NORTHWEST = \"northwest\";\n        var SOUTH = \"south\";\n        var SOUTHEAST = \"southeast\";\n        var SOUTHWEST = \"southwest\";\n        var WEST = \"west\";\n\n        var DOT = \".\";\n\n        function isUndefined(value) {\n            return typeof(value) === \"undefined\";\n        }\n\n        var ElementResizing = Class.extend({\n            init: function(element, options) {\n                var that = this;\n\n                that.options = extend({}, that.options, options);\n                that.handles = [];\n\n                // Check whether the element is TABLE or IMG\n                if (ELEMENT_TYPES.indexOf(element.nodeName) >= 0) {\n                    that.element = element;\n                }\n            },\n\n            destroy: function() {\n                var that = this;\n\n                $(that.element).off(NS);\n                that.element = null;\n\n                $(that.options.rootElement).off(KEY_DOWN + NS);\n\n                that._destroyResizeHandles();\n            },\n\n            options: {\n                appendHandlesTo: null,\n                rtl: false,\n                rootElement: null,\n                minWidth: 10,\n                minHeight: 10,\n                handles: [{\n                    direction: NORTHWEST\n                }, {\n                    direction: NORTH\n                }, {\n                    direction: NORTHEAST\n                }, {\n                    direction: EAST\n                }, {\n                    direction: SOUTHEAST\n                }, {\n                    direction: SOUTH\n                }, {\n                    direction: SOUTHWEST\n                }, {\n                    direction: WEST\n                }]\n            },\n\n            resize: function(args) {\n                var that = this;\n                var deltas = extend({}, {\n                    deltaX: 0,\n                    deltaY: 0,\n                    initialDeltaX: 0,\n                    initialDeltaY: 0\n                }, args);\n\n                that._resizeWidth(deltas.deltaX, deltas.initialDeltaX);\n                that._resizeHeight(deltas.deltaY, deltas.initialDeltaY);\n\n                that.showResizeHandles();\n            },\n\n            _resizeWidth: function() {\n                return false;\n            },\n\n            _resizeHeight: function() {\n                return false;\n            },\n\n            _getMaxDimensionValue: function(dimension) {\n                var that = this;\n                var element = $(that.element);\n                var dimensionLowercase = dimension.toLowerCase();\n                var rtlModifier = that.options.rtl ? (-1) : 1;\n                var parent = $(that.element).parent();\n                var parentElement = parent[0];\n                var parentDimension = parent[dimensionLowercase]();\n                var parentScrollOffset = rtlModifier * (dimension === WIDTH ? kendo.scrollLeft(parent) : parent.scrollTop());\n\n                if (parentElement && parentElement === element.closest(COLUMN)[0]) {\n                    if (parentElement.style[dimensionLowercase] === \"\" && !inPercentages(that.element.style[dimensionLowercase])) {\n                        return Infinity;\n                    }\n                    else {\n                        return (parentDimension + parentScrollOffset);\n                    }\n                }\n                else {\n                    return (parentDimension + parentScrollOffset);\n                }\n            },\n\n            showResizeHandles: function() {\n                var that = this;\n\n                that._initResizeHandles();\n                that._showResizeHandles();\n            },\n\n            _initResizeHandles: function() {\n                var that = this;\n                var handles = that.handles;\n                var options = that.options;\n                var handleOptions = that.options.handles;\n                var length = handleOptions.length;\n                var i;\n\n                if (handles && handles.length > 0) {\n                    return;\n                }\n\n                for (i = 0; i < length; i++) {\n                    that.handles.push(new ElementResizeHandle(extend({\n                        appendTo: options.appendHandlesTo,\n                        resizableElement: that.element,\n                        rootElement: options.rootElement,\n                        rtl: options.rtl\n                    }, handleOptions[i])));\n                }\n\n                that._bindToResizeHandlesEvents();\n            },\n\n            _destroyResizeHandles: function() {\n                var that = this;\n                var length = that.handles ? that.handles.length : 0;\n\n                for (var i = 0; i < length; i++) {\n                    that.handles[i].destroy();\n                }\n\n                that.handles = [];\n            },\n\n            _showResizeHandles: function() {\n                var that = this;\n                var handles = that.handles || [];\n                var length = handles.length;\n                var i;\n\n                for (i = 0; i < length; i++) {\n                    that.handles[i].show();\n                }\n            },\n\n            _bindToResizeHandlesEvents: function() {\n                return false;\n            },\n\n            _onResizeHandleDragStart: function() {\n                var that = this;\n                var element = $(that.element);\n\n                element.addClass(ELEMENT_RESIZING_CLASS);\n\n                that._initialElementHeight = outerHeight(element);\n                that._initialElementWidth = outerWidth(element);\n                that._disableKeyboard();\n            },\n\n            _onResizeHandleDrag: function(e) {\n                this.resize(e);\n            },\n\n            _onResizeHandleDragEnd: function() {\n                var that = this;\n                $(that.element).removeClass(ELEMENT_RESIZING_CLASS);\n                that._enableKeyboard();\n            },\n\n            _enableKeyboard: function() {\n                $(this.options.rootElement).off(KEY_DOWN + NS);\n            },\n\n            _disableKeyboard: function() {\n                $(this.options.rootElement).on(KEY_DOWN + NS, function(e) {\n                    e.preventDefault();\n                });\n            }\n        });\n\n        var TableResizing = ElementResizing.extend({\n            _bindToResizeHandlesEvents: function() {\n                var that = this;\n                var handles = that.handles || [];\n                var length = handles.length;\n                var i;\n                var handle;\n\n                for (i = 0; i < length; i++) {\n                    handle = handles[i];\n                    handle.bind(DRAG_START, that._onResizeHandleDragStart.bind(that));\n                    handle.bind(DRAG, that._onResizeHandleDrag.bind(that));\n                    handle.bind(DRAG_END, that._onResizeHandleDragEnd.bind(that));\n                }\n            },\n\n            _hasRowsInPixels: function() {\n                var that = this;\n                var rows = $(that.element).children(THEAD + COMMA + TBODY).children(ROW);\n\n                for (var i = 0; i < rows.length; i++) {\n                    if (rows[i].style.height === \"\" || inPixels(rows[i].style.height)) {\n                        return true;\n                    }\n                }\n\n                return false;\n            },\n\n            _resizeWidth: function(delta, initialDelta) {\n                var that = this;\n                var element = $(that.element);\n                var styleWidth = element[0].style[WIDTH];\n                var currentWidth = outerWidth(element);\n                var parentWidth = element.parent().width();\n                var maxWidth = that._getMaxDimensionValue(WIDTH);\n                var newWidth;\n                var ratioValue;\n                var ratioTotalValue;\n                var constrainedWidth;\n\n                if (delta === 0) {\n                    return;\n                }\n\n                if (isUndefined(that._initialElementWidth)) {\n                    that._initialElementWidth = currentWidth;\n                }\n\n                //use initial delta instead of delta as changing the width with a small value (e.g. 1px)\n                //on each drag does not work due to browser calculation of computed styles\n                constrainedWidth = constrain({\n                    value: that._initialElementWidth + initialDelta,\n                    min: that.options.minWidth,\n                    max: maxWidth\n                });\n\n                if (inPercentages(styleWidth)) {\n                    //detect resizing greater than 100%\n                    if (currentWidth + delta > parentWidth) {\n                        ratioValue = max(constrainedWidth, parentWidth);\n                        ratioTotalValue = min(constrainedWidth, parentWidth);\n                    }\n                    else {\n                        ratioValue = min(constrainedWidth, parentWidth);\n                        ratioTotalValue = max(constrainedWidth, parentWidth);\n                    }\n\n                    newWidth = toPercentages(calculatePercentageRatio(ratioValue, ratioTotalValue));\n                }\n                else {\n                    newWidth = toPixels(constrainedWidth);\n                }\n\n                that._setColumnsWidth();\n\n                element[0].style[WIDTH] = newWidth;\n            },\n\n            _resizeHeight: function(delta, initialDelta) {\n                var that = this;\n                var element = $(that.element);\n                var styleHeight = element[0].style[HEIGHT];\n                var currentHeight = outerHeight(element);\n                var parent = element.parent();\n                var parentHeight = parent.height();\n                var maxHeight = that._getMaxDimensionValue(HEIGHT);\n                var newHeight;\n                var ratioValue;\n                var ratioTotalValue;\n                var constrainedHeight;\n                var minHeight = that.options.minHeight;\n                var hasRowsInPixels = that._hasRowsInPixels();\n\n                if (delta === 0) {\n                    return;\n                }\n\n                if (isUndefined(that._initialElementHeight)) {\n                    that._initialElementHeight = currentHeight;\n                }\n\n                //use initial delta instead of delta as changing the height with a small value (e.g. 1px)\n                //on each drag does not work due to browser calculation of computed styles\n                constrainedHeight = constrain({\n                    value: that._initialElementHeight + initialDelta,\n                    min: minHeight,\n                    max: maxHeight\n                });\n\n                if (hasRowsInPixels && delta < 0) {\n                    //decreasing table height when rows are sized in pixels is not possible\n                    that._setRowsHeightInPercentages();\n                }\n\n                if (inPercentages(styleHeight)) {\n                    //detect resizing greater than 100%\n                    if (currentHeight + delta > parentHeight) {\n                        ratioValue = max(constrainedHeight, parentHeight);\n                        ratioTotalValue = min(constrainedHeight, parentHeight);\n                    }\n                    else {\n                        ratioValue = min(constrainedHeight, parentHeight);\n                        ratioTotalValue = max(constrainedHeight, parentHeight);\n                    }\n\n                    newHeight = toPercentages(calculatePercentageRatio(ratioValue, ratioTotalValue));\n                }\n                else {\n                    newHeight = toPixels(constrainedHeight);\n                }\n\n                element[0].style[HEIGHT] = newHeight;\n\n                if (hasRowsInPixels && delta < 0) {\n                    //restore original rows height unit\n                    that._setRowsHeightInPixels();\n                }\n            },\n\n            _setColumnsWidth: function() {\n                var that = this;\n                var element = $(that.element);\n                var parentElement = element.parent()[0];\n                var parentColumn = element.closest(COLUMN);\n                var columns = parentColumn.closest(ROW).children();\n                var columnsLength = columns.length;\n                var i;\n\n                function isWidthInPercentages(element) {\n                    var styleWidth = element.style.width;\n\n                    if (styleWidth !== \"\") {\n                        return inPercentages(styleWidth) ? true : false;\n                    }\n                    else {\n                        return $(element).hasClass(TABLE_CLASS) ? true : false;\n                    }\n                }\n\n                if (isWidthInPercentages(element[0]) && parentElement === parentColumn[0] && parentElement.style[WIDTH] === \"\") {\n                    for (i = 0; i < columnsLength; i++) {\n                        columns[i].style[WIDTH] = toPixels($(columns[i]).width());\n                    }\n                }\n            },\n\n            _setRowsHeightInPercentages: function() {\n                var that = this;\n                var tableHead = $(that.element).children(THEAD);\n                var tableHeadHeight = tableHead.length > 0 ? tableHead.height() : 0;\n                var tableBody = $(that.element).children(TBODY);\n                var tableBodyHeight = tableBody.height();\n                var rows = $(that.element).children(THEAD + COMMA + TBODY).children(ROW);\n                var length = rows.length;\n                var currentRowsHeights = rows.map(function() {\n                    return outerHeight($(this));\n                });\n                var i;\n\n                for (i = 0; i < length; i++) {\n                    rows[i].style[HEIGHT] = toPercentages(calculatePercentageRatio(currentRowsHeights[i], tableHeadHeight + tableBodyHeight));\n                }\n            },\n\n            _setRowsHeightInPixels: function() {\n                var that = this;\n                var rows = $(that.element).children(THEAD + COMMA + TBODY).children(ROW);\n                var length = rows.length;\n                var currentRowsHeights = rows.map(function() {\n                    return outerHeight($(this));\n                });\n                var i;\n\n                for (i = 0; i < length; i++) {\n                    rows[i].style[HEIGHT] = toPixels(currentRowsHeights[i]);\n                }\n            }\n        });\n\n        var ImageResizing = ElementResizing.extend({\n            _bindToResizeHandlesEvents: function() {\n                var that = this;\n                var handles = that.handles || [];\n                var length = handles.length;\n                var i;\n                var handle;\n\n                for (i = 0; i < length; i++) {\n                    handle = handles[i];\n                    handle.bind(DRAG_START, that._onResizeHandleDragStart.bind(that));\n\n                    if (handle.options.direction === \"north\" || handle.options.direction === \"south\") {\n                        handle.bind(DRAG, that._onResizeHandleDragVertical.bind(that));\n                    } else if (handle.options.direction === \"east\" || handle.options.direction === \"west\") {\n                        handle.bind(DRAG, that._onResizeHandleDragHorizontal.bind(that));\n                    } else {\n                        handle.bind(DRAG, that._onResizeHandleDragLocked.bind(that));\n                    }\n\n                    handle.bind(DRAG_END, that._onResizeHandleDragEnd.bind(that));\n                }\n            },\n\n            _getDeltas: function(args) {\n                return extend({}, {\n                    deltaX: 0,\n                    deltaY: 0,\n                    initialDeltaX: 0,\n                    initialDeltaY: 0\n                }, args);\n            },\n\n            _onResizeHandleDragVertical: function(args) {\n                var deltas = this._getDeltas(args);\n\n                this._resizeHeight(deltas.deltaY, deltas.initialDeltaY);\n                this.showResizeHandles();\n            },\n\n            _onResizeHandleDragHorizontal: function(args) {\n                var deltas = this._getDeltas(args);\n\n                this._resizeWidth(deltas.deltaX, deltas.initialDeltaX);\n                this.showResizeHandles();\n            },\n\n            _onResizeHandleDragLocked: function(args) {\n                var min = Math.min(Math.abs(args.initialDeltaX), Math.abs(args.initialDeltaY)),\n                    initialWidth = this._initialElementWidth,\n                    initialHeight = this._initialElementHeight,\n                    deltas;\n\n                if (min === args.initialDeltaX || min === args.initialDeltaX * -1) {\n                    args.initialDeltaY = args.initialDeltaX * initialHeight / initialWidth;\n                    args.deltaY = args.deltaX;\n                } else if (min === args.initialDeltaY || min === args.initialDeltaY * -1) {\n                    args.initialDeltaX = args.initialDeltaY * initialWidth / initialHeight;\n                    args.deltaX = args.deltaY;\n                }\n\n                deltas = this._getDeltas(args);\n\n                this._resizeWidth(deltas.deltaX, deltas.initialDeltaX);\n                this._resizeHeight(deltas.deltaY, deltas.initialDeltaY);\n\n                this.showResizeHandles();\n            },\n\n            _resizeWidth: function(delta, initialDelta) {\n                var that = this;\n                var element = $(that.element);\n                var currentWidth = outerWidth(element);\n                var newWidth;\n                var constrainedWidth;\n\n                if (delta === 0) {\n                    return;\n                }\n\n                if (isUndefined(that._initialElementWidth)) {\n                    that._initialElementWidth = currentWidth;\n                }\n\n                //use initial delta instead of delta as changing the width with a small value (e.g. 1px)\n                //on each drag does not work due to browser calculation of computed styles\n                constrainedWidth = constrain({\n                    value: that._initialElementWidth + initialDelta,\n                    min: that.options.minWidth,\n                    max: that._getMaxDimensionValue(WIDTH)\n                });\n\n                newWidth = toPixels(constrainedWidth);\n                element[0].style[WIDTH] = newWidth;\n                element.attr(WIDTH, Math.floor(constrainedWidth));\n            },\n\n            _resizeHeight: function(delta, initialDelta) {\n                var that = this;\n                var element = $(that.element);\n                var currentHeight = outerHeight(element);\n                var newHeight;\n                var constrainedHeight;\n\n                if (delta === 0) {\n                    return;\n                }\n\n                if (isUndefined(that._initialElementHeight)) {\n                    that._initialElementHeight = currentHeight;\n                }\n\n                //use initial delta instead of delta as changing the height with a small value (e.g. 1px)\n                //on each drag does not work due to browser calculation of computed styles\n                constrainedHeight = constrain({\n                    value: that._initialElementHeight + initialDelta,\n                    min: that.options.minHeight,\n                    max: Number.MAX_SAFE_INTEGER\n                });\n\n                newHeight = toPixels(constrainedHeight);\n                element[0].style[HEIGHT] = newHeight;\n                element.attr(HEIGHT, Math.floor(constrainedHeight));\n            }\n        });\n\n        var ElementResizingFactory = Class.extend({\n            create: function(editor) {\n                var factory = this;\n\n                $(editor.body)\n                    .on(\"dragstart\" + NS, function() {\n                        var nodes = RangeUtils.nodes(editor.getRange()),\n                            hasImg = false;\n\n                        nodes.forEach(function(node) {\n                            if (node.nodeName === \"IMG\") {\n                                hasImg = true;\n                            }\n                        });\n\n                        if (hasImg && nodes.length > 1) {\n                            editor.elementResizing._destroyResizeHandles();\n                        }\n                    })\n                    .on(DROP + NS, function() {\n                        setTimeout(function() {\n                            var image = RangeUtils.image(editor.getRange());\n\n                            if (image) {\n                                editor.elementResizing._destroyResizeHandles();\n                                editor.elementResizing.element = image;\n                                editor.elementResizing.showResizeHandles();\n                            }\n                        });\n                    })\n                    .on(MOUSE_DOWN + NS, TABLE + COMMA + IMG, function(e) {\n                        var eventTarget = e.target;\n                        var eventCurrentTarget = e.currentTarget;\n                        var elementResizing = editor.elementResizing;\n                        var element = elementResizing ? elementResizing.element : null;\n\n                        if (elementResizing) {\n                            if (element && eventCurrentTarget !== element) {\n                                if (contains(eventCurrentTarget, element) && element !== eventTarget && contains(element, eventTarget)) {\n                                    //prevent a parent table resizing init when clicking on a nested table when the event bubbles\n                                    //instead of stopping event propagation\n                                    return;\n                                }\n                                else {\n                                    if (element !== eventTarget) {\n                                        editor._destroyElementResizing();\n                                        factory._initResizing(editor, eventCurrentTarget);\n                                    }\n                                }\n                            }\n                        }\n                        else {\n                            factory._initResizing(editor, eventCurrentTarget);\n                        }\n\n                        editor._showElementResizeHandles();\n                    })\n                    .on(MOUSE_DOWN + NS, function(e) {\n                        var elementResizing = editor.elementResizing;\n                        var element = elementResizing ? elementResizing.element : null;\n                        var target = e.target;\n                        var isResizeHandleOrChild = $(target).hasClass(RESIZE_HANDLE_WRAPPER_CLASS) || $(target).parents(DOT + RESIZE_HANDLE_WRAPPER_CLASS).length > 0;\n\n                        if (elementResizing && element !== target && !contains(element, target) && !isResizeHandleOrChild) {\n                            editor._destroyElementResizing();\n                        }\n                    });\n            },\n\n            dispose: function(editor) {\n                $(editor.body).off(NS);\n            },\n\n            _initResizing: function(editor, element) {\n                // table and image resizing is natively supported in IE\n                // https://stackoverflow.com/questions/53831846/resizing-images-in-contenteditable-div-stopped-working-in-firefox\n                // Enable custom resize handlers for FF too\n                if (!browser.msie) {\n                    if ($(element).is(TABLE)) {\n                        editor.elementResizing = editor.tableResizing = new TableResizing(element, {\n                            appendHandlesTo: editor.body,\n                            rtl: kendo.support.isRtl(editor.element),\n                            rootElement: editor.body\n                        });\n                    } else if ($(element).is(IMG)) {\n                        editor.elementResizing = new ImageResizing(element, {\n                            appendHandlesTo: editor.body,\n                            rtl: kendo.support.isRtl(editor.element),\n                            rootElement: editor.body\n                        });\n                    }\n\n                    if (editor._showElementResizeHandlesProxy) {\n                        editor.unbind(SELECT, editor._showElementResizeHandlesProxy);\n                        editor.bind(SELECT, editor._showElementResizeHandlesProxy);\n                    }\n                }\n            }\n        });\n\n        ElementResizingFactory.current = new ElementResizingFactory();\n\n        extend(Editor, {\n            TableResizing: TableResizing,\n            ImageResizing: ImageResizing,\n            ElementResizing: ElementResizing,\n            ElementResizingFactory: ElementResizingFactory\n        });\n\n    })(window.kendo);\n\n    (function($, undefined$1) {\n\n    var kendo = window.kendo,\n        Editor = kendo.ui.editor,\n        EditorUtils = Editor.EditorUtils,\n        RangeUtils = Editor.RangeUtils,\n        dom = Editor.Dom,\n        registerTool = EditorUtils.registerTool,\n        ToolTemplate = Editor.ToolTemplate,\n        Command = Editor.Command;\n\n    var tableFormatFinder = new Editor.BlockFormatFinder([{ tags: [\"table\"] }]);\n    var cellsFormatFinder = new Editor.BlockFormatFinder([{ tags: [\"td\",\"th\"] }]);\n    var reUnit = /([a-z]+|%)$/i;\n\n    var COL = \"col\";\n    var ROW = \"row\";\n    var COLGROUP = \"colgroup\";\n    var SCOPE = \"scope\";\n    var COL_INDEX = \"col-index\";\n    var TH = \"th\";\n    var TD = \"td\";\n    var THEAD = \"thead\";\n    var HEADERS = \"headers\";\n    var TABLE = \"table\";\n\n    var TableWizardCommand = Command.extend({\n        exec: function() {\n            var cmd = this;\n            var editor = cmd.editor;\n            var range = cmd.range = cmd.lockRange();\n            var selectedTable = cmd._sourceTable = !cmd.options.insertNewTable ? cmd._selectedTable(range) : undefined$1;\n            var selectedCells = cmd._selectedTableCells = selectedTable ? cmd._selectedCells(range) : undefined$1;\n            var options = {\n                visible: false,\n                messages: editor.options.messages,\n                closeCallback: cmd.onDialogClose.bind(cmd),\n                table: cmd.parseTable(selectedTable, selectedCells),\n                dialogOptions: editor.options.dialogOptions,\n                isRtl: kendo.support.isRtl(editor.wrapper)\n            };\n\n            var dialog = new Editor.TableWizardDialog(options);\n            dialog.open();\n        },\n\n        onDialogClose: function(data) {\n            var cmd = this;\n            cmd.releaseRange(cmd.range);\n\n            if (data) { //Ok button pressed\n                if (cmd.options.insertNewTable) {\n                    cmd.insertTable(cmd.createNewTable(data));\n                } else {\n                    cmd.updateTable(data, cmd._sourceTable, cmd._selectedTableCells);\n                }\n            }\n        },\n        releaseRange: function(range) {\n            var cmd = this;\n            var doc = cmd.editor.document;\n            dom.windowFromDocument(doc).focus();\n            Command.fn.releaseRange.call(cmd, range);\n        },\n        insertTable: function(table) {\n            var range = this.range;\n\n            range.insertNode(table);\n            range.collapse(true);\n            this.editor.selectRange(range);\n\n            this._ensureFocusableAfterTable(table);\n        },\n        _ensureFocusableAfterTable: function(table) {\n            var siblingNodes = $(table).parent().contents();\n            var lastSiblingIndex = siblingNodes.length - 1;\n            var lastSibling = siblingNodes.get(lastSiblingIndex);\n\n            while (lastSibling.nodeValue !== null && (lastSibling.nodeValue === \" \" || lastSibling.nodeValue === \"\")) {\n                lastSiblingIndex -= 1;\n                lastSibling = siblingNodes.get(lastSiblingIndex);\n            }\n\n            if (lastSibling === table) {\n                dom.insertAfter(dom.createEmptyNode(this.editor.document, \"p\"), table);\n            }\n        },\n        updateTable: function(data, table, selectedCells) {\n            var cmd = this;\n            var tableRows = $(table.rows).toArray();\n            var tableProp = data.tableProperties;\n            var rows = tableProp.rows;\n            var tHead = table.tHead;\n            var last = cmd._lastInCollection;\n            var lastSelectedRow, cellProp;\n\n            //Leave only first selected cell\n            while (selectedCells.length > 1) {\n                selectedCells.pop();\n            }\n\n            lastSelectedRow = selectedCells.length ? last(selectedCells).parentNode : last(tableRows);\n\n            cmd._deleteTableRows(tableRows, tableRows.length - rows);\n\n            if (tableRows.length < rows) {\n                cmd._addRows(lastSelectedRow, rows, tableRows);\n            }\n\n            dom.reMapTableColumns(table, COL_INDEX);\n            cmd._updateColumns(tableRows, tableProp.columns, selectedCells, lastSelectedRow);\n            cmd._updateTableProperties(table, tableProp);\n\n            cellProp = data.cellProperties;\n            if (selectedCells[0]) {\n                dom.attr(selectedCells[0], { id: cellProp.id || null });\n            }\n            (cellProp.selectAllCells ? $(tableRows).children() : $(selectedCells)).each(function(i, cell) {\n                cmd._updateCellProperties(cell, cellProp);\n            });\n\n            cmd._updateCaption(table, tableProp);\n\n            if (tHead) {\n                cmd._updateHeadersWithThead(table, data);\n            } else {\n                cmd._updateHeadersNoThead(table, data);\n            }\n\n            cmd._updateHeaderAssociates(table, tableProp);\n            dom.clearTableMappings(table, COL_INDEX);\n        },\n        _isHeadingRow: function(row) {\n            return dom.is(row.cells[0], TH) && dom.is(row.parentNode, THEAD);\n        },\n        _isHeadingCell: function(cell) {\n            return dom.is(cell, TH);\n        },\n        cellsWithHeadersAssociated: function(table) {\n            var cells = $(table.rows).children();\n            var headingIds = [];\n            var checkHeader = function(header) {\n                return headingIds.indexOf(header) > -1;\n            };\n\n            cells.each(function(c, cell) {\n                if (cell.id && dom.is(cell, TH)) {\n                    headingIds.push(cell.id);\n                }\n            });\n\n            var associatedCells = cells.filter(function(c, cell) {\n                var headersAttr = cell.getAttribute(HEADERS);\n                var headersArray;\n\n                if (headersAttr && !dom.is(cell, TH)) {\n                    headersArray = headersAttr.split(\" \");\n\n                    if (headersArray && headersArray.length > 0) {\n                        return headersArray.some(checkHeader);\n                    }\n                }\n\n                return false;\n            });\n\n            return !!associatedCells.length;\n        },\n        _insertCells: function(count, row, index) {\n            index = isNaN(index) ? -1 : index;\n            for (var i = 0, cell; i < count; i++) {\n                cell = row.insertCell(index);\n                cell.innerHTML = \"&nbsp;\";\n            }\n        },\n        _deleteTableRows: function(rows, count) {\n            for (var i = 0, row, rowParent; i < count; i++) {\n                row = rows.pop();\n                rowParent = row.parentNode;\n                rowParent.removeChild(row);\n                if (!rowParent.rows.length) {\n                    dom.remove(rowParent);\n                }\n            }\n        },\n        createNewTable: function(data) {\n            var cmd = this;\n            var doc = cmd.editor.document;\n            var tableProp = data.tableProperties;\n            var table = dom.create(doc, TABLE);\n            var rowIndex = 0;\n            var thead;\n\n            cmd._updateTableProperties(table, tableProp);\n            cmd._updateCaption(table, tableProp);\n\n            if (tableProp.headerRows && tableProp.headerRows > 0) {\n                thead = table.createTHead();\n                cmd._createTableRows(data, thead, rowIndex, true);\n                rowIndex += tableProp.headerRows;\n            }\n\n            var tbody = table.createTBody();\n            cmd._createTableRows(data, tbody, rowIndex, false);\n\n            dom.reMapTableColumns(table, COL_INDEX);\n\n            if (tableProp.cellsWithHeaders === \"ids\") {\n                dom.associateWithIds(table);\n            } else if (tableProp.cellsWithHeaders === \"scope\") {\n                cmd._addScopes(table, tableProp.headerRows, tableProp.headerColumns);\n            }\n\n            dom.clearTableMappings(table, COL_INDEX);\n\n            return table;\n        },\n        _createTableRows: function(data, container, initialIndex, headerRows) {\n            var cmd = this;\n            var tableProp = data.tableProperties;\n            var cellProp = data.cellProperties;\n            var columns = tableProp.columns;\n            var rows = headerRows ? tableProp.headerRows : tableProp.rows;\n            var cellPropToAll = cellProp.selectAllCells;\n            var headerColumns = tableProp.headerColumns;\n\n            for (var r = initialIndex, row; r < rows; r++) {\n                row = container.insertRow();\n\n                for (var c = 0, cell; c < columns; c++) {\n                    if (headerRows || headerColumns > c) {\n                        cell = document.createElement(TH);\n                    } else {\n                        cell = document.createElement(TD);\n                    }\n\n                    row.appendChild(cell);\n                    cell.innerHTML = \"&nbsp;\";\n                    if (r === 0 && c === 0 && cellProp.id) {\n                        cell.id = cellProp.id;\n                    }\n                    cmd._updateCellProperties(cell, (cellPropToAll || (r === 0 && c === 0)) ? cellProp : {});\n                }\n            }\n        },\n        _addRows: function(lastSelectedRow, rows, tableRows) {\n            var cmd = this;\n            var rowIndex = $(lastSelectedRow).index();\n            var cellsLength = lastSelectedRow.cells.length;\n            var newRowsCount = rows - tableRows.length;\n            var parent = lastSelectedRow.parentNode;\n            var row;\n\n            while (newRowsCount) {\n                row = parent.insertRow(rowIndex + 1);\n                cmd._insertCells(cellsLength - row.cells.length, row);\n                newRowsCount--;\n            }\n        },\n        _updateColumns: function(tableRows, columns, selectedCells, lastSelectedRow) {\n            var cmd = this;\n            var last = cmd._lastInCollection;\n            var firstRowLastCell = last(tableRows[0].cells);\n            var numberOfColumns = Number(firstRowLastCell.getAttribute(COL_INDEX)) + firstRowLastCell.colSpan;\n\n            if (numberOfColumns > columns) {\n                $(tableRows).each(function(i, row) {\n                    var lastCurrentCell = last(row.cells);\n                    var rowColumns = Number(lastCurrentCell.getAttribute(COL_INDEX)) + lastCurrentCell.colSpan;\n\n                    while (rowColumns > columns) {\n                        if (lastCurrentCell.colSpan && lastCurrentCell.colSpan > 1) {\n                            lastCurrentCell.colSpan -= 1;\n                        } else {\n                            row.deleteCell(-1);\n                        }\n\n                        lastCurrentCell = last(row.cells);\n                        rowColumns = Number(lastCurrentCell.getAttribute(COL_INDEX)) + lastCurrentCell.colSpan;\n                    }\n                });\n            }\n\n            if (numberOfColumns < columns) {\n                var cellIndex = $(last(selectedCells) || last(lastSelectedRow.cells)).index();\n                $(tableRows).each(function(i, row) {\n                    var lastCurrentCell = last(row.cells);\n                    cmd._insertCells(columns - Number(lastCurrentCell.getAttribute(COL_INDEX)) - lastCurrentCell.colSpan, row, cellIndex + 1);\n                });\n            }\n        },\n        _updateTableProperties: function(table, data) {\n            var style = this._getStylesData(data);\n            dom.attr(table, {\n                cellSpacing: data.cellSpacing || null,\n                cellPadding: data.cellPadding || null,\n                className: data.className || null,\n                id: data.id || null,\n                summary: data.summary || null,\n                style: style || null\n            });\n            $(table).addClass(\"k-table\");\n        },\n        _updateCellProperties: function(cell, data) {\n            var style = this._getStylesData(data);\n            style.padding = data.cellPadding || null;\n            style.margin = data.cellMargin || null;\n            dom.attr(cell, {\n                style: style || null,\n                className: data.className || null\n            });\n        },\n        _updateCaption: function(table, data) {\n            if (table.caption && !data.captionContent) {\n                table.deleteCaption();\n            } else if (data.captionContent) {\n                var caption = table.createCaption();\n                caption.innerHTML = data.captionContent;\n                var alignment = this._getAlignmentData(data.captionAlignment);\n                dom.attr(caption, {\n                    style: {\n                        textAlign: alignment.textAlign,\n                        verticalAlign: alignment.verticalAlign\n                    }\n                });\n            }\n        },\n        _updateHeadersNoThead: function(table, data) {\n            var cmd = this;\n            var tableProp = data.tableProperties;\n            var rows = table.rows;\n            var row, cells, cell, i, j;\n\n            for (i = 0; i < rows.length; i++) {\n                row = rows[i];\n                cells = row.cells;\n\n                for (j = 0; j < cells.length; j++) {\n                    cell = cells[j];\n                    if (!cmd._isHeadingCell(cell) && (i < tableProp.headerRows || tableProp.headerColumns > cell.getAttribute(COL_INDEX))) {\n                        dom.changeTag(cell, TH, false);\n                    } else if (cmd._isHeadingCell(cell) && i >= tableProp.headerRows && tableProp.headerColumns <= cell.getAttribute(COL_INDEX)) {\n                        dom.changeTag(cell, TD, false);\n                    }\n                }\n            }\n        },\n        _updateHeadersWithThead: function(table, data) {\n            var cmd = this;\n            var tableProp = data.tableProperties;\n            var thead = table.tHead;\n            var rowIndex = 0;\n            var tbody = table.tBodies[0];\n            var row, cell, i;\n\n            if (!tbody) {\n                tbody = table.createTBody();\n            }\n\n            if (tableProp.headerRows && tableProp.headerRows > 0) {\n                if (!thead) {\n                    thead = table.createTHead();\n                }\n\n                while (thead.rows.length < tableProp.headerRows) {\n                    thead.appendChild(tbody.rows[0]);\n                }\n\n                while (thead.rows.length > tableProp.headerRows) {\n                    tbody.appendChild(thead.rows[0]);\n                }\n\n                cmd._swapToHeaderCells(thead);\n            } else if (thead) {\n                while (thead.rows.length > 0) {\n                    tbody.appendChild(thead.rows[thead.rows.length - 1]);\n                }\n\n                table.deleteTHead();\n            }\n\n            while (tbody.rows.length > rowIndex) {\n                row = tbody.rows[rowIndex];\n                for (i = 0; i < row.cells.length; i++) {\n                    cell = row.cells[i];\n                    if (cmd._isHeadingCell(cell) && tableProp.headerColumns <= cell.getAttribute(COL_INDEX)) {\n                        dom.changeTag(cell, TD, false);\n                    } else if (!cmd._isHeadingCell(cell) && tableProp.headerColumns > cell.getAttribute(COL_INDEX)) {\n                        dom.changeTag(cell, TH, false);\n                    }\n                }\n                rowIndex += 1;\n            }\n        },\n        _updateHeaderAssociates: function(table, tableProp) {\n            var cmd = this;\n\n            if (tableProp.cellsWithHeaders === \"ids\") {\n                if (!cmd.cellsWithHeadersAssociated(table)) {\n                    cmd._removeScopes(table);\n                }\n                dom.associateWithIds(table);\n            } else if (tableProp.cellsWithHeaders === \"scope\") {\n                if (cmd.cellsWithHeadersAssociated(table)) {\n                    cmd._removeAssociates(table);\n                }\n                cmd._addScopes(table, tableProp.headerRows, tableProp.headerColumns);\n            } else {\n                if (cmd.cellsWithHeadersAssociated(table)) {\n                    cmd._removeAssociates(table);\n                } else {\n                    cmd._removeScopes(table);\n                }\n            }\n        },\n        _addScopes: function(table, headerRows, headerCols) {\n            var rows = table.rows;\n            var i, j, row, cell;\n\n            for (i = 0; i < rows.length; i++) {\n                row = rows[i];\n\n                for (j = 0; j < row.cells.length; j++) {\n                    cell = row.cells[j];\n\n                    if (i < headerRows) {\n                        cell.setAttribute(SCOPE, COL);\n                    } else if (cell.getAttribute(COL_INDEX) < headerCols) {\n                        cell.setAttribute(SCOPE, ROW);\n                    }\n                }\n            }\n        },\n        _removeScopes: function(table) {\n            $(table).find(TH).removeAttr(SCOPE);\n            $(table).find(COL).remove();\n            $(table).find(COLGROUP).remove();\n        },\n        _removeAssociates: function(table) {\n            $(table).find(\"th, td\").removeAttr(\"id headers\");\n        },\n        _swapToHeaderCells: function(thead) {\n            var tds = $(thead).find(\"td\");\n            var swapCell = function(index, cell) {\n                dom.changeTag(cell, TH, false);\n            };\n            tds.each(swapCell);\n        },\n        _getStylesData: function(data) {\n            var alignment = this._getAlignmentData(data.alignment);\n            var whiteSpace = \"wrapText\" in data ? (data.wrapText ? \"\" : \"nowrap\") : null;\n\n            return {\n                width: data.width ? data.width + data.widthUnit : null,\n                height: data.height ? data.height + data.heightUnit : null,\n                textAlign: alignment.textAlign,\n                verticalAlign: alignment.verticalAlign,\n                backgroundColor: data.bgColor || \"\",\n                borderWidth: data.borderWidth,\n                borderStyle: data.borderStyle,\n                borderColor: data.borderColor || \"\",\n                borderCollapse: data.collapseBorders ? \"collapse\" : null,\n                whiteSpace: whiteSpace\n            };\n        },\n        _getAlignmentData: function(alignment) {\n            var textAlign = \"\";\n            var verticalAlign = textAlign;\n\n            if (alignment) {\n                if (alignment.indexOf(\" \") != -1) {\n                    var align = alignment.split(\" \");\n                    textAlign = align[0];\n                    verticalAlign = align[1];\n                } else {\n                    textAlign = alignment;\n                }\n            }\n            return { textAlign: textAlign, verticalAlign: verticalAlign };\n        },\n        parseTable: function(table, selectedCells) {\n            if (!table) {\n                return { tableProperties: {}, selectedCells: [] };\n            }\n\n            var cmd = this;\n            var tStyle = table.style;\n            var rows = table.rows;\n            var caption = table.caption;\n            var captionClone = $(caption ? caption.cloneNode(true) : undefined$1);\n            captionClone.find(\".k-marker\").remove();\n\n            var cssClass = table.className;\n            cssClass = cssClass.replace(/^k-table\\s|\\sk-table$/, \"\");\n            cssClass = cssClass.replace(/\\sk-table\\s/, \" \");\n            cssClass = cssClass.replace(/^k-table$/, \"\");\n\n            var tableAlignment = cmd._getAlignment(table, true);\n            var captionAlignment = caption ? cmd._getAlignment(caption) : undefined$1;\n            var numberOfHeaderRows = dom._getNumberOfHeaderRows(table);\n\n            var cellsWithHeaders;\n            if (cmd.cellsWithHeadersAssociated(table)) {\n                cellsWithHeaders = \"ids\";\n            } else if ($(table).find(\"th[scope]\").length > 0) {\n                cellsWithHeaders = \"scope\";\n            } else {\n                cellsWithHeaders = \"none\";\n            }\n\n            dom.reMapTableColumns(table, COL_INDEX);\n            var numberOfColumns = dom._getNumberOfColumns(table);\n            var numberOfHeaderColumns = dom._getNumberOfHeaderColumns(table, numberOfHeaderRows);\n            dom.clearTableMappings(table, COL_INDEX);\n\n            var tableJson = {\n                tableProperties: {\n                    width: tStyle.width || table.width ? parseFloat(tStyle.width || table.width) : null,\n                    height: tStyle.height || table.height ? parseFloat(tStyle.height || table.height) : null,\n                    columns: numberOfColumns,\n                    rows: rows.length,\n                    widthUnit: cmd._getUnit(tStyle.width),\n                    heightUnit: cmd._getUnit(tStyle.height),\n                    cellSpacing: table.cellSpacing,\n                    cellPadding: table.cellPadding,\n                    alignment: tableAlignment.textAlign,\n                    bgColor: tStyle.backgroundColor || table.bgColor,\n                    className: cssClass,\n                    id: table.id,\n                    borderWidth: tStyle.borderWidth || table.border,\n                    borderColor: tStyle.borderColor,\n                    borderStyle: tStyle.borderStyle || \"\",\n                    collapseBorders: !!tStyle.borderCollapse,\n                    summary: table.summary,\n                    captionContent: caption ? captionClone.html() : \"\",\n                    captionAlignment: caption && captionAlignment.textAlign ? captionAlignment.textAlign + \" \" + captionAlignment.verticalAlign : \"\",\n                    headerRows: numberOfHeaderRows,\n                    headerColumns: numberOfHeaderColumns,\n                    cellsWithHeaders: cellsWithHeaders\n                },\n                selectedCells: []\n            };\n\n            tableJson.rows = cmd.parseTableRows(rows, selectedCells, tableJson);\n\n            return tableJson;\n        },\n        parseTableRows: function(rows, selectedCells, tableJson) {\n            var cmd = this;\n            var data = [], row, rowData, cells, cell, cellData;\n            for (var i = 0; i < rows.length; i++) {\n                row = rows[i];\n                rowData = { cells: [] };\n                cells = row.cells;\n                data.push(rowData);\n                for (var j = 0; j < cells.length; j++) {\n                    cell = cells[j];\n                    cellData = cmd.parseCell(cell);\n                    if ($.inArray(cell, selectedCells) != -1) {\n                        tableJson.selectedCells.push(cellData);\n                    }\n                    rowData.cells.push(cellData);\n                }\n            }\n            return data;\n        },\n        parseCell: function(cell) {\n            var cmd = this;\n            var cStyle = cell.style;\n            var alignment = cmd._getAlignment(cell);\n            alignment = alignment.textAlign ? alignment.textAlign + \" \" + alignment.verticalAlign : \"\";\n\n            var data = {\n                width: cStyle.width || cell.width ? parseFloat(cStyle.width || cell.width) : null,\n                height: cStyle.height || cell.height ? parseFloat(cStyle.height || cell.height) : null,\n                widthUnit: cmd._getUnit(cStyle.width),\n                heightUnit: cmd._getUnit(cStyle.height),\n                cellMargin: cStyle.margin,\n                cellPadding: cStyle.padding,\n                alignment: alignment,\n                bgColor: cStyle.backgroundColor || cell.bgColor,\n                className: cell.className,\n                id: cell.id,\n                borderWidth: cStyle.borderWidth || cell.border,\n                borderColor: cStyle.borderColor,\n                borderStyle: cStyle.borderStyle,\n                wrapText: cStyle.whiteSpace != \"nowrap\"\n            };\n\n            return data;\n        },\n        _getAlignment: function(element, horizontalOnly) {\n            var style = element.style;\n            var hAlign = style.textAlign || element.align || \"\";\n            if (horizontalOnly) {\n                return { textAlign: hAlign };\n            }\n            var vAlign = style.verticalAlign || element.vAlign || \"\";\n            if (hAlign && vAlign) {\n                return { textAlign: hAlign, verticalAlign: vAlign };\n            }\n            if (!hAlign && vAlign) {\n                return { textAlign: \"left\", verticalAlign: vAlign };\n            }\n            if (hAlign && !vAlign) {\n                return { textAlign: hAlign, verticalAlign: \"top\" };\n            }\n            return { textAlign: \"\", verticalAlign: \"\" };\n        },\n        _getUnit: function(value) {\n            var unit = (value || \"\").match(reUnit);\n            return unit ? unit[0] : \"px\";\n        },\n        _selectedTable: function(range) {\n            var nodes = dom.filterBy(RangeUtils.nodes(range), dom.htmlIndentSpace, true);\n            return tableFormatFinder.findSuitable(nodes)[0];\n        },\n        _selectedCells: function(range) {\n            var nodes = dom.filterBy(RangeUtils.nodes(range), dom.htmlIndentSpace, true);\n            return cellsFormatFinder.findSuitable(nodes);\n        },\n        _lastInCollection: function(collection) {\n            return collection[collection.length - 1];\n        }\n    });\n\n    var TableWizardTool = Editor.Tool.extend({\n        command: function(options) {\n            options.insertNewTable = this.options.insertNewTable;\n            return new TableWizardCommand(options);\n        }\n    });\n\n    var TableWizardEditTool = TableWizardTool.extend({\n        update: function(ui, nodes) {\n            var isFormatted = !tableFormatFinder.isFormatted(nodes);\n\n            if (isFormatted === true) {\n                ui.parent().addClass(\"k-hidden k-disabled\");\n                ui.attr(\"disabled\", \"disabled\");\n                ui.addClass(\"k-disabled\");\n            } else {\n                ui.parent().removeClass(\"k-hidden k-disabled\");\n                ui.prop(\"disabled\", false);\n                ui.removeClass(\"k-disabled\");\n            }\n        }\n    });\n\n    kendo.ui.editor.TableWizardTool = TableWizardTool;\n    kendo.ui.editor.TableWizardCommand = TableWizardCommand;\n\n    registerTool(\"tableWizard\", new TableWizardEditTool({ command: TableWizardCommand, insertNewTable: false, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Table Wizard\" }) }));\n\n    })(window.kendo.jQuery);\n\n    (function($, undefined$1) {\n\n    var kendo = window.kendo,\n        encode = kendo.htmlEncode,\n        numericTextBoxSettings = { format: \"0\", min: 0 },\n        units = [\"px\", \"em\"],\n        borderStyles = [\"solid\", \"dotted\", \"dashed\", \"double\", \"groove\", \"ridge\", \"inset\", \"outset\", \"initial\", \"inherit\", \"none\", \"hidden\"];\n\n    var DEFAULT_NUMBER_OF_COLS_AND_ROWS = 4;\n\n    var tableAlignmentDropDownSettings = {\n        dataSource: [{\n            className: \"k-icon k-i-table-align-middle-left\",\n            value: \"left\"\n        }, {\n            className: \"k-icon k-i-table-align-middle-center\",\n            value: \"center\"\n        }, {\n            className: \"k-icon k-i-table-align-middle-right\",\n            value: \"right\"\n        }, {\n            className: \"k-icon k-i-align-remove\",\n            value: \"\"\n        }],\n        dataTextField: \"className\",\n        dataValueField: \"value\",\n        template: function (ref) {\n           var className = ref.className;\n           var tooltip = ref.tooltip;\n\n           return (\"<span class=\\\"\" + (encode(className)) + \"\\\" title=\\\"\" + (encode(tooltip)) + \"\\\"></span>\");\n    },\n        valueTemplate: function (ref) {\n           var className = ref.className;\n           var tooltip = ref.tooltip;\n\n           return (\"<span class=\\\"k-align-group \" + (encode( className )) + \"\\\" title=\\\"\" + (encode( tooltip )) + \"\\\"></span>\");\n    }\n    };\n\n    var cellAlignmentDropDownSettings = {\n        dataSource: [{\n            className: \"k-icon k-i-table-align-top-left\",\n            value: \"left top\"\n        }, {\n            className: \"k-icon k-i-table-align-top-center\",\n            value: \"center top\"\n        }, {\n            className: \"k-icon k-i-table-align-top-right\",\n            value: \"right top\"\n        }, {\n            className: \"k-icon k-i-table-align-middle-left\",\n            value: \"left middle\"\n        }, {\n            className: \"k-icon k-i-table-align-middle-center\",\n            value: \"center middle\"\n        }, {\n            className: \"k-icon k-i-table-align-middle-right\",\n            value: \"right middle\"\n        }, {\n            className: \"k-icon k-i-table-align-bottom-left\",\n            value: \"left bottom\"\n        }, {\n            className: \"k-icon k-i-table-align-bottom-center\",\n            value: \"center bottom\"\n        }, {\n            className: \"k-icon k-i-table-align-bottom-right\",\n            value: \"right bottom\"\n        }, {\n            className: \"k-icon k-i-align-remove\",\n            value: \"\"\n        }],\n        dataTextField: \"className\",\n        dataValueField: \"value\",\n        template: function (ref) {\n           var className = ref.className;\n           var tooltip = ref.tooltip;\n\n           return (\"<span class=\\\"\" + (encode( className )) + \"' title='\" + (encode( tooltip )) + \"'></span>\");\n    },\n        valueTemplate: function (ref) {\n           var className = ref.className;\n           var tooltip = ref.tooltip;\n\n           return (\"<span class='k-align-group \" + (encode( className )) + \"' title='\" + (encode( tooltip )) + \"'></span>\");\n    }\n    };\n\n    var accessibilityAlignmentDropDownSettings = {\n        dataSource: [{\n            className: \"k-icon k-i-table-align-top-left\",\n            value: \"left top\"\n        }, {\n            className: \"k-icon k-i-table-align-top-center\",\n            value: \"center top\"\n        }, {\n            className: \"k-icon k-i-table-align-top-right\",\n            value: \"right top\"\n        }, {\n            className: \"k-icon k-i-table-align-bottom-left\",\n            value: \"left bottom\"\n        }, {\n            className: \"k-icon k-i-table-align-bottom-center\",\n            value: \"center bottom\"\n        }, {\n            className: \"k-icon k-i-table-align-bottom-right\",\n            value: \"right bottom\"\n        }, {\n            className: \"k-icon k-i-align-remove\",\n            value: \"\"\n        }],\n        dataTextField: \"className\",\n        dataValueField: \"value\",\n        template: function (ref) {\n           var className = ref.className;\n           var tooltip = ref.tooltip;\n\n           return (\"<span class=\\\"\" + (encode( className )) + \"\\\" title=\\\"\" + (encode( tooltip )) + \"\\\"></span>\");\n    },\n        valueTemplate: function (ref) {\n           var className = ref.className;\n           var tooltip = ref.tooltip;\n\n           return (\"<span class=\\\"k-align-group \" + (encode( className )) + \"\\\" title=\\\"\" + (encode( tooltip )) + \"\\\"></span>\");\n    }\n    };\n\n    var dialogTemplate = function (ref) {\n           var messages = ref.messages;\n\n           return '<div class=\"k-editor-dialog k-editor-table-wizard-dialog k-action-window k-popup-edit-form\">' +\n            '<div class=\"k-edit-form-container\">' +\n                '<div id=\"k-table-wizard-tabs\" class=\"k-root-tabs\">' +\n                    '<ul>' +\n                        \"<li class=\\\"k-active\\\">\" + (messages.tableTab) + \"</li>\" +\n                        \"<li>\" + (messages.cellTab) + \"</li>\" +\n                        \"<li>\" + (messages.accessibilityTab) + \"</li>\" +\n                    '</ul>' +\n                    '<div id=\"k-table-properties\">' +\n                        '<div class=\"k-edit-label\">' +\n                            \"<label for=\\\"k-editor-table-width\\\">\" + (messages.width) + \"</label>\" +\n                        '</div>' +\n                        '<div class=\"k-edit-field\">' +\n                            '<input type=\"numeric\" id=\"k-editor-table-width\" />' +\n                            \"<input id=\\\"k-editor-table-width-type\\\" aria-label=\\\"\" + (messages.units) + \"\\\" />\" +\n                        '</div>' +\n                        '<div class=\"k-edit-label\">' +\n                            \"<label for=\\\"k-editor-table-height\\\">\" + (messages.height) + \"</label>\" +\n                        '</div>' +\n                        '<div class=\"k-edit-field\">' +\n                            '<input type=\"numeric\" id=\"k-editor-table-height\" />' +\n                            \"<input id=\\\"k-editor-table-height-type\\\" aria-label=\\\"\" + (messages.units) + \"\\\" />\" +\n                        '</div>' +\n\n                        '<div class=\"k-edit-label\">' +\n                            \"<label for=\\\"k-editor-table-columns\\\">\" + (messages.columns) + \"</label>\" +\n                        '</div>' +\n                        '<div class=\"k-edit-field\">' +\n                            '<input type=\"numeric\" id=\"k-editor-table-columns\" />' +\n                        '</div>' +\n\n                        '<div class=\"k-edit-label\">' +\n                            \"<label for=\\\"k-editor-table-rows\\\">\" + (messages.rows) + \"</label>\" +\n                        '</div>' +\n                        '<div class=\"k-edit-field\">' +\n                            '<input type=\"numeric\" id=\"k-editor-table-rows\" />' +\n                        '</div>' +\n\n                        '<div class=\"k-edit-label\">' +\n                            \"<label for=\\\"k-editor-table-cell-spacing\\\">\" + (messages.cellSpacing) + \"</label>\" +\n                        '</div>' +\n                        '<div class=\"k-edit-field\">' +\n                            '<input type=\"numeric\" id=\"k-editor-table-cell-spacing\" />' +\n                        '</div>' +\n                        '<div class=\"k-edit-label\">' +\n                            \"<label for=\\\"k-editor-table-cell-padding\\\">\" + (messages.cellPadding) + \"</label>\" +\n                        '</div>' +\n                        '<div class=\"k-edit-field\">' +\n                            '<input type=\"numeric\" id=\"k-editor-table-cell-padding\" />' +\n                        '</div>' +\n                        '<div class=\"k-edit-label\">' +\n                            \"<label for=\\\"k-editor-table-alignment\\\">\" + (messages.alignment) + \"</label>\" +\n                        '</div>' +\n                        '<div class=\"k-edit-field\">' +\n                            '<input id=\"k-editor-table-alignment\" class=\"k-align\" />' +\n                        '</div>' +\n                        '<div class=\"k-edit-label\">' +\n                            \"<label for=\\\"k-editor-table-bg\\\">\" + (messages.background) + \"</label>\" +\n                        '</div>' +\n                        '<div class=\"k-edit-field\">' +\n                            '<input id=\"k-editor-table-bg\" />' +\n                        '</div>' +\n                        '<div class=\"k-edit-label\">' +\n                            \"<label for=\\\"k-editor-css-class\\\">\" + (messages.cssClass) + \"</label>\" +\n                        '</div>' +\n                        '<div class=\"k-edit-field\">' +\n                            '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input id=\"k-editor-css-class\" class=\"k-input-inner\" type=\"text\" /></span>' +\n                        '</div>' +\n                        '<div class=\"k-edit-label\">' +\n                            \"<label for=\\\"k-editor-id\\\">\" + (messages.id) + \"</label>\" +\n                        '</div>' +\n                        '<div class=\"k-edit-field\">' +\n                            '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input id=\"k-editor-id\" class=\"k-input-inner\" type=\"text\" /></span>' +\n                        '</div>' +\n                        '<div class=\"k-edit-label\">' +\n                            \"<label for=\\\"k-editor-border-width\\\">\" + (messages.border) + \"</label>\" +\n                        '</div>' +\n                        '<div class=\"k-edit-field\">' +\n                            '<input type=\"numeric\" id=\"k-editor-border-width\" />' +\n                            '<input id=\"k-editor-border-color\" />' +\n                        '</div>' +\n                        '<div class=\"k-edit-label\">' +\n                            \"<label for=\\\"k-editor-border-style\\\">\" + (messages.borderStyle) + \"</label>\" +\n                        '</div>' +\n                        '<div class=\"k-edit-field\">' +\n                            '<input id=\"k-editor-border-style\" />' +\n                        '</div>' +\n                        '<div class=\"k-edit-label\">&nbsp;</div>' +\n                        '<div class=\"k-edit-field\">' +\n                            '<input id=\"k-editor-collapse-borders\" type=\"checkbox\" class=\"k-checkbox k-checkbox-md k-rounded-md\" />' +\n                            \"<label for=\\\"k-editor-collapse-borders\\\" class=\\\"k-checkbox-label\\\">\" + (messages.collapseBorders) + \"</label>\" +\n                        '</div>' +\n                    '</div>' +\n\n                    '<div id=\"k-cell-properties\">' +\n\n                        '<div class=\"k-edit-field\">' +\n                            '<input id=\"k-editor-selectAllCells\" type=\"checkbox\" class=\"k-checkbox k-checkbox-md k-rounded-md\" />' +\n                            \"<label for=\\\"k-editor-selectAllCells\\\" class=\\\"k-checkbox-label\\\">\" + (messages.selectAllCells) + \"</label>\" +\n                        '</div>' +\n\n                        '<div class=\"k-edit-label\">' +\n                            \"<label for=\\\"k-editor-cell-width\\\">\" + (messages.width) + \"</label>\" +\n                        '</div>' +\n                        '<div class=\"k-edit-field\">' +\n                            '<input type=\"numeric\" id=\"k-editor-cell-width\" />' +\n                            \"<input id=\\\"k-editor-cell-width-type\\\" aria-label=\\\"\" + (messages.units) + \"\\\" />\" +\n                        '</div>' +\n                        '<div class=\"k-edit-label\">' +\n                            \"<label for=\\\"k-editor-cell-height\\\">\" + (messages.height) + \"</label>\" +\n                        '</div>' +\n                        '<div class=\"k-edit-field\">' +\n                            '<input type=\"numeric\" id=\"k-editor-cell-height\" />' +\n                            \"<input id=\\\"k-editor-cell-height-type\\\" aria-label=\\\"\" + (messages.units) + \"\\\" />\" +\n                        '</div>' +\n                        '<div class=\"k-edit-label\">' +\n                            \"<label for=\\\"k-editor-table-cell-margin\\\">\" + (messages.cellMargin) + \"</label>\" +\n                        '</div>' +\n                        '<div class=\"k-edit-field\">' +\n                            '<input type=\"numeric\" id=\"k-editor-table-cell-margin\" />' +\n                        '</div>' +\n                        '<div class=\"k-edit-label\">' +\n                            \"<label for=\\\"k-editor-table-cells-padding\\\">\" + (messages.cellPadding) + \"</label>\" +\n                        '</div>' +\n                        '<div class=\"k-edit-field\">' +\n                            '<input type=\"numeric\" id=\"k-editor-table-cells-padding\" />' +\n                        '</div>' +\n                        '<div class=\"k-edit-label\">' +\n                            \"<label for=\\\"k-editor-cell-alignment\\\">\" + (messages.alignment) + \"</label>\" +\n                        '</div>' +\n                        '<div class=\"k-edit-field\">' +\n                            '<input id=\"k-editor-cell-alignment\" class=\"k-align\" />' +\n                        '</div>' +\n                        '<div class=\"k-edit-label\">' +\n                            \"<label for=\\\"k-editor-cell-bg\\\">\" + (messages.background) + \"</label>\" +\n                        '</div>' +\n                        '<div class=\"k-edit-field\">' +\n                            '<input id=\"k-editor-cell-bg\" />' +\n                        '</div>' +\n                        '<div class=\"k-edit-label\">' +\n                            \"<label for=\\\"k-editor-cell-css-class\\\">\" + (messages.cssClass) + \"</label>\" +\n                        '</div>' +\n                        '<div class=\"k-edit-field\">' +\n                            '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input id=\"k-editor-cell-css-class\" class=\"k-input-inner\" type=\"text\" /></span>' +\n                        '</div>' +\n                        '<div class=\"k-edit-label\">' +\n                            \"<label for=\\\"k-editor-cell-id\\\">\" + (messages.id) + \"</label>\" +\n                        '</div>' +\n                        '<div class=\"k-edit-field\">' +\n                            '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input id=\"k-editor-cell-id\" class=\"k-input-inner\" type=\"text\" /></span>' +\n                        '</div>' +\n                        '<div class=\"k-edit-label\">' +\n                            \"<label for=\\\"k-editor-cell-border-width\\\">\" + (messages.border) + \"</label>\" +\n                        '</div>' +\n                        '<div class=\"k-edit-field\">' +\n                            '<input type=\"numeric\" id=\"k-editor-cell-border-width\" />' +\n                            '<input id=\"k-editor-cell-border-color\" />' +\n                        '</div>' +\n                        '<div class=\"k-edit-label\">' +\n                            \"<label for=\\\"k-editor-cell-border-style\\\">\" + (messages.borderStyle) + \"</label>\" +\n                        '</div>' +\n                        '<div class=\"k-edit-field\">' +\n                            '<input id=\"k-editor-cell-border-style\" />' +\n                        '</div>' +\n                        '<div class=\"k-edit-label\">&nbsp;</div>' +\n                        '<div class=\"k-edit-field\">' +\n                            '<input id=\"k-editor-wrap-text\" type=\"checkbox\" class=\"k-checkbox k-checkbox-md k-rounded-md\" />' +\n                            \"<label for=\\\"k-editor-wrap-text\\\" class=\\\"k-checkbox-label\\\">\" + (messages.wrapText) + \"</label>\" +\n                        '</div>' +\n                    '</div>' +\n\n                    '<div id=\"k-accessibility-properties\">' +\n                        '<div class=\"k-edit-label\">' +\n                            \"<label for=\\\"k-editor-table-header-rows\\\">\" + (messages.headerRows) + \"</label>\" +\n                        '</div>' +\n                        '<div class=\"k-edit-field\">' +\n                            '<input type=\"numeric\" id=\"k-editor-table-header-rows\" />' +\n                        '</div>' +\n                        '<div class=\"k-edit-label\">' +\n                            \"<label for=\\\"k-editor-table-header-columns\\\">\" + (messages.headerColumns) + \"</label>\" +\n                        '</div>' +\n                        '<div class=\"k-edit-field\">' +\n                            '<input type=\"numeric\" id=\"k-editor-table-header-columns\" />' +\n                        '</div>' +\n                        '<div class=\"k-edit-label\">' +\n                            \"<label for=\\\"k-editor-table-caption\\\">\" + (messages.caption) + \"</label>\" +\n                        '</div>' +\n                        '<div class=\"k-edit-field\">' +\n                            '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input id=\"k-editor-table-caption\" class=\"k-input-inner\" type=\"text\"/></span>' +\n                        '</div>' +\n                        '<div class=\"k-edit-label\">' +\n                            \"<label for=\\\"k-editor-accessibility-alignment\\\">\" + (messages.alignment) + \"</label>\" +\n                        '</div>' +\n                        '<div class=\"k-edit-field\">' +\n                            '<input id=\"k-editor-accessibility-alignment\" class=\"k-align\" />' +\n                        '</div>' +\n                        '<div class=\"k-edit-label\">' +\n                            \"<label for=\\\"k-editor-accessibility-summary\\\">\" + (messages.summary) + \"</label>\" +\n                        '</div>' +\n                        '<div class=\"k-edit-field\">' +\n                            \"<span class=\\\"k-input k-textarea k-input-solid k-input-md k-rounded-md\\\"><textarea id=\\\"k-editor-accessibility-summary\\\" rows=\\\"5\\\" class=\\\"k-input-inner k-editor-accessibility-summary\\\" placeholder=\\\"\" + (messages.tableSummaryPlaceholder) + \"\\\"></textarea></span>\" +\n                        '</div>' +\n                        '<div class=\"k-edit-label\">' +\n                            \"<label for=\\\"k-editor-cells-headers\\\">\" + (messages.associateCellsWithHeaders) + \"</label>\" +\n                        '</div>' +\n                        '<div class=\"k-edit-field\">' +\n                            '<select id=\"k-editor-cells-headers\">' +\n                                \"<option value=\\\"none\\\">\" + (messages.associateNone) + \"</option>\" +\n                                \"<option value=\\\"scope\\\">\" + (messages.associateScope) + \"</option>\" +\n                                \"<option value=\\\"ids\\\">\" + (messages.associateIds) + \"</option>\" +\n                            '</select>' +\n                        '</div>' +\n                    '</div>' +\n                    '</div>' +\n                    '<div class=\"k-edit-buttons\">' +\n                    \"<button class=\\\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-primary k-dialog-ok\\\"><span class=\\\"k-button-text\\\">\" + (messages.dialogOk) + \"</span></button>\" +\n                    \"<button class=\\\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-dialog-close\\\"><span class=\\\"k-button-text\\\">\" + (messages.dialogCancel) + \"</span></button>\" +\n                '</div>' +\n            '</div>' +\n        '</div>';\n    };\n\n    var TableWizardDialog = kendo.Class.extend({\n        init: function(options) {\n            this.options = options;\n        },\n        open: function() {\n            var that = this,\n                options = that.options,\n                dialogOptions = options.dialogOptions,\n                tableData = options.table,\n                dialog,\n                messages = options.messages,\n                isIE = kendo.support.browser.msie;\n\n            function close(e) {\n                e.preventDefault();\n                that.destroy();\n                dialog.destroy();\n            }\n\n            function okHandler(e) {\n                that.collectDialogValues(tableData);\n\n                close(e);\n\n                if (that.change) {\n                    that.change();\n                }\n\n                options.closeCallback(tableData);\n            }\n\n            function closeHandler(e) {\n                close(e);\n                options.closeCallback();\n            }\n\n            dialogOptions.close = closeHandler;\n            dialogOptions.title = messages.tableWizard;\n            dialogOptions.visible = options.visible;\n\n            dialog = $(that._dialogTemplate(messages)).appendTo(document.body)\n                .kendoWindow(dialogOptions)\n                .closest(\".k-window\").toggleClass(\"k-rtl\", options.isRtl).end()\n                .find(\".k-dialog-ok\").on(\"click\", okHandler).end()\n                .find(\".k-dialog-close\").on(\"click\", closeHandler).end()\n                .data(\"kendoWindow\");\n\n            var element = dialog.element;\n            that._initTabStripComponent(element);\n            that._initTableViewComponents(element, tableData);\n            that._initCellViewComponents(element, tableData);\n            that._initAccessibilityViewComponents(element, tableData);\n\n            dialog.center();\n            dialog.open();\n\n            if (isIE) {\n                var dialogHeight = element.closest(\".k-window\").height();\n                element.css(\"max-height\", dialogHeight);\n            }\n        },\n\n        _initTabStripComponent: function(element) {\n            var components = this.components = {};\n            components.tabStrip = element.find(\"#k-table-wizard-tabs\").kendoTabStrip({\n                animation: false\n            }).data(\"kendoTabStrip\");\n        },\n\n        collectDialogValues: function() {\n            var that = this;\n            var data = that.options.table;\n            that._collectTableViewValues(data);\n            that._collectCellViewValues(data);\n            that._collectAccessibilityViewValues(data);\n        },\n\n        _collectTableViewValues: function(tableData) {\n            var tableView = this.components.tableView;\n            var tableProperties = tableData.tableProperties;\n            tableProperties.width = tableView.width.value();\n            tableProperties.widthUnit = tableView.widthUnit.value();\n            tableProperties.height = tableView.height.value();\n            tableProperties.columns = tableView.columns.value();\n            tableProperties.rows = tableView.rows.value();\n            tableProperties.heightUnit = tableView.heightUnit.value();\n            tableProperties.cellSpacing = tableView.cellSpacing.value();\n            tableProperties.cellPadding = tableView.cellPadding.value();\n            tableProperties.alignment = tableView.alignment.value();\n            tableProperties.bgColor = tableView.bgColor.value();\n            tableProperties.className = tableView.className.value;\n            tableProperties.id = tableView.id.value;\n            tableProperties.borderWidth = tableView.borderWidth.value();\n            tableProperties.borderColor = tableView.borderColor.value();\n            tableProperties.borderStyle = tableView.borderStyle.value();\n            tableProperties.collapseBorders = tableView.collapseBorders.checked;\n        },\n\n        _collectCellViewValues: function(table) {\n            var cellData = table.cellProperties = {};\n            var cellView = this.components.cellView;\n\n            cellData.selectAllCells = cellView.selectAllCells.checked;\n            cellData.width = cellView.width.value();\n            cellData.widthUnit = cellView.widthUnit.value();\n            cellData.height = cellView.height.value();\n            cellData.heightUnit = cellView.heightUnit.value();\n            cellData.cellMargin = cellView.cellMargin.value();\n            cellData.cellPadding = cellView.cellPadding.value();\n            cellData.alignment = cellView.alignment.value();\n            cellData.bgColor = cellView.bgColor.value();\n            cellData.className = cellView.className.value;\n            cellData.id = cellView.id.value;\n            cellData.borderWidth = cellView.borderWidth.value();\n            cellData.borderColor = cellView.borderColor.value();\n            cellData.borderStyle = cellView.borderStyle.value();\n            cellData.wrapText = cellView.wrapText.checked;\n\n            if (!cellData.width) {\n                cellData.selectAllCells = true;\n                cellData.width = 100 / table.tableProperties.columns;\n                cellData.widthUnit = \"%\";\n            }\n        },\n\n       _collectAccessibilityViewValues: function(table) {\n            var tableProperties = table.tableProperties;\n            var accessibilityView = this.components.accessibilityView;\n            tableProperties.captionContent = accessibilityView.captionContent.value;\n            tableProperties.captionAlignment = accessibilityView.captionAlignment.value();\n            tableProperties.summary = accessibilityView.summary.value;\n            tableProperties.cellsWithHeaders = accessibilityView.cellsWithHeaders.value();\n\n            tableProperties.headerRows = accessibilityView.headerRows.value();\n            tableProperties.headerColumns = accessibilityView.headerColumns.value();\n        },\n        _addUnit: function(units, value) {\n            if (value && $.inArray(value, units) == -1) {\n                units.push(value);\n            }\n        },\n        _initTableViewComponents: function(element, table) {\n            var that = this;\n            var components = that.components;\n            var tableView = components.tableView = {};\n            var tableProperties = table.tableProperties = table.tableProperties || {};\n            tableProperties.borderStyle = tableProperties.borderStyle || \"\";\n\n            var onColumnsNumberChange = function(args) {\n                var accessibilityView = that.components.accessibilityView;\n                var headerColumnsNumeric = accessibilityView.headerColumns;\n                var currentNumberOfColumnsHeaders = headerColumnsNumeric.value();\n                var numberOfColumns = args.sender.value();\n\n                if (numberOfColumns < currentNumberOfColumnsHeaders) {\n                    headerColumnsNumeric.value(numberOfColumns);\n                }\n\n                headerColumnsNumeric.max(numberOfColumns);\n            };\n\n            var onRowsNumberChange = function(args) {\n                var accessibilityView = that.components.accessibilityView;\n                var headerRowsNumeric = accessibilityView.headerRows;\n                var currentNumberOfRowHeaders = headerRowsNumeric.value();\n                var numberOfRows = args.sender.value();\n\n                if (numberOfRows < currentNumberOfRowHeaders) {\n                    headerRowsNumeric.value(numberOfRows);\n                }\n\n                headerRowsNumeric.max(numberOfRows);\n            };\n\n            that._addUnit(units, tableProperties.widthUnit);\n            that._addUnit(units, tableProperties.heightUnit);\n\n            that._initNumericTextbox(element.find(\"#k-editor-table-width\"), \"width\", tableProperties, tableView);\n            that._initNumericTextbox(element.find(\"#k-editor-table-height\"), \"height\", tableProperties, tableView);\n            that._initNumericTextbox(element.find(\"#k-editor-table-columns\"), \"columns\", tableProperties, tableView, { min: 1, value: DEFAULT_NUMBER_OF_COLS_AND_ROWS, change: onColumnsNumberChange });\n            that._initNumericTextbox(element.find(\"#k-editor-table-rows\"), \"rows\", tableProperties, tableView, { min: 1, value: DEFAULT_NUMBER_OF_COLS_AND_ROWS, change: onRowsNumberChange });\n            that._initDropDownList(element.find(\"#k-editor-table-width-type\"), \"widthUnit\", tableProperties, tableView, units);\n            that._initDropDownList(element.find(\"#k-editor-table-height-type\"), \"heightUnit\", tableProperties, tableView, units);\n            that._initNumericTextbox(element.find(\"#k-editor-table-cell-spacing\"), \"cellSpacing\", tableProperties, tableView);\n            that._initNumericTextbox(element.find(\"#k-editor-table-cell-padding\"), \"cellPadding\", tableProperties, tableView);\n            that._initTableAlignmentDropDown(element.find(\"#k-editor-table-alignment\"), tableProperties);\n            that._initColorPicker(element.find(\"#k-editor-table-bg\"), \"bgColor\", tableProperties, tableView);\n            that._initInput(element.find(\"#k-editor-css-class\"), \"className\", tableProperties, tableView);\n            that._initInput(element.find(\"#k-editor-id\"), \"id\", tableProperties, tableView);\n            that._initNumericTextbox(element.find(\"#k-editor-border-width\"), \"borderWidth\", tableProperties, tableView);\n            that._initColorPicker(element.find(\"#k-editor-border-color\"), \"borderColor\", tableProperties, tableView);\n            that._initBorderStyleDropDown(element.find(\"#k-editor-border-style\"), \"borderStyle\", tableProperties, tableView, borderStyles);\n            that._initCheckbox(element.find(\"#k-editor-collapse-borders\"), \"collapseBorders\", tableProperties, tableView);\n        },\n\n        _initCellViewComponents: function(element, table) {\n            var components = this.components;\n            var cellView = components.cellView = {};\n            table.selectedCells = table.selectedCells = table.selectedCells || [];\n            var cellProperties = table.selectedCells[0] || { borderStyle: \"\", wrapText: true };\n            this._addUnit(units, cellProperties.widthUnit);\n            this._addUnit(units, cellProperties.heightUnit);\n\n            this._initCheckbox(element.find(\"#k-editor-selectAllCells\"), \"selectAllCells\", table.tableProperties, cellView);\n            this._initNumericTextbox(element.find(\"#k-editor-cell-width\"), \"width\", cellProperties, cellView);\n            this._initNumericTextbox(element.find(\"#k-editor-cell-height\"), \"height\", cellProperties, cellView);\n            this._initDropDownList(element.find(\"#k-editor-cell-width-type\"), \"widthUnit\", cellProperties, cellView, units);\n            this._initDropDownList(element.find(\"#k-editor-cell-height-type\"), \"heightUnit\", cellProperties, cellView, units);\n            this._initNumericTextbox(element.find(\"#k-editor-table-cell-margin\"), \"cellMargin\", cellProperties, cellView);\n            this._initNumericTextbox(element.find(\"#k-editor-table-cells-padding\"), \"cellPadding\", cellProperties, cellView);\n            this._initCellAlignmentDropDown(element.find(\"#k-editor-cell-alignment\"), cellProperties);\n            this._initColorPicker(element.find(\"#k-editor-cell-bg\"), \"bgColor\", cellProperties, cellView);\n            this._initInput(element.find(\"#k-editor-cell-css-class\"), \"className\", cellProperties, cellView);\n            this._initInput(element.find(\"#k-editor-cell-id\"), \"id\", cellProperties, cellView);\n            this._initNumericTextbox(element.find(\"#k-editor-cell-border-width\"), \"borderWidth\", cellProperties, cellView);\n            this._initColorPicker(element.find(\"#k-editor-cell-border-color\"), \"borderColor\", cellProperties, cellView);\n            this._initBorderStyleDropDown(element.find(\"#k-editor-cell-border-style\"), \"borderStyle\", cellProperties, cellView, borderStyles);\n            this._initCheckbox(element.find(\"#k-editor-wrap-text\"), \"wrapText\", cellProperties, cellView);\n        },\n\n        _initAccessibilityViewComponents: function(element, table) {\n            var components = this.components;\n            var accessibilityView = components.accessibilityView = {};\n            var tableProperties = table.tableProperties;\n\n            this._initInput(element.find(\"#k-editor-table-caption\"), \"captionContent\", tableProperties, accessibilityView);\n            this._initAccessibilityAlignmentDropDown(element.find(\"#k-editor-accessibility-alignment\"), tableProperties);\n            this._initInput(element.find(\"#k-editor-accessibility-summary\"), \"summary\", tableProperties, accessibilityView);\n            this._initAssociationDropDown(element.find(\"#k-editor-cells-headers\"), \"cellsWithHeaders\", { valuePrimitive: true }, tableProperties, accessibilityView);\n            this._initNumericTextbox(element.find(\"#k-editor-table-header-rows\"), \"headerRows\", tableProperties, accessibilityView, { max: tableProperties.rows || DEFAULT_NUMBER_OF_COLS_AND_ROWS });\n            this._initNumericTextbox(element.find(\"#k-editor-table-header-columns\"), \"headerColumns\", tableProperties, accessibilityView, { max: tableProperties.columns || DEFAULT_NUMBER_OF_COLS_AND_ROWS });\n        },\n\n        _initNumericTextbox: function(element, property, data, storage, settings) {\n            var component = storage[property] = element.kendoNumericTextBox(\n                    settings ? $.extend({}, numericTextBoxSettings, settings) : numericTextBoxSettings\n                ).data(\"kendoNumericTextBox\");\n            if (property in data) {\n                component.value(parseInt(data[property], 10));\n            }\n        },\n\n        _initDropDownList: function(element, property, data, storage, dataSource) {\n            var component = storage[property] = element.kendoDropDownList({\n                dataSource: dataSource\n            }).data(\"kendoDropDownList\");\n            this._setComponentValue(component, data, property);\n        },\n\n        _initBorderStyleDropDown: function(element, property, data, storage, dataSource) {\n            var component = storage[property] = element.kendoDropDownList({\n                dataSource: dataSource,\n                optionLabel: this.options.messages.borderNone\n            }).data(\"kendoDropDownList\");\n            this._setComponentValue(component, data, property);\n        },\n\n        _initTableAlignmentDropDown: function(element, data) {\n            var messages = this.options.messages;\n            var tableView = this.components.tableView;\n            var dataSource = tableAlignmentDropDownSettings.dataSource;\n            dataSource[0].tooltip = messages.alignLeft;\n            dataSource[1].tooltip = messages.alignCenter;\n            dataSource[2].tooltip = messages.alignRight;\n            dataSource[3].tooltip = messages.alignRemove;\n\n            this._initAlignmentDropDown(element, tableAlignmentDropDownSettings, \"alignment\", data, tableView);\n        },\n\n        _initCellAlignmentDropDown: function(element, data) {\n            var messages = this.options.messages;\n            var cellView = this.components.cellView;\n            var dataSource = cellAlignmentDropDownSettings.dataSource;\n            dataSource[0].tooltip = messages.alignLeftTop;\n            dataSource[1].tooltip = messages.alignCenterTop;\n            dataSource[2].tooltip = messages.alignRightTop;\n            dataSource[3].tooltip = messages.alignLeftMiddle;\n            dataSource[4].tooltip = messages.alignCenterMiddle;\n            dataSource[5].tooltip = messages.alignRightMiddle;\n            dataSource[6].tooltip = messages.alignLeftBottom;\n            dataSource[7].tooltip = messages.alignCenterBottom;\n            dataSource[8].tooltip = messages.alignRightBottom;\n            dataSource[9].tooltip = messages.alignRemove;\n\n            this._initAlignmentDropDown(element, cellAlignmentDropDownSettings, \"alignment\", data, cellView);\n        },\n\n        _initAccessibilityAlignmentDropDown: function(element, data) {\n            var messages = this.options.messages;\n            var accessibilityView = this.components.accessibilityView;\n            var dataSource = accessibilityAlignmentDropDownSettings.dataSource;\n            dataSource[0].tooltip = messages.alignLeftTop;\n            dataSource[1].tooltip = messages.alignCenterTop;\n            dataSource[2].tooltip = messages.alignRightTop;\n            dataSource[3].tooltip = messages.alignLeftBottom;\n            dataSource[4].tooltip = messages.alignCenterBottom;\n            dataSource[5].tooltip = messages.alignRightBottom;\n            dataSource[6].tooltip = messages.alignRemove;\n\n            this._initAlignmentDropDown(element, accessibilityAlignmentDropDownSettings, \"captionAlignment\", data, accessibilityView);\n        },\n        _initAlignmentDropDown: function(element, settings, name, data, storage) {\n            var component = storage[name] =\n                element.kendoDropDownList(settings).data(\"kendoDropDownList\");\n\n            component.list.addClass('k-align').css('width', '110px');\n            this._setComponentValue(component, data, name);\n        },\n        _initAssociationDropDown: function(element, name, settings, data, storage) {\n            var component = storage[name] =\n                element.kendoDropDownList(settings).data(\"kendoDropDownList\");\n\n            this._setComponentValue(component, data, name);\n        },\n        _setComponentValue: function(component, data, property) {\n            if (property in data) {\n                component.value(data[property]);\n            }\n        },\n\n        _initColorPicker: function(element, property, data, storage) {\n            var component = storage[property] =\n                element.kendoColorPicker({ buttons: false, clearButton: true }).data(\"kendoColorPicker\");\n\n            if (data[property]) {\n                component.value(data[property]);\n            }\n        },\n        _initInput: function(element, property, data, storage) {\n            var component = storage[property] = element.get(0);\n            if (property in data) {\n                component.value = data[property];\n            }\n        },\n\n        _initCheckbox: function(element, property, data, storage) {\n            var component = storage[property] = element.get(0);\n            if (property in data) {\n                component.checked = data[property];\n            }\n        },\n\n        destroy: function() {\n            this._destroyComponents(this.components.tableView);\n            this._destroyComponents(this.components.cellView);\n            this._destroyComponents(this.components.accessibilityView);\n            this._destroyComponents(this.components);\n\n            delete this.components;\n        },\n        _destroyComponents: function(components) {\n            for (var widget in components) {\n                if (components[widget].destroy) {\n                    components[widget].destroy();\n                }\n                delete components[widget];\n            }\n        },\n\n        _dialogTemplate: function(messages) {\n            return kendo.template(dialogTemplate)({ messages: messages });\n        }\n    });\n\n    kendo.ui.editor.TableWizardDialog = TableWizardDialog;\n\n    })(window.kendo.jQuery);\n\n    var __meta__ = {\n            id: \"editor\",\n            name: \"Editor\",\n            category: \"web\",\n            description: \"Rich text editor component\",\n            depends: [ \"combobox\", \"dropdownlist\", \"window\", \"colorpicker\" ],\n            features: [ {\n                id: \"editor-imagebrowser\",\n                name: \"Image Browser\",\n                description: \"Support for uploading and inserting images\",\n                depends: [ \"imagebrowser\" ]\n            }, {\n                id: \"editor-resizable\",\n                name: \"Resize handle\",\n                description: \"Support for resizing the content area via a resize handle\",\n                depends: [ \"resizable\" ]\n            }, {\n                id: \"editor-tablewizard\",\n                name: \"Table wizard dialog\",\n                description: \"Support for table properties configuration\",\n                depends: [ \"tabstrip\", \"button\", \"numerictextbox\" ]\n            }, {\n                id: \"editor-pdf-export\",\n                name: \"PDF export\",\n                description: \"Export Editor content as PDF\",\n                depends: [ \"pdf\", \"drawing\" ]\n            }]\n        };\n\n}));\n"]}