{"version":3,"file":"kendo.pivot.fieldmenu.min.js","names":["factory","define","amd","$","undefined$1","kendo","window","ui","encode","htmlEncode","MENU","NS","Widget","FILTER_ITEM","ARIA_LABEL","PivotFieldMenuV2","extend","init","element","options","fn","call","this","_dataSource","_layout","notify","events","name","animation","expand","effects","duration","collapse","hide","reverse","filter","filterable","sortable","messages","apply","sortAscending","sortDescending","filterFields","include","clear","reset","operators","contains","doesnotcontain","startswith","endswith","eq","neq","destroy","menu","off","_applyProxy","_resetIncludes","treeView","wrapper","setDataSource","dataSource","_createTreeView","that","_includesCache","TreeView","autoBind","_treeViewDataSource","dataTextField","template","ref","item","caption","check","e","dataItem","sender","node","uniqueName","checkboxes","checkChildren","data","PivotDataSourceV2","create","MENUTEMPLATEV2","ns","target","orientation","showOn","closeOnClick","open","_menuOpen","bind","close","_closeMenu","copyAnchorStyles","_checkActiveProxy","_initFilterForm","_attachFilterHandlers","find","_clickHandler","_click","on","activeElement","_activeElement","_filterOperator","closest","hasClass","preventDefault","HierarchicalDataSource","schema","model","id","hasChildren","parseInt","childrenCardinality","transport","read","catalog","cube","restrictions","fetchOptions","get","nodes","cubeSchema","members","currentMember","_getFilterStorage","findFilters","member","length","checked","values","idx","filters","operator","indexOf","map","ftr","value","inArray","checkNodesLocal","success","catalogName","cubeName","command","memberUniqueName","replace","treeOp","levelUniqueName","connection","discover","then","checkNodes","_storeFilterForm","_filterStorage","_filterValue","val","_clearFilterStorage","currentTarget","next","_toggle","_sort","_applyIncludesProxy","_applyIncludes","_resetIncludesProxy","_includesHandler","newExpression","view","nonCheckedNodes","removeFilters","logic","nodeIds","push","field","includeLocalExpression","resultExpression","checkedNodes","rootChecked","existingExpression","splice","join","includeExpression","_preventRefresh","checkbox","prop","_checkboxChange","filterForm","filterProxy","_filter","DropDownList","popup","appendTo","document","body","_filterForm","_updateFilterAriaLabel","_reset","selectedOperator","selectedOperatorName","attr","convert","expression","toRemove","removeFilterByValue","_setFilterForm","filterOperator","select","_collapseItems","items","removeClass","addClass","nextAll","content","animations","shouldExpand","is","kendoStop","kendoAnimate","dir","expressions","sort","removeExpr","event","filterBox","schemaCube","prev","text","_hovered","last","memberType","toLowerCase","show","_oldCurrentmember","PivotFieldMenu","info","title","ok","cancel","MENUTEMPLATE","_select","_createWindow","_clearFilters","PivotDataSource","includeWindow","WINDOWTEMPLATE","_closeWindow","Window","visible","resizable","_windowOpen","schemaMembers","done","fail","error","dataBound","progress","not","kendoWindow","center","fields","type","parseFloat","Boolean","parseJSON","result","operatorInUse","isLocal","split","checkState","level","children","Object","keys","op","MENU_TEMPLATE_FILTERABLE_PARTIAL","LABELMENUTEMPLATE","MENU_TEMPLATE_SORTABLE_PARTIAL","plugin","jQuery"],"sources":["kendo.pivot.fieldmenu.js"],"mappings":"CAAA,SAAWA,GACW,mBAAXC,QAAyBA,OAAOC,IAAMD,OAAO,CAAC,sBAAuB,iBAAkB,mBAAoB,qBAAsB,0BAA2BD,GACnKA,IAFJ,EAGG,YAWC,SAAUG,EAAGC,GACT,IAAIC,EAAQC,OAAOD,MACfE,EAAKF,EAAME,GACXC,EAASH,EAAMI,WACfC,EAAO,mBACPC,EAAK,uBACLC,EAASL,EAAGK,OACZC,EAAc,gBACdC,EAAa,aAEbC,EAAmBH,EAAOI,OAAO,CACjCC,KAAM,SAASC,EAASC,GACpBP,EAAOQ,GAAGH,KAAKI,KAAKC,KAAMJ,EAASC,GAEnCG,KAAKC,cAELD,KAAKE,UAELnB,EAAMoB,OAAOH,OAGjBI,OAAQ,GAERP,QAAS,CACLQ,KAAM,mBACNC,UAAW,CACPC,OAAQ,CACJC,QAAS,kBACTC,SAAU,KAEdC,SAAU,CACND,SAAU,IACVD,QAAS,kBACTG,MAAM,EACNC,SAAS,IAGjBC,OAAQ,KACRC,YAAY,EACZC,UAAU,EACVC,SAAU,CACNC,MAAO,QACPC,cAAe,iBACfC,eAAgB,kBAChBC,aAAc,gBACdP,OAAQ,SACRQ,QAAS,oBACTC,MAAO,QACPC,MAAO,QACPC,UAAW,CACPC,SAAU,WACVC,eAAgB,mBAChBC,WAAY,cACZC,SAAU,YACVC,GAAI,cACJC,IAAK,qBAKjBC,QAAS,WACLzC,EAAOQ,GAAGiC,QAAQhC,KAAKC,MAEnBA,KAAKgC,OACLhC,KAAKgC,KAAKpC,QAAQqC,IAAI5C,GACtBW,KAAKgC,KAAKD,UACV/B,KAAKgC,KAAO,KACZhC,KAAKkC,YAAclC,KAAKmC,eAAiB,MAGzCnC,KAAKoC,WACLpC,KAAKoC,SAASL,UACd/B,KAAKoC,SAAW,MAGpBpC,KAAKqC,QAAU,KACfrC,KAAKJ,QAAU,MAGnB0C,cAAe,SAASC,GACpBvC,KAAKH,QAAQ0C,WAAaA,EAE1BvC,KAAKC,eAGTuC,gBAAiB,SAAS5C,GACtB,IAAI6C,EAAOzC,KAEXyC,EAAKC,eAAiB,GAEtBD,EAAKL,SAAW,IAAInD,EAAG0D,SAAS/C,EAAS,CACrCgD,UAAU,EACVL,WAAYE,EAAKI,sBACjBC,cAAe,UACfC,SAAU,SAAUC,GAChB,IAAIC,EAAOD,EAAIC,KAEf,MAAQ,GAAM/D,EAAO+D,EAAKC,SAAWD,EAAK5C,OAE9C8C,MAAO,SAASC,GAEZ,IAAIC,EAAWD,EAAEE,OAAOD,SAASD,EAAEG,MAC/Bd,EAAKC,eAAeW,EAASG,mBACtBf,EAAKC,eAAeW,EAASG,YAEpCf,EAAKC,eAAeW,EAASG,YAAcJ,EAAEG,MAGrDE,WAAY,CACRC,eAAe,MAK3BzD,YAAa,WACTD,KAAKuC,WAAaxD,EAAM4E,KAAKC,kBAAkBC,OAAO7D,KAAKH,QAAQ0C,aAGvErC,QAAS,WACL,IAAIuC,EAAOzC,KACPH,EAAU4C,EAAK5C,QAEnB4C,EAAKJ,QAAUxD,EAAEE,EAAMgE,SAASe,EAAf/E,CAA+B,CAC5CgF,GAAIhF,EAAMgF,GACVjD,WAAYjB,EAAQiB,WACpBC,SAAUlB,EAAQkB,SAClBC,SAAUnB,EAAQmB,YAGtByB,EAAKT,KAAOS,EAAKJ,QAAQjD,GAAM,CAC3ByB,OAAQhB,EAAQgB,OAChBmD,OAAQvB,EAAK7C,QACbqE,YAAa,WACbC,OAAQ,QACRC,cAAc,EACdC,KAAMpE,KAAKqE,UAAUC,KAAKtE,MAC1BuE,MAAOvE,KAAKwE,WAAWF,KAAKtE,MAC5ByE,kBAAkB,IACnBd,KAAKvE,GAERqD,EAAKT,KAAKpC,QAAQqC,IAAI,iBAAkB,aAAcQ,EAAKT,KAAK0C,mBAE5D7E,EAAQiB,aACR2B,EAAKkC,kBACLlC,EAAKmC,wBACLnC,EAAKD,gBAAgBC,EAAKJ,QAAQwC,KAAK,iBAG3CpC,EAAKqC,cAAgBrC,EAAKsC,OAAOT,KAAK7B,GACtCA,EAAKJ,QAAQ2C,GAAG,QAAS,iCAAkCvC,EAAKqC,gBAGpEN,WAAY,SAASpB,GACjB,IACI6B,EAAgBpG,EAAEE,EAAMmG,mBAExBD,EAAc,KAAOjF,KAAKmF,gBAAgB9C,QAAQ,IAAM4C,EAAcG,QAAQ,eAAe,KAHtFpF,KAGkGoC,SAASC,QAAQ,IAC1H4C,EAAcI,SAAS,6BACvBjC,EAAEkC,kBAIVzC,oBAAqB,WACjB,IAAIJ,EAAOzC,KAEX,OAAOjB,EAAM4E,KAAK4B,uBAAuB1B,OAAO,CAC5C2B,OAAQ,CACJC,MAAO,CACHC,GAAI,aACJC,YAAa,SAAS1C,GAClB,OAAO2C,SAAS3C,EAAK4C,oBAAqB,IAAM,KAI5DC,UAAW,CACPC,KAAM,SAASlG,GACX,IAGIgB,EAEAmF,EACAC,EACAC,EACAC,EARA5C,EAAOd,EAAKL,SAASG,WAAW6D,IAAIvG,EAAQ8D,KAAKH,YACjDnD,EAAOR,EAAQ8D,KAAKH,WACpB6C,EAAQ,GAQR5D,EAAKF,WAAW+D,YAIZD,EAHChG,EAGOoC,EAAKF,WAAW+D,WAAWC,QAAQ9D,EAAK+D,eAFxC/D,EAAKF,WAAW+D,WAAWC,QAAQ9D,EAAK+D,cAAgB,YAKpE3F,EAAS4B,EAAKF,WAAW1B,SACb4B,EAAKgE,kBAAkBhE,EAAK+D,gBAAwF,GAAtEE,EAAY,CAAE7F,OAAQA,EAAQ8F,OAAQlE,EAAK+D,gBAAiBI,SAEpGvG,EACdgG,EAAM,GAAGQ,SAAU,EAmvB/C,SAAyBhG,EAAQ8F,EAAQN,GACrC,IAAIS,EAAQC,EAAM,EAAGH,EAASP,EAAMO,OAChCI,EAAUN,EAAY,CAAE7F,OAAQA,EAAQ8F,OAAQA,EAAQM,SAAU,QAEtE,GAAIZ,EAAM,GAAGhG,KAAK6G,QAAQ,YAAc,EAEpC,YADAb,EAAM,GAAGQ,SAAWG,EAAQJ,QAIhC,GAAKI,EAAQJ,OAMT,IADAE,EAASE,EAAQG,KAAI,SAASC,GAAO,OAAOA,EAAIC,SACzCN,EAAMH,EAAQG,IACjBV,EAAMU,GAAKF,QAAUhI,EAAEyI,QAAQjB,EAAMU,GAAKvD,WAAYsD,GAAU,OANpE,KAAOC,EAAMH,EAAQG,IACjBV,EAAMU,GAAKF,SAAU,EA5vBLU,CAAgB9E,EAAKF,WAAW1B,SAAU4B,EAAK+D,cAAeH,GAElExG,EAAQ2H,QAAQnB,KAIhBH,EAAe,CACXuB,YAHJzB,EAAUvD,EAAKF,WAAWuD,UAAUE,UAIhC0B,SAHJzB,EAAOxD,EAAKF,WAAWuD,UAAUG,QAKjCE,EAAe,CACXwB,QAAS,iBAGRtH,GAGD6F,EAAa0B,iBAAmBrE,EAAKC,WAAWqE,QAAQ,MAAO,SAC/D3B,EAAa4B,OAAS,GAHtB5B,EAAa6B,gBAAkBtF,EAAK+D,cAAgB,WAMxDL,EAAa6B,WAAa,CACtBhC,QAASA,EACTC,KAAMA,GAGVE,EAAaD,aAAeA,EAC5BzD,EAAKF,WAAW0F,SAAS9B,GAAc+B,MACnC,SAASvE,GACAJ,IAAQA,EAAKsD,SACdsB,EAAW1F,EAAKF,WAAW1B,SAAU4B,EAAK+D,cAAe7C,GAG7D9D,EAAQ2H,QAAQ7D,YAQ5CyE,iBAAkB,SAASzB,GACvB,IAAIlE,EAAOzC,KAENyC,EAAK4F,iBACN5F,EAAK4F,eAAiB,IAG1B5F,EAAK4F,eAAe1B,GAAU,CAC1BU,MAAO5E,EAAK6F,aAAaC,MACzBtB,SAAUxE,EAAK0C,gBAAgBkC,UAIvCZ,kBAAmB,SAASE,GACxB,OAAK3G,KAAKqI,gBAAmBrI,KAAKqI,eAAe1B,GAG1C3G,KAAKqI,eAAe1B,GAFhB,MAKf6B,oBAAqB,SAAS7B,GAC1B3G,KAAKqI,eAAe1B,GAAU,MAGlC5B,OAAQ,SAAS3B,GACb,IAAIH,EAAOpE,EAAEuE,EAAEqF,eACXC,EAAOzF,EAAKyF,OACZzF,EAAKoC,SAAS,cACdrF,KAAK2I,QAAQD,EAAMzF,GACZA,EAAKoC,SAAS,sBAAwBpC,EAAK4B,KAAK,oBAAoB+B,OAC3E5G,KAAK4I,MAAM,OACJ3F,EAAKoC,SAAS,sBAAwBpC,EAAK4B,KAAK,qBAAqB+B,QAC5E5G,KAAK4I,MAAM,SAInBhE,sBAAuB,WACnB5E,KAAK6I,oBAAsB7I,KAAK8I,eAAexE,KAAKtE,MACpDA,KAAK+I,oBAAsB/I,KAAKmC,eAAemC,KAAKtE,MAEpDA,KAAKgC,KAAKpC,QACLoF,GAAG,QAAU3F,EAAI,2BAA4BW,KAAK+I,qBAClD/D,GAAG,QAAU3F,EAAI,2BAA4BW,KAAK6I,sBAG3DG,iBAAkB,SAAS5F,GACvBA,EAAEkC,iBACEzG,EAAEuE,EAAEY,QAAQqB,SAAS,2BACrBrF,KAAKmC,iBAELnC,KAAK8I,kBAIbA,eAAgB,SAAS1F,GACrBA,EAAEkC,iBACF,IAEI2D,EAFAC,EAAOlJ,KAAKoC,SAASG,WAAW2G,OAChCrI,EAASb,KAAKuC,WAAW1B,SAGzBoI,EADAjJ,KAAKuC,WAAW+D,WAgsB5B,SAAgC4C,EAAMrI,EAAQ2F,GAC1C,IAAI2C,EAAkB,GACtBC,EAAcvI,EAAQ2F,EAAe,OAEhC3F,IACDA,EAAS,CAAEwI,MAAO,MAAOrC,QAAS,KAItC,GAFAsC,EAAQJ,EAAMC,GAAiB,GAE3BA,EAAgBvC,OAChB,IAAK,IAAIG,EAAM,EAAGA,EAAMoC,EAAgBvC,OAAQG,IAC5ClG,EAAOmG,QAAQuC,KAAK,CAChBC,MAAOhD,EACPS,SAAU,MACVI,MAAO8B,EAAgBpC,KAKnC,OAAOlG,GAAkB,KAltBD4I,CAAuBP,EAAMrI,EAAQb,KAAKwG,eAqtBtE,SAA2B0C,EAAMrI,EAAQ2F,GACrC,IACIkD,EADAC,EAAe,GAEfC,EAAcV,EAAK,GAAGrC,QACtBgD,EAAqBnD,EAAY,CAAE7F,OAAQA,EAAQ8F,OAAQH,EAAeS,SAAU,OAAQ,GAEhGqC,EAAQJ,EAAMS,GAAc,GAExBE,IACID,GACA/I,EAAOmG,QAAQ8C,OAAOjJ,EAAOmG,QAAQE,QAAQ2C,GAAqB,GAC7DhJ,EAAOmG,QAAQJ,SAChB/F,EAAS,KAGbgJ,EAAmBxC,MAAQsC,EAAaI,KAAK,KAGjDL,EAAmB7I,GAGnB8I,EAAa/C,SACR8C,GAAqBE,IACtBF,EAAmB,CACfF,MAAOhD,EACPS,SAAU,KACVI,MAAOsC,EAAaI,KAAK,MAGzBlJ,IACAA,EAAOmG,QAAQuC,KAAKG,GACpBA,EAAmB7I,KAK/B,OAAO6I,GAAsC,KAvvBrBM,CAAkBd,EAAMrI,EAAQb,KAAKwG,eAExDxG,KAAK0C,eAAiB,GAEnBuG,IACAjJ,KAAKuC,WAAW0H,iBAAkB,EAClCjK,KAAKuC,WAAW1B,OAAOoI,GACvBjJ,KAAKgC,KAAKuC,UAIlBpC,eAAgB,SAASiB,GACrBA,EAAEkC,iBAEF,IACI4E,EADAzH,EAAOzC,KAGX,IAAK,IAAIiD,KAAQR,EAAKC,gBAClBwH,EAAWrL,EAAE4D,EAAKC,eAAeO,IAAO4B,KAAK,gBACpCsF,KAAK,WAAYD,EAASC,KAAK,YACxC1H,EAAKL,SAASgI,gBAAgB,CAAEpG,OAAQkG,WACjCzH,EAAKC,eAAeO,IAInC0B,gBAAiB,WACb,IAAI0F,EAAarK,KAAKgC,KAAKpC,QAAQiF,KAAK,qCACpCyF,EAActK,KAAKuK,QAAQjG,KAAKtE,MAEpCA,KAAKmF,gBAAkB,IAAIpG,EAAME,GAAGuL,aAAaH,EAAWxF,KAAK,UAAW,CAAE4F,MAAO,CAAEC,SAAUC,SAASC,QAC1G5K,KAAKsI,aAAe+B,EAAWxF,KAAK,uBACpC7E,KAAK6K,YAAcR,EACnBrK,KAAK8K,yBAELT,EACKrF,GAAG,QAAU3F,EAAI,mBAAoBiL,GACrCtF,GAAG,QAAU3F,EAAI,yBAA0BW,KAAK+K,OAAOzG,KAAKtE,QAGrE8K,uBAAwB,WACpB,IAAIE,EAAmBhL,KAAKmF,gBAAgBkC,QACxC4D,EAAuBjL,KAAKH,QAAQmB,SAASQ,UAAUwJ,GAE3DhL,KAAK6K,YAAYhG,KAAK,UAAUqG,KAAK1L,EAAYyL,IAGrDV,QAAS,SAASnH,GACd,IAAIX,EAAOzC,KACPqH,EAAQ8D,EAAQ1I,EAAK6F,aAAaC,MAAO9F,EAAKF,WAAYE,EAAK+D,eAC/D3F,EAAS4B,EAAKF,WAAW1B,SAI7B,GAFAuC,EAAEkC,iBAEY,KAAV+B,EAAJ,CAKA,IAAI+D,EAAa,CACb5B,MAAO/G,EAAK+D,cACZS,SAAUxE,EAAK0C,gBAAgBkC,QAC/BA,MAAOA,GAEPxG,EA+gBZ,SAA6BA,EAAQwK,GACjC,IAAKA,EACD,OAGJxK,EAASA,EAAOmG,QAEhB,IAAID,EAAM,EACNH,EAAS/F,EAAO+F,OAEpB,IAAKG,EAAMH,EAAS,EAAGG,GAAO,EAAGA,IACzBlG,EAAOkG,GAAKM,QAAUgE,EAAShE,OAASxG,EAAOkG,GAAKE,WAAaoE,EAASpE,UAC1EpG,EAAOiJ,OAAO/C,EAAK,GA1hBnBuE,CAAoBzK,EAAQ4B,EAAKgE,kBAAkBhE,EAAK+D,gBAExD3F,EAAS,CAAEwI,MAAO,MAAOrC,QAAS,IAGtCvE,EAAK2F,iBAAiB3F,EAAK+D,eAC3B3F,EAAOmG,QAAQuC,KAAK6B,GAEpB3I,EAAKF,WAAW0H,iBAAkB,EAClCxH,EAAKF,WAAW1B,OAAOA,GACvB4B,EAAKT,KAAKuC,aApBN9B,EAAKT,KAAKuC,SAuBlBwG,OAAQ,SAAS3H,GACb,IAAIX,EAAOzC,KACPa,EAAS4B,EAAKF,WAAW1B,SAC7BuI,EAAcvI,EAAQ4B,EAAK+D,eAE3BpD,EAAEkC,iBAEGzE,EAAOmG,QAAQ,KAChBnG,EAAS,IAGb4B,EAAKF,WAAW0H,iBAAkB,EAClCxH,EAAKF,WAAW1B,OAAOA,GACvB4B,EAAK+F,oBAAoB/F,EAAK+D,eAC9B/D,EAAK8I,eAAe,MACpB9I,EAAKT,KAAKuC,SAGdgH,eAAgB,SAASH,GACrB,IAAII,EAAiBxL,KAAKmF,gBACtB8B,EAAW,GACXI,EAAQ,GAER+D,IACAnE,EAAWmE,EAAWnE,SACtBI,EAAQ+D,EAAW/D,OAGvBmE,EAAenE,MAAMJ,GAChBuE,EAAenE,SAChBmE,EAAeC,OAAO,GAG1BzL,KAAKsI,aAAaC,IAAIlB,IAG1BqE,eAAgB,SAASC,GACrBA,EAAM9G,KAAK,yBAAyB+G,YAAY,0BACvCC,SAAS,wBAElBF,EAAMG,UAAUnL,QAGpBgI,QAAS,SAASoD,EAAS9I,GACvB,IACI+I,EADOhM,KACWH,QAAQS,UAC1B2L,EAAeF,EAAQG,GAAG,YAC1B5L,EAAa2L,EAAmCD,EAAWtL,SAA/BsL,EAAWzL,OAEtC0L,EAKDhJ,EAAK4B,KAAK,yBAAyB+G,YAAY,wBAC1CC,SAAS,0BAJd5I,EAAK4B,KAAK,yBAAyB+G,YAAY,0BAC1CC,SAAS,wBAMlBE,EACKI,WAAU,GAAM,GAChBC,aAAa9L,IAItBsI,MAAO,SAASyD,GACZ,IAAI7C,EAAQxJ,KAAKwG,cACb8F,EAAetM,KAAKuC,WAAWgK,QAAU,IAE7CD,EAAcE,EAAWF,EAAa9C,IAC1BD,KAAK,CACbC,MAAOA,EACP6C,IAAKA,IAGTrM,KAAKuC,WAAW0H,iBAAkB,EAClCjK,KAAKuC,WAAWgK,KAAKD,GACrBtM,KAAKgC,KAAKuC,SAGdF,UAAW,SAASjB,GAChB,GAAKA,EAAEqJ,MAAP,CAIA,IAEIC,EAFAjK,EAAOzC,KACP2M,EAAalK,EAAKF,WAAW+D,WAEjC7D,EAAK+D,cAAgB3H,EAAEuE,EAAEqJ,MAAMzI,QAAQ4I,OAAOC,OAC9CpK,EAAKT,KAAKyI,MAAMqC,UAAW,EAEvBrK,EAAK5C,QAAQiB,aACb2B,EAAK8I,eAAe9I,EAAKgE,kBAAkBhE,EAAK+D,gBAChDkG,EAAYjK,EAAKJ,QAAQwC,KAAK,8BAA8BkI,OACxDJ,GAA0E,WAA5DA,EAAWK,WAAWvK,EAAK+D,eAAeyG,cACxDP,EAAU/L,OAEV+L,EAAUQ,OAEVzK,EAAK+D,gBAAkB/D,EAAK0K,oBACxB1K,EAAK0K,mBACL1K,EAAKiJ,eAAejJ,EAAKT,KAAKpC,QAAQiF,KAAK,uBAE/CpC,EAAK0K,kBAAoB1K,EAAK+D,cAC9B/D,EAAKC,eAAiB,GACtB1C,KAAKoC,SAASG,WAAWwD,aAMrCqH,EAAiB9N,EAAOI,OAAO,CAC/BC,KAAM,SAASC,EAASC,GACpBP,EAAOQ,GAAGH,KAAKI,KAAKC,KAAMJ,EAASC,GAEnCG,KAAKC,cAELD,KAAKE,UAELnB,EAAMoB,OAAOH,OAGjBI,OAAQ,GAERP,QAAS,CACLQ,KAAM,iBACNQ,OAAQ,KACRC,YAAY,EACZC,UAAU,EACVC,SAAU,CACNqM,KAAM,8BACNnM,cAAe,iBACfC,eAAgB,kBAChBC,aAAc,gBACdP,OAAQ,SACRQ,QAAS,oBACTiM,MAAO,oBACPhM,MAAO,QACPiM,GAAI,KACJC,OAAQ,SACRhM,UAAW,CACPC,SAAU,WACVC,eAAgB,mBAChBC,WAAY,cACZC,SAAU,YACVC,GAAI,cACJC,IAAK,qBAKjB5B,QAAS,WACL,IAAIL,EAAUG,KAAKH,QAEnBG,KAAKqC,QAAUxD,EAAEE,EAAMgE,SAAS0K,EAAf1O,CAA6B,CAC1CgF,GAAIhF,EAAMgF,GACVjD,WAAYjB,EAAQiB,WACpBC,SAAUlB,EAAQkB,SAClBC,SAAUnB,EAAQmB,YAGtBhB,KAAKgC,KAAOhC,KAAKqC,QAAQjD,GAAM,CAC3ByB,OAAQhB,EAAQgB,OAChBmD,OAAQhE,KAAKJ,QACbqE,YAAa,WACbC,OAAQ,QACRC,cAAc,EACdC,KAAMpE,KAAKqE,UAAUC,KAAKtE,MAC1ByL,OAAQzL,KAAK0N,QAAQpJ,KAAKtE,MAC1ByE,kBAAkB,IACnBd,KAAKvE,GAERY,KAAK2N,gBAED9N,EAAQiB,YACRd,KAAK2E,mBAIbA,gBAAiB,WACb,IAAI0F,EAAarK,KAAKgC,KAAKpC,QAAQiF,KAAK,IAAMtF,GAC1C+K,EAActK,KAAKuK,QAAQjG,KAAKtE,MAEpCA,KAAKmF,gBAAkB,IAAIpG,EAAME,GAAGuL,aAAaH,EAAWxF,KAAK,WACjE7E,KAAKsI,aAAe+B,EAAWxF,KAAK,uBACpC7E,KAAK8K,yBAELT,EACKrF,GAAG,SAAW3F,EAAIiL,GAClBtF,GAAG,QAAU3F,EAAI,mBAAoBiL,GACrCtF,GAAG,QAAU3F,EAAI,kBAAmBW,KAAK+K,OAAOzG,KAAKtE,QAG9DuL,eAAgB,SAASH,GACrB,IAAII,EAAiBxL,KAAKmF,gBACtB8B,EAAW,GACXI,EAAQ,GAER+D,IACAnE,EAAWmE,EAAWnE,SACtBI,EAAQ+D,EAAW/D,OAGvBmE,EAAenE,MAAMJ,GAChBuE,EAAenE,SAChBmE,EAAeC,OAAO,GAG1BzL,KAAKsI,aAAaC,IAAIlB,IAG1BuG,cAAe,SAASjH,GACpB,IACI2F,EAEA1F,EAHA/F,EAASb,KAAKuC,WAAW1B,UAAY,GAErCkG,EAAM,EAMV,IAHAlG,EAAOmG,QAAUnG,EAAOmG,SAAW,GAG9BJ,GAFL0F,EAAc5F,EAAY,CAAE7F,OAAQA,EAAQ8F,OAAQA,KAE1BC,OAAQG,EAAMH,EAAQG,IAC5ClG,EAAOmG,QAAQ8C,OAAOjJ,EAAOmG,QAAQE,QAAQoF,EAAYvF,IAAO,GAGpE,OAAOlG,GAGX0J,QAAS,SAASnH,GACd,IAAIX,EAAOzC,KACPqH,EAAQ8D,EAAQ1I,EAAK6F,aAAaC,MAAO9F,EAAKF,WAAYE,EAAK+D,eAInE,GAFApD,EAAEkC,iBAEY,KAAV+B,EAAJ,CAKA,IAAI+D,EAAa,CACb5B,MAAO/G,EAAK+D,cACZS,SAAUxE,EAAK0C,gBAAgBkC,QAC/BA,MAAOA,GAEPxG,EAAS4B,EAAKmL,cAAcnL,EAAK+D,eAErC3F,EAAOmG,QAAQuC,KAAK6B,GAEpB3I,EAAKF,WAAW1B,OAAOA,GACvB4B,EAAKT,KAAKuC,aAdN9B,EAAKT,KAAKuC,SAiBlBuG,uBAAwB,WACpB,IAAIT,EAAarK,KAAKgC,KAAKpC,QAAQiF,KAAK,IAAMtF,GAC1CyL,EAAmBhL,KAAKmF,gBAAgBkC,QACxC4D,EAAuBjL,KAAKH,QAAQmB,SAASQ,UAAUwJ,GAE3DX,EAAWxF,KAAK,UAAUqG,KAAK1L,EAAYyL,IAG/CF,OAAQ,SAAS3H,GACb,IAAIX,EAAOzC,KACPa,EAAS4B,EAAKmL,cAAcnL,EAAK+D,eAErCpD,EAAEkC,iBAEGzE,EAAOmG,QAAQ,KAChBnG,EAAS,IAGb4B,EAAKF,WAAW1B,OAAOA,GACvB4B,EAAK8I,eAAe,MACpB9I,EAAKT,KAAKuC,SAGdqE,MAAO,SAASyD,GACZ,IAAI7C,EAAQxJ,KAAKwG,cACb8F,EAAetM,KAAKuC,WAAWgK,QAAU,IAE7CD,EAAcE,EAAWF,EAAa9C,IAC1BD,KAAK,CACbC,MAAOA,EACP6C,IAAKA,IAGTrM,KAAKuC,WAAWgK,KAAKD,GACrBtM,KAAKgC,KAAKuC,SAGdjC,cAAe,SAASC,GACpBvC,KAAKH,QAAQ0C,WAAaA,EAE1BvC,KAAKC,eAGTA,YAAa,WACTD,KAAKuC,WAAaxD,EAAM4E,KAAKkK,gBAAgBhK,OAAO7D,KAAKH,QAAQ0C,aAGrEoL,cAAe,WACX,IAAI3M,EAAWhB,KAAKH,QAAQmB,SAE5BhB,KAAK8N,cAAgBjP,EAAEE,EAAMgE,SAASgL,EAAfhP,CAA+B,CAClDiC,SAAUA,KAEbgE,GAAG,QAAU3F,EAAI,eAAgBW,KAAK8I,eAAexE,KAAKtE,OAC1DgF,GAAG,QAAU3F,EAAI,mBAAoBW,KAAKgO,aAAa1J,KAAKtE,OAE7DA,KAAK8N,cAAgB,IAAI7O,EAAGgP,OAAOjO,KAAK8N,cAAe,CACnDR,MAAOtM,EAASsM,MAChBY,SAAS,EACTC,WAAW,EACX/J,KAAMpE,KAAKoO,YAAY9J,KAAKtE,SAIpC8I,eAAgB,SAAS1F,GACrB,IACIsG,EADAC,EAAe,GAEfT,EAAOlJ,KAAKoC,SAASG,WAAW2G,OAChCU,EAAcV,EAAK,GAAGrC,QACtBhG,EAASb,KAAKuC,WAAW1B,SACzBgJ,EAAqBnD,EAAY,CAAE7F,OAAQA,EAAQ8F,OAAQ3G,KAAKwG,cAAeS,SAAU,OAAQ,GAErGqC,EAAQJ,EAAMS,GAAc,GAExBE,IACID,GACA/I,EAAOmG,QAAQ8C,OAAOjJ,EAAOmG,QAAQE,QAAQ2C,GAAqB,GAC7DhJ,EAAOmG,QAAQJ,SAChB/F,EAAS,KAGbgJ,EAAmBxC,MAAQsC,EAAaI,KAAK,KAGjDL,EAAmB7I,GAGnB8I,EAAa/C,SACR8C,GAAqBE,IACtBF,EAAmB,CACfF,MAAOxJ,KAAKwG,cACZS,SAAU,KACVI,MAAOsC,EAAaI,KAAK,MAGzBlJ,IACAA,EAAOmG,QAAQuC,KAAKG,GACpBA,EAAmB7I,KAK3B6I,GACA1J,KAAKuC,WAAW1B,OAAO6I,GAG3B1J,KAAKgO,aAAa5K,IAGtB4K,aAAc,SAAS5K,GACnBA,EAAEkC,iBAEFtF,KAAK8N,cAAcvJ,SAGvB1B,oBAAqB,WACjB,IAAIJ,EAAOzC,KAEX,OAAOjB,EAAM4E,KAAK4B,uBAAuB1B,OAAO,CAC5C2B,OAAQ,CACJC,MAAO,CACHC,GAAI,aACJC,YAAa,SAAS1C,GAClB,OAAO2C,SAAS3C,EAAK4C,oBAAqB,IAAM,KAI5DC,UAAW,CACPC,KAAM,SAASlG,GACX,IAAIqG,EAAe,GACf3C,EAAOd,EAAKL,SAASG,WAAW6D,IAAIvG,EAAQ8D,KAAKH,YAC1C3D,EAAQ8D,KAAKH,YAKpB0C,EAAa0B,iBAAmBrE,EAAKC,WAAWqE,QAAQ,MAAO,SAC/D3B,EAAa4B,OAAS,GAHtB5B,EAAa6B,gBAAkBtF,EAAK+D,cAAgB,WAMxD/D,EAAKF,WACA8L,cAAcnI,GACdoI,MAAK,SAAS3K,GACXwE,EAAW1F,EAAKF,WAAW1B,SAAU4B,EAAK+D,cAAe7C,GAEzD9D,EAAQ2H,QAAQ7D,MAEnB4K,KAAK1O,EAAQ2O,YAMlChM,gBAAiB,SAAS5C,GACtB,IAAI6C,EAAOzC,KAEXyC,EAAKL,SAAW,IAAInD,EAAG0D,SAAS/C,EAAS,CACrCgD,UAAU,EACVL,WAAYE,EAAKI,sBACjBC,cAAe,UACfC,SAAU,SAAUC,GAChB,IAAIC,EAAOD,EAAIC,KAEf,MAAQ,GAAM/D,EAAO+D,EAAKC,SAAWD,EAAK5C,OAE9CoD,WAAY,CACRC,eAAe,GAEnB+K,UAAW,WACPxP,EAAGyP,SAASjM,EAAKqL,cAAclO,SAAS,OAKpDyE,UAAW,SAASjB,GAChB,GAAKA,EAAEqJ,MAAP,CAIA,IAAIvB,EAAOnM,EAAMmM,KAAK,QAEtBlL,KAAKwG,cAAgB3H,EAAEuE,EAAEqJ,MAAMzI,QAAQoB,QAAQ,IAAM8F,EAAO,KAAKA,KAAKA,GAElElL,KAAKH,QAAQiB,YACbd,KAAKuL,eAAe7E,EAAY,CAAE7F,OAAQb,KAAKuC,WAAW1B,SAAU8F,OAAQ3G,KAAKwG,gBAAiB,MAI1GkH,QAAS,SAAStK,GACd,IAAIH,EAAOpE,EAAEuE,EAAEH,MAEfpE,EAAE,0BAA0B8P,IAAI3O,KAAK8N,cAAclO,SAASgP,YAAY,SAEpE3L,EAAKoC,SAAS,kBACdrF,KAAK8N,cAAce,SAASzK,OACrBnB,EAAKoC,SAAS,cACrBrF,KAAK4I,MAAM,OACJ3F,EAAKoC,SAAS,eACrBrF,KAAK4I,MAAM,QACJ3F,EAAKoC,SAAS9F,IACrBS,KAAK8K,0BAIbsD,YAAa,WACJpO,KAAKoC,UACNpC,KAAKwC,gBAAgBxC,KAAK8N,cAAclO,QAAQiF,KAAK,gBAGzD5F,EAAGyP,SAAS1O,KAAK8N,cAAclO,SAAS,GACxCI,KAAKoC,SAASG,WAAWwD,QAG7BhE,QAAS,WACLzC,EAAOQ,GAAGiC,QAAQhC,KAAKC,MAEnBA,KAAKgC,OACLhC,KAAKgC,KAAKD,UACV/B,KAAKgC,KAAO,MAGZhC,KAAKoC,WACLpC,KAAKoC,SAASL,UACd/B,KAAKoC,SAAW,MAGhBpC,KAAK8N,gBACL9N,KAAK8N,cAAc/L,UACnB/B,KAAK8N,cAAgB,MAGzB9N,KAAKqC,QAAU,KACfrC,KAAKJ,QAAU,QAIvB,SAASuL,EAAQ9D,EAAO9E,EAAYiE,GAChC,IACIgD,IADSjH,EAAW1C,QAAQ2F,OACXC,OAAS,IAAIqJ,QAAU,IAAItI,GAUhD,OARIgD,IACmB,WAAfA,EAAMuF,KACN1H,EAAQ2H,WAAW3H,GACG,YAAfmC,EAAMuF,OACb1H,EAAQ4H,QAAQpQ,EAAEqQ,UAAU7H,MAI7BA,EAGX,SAASmF,EAAWF,EAAajM,GAG7B,IAFA,IAAI8O,EAAS,GAEJpI,EAAM,EAAGH,EAAS0F,EAAY1F,OAAQG,EAAMH,EAAQG,IACrDuF,EAAYvF,GAAKyC,QAAUnJ,GAC3B8O,EAAO5F,KAAK+C,EAAYvF,IAIhC,OAAOoI,EAoBX,SAAS/F,EAAcvI,EAAQ8F,EAAQM,GACnC,GAAKpG,EAAL,CAMA,IAEI2K,EAFAzE,EAAM,EAIV,IAAKA,GANLlG,EAASA,EAAOmG,SAGIJ,OAGA,EAAGG,GAAO,EAAGA,IAC7ByE,EAAiB3K,EAAOkG,GAAKE,SAExBA,GAAWuE,IAAmBvE,GAAoBpG,EAAOkG,GAAKyC,QAAU7C,GACzE9F,EAAOiJ,OAAO/C,EAAK,IAK/B,SAASL,EAAY7G,GACjB,IAAKA,EAAQgB,OACT,MAAO,GAUX,IAPA,IAII2K,EAJA3K,EAAShB,EAAQgB,OAAOmG,QACxBD,EAAM,EACNoI,EAAS,GACTvI,EAAS/F,EAAO+F,OAEhBwI,EAAgBvP,EAAQwP,QAAU,MAAQ,KAEtCtI,EAAMH,EAAQG,IAClByE,EAAiB3K,EAAOkG,GAAKE,UAEtBpH,EAAQoH,UAAYuE,IAAmB4D,IAAmB5D,IAAmB3L,EAAQoH,UAAcpG,EAAOkG,GAAKyC,QAAU3J,EAAQ8G,QACpIwI,EAAO5F,KAAK1I,EAAOkG,IAI3B,OAAOoI,EAwBX,SAAShH,EAAWtH,EAAQ8F,EAAQN,GAChC,IAAIS,EAAQC,EAAM,EAAGH,EAASP,EAAMO,OAGpC,GAFA/F,EAAS6F,EAAY,CAAE7F,OAAQA,EAAQ8F,OAAQA,EAAQM,SAAU,OAAQ,GAQrE,IADAH,EAASjG,EAAOwG,MAAMiI,MAAM,KACrBvI,EAAMH,EAAQG,IACjBV,EAAMU,GAAKF,QAAUhI,EAAEyI,QAAQjB,EAAMU,GAAKvD,WAAYsD,IAAW,OANrE,KAAOC,EAAMH,EAAQG,IACjBV,EAAMU,GAAKF,SAAU,EAUjC,SAASyC,EAAQjD,EAAOsD,EAAc4F,GAClC,IAAIxI,EAAKH,EAASP,EAAMO,OAExB,IAAKG,EAAM,EAAGA,EAAMH,EAAQG,IACpBV,EAAMU,GAAKF,UAAY0I,GAAqC,IAAvBlJ,EAAMU,GAAKyI,SAChD7F,EAAaJ,KAAKlD,EAAMU,GAAKvD,YAG7B6C,EAAMU,GAAKpB,aACX2D,EAAQjD,EAAMU,GAAK0I,SAASvG,OAAQS,EAAc4F,GAkE9D,IAgBIzL,EAAiB,SAAUd,GACvB,IAAIhC,EAAWgC,EAAIhC,SAEnB,MAAO,2RAK6D9B,EAAO8B,EAASE,eAL7E,4FAQ8DhC,EAAO8B,EAASG,gBAR9E,yKAciEjC,EAAO8B,EAASK,SAdjF,ggBA2BgKnC,EAAO8B,EAASO,OA3BhL,+JA4BmKrC,EAAO8B,EAASC,OA5BnL,0LAmC4D/B,EAAO8B,EAASI,cAnC5E,0gBA+C2CsO,OAAOC,KAAK3O,EAASQ,WAAW2F,KAAI,SAAUyI,GAAM,MAAO,kBAAoBA,EAAK,KAAO5O,EAASQ,UAAUoO,GAAM,eAAgB7F,KAAK,IA/CpL,gUAmDmL/I,EAAe,MAnDlM,uJAoD+K9B,EAAO8B,EAASH,QApD/L,uFA2FXgP,EAAmC,SAAU7O,EAAUF,GACvD,IAAIqO,EAAS,GAqBb,OAnBIrO,IACAqO,GAAU,wJAGiCnO,EAAgB,QAHjD,iFAO6BzB,EAP7B,4GAUiCyB,EAAqB,aAVtD,yBAlHM,SAAUA,GAAY,MAAO,4KAGGA,EAAa,KAHhB,iBAK3B0O,OAAOC,KAAK3O,EAASQ,WAAW2F,KAAI,SAAUyI,GAAM,MAAO,kBAAoBA,EAAK,KAAO5O,EAASQ,UAAUoO,GAAM,eAAgB7F,KAAK,IAL9G,uIAO2G/I,EAAe,OAAI,YAAiBA,EAAe,OAP9J,oLASmHA,EAAe,OATlI,kJAU+GA,EAAc,MAV7H,uCA+HhC8O,CAAkB9O,GAbrB,mBAkBPmO,GAGP1B,EAAe,SAAUzK,GACzB,IAAIhC,EAAWgC,EAAIhC,SACfF,EAAakC,EAAIlC,WAGrB,MAAO,iCAvD0B,SAAUE,EAAUD,EAAUD,GAC/D,IAAIqO,EAAS,GAqBb,OAnBIpO,IACAoO,GAAU,yJAG6BnO,EAAsB,cAHnD,8KAS6BA,EAAuB,eATpD,sBAaNF,IACAqO,GAAU,kCAIXA,EAkCSY,CAA+B/O,EAHhCgC,EAAIjC,SAGgDD,GACnD+O,EAAiC7O,EAAUF,GAC/C,SAGZiN,EAAiB,SAAU/K,GAC3B,IAAIhC,EAAWgC,EAAIhC,SAEnB,MAAO,yRAK+BA,EAAW,GAL1C,mJAU+BA,EAAe,OAV9C,2BAgBX/B,EAAG+Q,OAAO5C,GACVnO,EAAG+Q,OAAOvQ,GA9sCd,CAgtCGT,OAAOD,MAAMkR","sourcesContent":["(function (factory) {\n    typeof define === 'function' && define.amd ? define(['kendo.pivotgrid', 'kendo.menu', 'kendo.window', 'kendo.treeview', 'kendo.dropdownlist'], factory) :\n    factory();\n})((function () {\n    var __meta__ = {\n        id: \"pivot.fieldmenu\",\n        name: \"PivotFieldMenu\",\n        category: \"web\",\n        description: \"The PivotFieldMenu widget allows the user to filter on fields displayed in PivotGrid\",\n        depends: [ \"menu\", \"window\", \"treeview\", \"treeview.draganddrop\", \"dropdownlist\" ],\n        advanced: true\n    };\n\n\n    (function($, undefined$1) {\n        var kendo = window.kendo;\n        var ui = kendo.ui;\n        var encode = kendo.htmlEncode;\n        var MENU = \"kendoContextMenu\";\n        var NS = \".kendoPivotFieldMenu\";\n        var Widget = ui.Widget;\n        var FILTER_ITEM = \"k-filter-item\";\n        var ARIA_LABEL = \"aria-label\";\n\n        var PivotFieldMenuV2 = Widget.extend({\n            init: function(element, options) {\n                Widget.fn.init.call(this, element, options);\n\n                this._dataSource();\n\n                this._layout();\n\n                kendo.notify(this);\n            },\n\n            events: [],\n\n            options: {\n                name: \"PivotFieldMenuV2\",\n                animation: {\n                    expand: {\n                        effects: \"expand:vertical\",\n                        duration: 200\n                    },\n                    collapse: {\n                        duration: 200,\n                        effects: \"expand:vertical\",\n                        hide: true,\n                        reverse: true\n                    }\n                },\n                filter: null,\n                filterable: true,\n                sortable: true,\n                messages: {\n                    apply: \"Apply\",\n                    sortAscending: \"Sort Ascending\",\n                    sortDescending: \"Sort Descending\",\n                    filterFields: \"Fields Filter\",\n                    filter: \"Filter\",\n                    include: \"Include Fields...\",\n                    clear: \"Clear\",\n                    reset: \"Reset\",\n                    operators: {\n                        contains: \"Contains\",\n                        doesnotcontain: \"Does not contain\",\n                        startswith: \"Starts with\",\n                        endswith: \"Ends with\",\n                        eq: \"Is equal to\",\n                        neq: \"Is not equal to\"\n                    }\n                }\n            },\n\n            destroy: function() {\n                Widget.fn.destroy.call(this);\n\n                if (this.menu) {\n                    this.menu.element.off(NS);\n                    this.menu.destroy();\n                    this.menu = null;\n                    this._applyProxy = this._resetIncludes = null;\n                }\n\n                if (this.treeView) {\n                    this.treeView.destroy();\n                    this.treeView = null;\n                }\n\n                this.wrapper = null;\n                this.element = null;\n            },\n\n            setDataSource: function(dataSource) {\n                this.options.dataSource = dataSource;\n\n                this._dataSource();\n            },\n\n            _createTreeView: function(element) {\n                var that = this;\n\n                that._includesCache = {};\n\n                that.treeView = new ui.TreeView(element, {\n                    autoBind: false,\n                    dataSource: that._treeViewDataSource(),\n                    dataTextField: \"caption\",\n                    template: function (ref) {\n                        var item = ref.item;\n\n                        return (\"\" + (encode(item.caption || item.name)));\n                },\n                    check: function(e) {\n                        /* The result can be observed in the DevTools(F12) console of the browser. */\n                        var dataItem = e.sender.dataItem(e.node);\n                        if (that._includesCache[dataItem.uniqueName]) {\n                            delete that._includesCache[dataItem.uniqueName];\n                        } else {\n                            that._includesCache[dataItem.uniqueName] = e.node;\n                        }\n                    },\n                    checkboxes: {\n                        checkChildren: true\n                    }\n                });\n            },\n\n            _dataSource: function() {\n                this.dataSource = kendo.data.PivotDataSourceV2.create(this.options.dataSource);\n            },\n\n            _layout: function() {\n                var that = this;\n                var options = that.options;\n\n                that.wrapper = $(kendo.template(MENUTEMPLATEV2)({\n                    ns: kendo.ns,\n                    filterable: options.filterable,\n                    sortable: options.sortable,\n                    messages: options.messages\n                }));\n\n                that.menu = that.wrapper[MENU]({\n                    filter: options.filter,\n                    target: that.element,\n                    orientation: \"vertical\",\n                    showOn: \"click\",\n                    closeOnClick: false,\n                    open: this._menuOpen.bind(this),\n                    close: this._closeMenu.bind(this),\n                    copyAnchorStyles: false\n                }).data(MENU);\n\n                that.menu.element.off(\"blur.kendoMenu\", \"[tabindex]\", that.menu._checkActiveProxy);\n\n                if (options.filterable) {\n                    that._initFilterForm();\n                    that._attachFilterHandlers();\n                    that._createTreeView(that.wrapper.find(\".k-treeview\"));\n                }\n\n                that._clickHandler = that._click.bind(that);\n                that.wrapper.on(\"click\", \".k-item:not([role='treeitem'])\", that._clickHandler);\n            },\n\n            _closeMenu: function(e) {\n                var that = this;\n                var activeElement = $(kendo._activeElement());\n\n                if (activeElement[0] === this._filterOperator.wrapper[0] || activeElement.closest(\".k-treeview\")[0] === that.treeView.wrapper[0] ||\n                    activeElement.hasClass(\"k-button-includes-reset\")) {\n                    e.preventDefault();\n                }\n            },\n\n            _treeViewDataSource: function() {\n                var that = this;\n\n                return kendo.data.HierarchicalDataSource.create({\n                    schema: {\n                        model: {\n                            id: \"uniqueName\",\n                            hasChildren: function(item) {\n                                return parseInt(item.childrenCardinality, 10) > 0;\n                            }\n                        }\n                    },\n                    transport: {\n                        read: function(options) {\n                            var node = that.treeView.dataSource.get(options.data.uniqueName);\n                            var name = options.data.uniqueName;\n                            var nodes = [];\n                            var filter;\n                            var skipCheck;\n                            var catalog;\n                            var cube;\n                            var restrictions;\n                            var fetchOptions;\n\n                            if (that.dataSource.cubeSchema) {\n                                if (!name) {\n                                    nodes = that.dataSource.cubeSchema.members(that.currentMember + \".[(ALL)]\");\n                                } else {\n                                    nodes = that.dataSource.cubeSchema.members(that.currentMember);\n                                }\n\n                                filter = that.dataSource.filter();\n                                skipCheck = that._getFilterStorage(that.currentMember) && findFilters({ filter: filter, member: that.currentMember }).length == 1;\n\n                                if (skipCheck && !name) {\n                                    nodes[0].checked = true;\n                                } else {\n                                    checkNodesLocal(that.dataSource.filter(), that.currentMember, nodes);\n                                }\n                                options.success(nodes);\n                            } else {\n                                catalog = that.dataSource.transport.catalog();\n                                cube = that.dataSource.transport.cube();\n                                restrictions = {\n                                    catalogName: catalog,\n                                    cubeName: cube\n                                };\n                                fetchOptions = {\n                                    command: 'schemaMembers'\n                                };\n\n                                if (!name) {\n                                    restrictions.levelUniqueName = that.currentMember + \".[(ALL)]\";\n                                } else {\n                                    restrictions.memberUniqueName = node.uniqueName.replace(/\\&/g, \"&amp;\");\n                                    restrictions.treeOp = 1;\n                                }\n\n                                fetchOptions.connection = {\n                                    catalog: catalog,\n                                    cube: cube\n                                };\n\n                                fetchOptions.restrictions = restrictions;\n                                that.dataSource.discover(fetchOptions).then(\n                                    function(data) {\n                                        if (!node || node.checked) {\n                                            checkNodes(that.dataSource.filter(), that.currentMember, data);\n                                        }\n\n                                        options.success(data);\n                                    });\n                            }\n                        }\n                    }\n                });\n            },\n\n            _storeFilterForm: function(member) {\n                var that = this;\n\n                if (!that._filterStorage) {\n                    that._filterStorage = {};\n                }\n\n                that._filterStorage[member] = {\n                    value: that._filterValue.val(),\n                    operator: that._filterOperator.value()\n                };\n            },\n\n            _getFilterStorage: function(member) {\n                if (!this._filterStorage || !this._filterStorage[member]) {\n                    return null;\n                }\n                return this._filterStorage[member];\n            },\n\n            _clearFilterStorage: function(member) {\n                this._filterStorage[member] = null;\n            },\n\n            _click: function(e) {\n                var item = $(e.currentTarget);\n                var next = item.next();\n                if (item.hasClass(\"k-expander\")) {\n                    this._toggle(next, item);\n                } else if (item.hasClass(\"k-columnmenu-item\") && item.find(\".k-i-sort-asc-sm\").length) {\n                    this._sort(\"asc\");\n                } else if (item.hasClass(\"k-columnmenu-item\") && item.find(\".k-i-sort-desc-sm\").length) {\n                    this._sort(\"desc\");\n                }\n            },\n\n            _attachFilterHandlers: function() {\n                this._applyIncludesProxy = this._applyIncludes.bind(this);\n                this._resetIncludesProxy = this._resetIncludes.bind(this);\n\n                this.menu.element\n                    .on(\"click\" + NS, \".k-button-includes-reset\", this._resetIncludesProxy)\n                    .on(\"click\" + NS, \".k-button-includes-apply\", this._applyIncludesProxy);\n            },\n\n            _includesHandler: function(e) {\n                e.preventDefault();\n                if ($(e.target).hasClass(\"k-button-includes-reset\")) {\n                    this._resetIncludes();\n                } else {\n                    this._applyIncludes();\n                }\n            },\n\n            _applyIncludes: function(e) {\n                e.preventDefault();\n                var view = this.treeView.dataSource.view();\n                var filter = this.dataSource.filter();\n                var newExpression;\n                if (this.dataSource.cubeSchema) {\n                    newExpression = includeLocalExpression(view, filter, this.currentMember);\n                } else {\n                    newExpression = includeExpression(view, filter, this.currentMember);\n                }\n                 this._includesCache = {};\n\n                if (newExpression) {\n                    this.dataSource._preventRefresh = true;\n                    this.dataSource.filter(newExpression);\n                    this.menu.close();\n                }\n            },\n\n            _resetIncludes: function(e) {\n                e.preventDefault();\n\n                var that = this;\n                var checkbox;\n\n                for (var item in that._includesCache) {\n                    checkbox = $(that._includesCache[item]).find(\".k-checkbox\");\n                    checkbox.prop(\"checked\", !checkbox.prop(\"checked\"));\n                    that.treeView._checkboxChange({ target: checkbox });\n                    delete that._includesCache[item];\n                }\n            },\n\n            _initFilterForm: function() {\n                var filterForm = this.menu.element.find(\".kendo-grid-filter-menu-container\");\n                var filterProxy = this._filter.bind(this);\n\n                this._filterOperator = new kendo.ui.DropDownList(filterForm.find(\"select\"), { popup: { appendTo: document.body } });\n                this._filterValue = filterForm.find(\"input.k-input-inner\");\n                this._filterForm = filterForm;\n                this._updateFilterAriaLabel();\n\n                filterForm\n                    .on(\"click\" + NS, \".k-button-filter\", filterProxy)\n                    .on(\"click\" + NS, \".k-button-filter-clear\", this._reset.bind(this));\n            },\n\n            _updateFilterAriaLabel: function() {\n                var selectedOperator = this._filterOperator.value();\n                var selectedOperatorName = this.options.messages.operators[selectedOperator];\n\n                this._filterForm.find(\"select\").attr(ARIA_LABEL, selectedOperatorName);\n            },\n\n            _filter: function(e) {\n                var that = this;\n                var value = convert(that._filterValue.val(), that.dataSource, that.currentMember);\n                var filter = that.dataSource.filter();\n\n                e.preventDefault();\n\n                if (value === \"\") {\n                    that.menu.close();\n                    return;\n                }\n\n                var expression = {\n                    field: that.currentMember,\n                    operator: that._filterOperator.value(),\n                    value: value\n                };\n                if (filter) {\n                    removeFilterByValue(filter, that._getFilterStorage(that.currentMember));\n                } else {\n                    filter = { logic: 'and', filters: [] };\n                }\n\n                that._storeFilterForm(that.currentMember);\n                filter.filters.push(expression);\n\n                that.dataSource._preventRefresh = true;\n                that.dataSource.filter(filter);\n                that.menu.close();\n            },\n\n            _reset: function(e) {\n                var that = this;\n                var filter = that.dataSource.filter();\n                removeFilters(filter, that.currentMember);\n\n                e.preventDefault();\n\n                if (!filter.filters[0]) {\n                    filter = {};\n                }\n\n                that.dataSource._preventRefresh = true;\n                that.dataSource.filter(filter);\n                that._clearFilterStorage(that.currentMember);\n                that._setFilterForm(null);\n                that.menu.close();\n            },\n\n            _setFilterForm: function(expression) {\n                var filterOperator = this._filterOperator;\n                var operator = \"\";\n                var value = \"\";\n\n                if (expression) {\n                    operator = expression.operator;\n                    value = expression.value;\n                }\n\n                filterOperator.value(operator);\n                if (!filterOperator.value()) {\n                    filterOperator.select(0);\n                }\n\n                this._filterValue.val(value);\n            },\n\n            _collapseItems: function(items) {\n                items.find(\".k-expander-indicator\").removeClass(\"k-i-arrow-chevron-down\")\n                        .addClass(\"k-i-arrow-chevron-up\");\n\n                items.nextAll().hide();\n            },\n\n            _toggle: function(content, item) {\n                var that = this;\n                var animations = that.options.animation;\n                var shouldExpand = content.is(\":visible\");\n                var animation = !shouldExpand ? animations.expand : animations.collapse;\n\n                if (!shouldExpand) {\n\n                    item.find(\".k-expander-indicator\").removeClass(\"k-i-arrow-chevron-down\")\n                        .addClass(\"k-i-arrow-chevron-up\");\n                } else {\n                    item.find(\".k-expander-indicator\").removeClass(\"k-i-arrow-chevron-up\")\n                        .addClass(\"k-i-arrow-chevron-down\");\n                }\n\n                content\n                    .kendoStop(true, true)\n                    .kendoAnimate(animation);\n\n            },\n\n            _sort: function(dir) {\n                var field = this.currentMember;\n                var expressions = (this.dataSource.sort() || []);\n\n                expressions = removeExpr(expressions, field);\n                expressions.push({\n                    field: field,\n                    dir: dir\n                });\n\n                this.dataSource._preventRefresh = true;\n                this.dataSource.sort(expressions);\n                this.menu.close();\n            },\n\n            _menuOpen: function(e) {\n                if (!e.event) {\n                    return;\n                }\n\n                var that = this;\n                var schemaCube = that.dataSource.cubeSchema;\n                var filterBox;\n                that.currentMember = $(e.event.target).prev().text();\n                that.menu.popup._hovered = true;\n\n                if (that.options.filterable) {\n                    that._setFilterForm(that._getFilterStorage(that.currentMember));\n                    filterBox = that.wrapper.find(\".k-columnmenu-item-wrapper\").last();\n                    if (schemaCube && schemaCube.memberType(that.currentMember).toLowerCase() !== \"string\") {\n                        filterBox.hide();\n                    } else {\n                        filterBox.show();\n                    }\n                    if (that.currentMember !== that._oldCurrentmember) {\n                        if (that._oldCurrentmember) {\n                            that._collapseItems(that.menu.element.find(\".k-item.k-expander\"));\n                        }\n                        that._oldCurrentmember = that.currentMember;\n                        that._includesCache = {};\n                        this.treeView.dataSource.read();\n                    }\n                }\n            },\n        });\n\n        var PivotFieldMenu = Widget.extend({\n            init: function(element, options) {\n                Widget.fn.init.call(this, element, options);\n\n                this._dataSource();\n\n                this._layout();\n\n                kendo.notify(this);\n            },\n\n            events: [],\n\n            options: {\n                name: \"PivotFieldMenu\",\n                filter: null,\n                filterable: true,\n                sortable: true,\n                messages: {\n                    info: \"Show items with value that:\",\n                    sortAscending: \"Sort Ascending\",\n                    sortDescending: \"Sort Descending\",\n                    filterFields: \"Fields Filter\",\n                    filter: \"Filter\",\n                    include: \"Include Fields...\",\n                    title: \"Fields to include\",\n                    clear: \"Clear\",\n                    ok: \"OK\",\n                    cancel: \"Cancel\",\n                    operators: {\n                        contains: \"Contains\",\n                        doesnotcontain: \"Does not contain\",\n                        startswith: \"Starts with\",\n                        endswith: \"Ends with\",\n                        eq: \"Is equal to\",\n                        neq: \"Is not equal to\"\n                    }\n                }\n            },\n\n            _layout: function() {\n                var options = this.options;\n\n                this.wrapper = $(kendo.template(MENUTEMPLATE)({\n                    ns: kendo.ns,\n                    filterable: options.filterable,\n                    sortable: options.sortable,\n                    messages: options.messages\n                }));\n\n                this.menu = this.wrapper[MENU]({\n                    filter: options.filter,\n                    target: this.element,\n                    orientation: \"vertical\",\n                    showOn: \"click\",\n                    closeOnClick: false,\n                    open: this._menuOpen.bind(this),\n                    select: this._select.bind(this),\n                    copyAnchorStyles: false\n                }).data(MENU);\n\n                this._createWindow();\n\n                if (options.filterable) {\n                    this._initFilterForm();\n                }\n            },\n\n            _initFilterForm: function() {\n                var filterForm = this.menu.element.find(\".\" + FILTER_ITEM);\n                var filterProxy = this._filter.bind(this);\n\n                this._filterOperator = new kendo.ui.DropDownList(filterForm.find(\"select\"));\n                this._filterValue = filterForm.find(\"input.k-input-inner\");\n                this._updateFilterAriaLabel();\n\n                filterForm\n                    .on(\"submit\" + NS, filterProxy)\n                    .on(\"click\" + NS, \".k-button-filter\", filterProxy)\n                    .on(\"click\" + NS, \".k-button-clear\", this._reset.bind(this));\n            },\n\n            _setFilterForm: function(expression) {\n                var filterOperator = this._filterOperator;\n                var operator = \"\";\n                var value = \"\";\n\n                if (expression) {\n                    operator = expression.operator;\n                    value = expression.value;\n                }\n\n                filterOperator.value(operator);\n                if (!filterOperator.value()) {\n                    filterOperator.select(0);\n                }\n\n                this._filterValue.val(value);\n            },\n\n            _clearFilters: function(member) {\n                var filter = this.dataSource.filter() || {};\n                var expressions;\n                var idx = 0;\n                var length;\n\n                filter.filters = filter.filters || [];\n                expressions = findFilters({ filter: filter, member: member });\n\n                for (length = expressions.length; idx < length; idx++) {\n                    filter.filters.splice(filter.filters.indexOf(expressions[idx]), 1);\n                }\n\n                return filter;\n            },\n\n            _filter: function(e) {\n                var that = this;\n                var value = convert(that._filterValue.val(), that.dataSource, that.currentMember);\n\n                e.preventDefault();\n\n                if (value === \"\") {\n                    that.menu.close();\n                    return;\n                }\n\n                var expression = {\n                    field: that.currentMember,\n                    operator: that._filterOperator.value(),\n                    value: value\n                };\n                var filter = that._clearFilters(that.currentMember);\n\n                filter.filters.push(expression);\n\n                that.dataSource.filter(filter);\n                that.menu.close();\n            },\n\n            _updateFilterAriaLabel: function() {\n                var filterForm = this.menu.element.find(\".\" + FILTER_ITEM);\n                var selectedOperator = this._filterOperator.value();\n                var selectedOperatorName = this.options.messages.operators[selectedOperator];\n\n                filterForm.find(\"select\").attr(ARIA_LABEL, selectedOperatorName);\n            },\n\n            _reset: function(e) {\n                var that = this;\n                var filter = that._clearFilters(that.currentMember);\n\n                e.preventDefault();\n\n                if (!filter.filters[0]) {\n                    filter = {};\n                }\n\n                that.dataSource.filter(filter);\n                that._setFilterForm(null);\n                that.menu.close();\n            },\n\n            _sort: function(dir) {\n                var field = this.currentMember;\n                var expressions = (this.dataSource.sort() || []);\n\n                expressions = removeExpr(expressions, field);\n                expressions.push({\n                    field: field,\n                    dir: dir\n                });\n\n                this.dataSource.sort(expressions);\n                this.menu.close();\n            },\n\n            setDataSource: function(dataSource) {\n                this.options.dataSource = dataSource;\n\n                this._dataSource();\n            },\n\n            _dataSource: function() {\n                this.dataSource = kendo.data.PivotDataSource.create(this.options.dataSource);\n            },\n\n            _createWindow: function() {\n                var messages = this.options.messages;\n\n                this.includeWindow = $(kendo.template(WINDOWTEMPLATE)({\n                    messages: messages\n                }))\n                .on(\"click\" + NS, \".k-button-ok\", this._applyIncludes.bind(this))\n                .on(\"click\" + NS, \".k-button-cancel\", this._closeWindow.bind(this));\n\n                this.includeWindow = new ui.Window(this.includeWindow, {\n                    title: messages.title,\n                    visible: false,\n                    resizable: false,\n                    open: this._windowOpen.bind(this)\n                });\n            },\n\n            _applyIncludes: function(e) {\n                var checkedNodes = [];\n                var resultExpression;\n                var view = this.treeView.dataSource.view();\n                var rootChecked = view[0].checked;\n                var filter = this.dataSource.filter();\n                var existingExpression = findFilters({ filter: filter, member: this.currentMember, operator: \"in\" })[0];\n\n                nodeIds(view, checkedNodes, true);\n\n                if (existingExpression) {\n                    if (rootChecked) {\n                        filter.filters.splice(filter.filters.indexOf(existingExpression), 1);\n                        if (!filter.filters.length) {\n                            filter = {};\n                        }\n                    } else {\n                        existingExpression.value = checkedNodes.join(\",\");\n                    }\n\n                    resultExpression = filter;\n                }\n\n                if (checkedNodes.length) {\n                    if (!resultExpression && !rootChecked) {\n                        resultExpression = {\n                            field: this.currentMember,\n                            operator: \"in\",\n                            value: checkedNodes.join(\",\")\n                        };\n\n                        if (filter) {\n                            filter.filters.push(resultExpression);\n                            resultExpression = filter;\n                        }\n                    }\n                }\n\n                if (resultExpression) {\n                    this.dataSource.filter(resultExpression);\n                }\n\n                this._closeWindow(e);\n            },\n\n            _closeWindow: function(e) {\n                e.preventDefault();\n\n                this.includeWindow.close();\n            },\n\n            _treeViewDataSource: function() {\n                var that = this;\n\n                return kendo.data.HierarchicalDataSource.create({\n                    schema: {\n                        model: {\n                            id: \"uniqueName\",\n                            hasChildren: function(item) {\n                                return parseInt(item.childrenCardinality, 10) > 0;\n                            }\n                        }\n                    },\n                    transport: {\n                        read: function(options) {\n                            var restrictions = {};\n                            var node = that.treeView.dataSource.get(options.data.uniqueName);\n                            var name = options.data.uniqueName;\n\n                            if (!name) {\n                                restrictions.levelUniqueName = that.currentMember + \".[(ALL)]\";\n                            } else {\n                                restrictions.memberUniqueName = node.uniqueName.replace(/\\&/g, \"&amp;\");\n                                restrictions.treeOp = 1;\n                            }\n\n                            that.dataSource\n                                .schemaMembers(restrictions)\n                                .done(function(data) {\n                                    checkNodes(that.dataSource.filter(), that.currentMember, data);\n\n                                    options.success(data);\n                                })\n                                .fail(options.error);\n                        }\n                    }\n                });\n            },\n\n            _createTreeView: function(element) {\n                var that = this;\n\n                that.treeView = new ui.TreeView(element, {\n                    autoBind: false,\n                    dataSource: that._treeViewDataSource(),\n                    dataTextField: \"caption\",\n                    template: function (ref) {\n                        var item = ref.item;\n\n                        return (\"\" + (encode(item.caption || item.name)));\n                },\n                    checkboxes: {\n                        checkChildren: true\n                    },\n                    dataBound: function() {\n                        ui.progress(that.includeWindow.element, false);\n                    }\n                });\n            },\n\n            _menuOpen: function(e) {\n                if (!e.event) {\n                    return;\n                }\n\n                var attr = kendo.attr(\"name\");\n\n                this.currentMember = $(e.event.target).closest(\"[\" + attr + \"]\").attr(attr);\n\n                if (this.options.filterable) {\n                    this._setFilterForm(findFilters({ filter: this.dataSource.filter(), member: this.currentMember })[0]);\n                }\n            },\n\n            _select: function(e) {\n                var item = $(e.item);\n\n                $(\".k-pivot-filter-window\").not(this.includeWindow.element).kendoWindow(\"close\");\n\n                if (item.hasClass(\"k-include-item\")) {\n                    this.includeWindow.center().open();\n                } else if (item.hasClass(\"k-sort-asc\")) {\n                    this._sort(\"asc\");\n                } else if (item.hasClass(\"k-sort-desc\")) {\n                    this._sort(\"desc\");\n                } else if (item.hasClass(FILTER_ITEM)) {\n                    this._updateFilterAriaLabel();\n                }\n            },\n\n            _windowOpen: function() {\n                if (!this.treeView) {\n                    this._createTreeView(this.includeWindow.element.find(\".k-treeview\"));\n                }\n\n                ui.progress(this.includeWindow.element, true);\n                this.treeView.dataSource.read();\n            },\n\n            destroy: function() {\n                Widget.fn.destroy.call(this);\n\n                if (this.menu) {\n                    this.menu.destroy();\n                    this.menu = null;\n                }\n\n                if (this.treeView) {\n                    this.treeView.destroy();\n                    this.treeView = null;\n                }\n\n                if (this.includeWindow) {\n                    this.includeWindow.destroy();\n                    this.includeWindow = null;\n                }\n\n                this.wrapper = null;\n                this.element = null;\n            }\n        });\n\n        function convert(value, dataSource, currentMember) {\n            var schema = dataSource.options.schema;\n            var field = ((schema.model || {}).fields || {})[currentMember];\n\n            if (field) {\n                if (field.type === \"number\") {\n                    value = parseFloat(value);\n                } else if (field.type === \"boolean\") {\n                    value = Boolean($.parseJSON(value));\n                }\n            }\n\n            return value;\n        }\n\n        function removeExpr(expressions, name) {\n            var result = [];\n\n            for (var idx = 0, length = expressions.length; idx < length; idx++) {\n                if (expressions[idx].field !== name) {\n                    result.push(expressions[idx]);\n                }\n            }\n\n            return result;\n        }\n\n        function removeFilterByValue(filter, toRemove) {\n            if (!toRemove) {\n                return;\n            }\n\n            filter = filter.filters;\n\n            var idx = 0;\n            var length = filter.length;\n\n            for (idx = length - 1; idx >= 0; idx--) {\n                if (filter[idx].value === toRemove.value && filter[idx].operator === toRemove.operator) {\n                    filter.splice(idx, 1);\n                }\n            }\n        }\n\n        function removeFilters(filter, member, operator) {\n            if (!filter) {\n                return;\n            }\n\n            filter = filter.filters;\n\n            var idx = 0;\n            var length = filter.length;\n            var filterOperator;\n\n            for (idx = length - 1; idx >= 0; idx--) {\n                filterOperator = filter[idx].operator;\n\n                if ((operator ? filterOperator === operator : true) && filter[idx].field === member) {\n                    filter.splice(idx, 1);\n                }\n            }\n        }\n\n        function findFilters(options) {\n            if (!options.filter) {\n                return [];\n            }\n\n            var filter = options.filter.filters;\n            var idx = 0;\n            var result = [];\n            var length = filter.length;\n            var filterOperator;\n            var operatorInUse = options.isLocal ? \"neq\" : \"in\";\n\n            for ( ; idx < length; idx++) {\n                filterOperator = filter[idx].operator;\n\n                if (((!options.operator && filterOperator !== operatorInUse) || (filterOperator === options.operator)) && filter[idx].field === options.member) {\n                    result.push(filter[idx]);\n                }\n            }\n\n            return result;\n        }\n\n        function checkNodesLocal(filter, member, nodes) {\n            var values, idx = 0, length = nodes.length;\n            var filters = findFilters({ filter: filter, member: member, operator: \"neq\" });\n\n            if (nodes[0].name.indexOf(\"[(ALL)]\") >= 0) {\n                nodes[0].checked = !filters.length;\n                return;\n            }\n\n            if (!filters.length) {\n                for (; idx < length; idx++) {\n                    nodes[idx].checked = true;\n                }\n            } else {\n                values = filters.map(function(ftr) { return ftr.value; });\n                for (; idx < length; idx++) {\n                    nodes[idx].checked = $.inArray(nodes[idx].uniqueName, values) < 0;\n                }\n            }\n        }\n\n        function checkNodes(filter, member, nodes) {\n            var values, idx = 0, length = nodes.length;\n            filter = findFilters({ filter: filter, member: member, operator: \"in\" })[0];\n\n            if (!filter) {\n                for (; idx < length; idx++) {\n                    nodes[idx].checked = true;\n                }\n            } else {\n                values = filter.value.split(\",\");\n                for (; idx < length; idx++) {\n                    nodes[idx].checked = $.inArray(nodes[idx].uniqueName, values) >= 0;\n                }\n            }\n        }\n\n        function nodeIds(nodes, checkedNodes, checkState) {\n            var idx, length = nodes.length;\n\n            for (idx = 0; idx < length; idx++) {\n                if (nodes[idx].checked === checkState && nodes[idx].level() !== 0) {\n                    checkedNodes.push(nodes[idx].uniqueName);\n                }\n\n                if (nodes[idx].hasChildren) {\n                    nodeIds(nodes[idx].children.view(), checkedNodes, checkState);\n                }\n            }\n        }\n\n        function includeLocalExpression(view, filter, currentMember) {\n            var nonCheckedNodes = [];\n            removeFilters(filter, currentMember, \"neq\");\n\n            if (!filter) {\n                filter = { logic: 'and', filters: [] };\n            }\n            nodeIds(view, nonCheckedNodes, false);\n\n            if (nonCheckedNodes.length) {\n                for (var idx = 0; idx < nonCheckedNodes.length; idx++) {\n                    filter.filters.push({\n                        field: currentMember,\n                        operator: \"neq\",\n                        value: nonCheckedNodes[idx]\n                    });\n                }\n            }\n\n            return filter ? filter : null;\n        }\n\n        function includeExpression(view, filter, currentMember) {\n            var checkedNodes = [];\n            var resultExpression;\n            var rootChecked = view[0].checked;\n            var existingExpression = findFilters({ filter: filter, member: currentMember, operator: \"in\" })[0];\n\n            nodeIds(view, checkedNodes, true);\n\n            if (existingExpression) {\n                if (rootChecked) {\n                    filter.filters.splice(filter.filters.indexOf(existingExpression), 1);\n                    if (!filter.filters.length) {\n                        filter = {};\n                    }\n                } else {\n                    existingExpression.value = checkedNodes.join(\",\");\n                }\n\n                resultExpression = filter;\n            }\n\n            if (checkedNodes.length) {\n                if (!resultExpression && !rootChecked) {\n                    resultExpression = {\n                        field: currentMember,\n                        operator: \"in\",\n                        value: checkedNodes.join(\",\")\n                    };\n\n                    if (filter) {\n                        filter.filters.push(resultExpression);\n                        resultExpression = filter;\n                    }\n                }\n            }\n\n            return resultExpression ? resultExpression : null;\n        }\n\n        var LABELMENUTEMPLATE = function (messages) { return '<div class=\"k-filterable k-content\" tabindex=\"-1\" data-role=\"fieldmenu\">' +\n                '<form class=\"k-filter-menu\">' +\n                    '<div class=\"k-filter-menu-container\">' +\n                        \"<div class=\\\"k-filter-help-text\\\">\" + (messages.info) + \"</div>\" +\n                        '<select>' +\n                            \"\" + (Object.keys(messages.operators).map(function (op) { return '<option value=\"' + op + '\">' + messages.operators[op] + '</option>'; }).join(\"\")) +\n                        '</select>' +\n                        \"<span class=\\\"k-textbox k-input k-input-md k-rounded-md k-input-solid\\\"><input class=\\\"k-input-inner\\\" type=\\\"text\\\" \" + ARIA_LABEL + \"=\\\"\" + (messages.filter) + \"\\\" title=\\\"\" + (messages.filter) + \"\\\" /></span>\" +\n                        '<div class=\"k-action-buttons\">' +\n                            \"<a class=\\\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-primary k-button-filter\\\" href=\\\"#\\\"><span class=\\\"k-button-text\\\">\" + (messages.filter) + \"</span></a>\" +\n                            \"<a class=\\\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-button-clear\\\" href=\\\"#\\\"><span class=\\\"k-button-text\\\">\" + (messages.clear) + \"</span></a>\" +\n                        '</div>' +\n                    '</div>' +\n                '</form>' +\n            '</div>'; };\n\n        var MENUTEMPLATEV2 = function (ref) {\n                var messages = ref.messages;\n\n                return '<div class=\"k-pivotgrid-column-menu k-column-menu k-popup k-child-animation-container\">' +\n                '<div class=\"k-pivotgrid-column-menu-popup k-grid-columnmenu-popup\">' +\n                    '<div>' +\n                        '<div class=\"k-columnmenu-item-wrapper\">' +\n                            '<div class=\"k-columnmenu-item k-item\">' +\n                                \"<span class=\\\"k-icon k-i-sort-asc-sm\\\"></span>\" + (encode(messages.sortAscending)) +\n                            '</div>' +\n                            '<div class=\"k-columnmenu-item k-item\">' +\n                                \"<span class=\\\"k-icon k-i-sort-desc-sm\\\"></span>\" + (encode(messages.sortDescending)) +\n                            '</div>' +\n                        '</div>' +\n                        '<div class=\"k-columnmenu-item-wrapper\">' +\n                            '<div class=\"k-widget k-expander k-item\">' +\n                                '<div class=\"k-columnmenu-item\">' +\n                                    \"<span class=\\\"k-icon k-i-grid-layout\\\"></span>\" + (encode(messages.include)) +\n                                    '<span class=\"k-expander-spacer\"></span>' +\n                                    '<span class=\"k-expander-indicator k-icon k-i-arrow-chevron-down\"></span>' +\n                                '</div>' +\n                            '</div>' +\n                            '<div class=\"k-columnmenu-item-content\" style=\"width: 100%; height: auto; display:none\">' +\n                                '<div class=\"k-column-list-wrapper\">' +\n                                    '<div class=\"k-column-list\">' +\n                                        '<div class=\"k-treeview\">' +\n                                        '</div>' +\n                                    '</div>' +\n                                '</div>' +\n                                '<div class=\"k-actions k-hstack k-justify-content-stretch\">' +\n                                    \"<button class=\\\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-button-includes-reset\\\"><span class=\\\"k-button-text\\\">\" + (encode(messages.reset)) + \"</span></button>\" +\n                                    \"<button class=\\\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-primary k-button-includes-apply\\\"><span class=\\\"k-button-text\\\">\" + (encode(messages.apply)) + \"</span></button>\" +\n                                '</div>' +\n                            '</div>' +\n                        '</div>' +\n                        '<div class=\"k-columnmenu-item-wrapper\">' +\n                            '<div class=\"k-widget k-expander k-item\">' +\n                                '<div class=\"k-columnmenu-item\">' +\n                                    \"<span class=\\\"k-icon k-i-filter\\\"></span>\" + (encode(messages.filterFields)) +\n                                    '<span class=\"k-expander-spacer\"></span>' +\n                                    '<span class=\"k-expander-indicator k-icon k-i-arrow-chevron-down\"></span>' +\n                                '</div>' +\n                            '</div>' +\n                            '<div class=\"k-columnmenu-item-content\" style=\"display:none\">' +\n                                '<div class=\"k-animation-container k-animation-container-relative\" style=\"display: block; \">' +\n                                    '<div class=\"k-child-animation-container\">' +\n                                        '<div class=\"kendo-grid-filter-menu-container\">' +\n                                            '<form class=\"k-filter-menu k-group k-reset\">' +\n                                                '<div class=\"k-filter-menu-container\">' +\n                                                        '<select class=\"k-dropdown k-picker k-dropdown-list\" style=\"overflow:visible\">' +\n                                                            \"\" + (Object.keys(messages.operators).map(function (op) { return '<option value=\"' + op + '\">' + messages.operators[op] + '</option>'; }).join(\"\")) +\n                                                        '</select>' +\n                                                        '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input class=\"k-input-inner\" value=\"\"></span>' +\n                                                    '<div class=\"k-actions k-hstack k-justify-content-stretch\">' +\n                                                        \"<button class=\\\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-button-filter-clear\\\"><span class=\\\"k-button-text\\\">\" + ((messages.clear)) + \"</span></button>\" +\n                                                        \"<button class=\\\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-primary k-button-filter\\\"><span class=\\\"k-button-text\\\">\" + (encode(messages.filter)) + \"</span></button>\" +\n                                                    '</div>' +\n                                                '</div>' +\n                                            '</form>' +\n                                        '</div>' +\n                                    '</div>' +\n                                '</div>' +\n                            '</div>' +\n                        '</div>' +\n                    '</div>' +\n                '</div>' +\n            '</div>';\n        };\n\n        var MENU_TEMPLATE_SORTABLE_PARTIAL = function (messages, sortable, filterable) {\n            var result = '';\n\n            if (sortable) {\n                result += '<li class=\"k-item k-menu-item k-sort-asc\">' +\n                '<span class=\"k-link k-menu-link\">' +\n                '<span class=\"k-icon k-i-sort-asc-sm\"></span>' +\n                \"<span class=\\\"k-menu-link-text\\\">\" + (messages.sortAscending) + \"</span>\" +\n                '</span>' +\n                '</li>' +\n                '<li class=\"k-item k-menu-item k-sort-desc\">' +\n                '<span class=\"k-link k-menu-link\">' +\n                '<span class=\"k-icon k-i-sort-desc-sm\"></span>' +\n                \"<span class=\\\"k-menu-link-text\\\">\" + (messages.sortDescending) + \"</span>\" +\n                '</span>' +\n                '</li>';\n\n                if (filterable) {\n                    result += '<li class=\"k-separator\"></li>';\n                }\n            }\n\n            return result;\n        };\n\n        var MENU_TEMPLATE_FILTERABLE_PARTIAL = function (messages, filterable) {\n            var result = '';\n\n            if (filterable) {\n                result += '<li class=\"k-item k-menu-item k-include-item\">' +\n                    '<span class=\"k-link k-menu-link\">' +\n                    '<span class=\"k-icon k-i-filter\"></span>' +\n                    \"<span class=\\\"k-menu-link-text\\\">\" + (messages.include) + \"</span>\" +\n                    '</span>' +\n                    '</li>' +\n                    '<li class=\"k-separator\"></li>' +\n                    '<li class=\"k-item k-menu-item ' + FILTER_ITEM + '\">' +\n                    '<span class=\"k-link k-menu-link\">' +\n                    '<span class=\"k-icon k-i-filter\"></span>' +\n                    \"<span class=\\\"k-menu-link-text\\\">\" + (messages.filterFields) + \"</span>\" +\n                    '</span>' +\n                    '<ul>' +\n                    '<li>' + LABELMENUTEMPLATE(messages) + '</li>' +\n                    '</ul>' +\n                    '</li>';\n            }\n\n            return result;\n        };\n\n        var MENUTEMPLATE = function (ref) {\n            var messages = ref.messages;\n            var filterable = ref.filterable;\n            var sortable = ref.sortable;\n\n            return '<ul class=\"k-pivot-fieldmenu\">' +\n                            MENU_TEMPLATE_SORTABLE_PARTIAL(messages, sortable, filterable) +\n                            MENU_TEMPLATE_FILTERABLE_PARTIAL(messages, filterable) +\n                        '</ul>';\n        };\n\n        var WINDOWTEMPLATE = function (ref) {\n            var messages = ref.messages;\n\n            return '<div class=\"k-popup-edit-form k-pivot-filter-window\"><div class=\"k-edit-form-container\">' +\n                                '<div class=\"k-treeview\"></div>' +\n                                '<div class=\"k-edit-buttons\">' +\n                                    '<a class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-primary k-button-ok\" href=\"#\">' +\n                                        '<span class=\"k-button-text\">' +\n                                            \"\" + (messages.ok) +\n                                        '</span>' +\n                                    '</a>' +\n                                    '<a class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-button-cancel\" href=\"#\">' +\n                                        '<span class=\"k-button-text\">' +\n                                            \"\" + (messages.cancel) +\n                                        '</span>' +\n                                    '</a>' +\n                            '</div></div>';\n        };\n\n        ui.plugin(PivotFieldMenu);\n        ui.plugin(PivotFieldMenuV2);\n\n    })(window.kendo.jQuery);\n\n}));\n"]}