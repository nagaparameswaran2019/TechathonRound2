/**
 * Kendo UI v2023.1.117 (http://www.telerik.com/kendo-ui)
 * Copyright 2023 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.
 *
 * Kendo UI commercial licenses may be obtained at
 * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete
 * If you do not own a commercial license, this file shall be governed by the trial license terms.
 */
!function(t){"function"==typeof define&&define.amd?define(["kendo.scheduler.view.min"],t):t()}((function(){!function(t,e){var n=window.kendo,i=n.ui,r=n.date.setTime,o=i.SchedulerView,a=n._outerWidth,s=n._outerHeight,l=t.extend,u=n.htmlEncode,d=n.date.getDate,c=n.date.getMilliseconds,h=n.date.MS_PER_DAY,f=n.date.MS_PER_MINUTE,v="k-event-inverse",p=.8666,_=".kendoTimelineView",g=n.template((function(t){var e=t.title,i=t.start,r=t.end;return'<div><div class="k-event-template k-event-time">'+u(n.format("{0:t} - {1:t}",i,r))+'</div><div class="k-event-template">'+e+"</div></div>"})),m=n.template((function(t){var e=t.date;return"<span class='k-link k-nav-day'>"+n.format("{0:m}",e)+"</span>"})),w=function(t){return'<div role="button" aria-label="'+u(t.ariaLabel)+'" data-'+t.ns+'uid="'+t.uid+'" '+(t.resources[0]?'style="background-color:'+t.resources[0].color+"; border-color: "+t.resources[0].color+'" class="k-event">':'class="k-event">')+'<span class="k-event-actions">'+(t.tail?'<span class="k-icon k-i-arrow-60-left"></span>':"")+(t.isException()?'<span class="k-icon k-i-non-recurrence"></span>':t.isRecurring()?'<span class="k-icon k-i-reload"></span>':"")+"</span>"+n.template(t.template)(t)+'<span class="k-event-actions">'+(t.showDelete?'<a href="#" class="k-link k-event-delete" title="'+t.messages.destroy+'" aria-label="'+t.messages.destroy+'"><span class="k-icon k-i-close"></span></a>':"")+(t.head?'<span class="k-icon k-i-arrow-60-right"></span>':"")+"</span>"+(t.resizable&&!t.tail?'<span class="k-resize-handle k-resize-w"></span>':"")+(t.resizable&&!t.head?'<span class="k-resize-handle k-resize-e"></span>':"")+"</div>"};function k(t){var e=new Date(1980,1,1,0,0,0);return r(e,c(t)),e}function T(t){var e=0;if(t.columns){for(var n=0;n<t.columns.length;n++)e+=T(t.columns[n]);return t.colspan=e,e}return t.colspan=1,1}var D=n.Class.extend({init:function(t){this._view=t},_getTimeSlotByPosition:function(t,e,n){return this._view.groups[n].timeSlotByPosition(t,e)},_hideHeaders:function(){var t=this._view;t.timesHeader.find("table tr").last().hide(),t.datesHeader.find("table tr").last().hide()},_setColspan:function(t){T(t)},_createRowsLayout:function(t,e,n){return this._view._createRowsLayout(t,e,n)},_createVerticalColumnsLayout:function(t,e,n,i){return i},_createColumnsLayout:function(t,e,n){return this._view._createColumnsLayout(t,e,n)},_getRowCount:function(){return this._view._groupCount()},_getGroupsCount:function(){return 1},_addContent:function(t,e,i,r,o,a,s,l){for(var u=this._view,d="",c=u.options,h=function(e){var i,r,o="",a="";return n.date.isToday(t[p])&&(a+="k-today"),(n.date.getMilliseconds(e)<n.date.getMilliseconds(c.workDayStart)||n.date.getMilliseconds(e)>=n.date.getMilliseconds(c.workDayEnd)||!u._isWorkDay(t[p]))&&(a+=" k-nonwork-hour"),o+="<td"+(""!==a?' class="'+a+'"':"")+">",i=n.date.getDate(t[p]),n.date.setTime(i,n.date.getMilliseconds(e)),o+=s({date:i,resources:(r=l?f:v,function(){return u._resourceBySlot({groupIndex:r})})}),o+="</td>"},f=0;f<r;f++){d+="<tr>";for(var v=0;v<i;v++)for(var p=0,_=e;p<_;p++)d+=u._forTimeRange(o,a,h);d+="</tr>"}return d},_addTimeSlotsCollections:function(t,e,n,i,r){var o=this._view,a=n.length;r&&(a=Math.floor(a/t));for(var s=0;s<t;s++){var l,u=0,d=o.groups[s];r&&(u=s);var h=0;r||(h=s);for(var f=n[u*a].children,v=f.length/(r?1:t),p=v/e,_=0;_<e;_++){var g=_*p+v*h;l=c(new Date(+o.startTime()));for(var m=0;m<p;m++)o._addTimeSlotToCollection(d,f,m,g,_,l,i),l+=i}}},_getVerticalGroupCount:function(t){return t},_getVerticalRowCount:function(t,e,n){return this._view._isVerticallyGrouped()?t[e].maxRowCount:n},_renderEvent:function(t,e,n,i,r,o){var a,s=this._view;(a=s._createEventElement(n.occurrence,e,r.head||n.head,r.tail||n.tail)).appendTo(o).css({top:0,height:s.options.eventHeight});var l={start:n.occurrence._startTime||n.occurrence.start,end:n.occurrence._endTime||n.occurrence.end,element:a,uid:e.uid,slotRange:r,rowIndex:0,offsetTop:0};t.events[e.uid]=l,s._inverseEventColor(a),s.addContinuousEvent(i,r,a,e.isAllDay),s._arrangeRows(l,r,t)},_verticalCountForLevel:function(t){return this._view._rowCountForLevel(t)},_horizontalCountForLevel:function(t){return this._view._columnCountForLevel(t)},_updateCurrentVerticalTimeMarker:function(e,n){var i=this._view,r="<div class='k-current-time'></div>",o=i.datesHeader.find(".k-scheduler-header-wrap"),s=Math.round(e[0].innerRect(n,new Date(n.getTime()+1),!1).left),l=t(r).prependTo(o).addClass("k-current-time-arrow-down");l.css({left:i._adjustLeftPosition(s-a(l)*p/2),top:o.find("tr").last().prev().position().top}),t(r).prependTo(i.content).css({left:i._adjustLeftPosition(s),width:"1px",height:i.content[0].scrollHeight-1,top:0})},_changeGroup:function(){return e},_prevGroupSlot:function(t,e,n){return this._view._isVerticallyGrouped()?t:e._collection(0,n).last()},_nextGroupSlot:function(t,e,n){return this._view._isVerticallyGrouped()?t:e._collection(0,n).first()},_verticalSlots:function(t,e){return this._view._changeGroup(t,e)},_verticalMethod:function(t){return t?"leftSlot":"rightSlot"},_normalizeVerticalSelection:function(){return e},_horizontalSlots:function(t,e,n,i,r,o,a){var s=this._view,l={};return l.startSlot=e[n](i),l.endSlot=e[n](r),o||!s._isHorizontallyGrouped()||l.startSlot&&l.endSlot||(l.startSlot=l.endSlot=s._changeGroup(t,a)),l},_changeVerticalViewPeriod:function(){return!1},_changeHorizontalViewPeriod:function(t,e,n,i){var r=this._view;return!(t.startSlot&&t.endSlot||e||!r._changeViewPeriod(n,i,!1))},_updateDirection:function(t,e,n,i){this._view._updateDirection(t,e,n,i,!0)},_createMoveHint:function(t,e){var n=this._view,i=t.start,r=n._createEventElement(e.occurrence,e.occurrence,!1,!1);r.addClass("k-event-drag-hint");var o=t.innerRect(e.occurrence.start,e.occurrence.end,n.options.snap),a=o.right-o.left;a<0&&(a=0);var s={left:n._adjustLeftPosition(o.left),top:i.offsetTop,height:i.offsetHeight,width:a};r.css(s),e.occurrence.inverseColor&&r.addClass(v),n._appendMoveHint(r)},_adjustLeftPosition:function(t){var e=this._view;return e._isRtl&&(t-=e.content[0].scrollWidth-e.content[0].clientWidth),t}}),y=n.Class.extend({init:function(t){this._view=t},_getTimeSlotByPosition:function(t,e,n){return this._view.groups[n].timeSlotByPosition(t,e,!0)},_hideHeaders:function(){var t=this._view;t._isVerticallyGrouped()?t.times.find(".k-last").hide():(t.timesHeader.find("table tr").eq(2).hide(),t.datesHeader.find("table tr").eq(2).hide())},_setColspan:function(){},_createRowsLayout:function(t,e,n,i){return this._view._createDateLayout(i,null,!0)},_createVerticalColumnsLayout:function(t,e,n){return this._view._createColumnsLayout(t,null,n)},_createColumnsLayout:function(t,e,n,i){return this._view._createColumnsLayout(t,e,n,i,!0)},_getRowCount:function(t){return this._view._rowCountForLevel(t)},_getGroupsCount:function(){return this._view._groupCount()},_addContent:function(t,e,i,o,a,s,l,u){for(var d,c=this._view,h="",v=c.options,p=function(e,i,r,o,a,s){var u,h,f="",p="",_=c._isVerticallyGrouped()?d:k;return n.date.isToday(t[k])&&(p+="k-today"),(n.date.getMilliseconds(e)<n.date.getMilliseconds(v.workDayStart)||n.date.getMilliseconds(e)>=n.date.getMilliseconds(v.workDayEnd)||!c._isWorkDay(t[_]))&&(p+=" k-nonwork-hour"),f+="<td"+(""!==p?' class="'+p+'"':"")+">",u=n.date.getDate(t[k]),n.date.setTime(u,n.date.getMilliseconds(e)),f+=l({date:u,resources:(h=s,function(){return c._resourceBySlot({groupIndex:h})})}),f+="</td>"},_=new Date(a),g=c.options.minorTickCount,m=c.options.majorTick*f/g||1,w=0;w<o;w++){h+="<tr>",w%(o/c._dates.length)==0&&(d=w/(o/c._dates.length),_=new Date(c._dates[d]),n.date.setTime(_,n.date.getMilliseconds(a)));for(var k=0,T=e;k<T;k++)if(h+=c._forTimeRange(_,s,p,u,i),u){r(_,m,!1);break}h+="</tr>"}return h},_addTimeSlotsCollections:function(t,e,n,i,r){var o=this._view,a=n.length;r&&(a/=e);for(var s=0;s<e;s++){var l,u=0;r&&(u=s);var d,h=n[u*a].children,f=r?a:h.length/(e*t),v=h.length/e;l=c(new Date(+o.startTime()));for(var p=0;p<f;p++){r?(d=0,h=n[p+f*s].children):(d=s*v+t*p);for(var _=0;_<t;_++){var g=o.groups[_];o._addTimeSlotToCollection(g,h,_,d,s,l,i)}l+=i}}},_getVerticalGroupCount:function(){return this._view.content.find("tr").length},_getVerticalRowCount:function(t,e,n){return n},_renderEvent:function(t,e,n,i,r,o,a,s){for(var l,u=this._view,d=[],c=r.start.index;c<=r.end.index;c++){(l=u._createEventElement(n.occurrence,e,c!==s,c!==a)).appendTo(o).css({top:0,height:u.options.eventHeight});var h=i._timeSlotCollections[0]._slots[c],f=i.timeSlotRanges(h.start,h.end,!1)[0],v={start:c===a?n.occurrence._startTime||n.occurrence.start:h.start,end:c===s?n.occurrence._endTime||n.occurrence.end:h.end,element:l,uid:e.uid,slotRange:f,rowIndex:0,offsetTop:0};t.events[e.uid]=v,d.push(v),u.addContinuousEvent(i,f,l,e.isAllDay),u._arrangeRows(v,f,t)}t.events[e.uid]=d},_verticalCountForLevel:function(t){return this._view._columnCountForLevel(t)},_horizontalCountForLevel:function(t,e){var n=this._view;return n._columnCountForLevel(e)/n._columnCountForLevel(2)},_updateCurrentVerticalTimeMarker:function(e,n){var i=this._view,r=i.times.find("tr").first().find("th").first(),o=i.times.find("tr").first().find("th").last(),l="<div class='k-current-time'></div>",u=t(l).prependTo(i.times),d=Math.round(e[0].innerRect(n,new Date(n.getTime()+1),!1).top),c={};this._isRtl?(c.right=r.position().left+s(r)-s(o),u.addClass("k-current-time-arrow-left")):(c.left=o.position().left,u.addClass("k-current-time-arrow-right")),c.top=d-a(u)*p/2,u.css(c),t(l).prependTo(i.content).css({top:d,height:"1px",right:"1px",width:i.content[0].scrollWidth,left:0})},_changeGroup:function(t,e,n){var i=this._view;n||(t.groupIndex=e?i.groups.length-1:0)},_prevGroupSlot:function(t){return t},_nextGroupSlot:function(t){return t},_changeDate:function(t,e,n){var i,r,o=this._view.groups[t.groupIndex];if(e){if(i=o._getCollections(!1),(r=n.index-1)>=0)return i[0]._slots[r]}else if(i=o._getCollections(!1),r=n.index+1,i[0]&&i[0]._slots[r])return i[0]._slots[r]},_verticalSlots:function(t,e,n){return this._changeDate(t,e,n)},_verticalMethod:function(t,e){return e?t?"upSlot":"downSlot":t?"leftSlot":"rightSlot"},_normalizeVerticalSelection:function(t,n,i,r){var o=this._view;return r?e:o._normalizeVerticalSelection(t,n,i)},_horizontalSlots:function(t,e,n,i,r,o,a){var s=this._view,l=s._changeGroup(t,a),u={};return l?u.startSlot=u.endSlot=l:s._isVerticallyGrouped()||(u.startSlot=e[n](i),u.endSlot=e[n](r)),u},_changeVerticalViewPeriod:function(t,e,n,i){var r=this._view;return!(t.startSlot&&t.endSlot||e||!r._changeViewPeriod(n,i,r._isVerticallyGrouped()))},_changeHorizontalViewPeriod:function(t,e,n,i){var r=this._view;return!r._isVerticallyGrouped()&&!(t.startSlot&&t.endSlot||e||!r._changeViewPeriod(n,i,!1))},_updateDirection:function(t,e,n,i){var r=this._view;r._updateDirection(t,e,n,i,!r._isVerticallyGrouped())},_createMoveHint:function(t,e){for(var n=this._view,i=t.start,r=t.end,o=i.index;o<=r.index;o++){var a=t.collection._slots[o],s=n._createEventElement(e.occurrence,e.occurrence,!1,!1);s.addClass("k-event-drag-hint");var l={left:a.offsetLeft+2,top:a.offsetTop,height:n.options.eventHeight,width:a.offsetWidth};s.css(l),e.occurrence.inverseColor&&s.addClass(v),n._appendMoveHint(s)}},_adjustLeftPosition:function(t){var e=this._view;return e._isRtl&&!e._isVerticallyGrouped()&&(t-=e.content[0].scrollWidth-e.content[0].offsetWidth),t}});n.ui.scheduler.TimelineGroupedView=D,n.ui.scheduler.TimelineGroupedByDateView=y;var S=o.extend({init:function(t,e){var n=this;o.fn.init.call(n,t,e),n._groupedView=n._getGroupedView(),n.title=n.options.title||n.options.name,n._workDays=function(t){if(t.workDays&&t.workDays.length)return t.workDays;var e=[],n=t.workWeekStart%7,i=Math.abs(t.workWeekEnd%7);for(e.push(n);i!=n;)n>6?n-=7:n++,e.push(n);return e}(n.options),n._templates(),n._editable(),n.calculateDateRange(),n._groups(),n._currentTime(!0)},name:"timeline",_isVirtualized:function(){return!1},_getGroupedView:function(){return this._isGroupedByDate()?new n.ui.scheduler.TimelineGroupedByDateView(this):new n.ui.scheduler.TimelineGroupedView(this)},_getNextEventIndexBySlot:function(t,e,i){if(this._isVerticallyGrouped())return n.ui.SchedulerView.fn._getNextEventIndexBySlot.call(this,t,e,i);for(var r=0,o=0;o<e.length;o++)if(t.startDate()>e[o].start.startDate())r++;else{if(!(t.startDate().getTime()===e[o].start.startDate().getTime()&&i>e[o].start.groupIndex))break;r++}return r},_getSelectedSlot:function(t,e,i,r,o,a){return this._isVerticallyGrouped()?n.ui.SchedulerView.fn._getSelectedSlot.call(this,t,e,i,r,o,a):t},_getSortedEvents:function(e){return this._isVerticallyGrouped()?n.ui.SchedulerView.fn._getSortedEvents.call(this,e):e.sort((function(e,n){var i=e.start.startDate().getTime()-n.start.startDate().getTime();return 0===i&&(e.start.isDaySlot&&!n.start.isDaySlot&&(i=-1),!e.start.isDaySlot&&n.start.isDaySlot&&(i=1)),0===i&&(i=e.start.groupIndex-n.start.groupIndex),0===i&&(i=t(e.element).index()-t(n.element).index()),i}))},_currentTimeMarkerUpdater:function(){this._updateCurrentTimeMarker(new Date)},_scrollTo:function(t,e){o.fn._scrollTo.call(this,t,e);var n=t.offsetLeft,i=t.offsetWidth,r=e.scrollLeft,a=e.clientWidth,s=n+i,l=0;l=r>n?n:s>r+a?i<=a?s-a:n:r,e.scrollLeft=l},_updateCurrentTimeMarker:function(e){var i=this.options;if(this.datesHeader.find(".k-current-time").remove(),this.times.find(".k-current-time").remove(),this.content.find(".k-current-time").remove(),this._isInDateSlot({start:e,end:e})){if(!1===i.currentTimeMarker.useLocalTimezone){var r=i.dataSource.options.schema.timezone;if(i.dataSource&&r){var o=n.timezone.offset(e,r);e=n.timezone.convert(e,e.getTimezoneOffset(),o)}}for(var s=i.group&&"vertical"!=i.group.orientation?this.groups.length:1,l=0;l<s;l++){var u=this.groups[l];if(!u)return;var d=n.date.toUtcTime(e),c=u.timeSlotRanges(d,d+1);if(0===c.length)return;if(c[0].collection.slotByStartDate(e))if(this._isVerticallyGrouped())this._groupedView._updateCurrentVerticalTimeMarker(c,e);else{var h="<div class='k-current-time'></div>",f=this.datesHeader.find(".k-scheduler-header-wrap"),v=Math.round(c[0].innerRect(e,new Date(e.getTime()+1),!1).left),_=t(h).prependTo(f).addClass("k-current-time-arrow-down");_.css({left:this._adjustLeftPosition(v-a(_)*p/2),top:f.find("tr").last().prev().position().top}),t(h).prependTo(this.content).css({left:this._adjustLeftPosition(v),width:"1px",height:this.content[0].scrollHeight-1,top:0})}}}},_adjustLeftPosition:function(t){return this._groupedView._adjustLeftPosition(t)},_currentTime:function(t){var n=this,i=n.options.currentTimeMarker;!1!==i&&i.updateInterval!==e&&(n._currentTimeMarkerUpdater(),t&&(n._currentTimeUpdateTimer=setInterval(this._currentTimeMarkerUpdater.bind(n),i.updateInterval)))},_editable:function(){this.options.editable&&(this._isMobile()?this._touchEditable():this._mouseEditable())},_mouseEditable:function(){var e=this;e.element.on("click"+_,".k-event a:has(.k-i-close)",(function(i){e.trigger("remove",{uid:t(this).closest(".k-event").attr(n.attr("uid"))}),i.preventDefault()})),!1!==e.options.editable.create&&e.element.on("dblclick"+_,".k-scheduler-content td",(function(t){var n=e._slotByPosition(t.pageX,t.pageY);if(n){var i=e._resourceBySlot(n);e.trigger("add",{eventInfo:l({start:n.startDate(),end:n.endDate()},i)})}t.preventDefault()})),!1!==e.options.editable.update&&e.element.on("dblclick"+_,".k-event",(function(i){e.trigger("edit",{uid:t(this).closest(".k-event").attr(n.attr("uid"))}),i.preventDefault()}))},_touchEditable:function(){var i=this,r=0;n.support.mobileOS.android&&(r=5),!1!==i.options.editable.create&&(i._addUserEvents=new n.UserEvents(i.element,{threshold:r,useClickAsTap:!n.support.browser.edge,filter:".k-scheduler-content td",tap:function(t){if(!i._scrolling){var n=t.x.location!==e?t.x.location:t.x,r=t.y.location!==e?t.y.location:t.y,o=i._slotByPosition(n,r);if(o){var a=i._resourceBySlot(o);i.trigger("add",{eventInfo:l({start:o.startDate(),end:o.endDate()},a)})}t.preventDefault()}}})),!1!==i.options.editable.update&&(i._editUserEvents=new n.UserEvents(i.element,{threshold:r,useClickAsTap:!n.support.browser.edge,filter:".k-event",tap:function(e){if(!i._scrolling){var r=t(e.target).closest(".k-event");t(e.touch.initialTouch).hasClass("k-i-close")?i.trigger("remove",{uid:r.attr(n.attr("uid"))}):r.hasClass("k-event-active")||i.trigger("edit",{uid:r.attr(n.attr("uid"))}),e.preventDefault()}}}))},_slotByPosition:function(t,e){var i,r,o=this.content,a=o.offset();if(t-=a.left,e-=a.top,this._isRtl){var s=n.support.browser;s.mozilla||s.webkit&&s.version>=85?(t+=o[0].scrollWidth-o[0].offsetWidth,t+=o[0].scrollLeft):s.msie?(t-=n.scrollLeft(o),t+=o[0].scrollWidth-o[0].offsetWidth):s.webkit&&(t+=o[0].scrollLeft)}else t+=o[0].scrollLeft;for(e+=o[0].scrollTop,t=Math.ceil(t),e=Math.ceil(e),r=0;r<this.groups.length;r++)if(i=this._groupedView._getTimeSlotByPosition(t,e,r))return i;return null},options:{name:"TimelineView",title:"Timeline",selectedDateFormat:"{0:D}",selectedShortDateFormat:"{0:d}",selectedMobileDateFormat:"{0:MMM dd}",date:n.date.today(),startTime:n.date.today(),endTime:n.date.today(),showWorkHours:!1,minorTickCount:2,editable:!0,workDayStart:new Date(1980,1,1,8,0,0),workDayEnd:new Date(1980,1,1,17,0,0),workWeekStart:1,workWeekEnd:5,majorTick:60,eventHeight:25,eventMinWidth:0,columnWidth:100,groupHeaderTemplate:function(t){return t.text},majorTimeHeaderTemplate:function(t){var e=t.date;return n.toString(e,"t")},slotTemplate:function(){return"&nbsp;"},eventTemplate:g,dateHeaderTemplate:m,footer:{command:"workDay"},currentTimeMarker:{updateInterval:1e4,useLocalTimezone:!0},messages:{defaultRowText:"All events",showFullDay:"Show full day",showWorkDay:"Show business hours"}},events:["remove","add","edit"],_templates:function(){var t=this.options,e=l({},n.Template,t.templateSettings);this.eventTemplate=n.template(w),this.majorTimeHeaderTemplate=n.template(t.majorTimeHeaderTemplate,e),this.dateHeaderTemplate=n.template(t.dateHeaderTemplate,e),this.slotTemplate=n.template(t.slotTemplate,e),this.groupHeaderTemplate=n.template(t.groupHeaderTemplate,e)},_render:function(e){var n=this;e=e||[],n._dates=e,n._startDate=e[0],n._endDate=e[e.length-1||0],n._calculateSlotRanges(),n.createLayout(n._layout(e)),n._content(e),n._footer(),n._setContentWidth(),n.refreshLayout(),n.datesHeader.on("click"+_,".k-nav-day",(function(e){var i=t(e.currentTarget).closest("th"),r=n._slotByPosition(i.offset().left,n.content.offset().top);n.trigger("navigate",{view:"timeline",date:r.startDate()})})),n._groupedView._hideHeaders()},_setContentWidth:function(){var t=this.content.width(),e=this.content.find("table"),n=100,i=e.find("tr").first().children().length*this.options.columnWidth;t<i&&(n=Math.ceil(i/t*100)),e.add(this.datesHeader.find("table")).css("width",n+"%")},_calculateSlotRanges:function(){var t=this._dates,e=this.startTime(),i=this.endTime();(i=c(i))===(e=c(e))?i+=h-1:i<e&&(i+=h);for(var o=[],a=0;a<t.length;a++){var s=d(t[a]);r(s,e);var l=d(t[a]);r(l,i),o.push({start:n.date.toUtcTime(s),end:n.date.toUtcTime(l)})}this._slotRanges=o},_forTimeRange:function(t,e,n,i,o){t=k(t),e=k(e);var a,s=c(t),l=c(e),u=this.options.minorTickCount,d=this.options.majorTick*f,v=d/u||1,p=new Date(+t),_=0,g="";for(a=h/v,s!=l&&(s>l&&(l+=h),a=(l-s)/v),a=i?1:Math.round(a),o&&(a*=o);_<a;_++){var m=_%(d/v),w=0===m,T=u;if(a%u!=0)w&&a-(_+1)<u&&(T=a%u);g+=n(p,w,m<u-1,m===u-1,T,_%o),i||(o?_%o==o-1&&r(p,v,!1):r(p,v,!1))}return g},_layout:function(t){for(var e=[],n=[],i=this,r=[{text:i.options.messages.defaultRowText}],o=i._groupedView,a=[],s=0;s<i.options.minorTickCount;s++)a.push({text:"&#8203;",className:"k-last",minorTicks:!0});this._forTimeRange(i.startTime(),i.endTime(),(function(t,n,r,s,l){var u=i.majorTimeHeaderTemplate;if(n){var d={text:u({date:t}),className:s?"k-slot-cell":"",columns:a.slice(0,l)};o._setColspan(d),e.push(d)}}));for(var l=0;l<t.length;l++)n.push({text:i.dateHeaderTemplate({date:t[l]}),className:"k-slot-cell",columns:e.slice(0)});var u=this.groupedResources;return u.length&&("vertical"===this._groupOrientation()?(r=o._createRowsLayout(u,null,this.groupHeaderTemplate,n),n=o._createVerticalColumnsLayout(u,null,this.groupHeaderTemplate,n)):n=o._createColumnsLayout(u,n,this.groupHeaderTemplate,n)),{columns:n,rows:r}},_footer:function(){var e=this.options;if(!1!==e.footer){var i='<div class="k-scheduler-footer k-toolbar" role="toolbar">',r=e.footer.command;this._isMobile()&&(i+='<span class="k-scheduler-today"><a tabindex="-1" href="#" class="k-link">',i+=e.messages.today+"</a></span>"),r&&"workDay"===r&&(this._isMobile()?(i+='<span class="k-scheduler-fullday"><a tabindex="-1" href="#" class="k-link">',i+=(e.showWorkHours?e.messages.showFullDay:e.messages.showWorkDay)+"</a></span>"):(i+='<button tabindex="-1" type="button" class="k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-scheduler-fullday">',i+='<span class="k-button-icon k-icon k-i-clock"></span>',i+='<span class="k-button-text">',i+=e.showWorkHours?e.messages.showFullDay:e.messages.showWorkDay,i+="</span>",i+="</button>")),i+="</div>",this.footer=t(i).appendTo(this.element);var o=this;this.footer.on("click"+_,".k-scheduler-fullday",(function(t){t.preventDefault(),o.toggleFullDay()})),this.footer.on("click"+_,".k-scheduler-today",(function(t){t.preventDefault();var i,r=o.options.timezone,a=new Date;if(r){var s=n.timezone.offset(a,r);i=n.timezone.convert(a,a.getTimezoneOffset(),s)}else i=a;o.trigger("navigate",{view:o.name||e.name,action:"today",date:i})}))}},toggleFullDay:function(){var t=this.options;this.trigger("navigate",{view:this.name||t.name,date:t.date,isWorkDay:!t.showWorkHours})},_columnCountForLevel:function(t){var e=this.columnLevels[t];return e?e.length:0},_rowCountForLevel:function(t){var e=this.rowLevels[t];return e?e.length:0},_isWorkDay:function(t){for(var e=t.getDay(),n=this._workDays,i=0;i<n.length;i++)if(n[i]===e)return!0;return!1},_content:function(t){var e=this,n=e.startTime(),i=this.endTime(),r=1,o=1,a=t.length,s="",l=this.groupedResources,u=this.slotTemplate,d=!1;l.length&&((d="vertical"===e._groupOrientation())?(o=e._groupedView._getRowCount(this.rowLevels.length-1),r=e._groupedView._getGroupsCount()):r=e._groupCount()),s+="<tbody>",s+=e._groupedView._addContent(t,a,r,o,n,i,u,d),s+="</tbody>",this.content.find("table").append(s)},_groups:function(){var t=this._groupCount(),e=this._dates,i=e.length;this.groups=[];for(var o=0;o<t;o++){var a=this._addResourceView(o),s=e[0],l=e[e.length-1||0],u=c(this.startTime()),h=c(this.endTime());0!==u&&h<=u&&(s=d(s),r(s,u),l=d(l),r(l,h)),a.addTimeSlotCollection(s,n.date.addDays(l,1))}this._timeSlotGroups(t,i)},_isHorizontallyGrouped:function(){return this.groupedResources.length&&"horizontal"===this._groupOrientation()},_timeSlotGroups:function(t,e){var n=this._timeSlotInterval(),i=this._isVerticallyGrouped(),r=this.content.find("tr");this._groupedView._addTimeSlotsCollections(t,e,r,n,i)},_addTimeSlotToCollection:function(t,e,n,i,r,o,a){var s=e[n+i],l=t.getTimeSlotCollection(0),u=this._dates[r],d=Date.UTC(u.getFullYear(),u.getMonth(),u.getDate())+o,c=d+a;l.addTimeSlot(s,d,c,!0)},startDate:function(){return this._startDate},endDate:function(){return this._endDate},visibleEndDate:function(){var t=c(this.startTime()),e=c(this.endTime()),i=this.endDate();return 0!==t&&e<=t&&(i=n.date.addDays(i,1)),i},startTime:function(){var t=this.options;return t.showWorkHours?t.workDayStart:t.startTime},endTime:function(){var t=this.options;return t.showWorkHours?t.workDayEnd:t.endTime},_timeSlotInterval:function(){var t=this.options;return t.majorTick/t.minorTickCount*f},nextDate:function(){return n.date.nextDay(this.endDate())},previousDate:function(){return n.date.previousDay(this.startDate())},calculateDateRange:function(){this._render([this.options.date])},render:function(t){this._headerColumnCount=0,this._groups(),this.element.find(".k-event").remove(),t=new n.data.Query(t).sort([{field:"start",dir:"asc"},{field:"end",dir:"desc"}]).toArray();var e=[];this._eventsByResource(t,this.groupedResources,e);for(var i=[],r=0,o=0;o<e.length;o++){var a={groupIndex:o,maxRowCount:0,events:{}};i.push(a),this._renderEvents(e[o],o,a),r<a.maxRowCount&&(r=a.maxRowCount)}this._setRowsHeight(i,e.length,r),this._positionEvents(i,e.length),this._currentTime(!1),this.trigger("activate")},_positionEvents:function(t,e){for(var n=0;n<e;n++){var i=t[n].events;for(var r in i){var o=i[r];if(Array.isArray(o))for(var a=0;a<o.length;a++)this._positionEvent(o[a]);else this._positionEvent(o)}}},_setRowsHeight:function(e,n,i){var r=this.options.eventHeight,o=this._getBottomRowOffset(),a=this._groupedView,s=a._getVerticalGroupCount(n);n=this._isVerticallyGrouped()?s:1;for(var l=0;l<n;l++){var u=a._getVerticalRowCount(e,l,i),d=(r+2)*(u=u||1)+o,c=t(this.times.find("tr")[l]),h=t(this.content.find("tr")[l]);c.height(d),h.height(d)}this._setContentWidth(),this.refreshLayout(),this._refreshSlots()},_getBottomRowOffset:function(){var t,e,n=.5*this.options.eventHeight;return this._isMobile()?(t=30,e=60):(t=15,e=30),n>e?n=e:n<t&&(n=t),n},_positionEvent:function(t){var e=this.options.eventHeight,n=t.slotRange.innerRect(t.start,t.end,!1),i=this._adjustLeftPosition(n.left),r=n.right-n.left;if(r<0&&(r=0),r<this.options.eventMinWidth){var o=t.slotRange.collection,a=o._slots[o._slots.length-1],s=a.offsetLeft+a.offsetWidth;s<i+(r=this.options.eventMinWidth)&&(r=s-n.left)}t.element.css({top:t.slotRange.start.offsetTop+t.rowIndex*(e+2)+"px",left:i,width:r})},_refreshSlots:function(){for(var t=0;t<this.groups.length;t++)this.groups[t].refresh()},_eventsByResource:function(t,i,r,a){var s=i[0];if(s){var l=s.dataSource.view();l=l.filter((function(t){var i=n.getter(s.dataParentValueField)(t);return null===i||i===e||i===a}));for(var u=0;u<l.length;u++){var d=this._resourceValue(s,l[u]),c=new n.data.Query(t).filter({field:s.field,operator:o.groupEqFilter(d)}).toArray();i.length>1?this._eventsByResource(c,i.slice(1),r,d):r.push(c)}}else r.push(t)},_isInDateSlot:function(t){var e=t.start,i=t.end,r=d(this._startDate);return e<n.date.addDays(d(this.visibleEndDate()),1)&&r<=i},_isInTimeSlot:function(t){var e=t._startTime||n.date.toUtcTime(t.start),i=t._endTime||n.date.toUtcTime(t.end),r=this._slotRanges;e===i&&(i+=1);for(var o=0;o<r.length;o++)if(e<r[o].end&&r[o].start<i)return!0;return!1},_adjustEvent:function(t){var e=t.start,i=t.end,o=t._time("start"),a=t._time("end"),s=c(this.startTime()),l=c(this.endTime()),u=null,f=null,v=!1,p=!1;return t.isAllDay&&(e=d(e),o=0,i=d(i),a=h,f=n.date.addDays(i,1)),0===l&&(l=h),l<=s?(o<s&&o>=l&&(u=d(e),r(u,s),p=!0),a>l&&a<=s&&(f=d(i),r(f,l),v=!0)):(s>o?(u=d(e),r(u,s),p=!0):l<=o&&(u=d(e),u=n.date.addDays(u,1),r(u,s),p=!0),l<a?(f=d(i),r(f,l),v=!0):s>a&&(f=d(i),f=n.date.addDays(f,-1),r(f,l),v=!0)),{occurrence:t.clone({start:u||e,end:f||i,_startTime:u?n.date.toUtcTime(u):t._startTime,_endTime:f?n.date.toUtcTime(f):t._endTime,isAllDay:!1}),head:v,tail:p}},_renderEvents:function(t,e,n){var i,r,o;for(r=0,o=t.length;r<o;r++)if(i=t[r],this._isInDateSlot(i)){var a=i.isAllDay||i.duration()>=h,s=this.content;if(a||this._isInTimeSlot(i)){var l=this._adjustEvent(i),u=this.groups[e];if(u._continuousEvents||(u._continuousEvents=[]),this._isInTimeSlot(l.occurrence)){var d=u.slotRanges(l.occurrence,!1)[0],c=d.start.index,f=d.end.index;this._groupedView._renderEvent(n,i,l,u,d,s,c,f)}}}},addContinuousEvent:function(t,e,i,r){t._continuousEvents.push({element:i,isAllDay:r,uid:i.attr(n.attr("uid")),start:e.start,end:e.end})},_createEventElement:function(e,i,r,o){var a=this.eventTemplate,s=this.options.editable,u=this._isMobile(),d=s&&!1!==s.destroy&&!u,c=s&&!1!==s.resize,h=i._time("start"),f=i._time("end"),v=i.start,p=i.end,_=this.eventResources(i);i._startTime&&h!==n.date.getMilliseconds(i.start)&&(v=new Date(h),v=n.timezone.apply(v,"Etc/UTC")),i._endTime&&f!==n.date.getMilliseconds(i.end)&&(p=new Date(f),p=n.timezone.apply(p,"Etc/UTC"));var g=l({},{ns:n.ns,resizable:c,showDelete:d,head:r,tail:o,singleDay:1==this._dates.length,resources:_,inverseColor:!1,messages:this.options.messages,ariaLabel:this._formatEventAriaLabel(i.title,v,p,i.isAllDay),template:this.options.eventTemplate},i,{start:v,end:p}),m=t(a(g));return this.angular("compile",(function(){return{elements:m,data:[{dataItem:g}]}})),m},_arrangeRows:function(t,e,n){var i=e.start.index,r=e.end.index,a=t.slotRange.innerRect(t.start,t.end,!1),s=a.right+this.options.eventMinWidth,l=function(t,e,n){var i,r,o;for(i=t.length-1;i>=0;i--)r=t[i].rectLeft,o=t[i].rectRight,(r<=e&&o>=e||r>=e&&o<=n||e<=r&&n>=r)&&(r<e&&(e=r),o>n&&(n=o));return function(t,e,n){for(var i=[],r=0;r<t.length;r++){var o={rectLeft:t[r].rectLeft,rectRight:t[r].rectRight};(o.rectLeft<e&&o.rectRight>e||o.rectLeft>=e&&o.rectRight<=n)&&i.push(t[r])}return i}(t,e,n)}(e.events(),a.left,s);e.addEvent({slotIndex:i,start:i,end:r,rectLeft:a.left,rectRight:s,element:t.element,uid:t.uid}),l.push({start:i,end:r,uid:t.uid});var u=o.createRows(l);n.maxRowCount<u.length&&(n.maxRowCount=u.length);for(var d=0,c=u.length;d<c;d++)for(var h=u[d].events,f=0,v=h.length;f<v;f++)n.events[h[f].uid].rowIndex=d},_groupCount:function(){var t=this.groupedResources,e=this._groupedView;return t.length?"vertical"===this._groupOrientation()?e._verticalCountForLevel(t.length-1):e._horizontalCountForLevel(t.length-1,this.columnLevels.length-1):1},_updateEventForSelection:function(t){return this._adjustEvent(t.clone()).occurrence},_eventOptionsForMove:function(t){return t.isAllDay?{isAllDay:!1}:{}},_updateEventForResize:function(t){t.isAllDay&&t.set("isAllDay",!1)},_updateMoveHint:function(t,e,n){var i=this.groups[e],r=t.clone({start:t.start,end:t.end}),o=r.duration();if(r.start=new Date(r.start.getTime()+n),r.end=new Date(+r.start+o),this._removeMoveHint(t.uid),this._isInDateSlot(r)&&(r.isAllDay||r.duration()>=h||this._isInTimeSlot(r)))for(var a=this._adjustEvent(r),s=i.slotRanges(a.occurrence,!1),l=0;l<s.length;l++)this._groupedView._createMoveHint(s[l],a)},_appendMoveHint:function(t){t.appendTo(this.content),this._moveHint=this._moveHint.add(t)},_updateResizeHint:function(t,e,i,r){var a=this.groups[e].ranges(i,r,!1,!1);this._removeResizeHint();for(var s=0;s<a.length;s++){var l=a[s],u=l.startSlot(),d=l.innerRect(i,r,!1);d.top=u.offsetTop;var c=d.right-d.left;if(c<0)for(var h=0;h<l.events().length;h++)if(l.events()[h].uid===t.uid){c=l.events()[h].rectRight-d.left;break}var f=l.endSlot().offsetTop+u.offsetHeight-d.top,v=this._adjustLeftPosition(d.left),p=o.fn._createResizeHint.call(this,v,d.top,c,f);this._resizeHint=this._resizeHint.add(p)}var _=this.content;this._resizeHint.appendTo(_),this._resizeHint.find(".k-label-top,.k-label-bottom").text(""),this._resizeHint.first().addClass("k-first").find(".k-label-top").text(n.toString(n.timezone.toLocalDate(i),"t")),this._resizeHint.last().addClass("k-last").find(".k-label-bottom").text(n.toString(n.timezone.toLocalDate(r),"t"))},selectionByElement:function(t){var e=t.offset();return this._slotByPosition(e.left,e.top)},_updateDirection:function(t,e,n,i,r){var o=e[0].start,a=e[e.length-1].end;n&&!r&&o.index===a.index&&o.collectionIndex===a.collectionIndex&&(t.backward=i)},_changeGroup:function(t,e){var n=this[e?"prevGroupSlot":"nextGroupSlot"](t.start,t.groupIndex,!1);return n&&(t.groupIndex+=e?-1:1),this._groupedView._changeGroup(t,e,n),n},prevGroupSlot:function(t,e,n){var i=this.groups[e],r=i.ranges(t,t,n,!1)[0].start;if(!(e<=0))return this._groupedView._prevGroupSlot(r,i,n)},nextGroupSlot:function(t,e,n){var i=this.groups[e],r=i.ranges(t,t,n,!1)[0].start;if(!(e>=this.groups.length-1))return this._groupedView._nextGroupSlot(r,i,n)},_verticalSlots:function(t,e,n,i){var r=this._groupedView,o=r._verticalMethod(i,n),a=e[0].start,s=e[e.length-1].end,l=this.groups[t.groupIndex],u=r._normalizeVerticalSelection(t,e,i,n);return u&&(a=s=u),a=l[o](a),s=l[o](s),n||!this._isVerticallyGrouped()||a&&s||(a=s=r._verticalSlots(t,i,u)),{startSlot:a,endSlot:s}},_horizontalSlots:function(t,e,n,i){var r=i?"upSlot":"downSlot",o=e[0].start,a=e[e.length-1].end,s=this.groups[t.groupIndex],l={};return n?(l.startSlot=s[r](o),l.endSlot=s[r](a),n||!this._isHorizontallyGrouped()||o&&a||(l.startSlot=l.endSlot=this._changeGroup(t,i))):l=this._groupedView._horizontalSlots(t,s,r,o,a,n,i),l},_changeViewPeriod:function(t,e){var n,i,o=e?this.previousDate():this.nextDate(),a=t.start,s=t.end;if(n=new Date(o),i=new Date(o),this._isInRange(n,i))return!1;t.start=n,t.end=i,this._isHorizontallyGrouped()&&(t.groupIndex=e?this.groups.length-1:0);var l=s-a;return e?(s=0===(s=c(this.endTime()))?h:s,r(t.start,s-l),r(t.end,s)):(a=c(this.startTime()),r(t.start,a),r(t.end,a+l)),t.events=[],!0},move:function(t,e,i){var r,o,a,s,l=!1,u=this.groups[t.groupIndex],d=n.keys,c=this._groupedView,h=u.ranges(t.start,t.end,!1,!1);if(e===d.DOWN||e===d.UP){if(l=!0,a=e===d.UP,c._updateDirection(t,h,i,a),s=this._verticalSlots(t,h,i,a),c._changeVerticalViewPeriod(s,i,t,a))return l}else if((e===d.LEFT||e===d.RIGHT)&&(l=!0,a=e===d.LEFT,this._updateDirection(t,h,i,a,!1),s=this._horizontalSlots(t,h,i,a),c._changeHorizontalViewPeriod(s,i,t,a)))return l;if(l){if(r=s.startSlot,o=s.endSlot,i){var f=t.backward;f&&r?t.start=r.startDate():!f&&o&&(t.end=o.endDate())}else r&&o&&(t.start=r.startDate(),t.end=o.endDate());t.events=[]}return l},destroy:function(){var t=this;t.element&&t.element.off(_),t.footer&&t.footer.remove(),t._currentTimeUpdateTimer&&clearInterval(t._currentTimeUpdateTimer),o.fn.destroy.call(this),this._isMobile()&&t.options.editable&&(!1!==t.options.editable.create&&t._addUserEvents.destroy(),!1!==t.options.editable.update&&t._editUserEvents.destroy())},_resourceBySlot:function(t){var e=this.groupedResources,n={},i=this.options.group;if(e.length&&"horizontal"===i.orientation&&i.date){var r,a,s,l,u=t.groupIndex,d=this.columnLevels,c=d[d.length-1],h=e[e.length-1],f=c[u];for(this._setResourceValue(f,h,n),s=d.length-2;s>=3;s--)for(c=d[s],h=e[s-3],r=0,l=0;l<c.length;l++)(a=(f=c[l]).columns.length)>u-r?(this._setResourceValue(f,h,n),l=c.length):r+=a;return n}return o.fn._resourceBySlot.call(this,t)}});l(!0,i,{TimelineView:S,TimelineWeekView:S.extend({options:{name:"TimelineWeekView",title:"Timeline Week",selectedDateFormat:"{0:D} - {1:D}",selectedShortDateFormat:"{0:d} - {1:d}",selectedMobileDateFormat:"{0:MMM dd} - {1:dd}",majorTick:120},name:"timelineWeek",calculateDateRange:function(){var t,e=this.options.date,i=n.date.dayOfWeek(e,this.calendarInfo().firstDay,-1),r=[];for(t=0,7;t<7;t++)r.push(i),i=n.date.nextDay(i);this._render(r)}}),TimelineWorkWeekView:S.extend({options:{name:"TimelineWorkWeekView",title:"Timeline Work Week",selectedDateFormat:"{0:D} - {1:D}",selectedShortDateFormat:"{0:d} - {1:d}",selectedMobileDateFormat:"{0:MMM dd} - {1:dd}",majorTick:120},name:"timelineWorkWeek",nextDate:function(){var t=n.date.dayOfWeek(n.date.nextDay(this.endDate()),this.calendarInfo().firstDay,1);return n.date.addDays(t,this._workDays[0])},previousDate:function(){var t=n.date.dayOfWeek(this.startDate(),this.calendarInfo().firstDay,-1),e=this._workDays;return n.date.addDays(t,e[e.length-1]-7)},calculateDateRange:function(){var t=this.options,e=t.date,i=n.date.dayOfWeek,r=i(e,this.calendarInfo().firstDay,-1),o=i(r,t.workWeekStart,1),a=i(o,t.workWeekEnd,1),s=[],l=t.workDays&&t.workDays.length?t.workDays.map((function(t){return i(r,t,1).getTime()})):null;for(l&&(a=i(o=r,this.calendarInfo().firstDay+6,1));o<=a;)l&&l.indexOf(o.getTime())>-1?s.push(o):l||s.push(o),o=n.date.nextDay(o);this._render(s)}}),TimelineMonthView:S.extend({options:{name:"TimelineMonthView",title:"Timeline Month",selectedDateFormat:"{0:D} - {1:D}",selectedShortDateFormat:"{0:d} - {1:d}",workDayStart:new Date(1980,1,1,0,0,0),workDayEnd:new Date(1980,1,1,23,59,59),footer:!1,majorTick:1440,minorTickCount:1},name:"timelineMonth",calculateDateRange:function(){var t,e,i=this.options.date,r=n.date.firstDayOfMonth(i),o=[];for(t=0,e=n.date.lastDayOfMonth(i).getDate();t<e;t++)o.push(r),r=n.date.nextDay(r);this._render(o)}})})}(window.kendo.jQuery)}));
//# sourceMappingURL=kendo.scheduler.timelineview.min.js.map
